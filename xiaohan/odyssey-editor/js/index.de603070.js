(function(t){function e(e){for(var i,r,s=e[0],c=e[1],l=e[2],u=0,d=[];u<s.length;u++)r=s[u],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&d.push(a[r][0]),a[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);h&&h(e);while(d.length)d.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,r=1;r<n.length;r++){var s=n[r];0!==a[s]&&(i=!1)}i&&(o.splice(e--,1),t=c(c.s=n[0]))}return t}var i={},r={index:0},a={index:0},o=[];function s(t){return c.p+"js/"+({"arrow-element":"arrow-element","audio-element":"audio-element","brush-element":"brush-element","cell-element":"cell-element","chart-element":"chart-element","collage-element":"collage-element","editor-utils-export":"editor-utils-export","effect-text-element~three-font-parser":"effect-text-element~three-font-parser","effect-text-element":"effect-text-element","ellipse-element":"ellipse-element","filter-renderer":"filter-renderer","flex-element":"flex-element","line-element":"line-element","rect-element":"rect-element","table-element":"table-element","three-element":"three-element","video-element":"video-element","watermark-element":"watermark-element","chart-render":"chart-render","like-counter-operator-panel":"like-counter-operator-panel","three-font-parser":"three-font-parser",IllusionNornalServicer:"IllusionNornalServicer",IllusionWorkerServicer:"IllusionWorkerServicer","file-ms":"file-ms",scrambleDialog:"scrambleDialog"}[t]||t)+"."+{"arrow-element":"95dcdc4b","audio-element":"7c4a712d","brush-element":"57dc6e72","cell-element":"2005dbb2","chart-element":"0398e952","chunk-07de3333":"e1fce8c4","chunk-10969c2a":"18e66543","chunk-1120166d":"9b50ed32","chunk-1270e39a":"8eb54eac","chunk-263b13d7":"ba012a8f","chunk-2f4a72eb":"00103d3c","chunk-3cf6f475":"6964dc2f","chunk-48c1e67e":"697c041d","chunk-74b05d36":"cea0a283","chunk-765abe2c":"927bc288","chunk-2d0d3340":"f8f63ffb","chunk-7a0ee5e2":"42729914","chunk-7bfdecab":"2acf05c4","chunk-7e8e0eb4":"41a8ae54","chunk-c23fb882":"173be496","chunk-cb515602":"4b895d15","chunk-eb20344c":"08acd8dd","collage-element":"3b5bfaa9","editor-utils-export":"8c3ebb9e","effect-text-element~three-font-parser":"30330c49","effect-text-element":"711e6a20","ellipse-element":"a73524db","filter-renderer":"95da00ef","flex-element":"386fb2b4","line-element":"ecf31633","rect-element":"97faeaf4","table-element":"bcfeee85","three-element":"ed5a847d","video-element":"d5680a45","watermark-element":"328bd333","chart-render":"fcb512d5","chunk-28f1eb5c":"6f1b1f45","chunk-2d0d619d":"6dc885f0","chunk-8d47a536":"c42df9a0","like-counter-operator-panel":"70d8cb54","chunk-16006fb2":"dff62650","chunk-4fbf52da":"18c67ae4","chunk-6e26a00f":"ab457a89","chunk-add3f640":"0c2fbefc","chunk-285ed231":"181021dd","chunk-4c648c68":"8b6e29f6","chunk-a47c849c":"0028c08a","chunk-c24a71f4":"bb9a4345","chunk-d3291c6a":"6604f6b8","chunk-70eb918e":"96f6a6ba","chunk-279ce086":"8bc29376","chunk-5ad35e31":"6ead737c","chunk-1686c896":"a3ebb626","chunk-72e14d0c":"a52df670","chunk-bd3a078c":"24f8fa17","chunk-2d0d3111":"32dba8b8","chunk-3d77e0cb":"01d46fb7","chunk-595ae3c6":"af0ee9b9","chunk-645dfa0f":"371474e6","chunk-21d6a032":"3217afc0","chunk-6c57a016":"396cf5f2","chunk-792e500a":"6327ac69","chunk-db9a11f0":"b58778b2","chunk-2381d060":"c9578310","chunk-4c754f46":"ab684d8f","chunk-a379b27c":"857a01f7","chunk-069f0f4f":"198262bc","chunk-a0395f34":"7612cc0a","chunk-c515569a":"05493981","three-font-parser":"4575a2e5",IllusionNornalServicer:"c2307be4",IllusionWorkerServicer:"d3259ffe","file-ms":"7a48aa0d",scrambleDialog:"81133e1e","chunk-2d0de352":"e31b85f2","chunk-e67b6984":"e27c922e","chunk-2d0ac5d0":"db2e02b2","chunk-2d21ae98":"3d846ed5","chunk-2d21d8a2":"58605803","chunk-2d22a13c":"37de13f6"}[t]+".js"}function c(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n={"chunk-2f4a72eb":1,"chunk-7bfdecab":1,"chunk-eb20344c":1,"table-element":1,"chunk-28f1eb5c":1,"chunk-8d47a536":1,"like-counter-operator-panel":1,"chunk-16006fb2":1,"chunk-4fbf52da":1,"chunk-6e26a00f":1,"chunk-add3f640":1,"chunk-285ed231":1,"chunk-4c648c68":1,"chunk-a47c849c":1,"chunk-c24a71f4":1,"chunk-70eb918e":1,"chunk-279ce086":1,"chunk-5ad35e31":1,"chunk-1686c896":1,"chunk-72e14d0c":1,"chunk-bd3a078c":1,"chunk-3d77e0cb":1,"chunk-595ae3c6":1,"chunk-645dfa0f":1,"chunk-21d6a032":1,"chunk-6c57a016":1,"chunk-792e500a":1,"chunk-db9a11f0":1,"chunk-2381d060":1,"chunk-4c754f46":1,"chunk-a379b27c":1,"chunk-069f0f4f":1,"chunk-a0395f34":1,"chunk-c515569a":1,scrambleDialog:1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=new Promise((function(e,n){for(var i="css/"+({"arrow-element":"arrow-element","audio-element":"audio-element","brush-element":"brush-element","cell-element":"cell-element","chart-element":"chart-element","collage-element":"collage-element","editor-utils-export":"editor-utils-export","effect-text-element~three-font-parser":"effect-text-element~three-font-parser","effect-text-element":"effect-text-element","ellipse-element":"ellipse-element","filter-renderer":"filter-renderer","flex-element":"flex-element","line-element":"line-element","rect-element":"rect-element","table-element":"table-element","three-element":"three-element","video-element":"video-element","watermark-element":"watermark-element","chart-render":"chart-render","like-counter-operator-panel":"like-counter-operator-panel","three-font-parser":"three-font-parser",IllusionNornalServicer:"IllusionNornalServicer",IllusionWorkerServicer:"IllusionWorkerServicer","file-ms":"file-ms",scrambleDialog:"scrambleDialog"}[t]||t)+"."+{"arrow-element":"31d6cfe0","audio-element":"31d6cfe0","brush-element":"31d6cfe0","cell-element":"31d6cfe0","chart-element":"31d6cfe0","chunk-07de3333":"31d6cfe0","chunk-10969c2a":"31d6cfe0","chunk-1120166d":"31d6cfe0","chunk-1270e39a":"31d6cfe0","chunk-263b13d7":"31d6cfe0","chunk-2f4a72eb":"352a6e2f","chunk-3cf6f475":"31d6cfe0","chunk-48c1e67e":"31d6cfe0","chunk-74b05d36":"31d6cfe0","chunk-765abe2c":"31d6cfe0","chunk-2d0d3340":"31d6cfe0","chunk-7a0ee5e2":"31d6cfe0","chunk-7bfdecab":"0be8f087","chunk-7e8e0eb4":"31d6cfe0","chunk-c23fb882":"31d6cfe0","chunk-cb515602":"31d6cfe0","chunk-eb20344c":"a031e8bd","collage-element":"31d6cfe0","editor-utils-export":"31d6cfe0","effect-text-element~three-font-parser":"31d6cfe0","effect-text-element":"31d6cfe0","ellipse-element":"31d6cfe0","filter-renderer":"31d6cfe0","flex-element":"31d6cfe0","line-element":"31d6cfe0","rect-element":"31d6cfe0","table-element":"cd27130a","three-element":"31d6cfe0","video-element":"31d6cfe0","watermark-element":"31d6cfe0","chart-render":"31d6cfe0","chunk-28f1eb5c":"7e32bbcf","chunk-2d0d619d":"31d6cfe0","chunk-8d47a536":"6e6e326e","like-counter-operator-panel":"3e2459f7","chunk-16006fb2":"3e1584ab","chunk-4fbf52da":"3132d018","chunk-6e26a00f":"79237f23","chunk-add3f640":"316fe649","chunk-285ed231":"bf806f97","chunk-4c648c68":"d18a52c1","chunk-a47c849c":"9fade5e7","chunk-c24a71f4":"52fff56d","chunk-d3291c6a":"31d6cfe0","chunk-70eb918e":"cd08e67e","chunk-279ce086":"2073f160","chunk-5ad35e31":"b3eb600f","chunk-1686c896":"7694d9bf","chunk-72e14d0c":"756df8db","chunk-bd3a078c":"1efcdf0f","chunk-2d0d3111":"31d6cfe0","chunk-3d77e0cb":"9d450937","chunk-595ae3c6":"69fa9283","chunk-645dfa0f":"bcc8cc2f","chunk-21d6a032":"7a1793dd","chunk-6c57a016":"6b488f36","chunk-792e500a":"bac13ad1","chunk-db9a11f0":"529c6406","chunk-2381d060":"1df97766","chunk-4c754f46":"46fd2faf","chunk-a379b27c":"5c353e65","chunk-069f0f4f":"7d7ecaa8","chunk-a0395f34":"687edcdc","chunk-c515569a":"fe9231a6","three-font-parser":"31d6cfe0",IllusionNornalServicer:"31d6cfe0",IllusionWorkerServicer:"31d6cfe0","file-ms":"31d6cfe0",scrambleDialog:"eac181fd","chunk-2d0de352":"31d6cfe0","chunk-e67b6984":"31d6cfe0","chunk-2d0ac5d0":"31d6cfe0","chunk-2d21ae98":"31d6cfe0","chunk-2d21d8a2":"31d6cfe0","chunk-2d22a13c":"31d6cfe0"}[t]+".css",a=c.p+i,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var l=o[s],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===i||u===a))return e()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){l=d[s],u=l.getAttribute("data-href");if(u===i||u===a)return e()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=e,h.onerror=function(e){var i=e&&e.target&&e.target.src||a,o=new Error("Loading CSS chunk "+t+" failed.\n("+i+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=i,delete r[t],h.parentNode.removeChild(h),n(o)},h.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(h)})).then((function(){r[t]=0})));var i=a[t];if(0!==i)if(i)e.push(i[2]);else{var o=new Promise((function(e,n){i=a[t]=[e,n]}));e.push(i[2]=o);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=s(t);var d=new Error;l=function(e){u.onerror=u.onload=null,clearTimeout(h);var n=a[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+i+": "+r+")",d.name="ChunkLoadError",d.type=i,d.request=r,n[1](d)}a[t]=void 0}};var h=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(e)},c.m=t,c.c=i,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)c.d(n,i,function(e){return t[e]}.bind(null,i));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="//cdn.dancf.com/odyssey-editor/",c.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var h=u;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("76a9")},"00b0":function(t,e){t.exports='<div\n    v-if="visible"\n    class="editor-element"\n    :class="[\n        \'editor-element-\' + model.type,\n        model.lock ? \'editor-element-lock\' : \'\',\n        model.hidden ? \'editor-element-hidden\' : \'\',\n        model.frozen ? \'editor-element-frozen\' : \'\',\n        model.$loaded ? \'\' : \'editor-element-loading\',\n        model.$selected ? \'editor-element-selected\' : \'\',\n        model.$editing ? \'editor-element-editing\' : \'\'\n    ]"\n    :style="cssStyle"\n>\n    <div\n        draggable="false"\n        class="element-main"\n        style="display: flex; align-items: center; justify-content: center"\n        :style="{\n            boxShadow: boxShadow,\n            padding: padding,\n            borderRadius: borderRadius,\n        }"\n    >\n        <img v-if="model.imageUrl" :style="effectedImageRect" :src="model.imageUrl" />\n        <span class="editor-element-common__load--error" v-else>\n            <i class="editor-element-common__load--icon" :style="iconStyle"></i>\n            {{ errorText }}\n        </span>\n    </div>\n\n    <i v-show="!global.$draging" class="border-before"></i>\n</div>\n'},"01b8":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n("c7eb"),r=n("1da1"),a=(n("38cf"),n("e156")),o=n("f49e");function s(t){return Math.round(1e4*t)/1e4}function c(t,e,n,i,r,o,s,c,l,u){var d=Math.max(Math.round(i*o),1),h=Math.max(Math.round(r*s),1),f=Object(a["b"])(d,h),m=f.getContext("2d");m.imageSmoothingEnabled=!1,m.drawImage(t,e,n,i,r,0,0,d,h);var g=Object(a["b"])(c,l),p=g.getContext("2d");if("repeat"===u){var v=Math.ceil(c/d);v=v-v%2+1;var b=Math.ceil(l/h);b=b-b%2+1;var y=Object(a["b"])(v*d,b*h),w=y.getContext("2d");w.fillStyle=m.createPattern(f,u),w.fillRect(0,0,y.width,y.height);var _=(y.width-g.width)/2,x=(y.height-g.height)/2;p.drawImage(y,_,x,c,l,0,0,c,l)}else if("round"===u){var k=Math.max(1,Math.round(c/d)),E=Math.max(1,Math.round(l/h)),O=Math.round(c/k),S=Math.round(l/E),j=Object(a["b"])(O,S),I=j.getContext("2d");I.drawImage(f,0,0,O,S),p.fillStyle=m.createPattern(j,"repeat"),p.fillRect(0,0,c,l)}return g}function l(t,e){return u.apply(this,arguments)}function u(){return u=Object(r["a"])(Object(i["a"])().mark((function t(e,n){var r,l,u,d,h,f,m,g,p,v,b,y,w,_,x,k,E,O,S,j,I,A,T,C,P,$,M,R,L,U,z,D,B;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=n.canvas,l=n.targetWidth,u=n.targetHeight,d=n.imageSlice,h=n.targetImageSlice,f=n.repeat,m=void 0===f?"repeat":f,g=e,"string"!==typeof e){t.next=6;break}return t.next=5,o["a"].loadImage(e);case 5:g=t.sent;case 6:return p=g,v=p.width,b=p.height,r=r||Object(a["b"])(l,u),r.width=l,r.height=u,y=r.getContext("2d"),w=d.left,_=d.top,x=d.right,k=d.bottom,E=h.left,O=h.top,S=h.bottom,j=h.right,E=Math.round(E),O=Math.round(O),S=Math.round(S),j=Math.round(j),E+j>=l&&(I=E+j,E=Math.floor(l*(E/I)),j=Math.floor(l*(j/I)),O=Math.floor(O*l/I),S=Math.floor(S*l/I)),O+S>=u&&(A=O+S,O=Math.floor(u*(O/A)),S=Math.floor(u*(S/A)),E=Math.floor(E*u/A),j=Math.floor(j*u/A)),E>0&&O>0&&y.drawImage(g,0,0,w,_,0,0,E,O),O>0&&j>0&&y.drawImage(g,v-x,0,x,_,l-j,0,j,O),E>0&&S>0&&y.drawImage(g,0,b-k,w,k,0,u-S,E,S),j>0&&S>0&&y.drawImage(g,v-x,b-k,x,k,l-j,u-S,j,S),T=Math.max(s(v-w-x),0),C=Math.max(s(b-_-k),0),P=Math.max(s(l-E-j),0),$=Math.max(s(u-O-S),0),P>0&&T>0&&(O>0&&_>0&&(M=c(g,w,0,T,_,O/_,O/_,P,O,m,"x"),y.drawImage(M,E,0)),S>0&&k>0&&(R=c(g,w,b-k,T,k,S/k,S/k,P,S,m,"x"),y.drawImage(R,E,u-S))),$>0&&C>0&&(j>0&&x>0&&(L=c(g,v-x,_,x,C,j/x,j/x,j,$,m,"y"),y.drawImage(L,l-j,O)),E>0&&w>0&&(U=c(g,0,_,w,C,E/w,E/w,E,$,m,"y"),y.drawImage(U,0,O))),P>0&&T>0&&$>0&&C>0&&(z=P/T,D=$/C,B=c(g,w,_,T,C,z,D,P,$,m),y.drawImage(B,E,O)),t.abrupt("return",r);case 31:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}},"01f8":function(t,e,n){"use strict";n.d(e,"d",(function(){return _})),n.d(e,"e",(function(){return w})),n.d(e,"b",(function(){return y})),n.d(e,"a",(function(){return g.a})),n.d(e,"c",(function(){return f}));n("13d5"),n("d3b7"),n("d81d"),n("b680"),n("a15b");var i=n("3835"),r=2*Math.PI,a=function(t,e,n,i,r,a,o){var s=t.x,c=t.y;s*=e,c*=n;var l=i*s-r*c,u=r*s+i*c;return{x:l+a,y:u+o}},o=function(t,e){var n=1.5707963267948966===e?.551915024494:-1.5707963267948966===e?-.551915024494:4/3*Math.tan(e/4),i=Math.cos(t),r=Math.sin(t),a=Math.cos(t+e),o=Math.sin(t+e);return[{x:i-r*n,y:r+i*n},{x:a+o*n,y:o-a*n},{x:a,y:o}]},s=function(t,e,n,i){var r=t*i-e*n<0?-1:1,a=t*n+e*i;return a>1&&(a=1),a<-1&&(a=-1),r*Math.acos(a)},c=function(t,e,n,i,a,o,c,l,u,d,h,f){var m=Math.pow(a,2),g=Math.pow(o,2),p=Math.pow(h,2),v=Math.pow(f,2),b=m*g-m*v-g*p;b<0&&(b=0),b/=m*v+g*p,b=Math.sqrt(b)*(c===l?-1:1);var y=b*a/o*f,w=b*-o/a*h,_=d*y-u*w+(t+n)/2,x=u*y+d*w+(e+i)/2,k=(h-y)/a,E=(f-w)/o,O=(-h-y)/a,S=(-f-w)/o,j=s(1,0,k,E),I=s(k,E,O,S);return 0===l&&I>0&&(I-=r),1===l&&I<0&&(I+=r),[_,x,j,I]},l=function(t){var e=t.px,n=t.py,s=t.cx,l=t.cy,u=t.rx,d=t.ry,h=t.xAxisRotation,f=void 0===h?0:h,m=t.largeArcFlag,g=void 0===m?0:m,p=t.sweepFlag,v=void 0===p?0:p,b=[];if(0===u||0===d)return[];var y=Math.sin(f*r/360),w=Math.cos(f*r/360),_=w*(e-s)/2+y*(n-l)/2,x=-y*(e-s)/2+w*(n-l)/2;if(0===_&&0===x)return[];u=Math.abs(u),d=Math.abs(d);var k=Math.pow(_,2)/Math.pow(u,2)+Math.pow(x,2)/Math.pow(d,2);k>1&&(u*=Math.sqrt(k),d*=Math.sqrt(k));var E=c(e,n,s,l,u,d,g,v,y,w,_,x),O=Object(i["a"])(E,4),S=O[0],j=O[1],I=O[2],A=O[3],T=Math.abs(A)/(r/4);Math.abs(1-T)<1e-7&&(T=1);var C=Math.max(Math.ceil(T),1);A/=C;for(var P=0;P<C;P++)b.push(o(I,A)),I+=A;return b.map((function(t){var e=a(t[0],u,d,w,y,S,j),n=e.x,i=e.y,r=a(t[1],u,d,w,y,S,j),o=r.x,s=r.y,c=a(t[2],u,d,w,y,S,j),l=c.x,h=c.y;return{x1:n,y1:i,x2:o,y2:s,x:l,y:h}}))};function u(t){for(var e,n=[],i=0,r=0,a=0,o=0,s=null,c=null,u=0,f=0,m=0,g=t.length;m<g;m++){var p=t[m],v=p[0];switch(v){case"M":a=p[1],o=p[2];break;case"A":var b=l({px:u,py:f,cx:p[6],cy:p[7],rx:p[1],ry:p[2],xAxisRotation:p[3],largeArcFlag:p[4],sweepFlag:p[5]});if(!b.length)continue;for(var y,w=0;w<b.length;w++)y=b[w],p=["C",y.x1,y.y1,y.x2,y.y2,y.x,y.y],w<b.length-1&&n.push(p);break;case"S":var _=u,x=f;"C"!==e&&"S"!==e||(_+=_-i,x+=x-r),p=["C",_,x,p[1],p[2],p[3],p[4]];break;case"T":"Q"===e||"T"===e?(s=2*u-s,c=2*f-c):(s=u,c=f),p=h(u,f,s,c,p[1],p[2]);break;case"Q":s=p[1],c=p[2],p=h(u,f,p[1],p[2],p[3],p[4]);break;case"L":p=d(u,f,p[1],p[2]);break;case"H":p=d(u,f,p[1],f);break;case"V":p=d(u,f,u,p[1]);break;case"Z":p=d(u,f,a,o);break}e=v,u=p[p.length-2],f=p[p.length-1],p.length>4?(i=p[p.length-4],r=p[p.length-3]):(i=u,r=f),n.push(p)}return n}function d(t,e,n,i){return["C",t,e,n,i,n,i]}function h(t,e,n,i,r,a){return["C",t/3+2/3*n,e/3+2/3*i,r/3+2/3*n,a/3+2/3*i,r,a]}var f=u,m=n("c2e7"),g=n.n(m),p=n("e440"),v=n.n(p);n("fb6a");var b=n("a827");function y(t){if(Array.isArray(t)&&1===t.length&&"string"===typeof t[0]&&(t=t[0]),"string"===typeof t&&(t=v()(t)),t=g()(t),t=Object(b["a"])(t),!t.length)return[0,0,0,0];for(var e=[1/0,1/0,-1/0,-1/0],n=0,i=t.length;n<i;n++)for(var r=t[n].slice(1),a=0;a<r.length;a+=2)r[a+0]<e[0]&&(e[0]=r[a+0]),r[a+1]<e[1]&&(e[1]=r[a+1]),r[a+0]>e[2]&&(e[2]=r[a+0]),r[a+1]>e[3]&&(e[3]=r[a+1]);return e}function w(t){return t?v()(t):[]}function _(t){return t.reduce((function(t,e){return e=e.map((function(t){return"number"===typeof t?+t.toFixed(2):t})),t+e.join(" ")}),"")}},"022f":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r}));var i={url:{type:"url",name:{zh:"跳转外链"},icon:"evt-link",handler:"openUrl",event:{bubbles:!0,cancelable:!0,detail:{href:"",url:"",target:"_self"}}},telephone:{type:"telephone",name:{zh:"拨打电话"},icon:"phone",handler:"openUrl",event:{bubbles:!0,cancelable:!0,detail:{phoneNumber:"",url:""}}},email:{type:"email",name:{zh:"发送邮件"},icon:"evt-email",handler:"openUrl",event:{bubbles:!0,cancelable:!0,detail:{to:"",cc:"",bcc:"",subject:"",body:"",url:""}}},internalPage:{type:"internalPage",name:{zh:"跳转内页"},icon:"layout",handler:"openUrl",event:{bubbles:!0,cancelable:!0,detail:{href:"",url:"",target:"_self"}}},page:{type:"page",name:{zh:"跳转画布"},icon:"pages",handler:"goToLayout",event:{bubbles:!0,cancelable:!0,detail:{index:-1}}},copy:{type:"copy",name:{zh:"复制内容"},icon:"copy_outline",handler:"copyContent",event:{bubbles:!0,cancelable:!0,detail:{content:""}}},shareImage:{type:"shareImage",name:{zh:"生成分享海报"},icon:"image_outline",handler:"shareImage",event:{bubbles:!0,cancelable:!0,detail:{index:null}}},track:{type:"track",name:{zh:"数据埋点"},icon:"chart",handler:"trackData",event:{bubbles:!0,cancelable:!0,detail:{name:""}}},convertToImage:{type:"convertToImage",name:{zh:"转化为图片"},icon:"image_outline_1",handler:"convertToImage",event:{bubbles:!0,cancelable:!0,detail:{}}},shareLink:{type:"shareLink",name:{zh:"引导微信分享"},icon:"share",handler:"shareLink",event:{bubbles:!0,cancelable:!0,detail:{}}},showTip:{type:"showTip",name:{zh:"默认跳转页面"},icon:"feedback-outline",handler:"showTip",event:{bubbles:!0,cancelable:!0,detail:{tipText:"提交成功！"}}},showDialog:{type:"showDialog",name:{zh:"默认弹窗"},icon:"feedback-outline",handler:"showDialog",event:{bubbles:!0,cancelable:!0,detail:{tipText:"提交成功！"}}},toggleVisible:{type:"toggleVisible",name:{zh:"显示隐藏"},icon:"eye_outline",handler:"toggleVisible",target:null,event:{bubbles:!0,cancelable:!0,detail:{enter:null,leave:null}}}},r=[{name:"单击",value:"tap"},{name:"长按",value:"longTap"}]},"032a":function(t,e,n){"use strict";n("d3b7"),n("3ca3"),n("ddb0"),n("159b"),n("a15b"),n("d81d");var i=n("f684"),r=n.n(i),a=n("af9f"),o=n("da4f"),s=n.n(o);e["a"]={props:["layout","element","global","options","mode"],name:"border",template:s.a,data:function(){return{borderCache:null}},computed:{editor:function(){return this.$parent.editor||this.$parent.$parent},border:function(){return this.model.border},model:function(){return this.element||this.layout},cssStyle:function(){var t=this.model,e=this.global,n=this.border,i=e.zoom;return{width:t.width*i+"px",height:t.height*i+"px",left:0,top:0,opacity:n.opacity}},borderStyle:function(){var t=this.border.type;switch(t){case"image":return this.getImageBorderStyle();case"color":return this.getColorBorderStyle();case"gradient":break;default:break}},borderImage:function(){return this.border.image},borderSlice:function(){var t=this.border.imageSlice;return t},maxSliceWidth:function(){var t=this.borderSlice,e=t.left,n=t.top,i=t.right,r=t.bottom;return Math.max.apply(this,[e,n,i,r])}},created:function(){this.checkLoad()},watch:{border:function(){this.checkLoad()},borderImage:function(){this.checkLoad()}},methods:{checkLoad:function(){var t=this,e=this.options,n=this.border,i=this.borderImage,o=e.fitCrossOrigin;return n.$loaded=!1,r.a.try((function(){if("image"===n.type)return a["a"].loadImage(i,o)})).finally((function(){n.$loaded=!0,t.editor.$events.$emit("border.loaded")}))},getColorBorderStyle:function(){var t=[],e=this.border,n=this.global.zoom;if(e.direction){e.direction.forEach((function(n){t.push(n?e.width:0)}));var i={borderWidth:t.map((function(t){return"".concat(t*n,"px")})).join(" "),borderColor:e.color,borderStyle:"solid"};return this.borderStyleCache=i,i}},getImageBorderStyle:function(){var t=this.model,e=this.borderImage,n=this.borderSlice,i=this.maxSliceWidth,r=t.border,a=r.width,o=r.imageRepeat,s=this.global.zoom,c=a/i,l=[n.top,n.right,n.bottom,n.left],u={borderImageSource:"url(".concat(e,")"),borderImageSlice:l.join(" ")+" fill",borderImageRepeat:o,borderImageWidth:"".concat(l.map((function(t){return t*c*s+"px"})).join(" ")),borderStyle:"solid"};return this.borderStyleCache=u,u}}}},"0485":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("d4ec"),r=n("bee2"),a=(n("d3b7"),n("159b"),n("2ef0")),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.renderProvide,r=e.renderDiffKeys;Object(i["a"])(this,t),this.renderProvide=n,this.renderDiffKeys=r,this.preData=null}return Object(r["a"])(t,[{key:"setPreData",value:function(){var t=this;if(this.renderProvide){var e={};this.renderDiffKeys.forEach((function(n){var i=Object(a["get"])(t.renderProvide,n);e[n]=Object(a["isFunction"])(i)?i(t.renderProvide):i})),this._preData=e}}},{key:"isNeedRender",value:function(){var t=this;return!(this.renderProvide&&this.renderDiffKeys&&this.renderDiffKeys.length&&this._preData)||this.renderDiffKeys.some((function(e){var n=Object(a["get"])(t.renderProvide,e);return!Object(a["isEqual"])(t._preData[e],Object(a["isFunction"])(n)?n():n)}))}},{key:"renderByCanvas",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(0!==e.width&&0!==e.height){t=t||this.canvas,t.width=e.width*n,t.height=e.height*n;var i=t.getContext("2d");i.clearRect(0,0,t.width,t.height),i.drawImage(e,0,0,t.width,t.height)}}}]),t}()},"04a9":function(t,e,n){"use strict";n("d3b7"),n("159b"),n("ddb0"),n("ac1f"),n("466d");function i(){var t=n("0faf"),e={};return t.keys().forEach((function(n){var i=n.match(/([A-Za-z0-9-_]+)\./i);if(i&&i.length>1){var r=i[1];e[r]=t(n)}})),e}e["a"]=i()},"04e1":function(t,e,n){"use strict";n.d(e,"a",(function(){return O})),n.d(e,"b",(function(){return w})),n.d(e,"c",(function(){return _})),n.d(e,"d",(function(){return x}));var i=n("3835"),r=n("5530"),a=(n("13d5"),n("d3b7"),n("d81d"),n("caad"),n("159b"),n("2532"),n("3ca3"),n("ddb0"),n("a9e3"),n("e25e"),n("2ef0")),o=n("e59c"),s=n("f684"),c=n.n(s),l=n("af9f"),u=n("01f8"),d=n("1c39"),h=(n("b494"),n("acd8"),n("b64b"),["title","legend","label","xAxis","yAxis","settings"]),f=function(t,e,n){return e?Math.max(e,t):n?Math.min(n,t):t};function m(t,e,n,i){var r=i.max,o=i.min,s=i.ratio;if(n&&parseFloat(n)>0){var c=Math.round(parseFloat(n)*s);c=f(c,o,r),Object(a["set"])(t,e,c)}return t}var g=function t(e,n,i){if(!Object(a["isPlainObject"])(e))return e;Object.keys(e).forEach((function(r){var a=e[r];n.includes(r)?i(e,r,a):t(a,n,i)}))};function p(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{lineWidth:{min:1},fontSize:{min:1},pointRadius:{min:1}};if(e=e||1,1===e)return t;var i=Object.keys(n),o=function(t){return Object(r["a"])({ratio:e},n[t])};return h.forEach((function(e){var n=t[e];n&&(i.includes(e)?m(t,e,n,o(e)):Object(a["isPlainObject"])(n)&&g(n,i,(function(t,e,n){m(t,e,n,o(e))})))})),t}var v=function(t){return t.reduce((function(t,e){return t[e]=!0,t}),{})},b=v(["rect","ellipse","mosaicRect","mosaicEllipse"]),y=v(["mask","image","video"]);function w(t,e,n){var i=Object(a["defaults"])(Object.assign({},n),{cache:t,sync:!1,deep:!0,chartDisabled:!0}),r=i.cache,s=i.deep,l=i.sync,u=i.chartDisabled,h=function(){if(t.left=r.left*e,t.top=r.top*e,t.width=r.width*e,t.height=r.height*e,r.padding&&(t.padding=r.padding.map((function(t){return t*e}))),r.border&&r.border.enable&&(t.border.width=Math.max(1,r.border.width*e)),["text","effectText","threeText"].includes(t.type)&&(Object(o["e"])(t,r,e),Object(o["d"])(t,r,e),l||(t.fontSize=Math.floor(r.fontSize),t.contents&&r.contents.forEach((function(t){t.fontSize=Math.floor(t.fontSize)}))),t.$typoWidth&&t.$typoHeight&&(t.$typoWidth=r.$typoWidth*e,t.$typoHeight=r.$typoHeight*e)),r.backgroundEffect&&r.backgroundEffect.enable){if(t.backgroundEffect.image){var i=r.backgroundEffect.image.transform,c=t.backgroundEffect.image.transform;c.position.x=i.position.x*e,c.position.y=i.position.y*e,c.scale.x=i.scale.x*e,c.scale.y=i.scale.y*e}var h=t.backgroundEffect.ninePatch,f=r.backgroundEffect.ninePatch;if(h){var m=f.effectScale||1;h.effectScale=m*e}}if(["mask","image","video"].includes(t.type)&&(t.imageTransform.localTransform&&(t.imageTransform.position.x=r.imageTransform.position.x*e,t.imageTransform.position.y=r.imageTransform.position.y*e,t.imageTransform.scale.x=r.imageTransform.scale.x*e,t.imageTransform.scale.y=r.imageTransform.scale.y*e,Object(o["d"])(t,r,e)),r.effectedResult&&(t.effectedResult.width=r.effectedResult.width*e,t.effectedResult.height=r.effectedResult.height*e,t.effectedResult.left=r.effectedResult.left*e,t.effectedResult.top=r.effectedResult.top*e)),"watermark"===t.type){if(1===t.waterType&&r.fullScreenInfo){var g=t.fullScreenInfo;g.left=r.fullScreenInfo.left*e,g.top=r.fullScreenInfo.top*e,g.colGap=r.fullScreenInfo.colGap*e,g.rowGap=r.fullScreenInfo.rowGap*e,g.leftIndent=r.fullScreenInfo.leftIndent*e,t.left=0,t.top=0}return t.cellLeft=r.cellLeft*e,t.cellTop=r.cellTop*e,t.cellWidth=r.cellWidth*e,t.cellHeight=r.cellHeight*e,w(t.template,e,Object(a["omit"])(n,["cache"]))}if(["rect","ellipse","line"].includes(t.type)&&(t.strokeWidth=Math.ceil(r.strokeWidth*e),t.radius&&r.radius&&(t.radius=Math.round(r.radius*e))),"arrow"===t.type&&Object(o["a"])(t,r,e),("brush"===t.type||t.type.includes("mosaic"))&&(r.strokeWidth&&(t.strokeWidth=r.strokeWidth*e),Object(o["c"])(t,r,e,e,!0)),"ninePatch"===t.type&&(t.effectScale=r.effectScale*e),t.flex&&r.flex&&(t.flex.flexBasis=r.flex.flexBasis*e,t.flex.margin=r.flex.margin.map((function(t){return t*e}))),Object(d["d"])(t)&&s)return _(t.elements,e,Object(a["omit"])(n,["cache"]));Object(a["get"])(t,"flex.margin")&&Object(a["get"])(r,"flex.margin")&&(t.flex.margin=r.flex.margin.map((function(t){return t*e}))),Object(a["get"])(t,"relation.offset")&&Object(a["get"])(r,"relation.offset")&&(t.relation.offset.left=r.relation.offset.left*e,t.relation.offset.top=r.relation.offset.top*e,t.relation.offset.width=r.relation.offset.width*e,t.relation.offset.height=r.relation.offset.height*e),Object(a["get"])(t,"relation.defaultOffset")&&Object(a["get"])(r,"relation.defaultOffset")&&(t.relation.defaultOffset.left=r.relation.defaultOffset.left*e,t.relation.defaultOffset.top=r.relation.defaultOffset.top*e,t.relation.defaultOffset.width=r.relation.defaultOffset.width*e,t.relation.defaultOffset.height=r.relation.defaultOffset.height*e),"table"===t.type&&(t.fontSize=r.fontSize*e),"chart"!==t.type||u||p(t,e)};return l?(h(),t):1===e?c.a.resolve(t):(t.$resizeApi=!0,h(),c.a.delay(0).then((function(){return delete t.$resizeApi,t})))}function _(t,e,n){return n&&n.sync?t.map((function(t){return w(t,e,n)})):c.a.all(t.map((function(t){return w(t,e,n)})))}function x(t,e,n){var i=e.event,r=e.dir,a=e.width,s=e.height,c=e.left,u=e.top,h=e.dx,f=void 0===h?0:h,m=e.dy,g=void 0===m?0:m;r.indexOf("w")>-1&&(f*=-1),r.indexOf("n")>-1&&(g*=-1);var p,v=Number(a)+f,w=Number(s)+g,_=v,x=w;if(t.$getResizeLimit){p=t.$getResizeLimit(e);var O=this.global.zoom;v=Math.max(p.minWidth/O,v),w=Math.max(p.minHeight/O,w),v=Math.min(p.maxWidth,v),w=Math.min(p.maxHeight,w)}var S=0,j=0;if(["line","arrow"].includes(t.type)){if(r.length>1)return;k.call(this,t,e)}else{("effectText"===t.type||"text"===t.type&&t.autoScale)&&(1===r.length?(S=t.fontSize,j=t.fontSize*t.lineHeight):S=j=10);var I=S<=1||j<=1,A=Object(d["d"])(t)&&I;(A||I)&&(e.width<e.height?j=e.height/e.width:S=e.width/e.height);var T=this.currentLayout,C=n.elementMaxWidth||2*T.width,P=n.elementMaxHeight||2*T.height;if(0!==t.rotate&&(C=Math.max(C,P),P=Math.max(C,P)),r.length>1&&!e.noSyncRatio){var $=Math.min(C/_,P/x);C=_*$,P=x*$}if(v=Math.min(Math.max(1,S,v),C),w=Math.min(Math.max(1,j,w),P),p&&r.length>1&&!e.noSyncRatio&&(v!==_&&(w=Math.max(p.minHeight,x*v/_)),w!==x&&(v=_*w/x)),r.length>1&&b[t.type]&&(i.shiftKey&&!e.shiftKeyUp||e.shiftKeyDown)){var M=Math.max(v,w);v=M,w=M}if((r.includes("w")||r.includes("e"))&&(t.width=v),(r.includes("n")||r.includes("s"))&&(t.height=w),e.points){var R=l["a"].getRectPoints({left:c,top:u,width:v,height:w,rotate:t.rotate,skewX:t.skewX,skewY:t.skewY}),L={nw:"se",ne:"sw",n:"sw",w:"se",sw:"ne",se:"nw",s:"ne",e:"nw"}[r],U=R[L],z=e.points[L];t.left=c-(U.x-z.x),t.top=u-(U.y-z.y)}var D=parseInt(a)>2*T.width||parseInt(s)>2*T.height,B=t.width+t.left>0&&t.left<T.width,N=t.height+t.top>0&&t.top<T.height;D&&!B&&(t.left=0),D&&!N&&(t.top=0);var F=t.width/e.width,H=t.height/e.height;if(t.border&&r.length>1&&(t.border.width=Math.max(1,e.border.width*F)),r.length>1&&(t.padding=e.padding.map((function(t,e){return 0===e||2===e?t*H:t*F}))),t.backgroundEffect&&r.length>1){if(t.backgroundEffect.image){var V=t.backgroundEffect.image.transform,G=e.backgroundEffect.image.transform;V.position.x=G.position.x*F,V.position.y=G.position.y*F,V.scale.x=G.scale.x*F,V.scale.y=G.scale.y*F}var W=t.backgroundEffect.ninePatch,Y=e.backgroundEffect.ninePatch;if(W){var q=Y.effectScale||1;W.effectScale=q*F}}if("ninePatch"===t.type&&r.length>1&&(t.effectScale=e.effectScale*F),"brush"===t.type||t.type.includes("mosaic")){var X=t.strokeWidth||0,Z=e.strokeWidth||0;Object(o["c"])(t,e,(t.width-X)/(e.width-Z),(t.height-X)/(e.height-Z))}var K=e.imageTransform;if(K&&y[t.type]){if(1===r.length&&n.supportAdaptiveElements.includes(t.type)&&t.$clipCache){var J=t.$clipCache,Q=Math.max(t.width/J.width,t.height/J.height);t.imageTransform.scale.x=J.scaleX*Q,t.imageTransform.scale.y=J.scaleY*Q}else t.imageTransform.setFromMatrix(K.localTransform.clone().prepend({a:F,b:0,c:0,d:H,tx:0,ty:0}));r.length>1&&Object(o["d"])(t,e,F)}e.effectedResult&&(t.effectedResult.width=e.effectedResult.width*F,t.effectedResult.left=e.effectedResult.left*F,t.effectedResult.height=e.effectedResult.height*H,t.effectedResult.top=e.effectedResult.top*H),t.imageTransform&&t.type.includes("$")&&E(t,e)}}function k(t,e){var n=e.event,i=e.dir,a=this.global.zoom,s=l["a"].getAngle(n.pageX,n.pageY,e.rotateBaseDotX,e.rotateBaseDotY,"w"===i?180:0);n.shiftKey&&(s=10*Math.round(s/10)),n.ctrlKey||[{angle:30,edge:2},{angle:45,edge:3}].some((function(t){var e=t.angle,n=t.edge,i=Math.round(s/e)*e;return Math.abs(i-s)<n&&(s=i,!0)}));var c=Math.sqrt(Math.pow(n.pageX-e.rotateBaseDotX,2)+Math.pow(n.pageY-e.rotateBaseDotY,2))/a,u=e.getLineRotationCenterPoint(Object(r["a"])(Object(r["a"])({},t),{},{width:c,rotate:s,left:e.left,top:e.top}),i);t.width=c,t.rotate=s,t.left=e.left-(u.x-e.rotatePoint.x),t.top=e.top-(u.y-e.rotatePoint.y),"arrow"===t.type&&Object(o["b"])(t)}function E(t,e){var n=t.transform.scale,i=e.$imageLeft,r=e.$imageTop;n.y<0&&(r=e.height-t.$imageHeight-r),n.x<0&&(i=e.width-t.$imageWidth-i);var a=l["a"].getPointPosition({x:i+e.left+t.$imageWidth/2,y:r+e.top+t.$imageHeight/2},{x:e.left+e.width/2,y:e.top+e.height/2},t.rotate),o={x:a.x-t.$imageWidth/2,y:a.y-t.$imageHeight/2},s=l["a"].getPointPosition({x:o.x+t.$imageWidth/2,y:o.y+t.$imageHeight/2},{x:t.left+t.width/2,y:t.top+t.height/2},-t.rotate);i=s.x-t.$imageWidth/2-t.left,r=s.y-t.$imageHeight/2-t.top,n.x<0&&(i=t.width-t.$imageWidth-i),n.y<0&&(r=t.height-t.$imageHeight-r),t.$imageLeft=i,t.$imageTop=r}function O(t,e){if(t.$paths){var n=Object(u["b"])(t.path),r=Object(i["a"])(n,4),a=r[0],o=r[1],s=r[2],c=r[3],l=t.$paths,d=t.strokeWidth;d=d||0,a-=d/2,o-=d/2,s+=d/2,c+=d/2;var h={width:s-a,height:c-o,left:a,top:o};return e?(Object.assign(t,h),t.$paths=l.map((function(t){return void 0!==t[1]&&(t[1]-=h.left),void 0!==t[2]&&(t[2]-=h.top),void 0!==t[3]&&(t[3]-=h.left),void 0!==t[4]&&(t[4]-=h.top),void 0!==t[5]&&(t[5]-=h.left),void 0!==t[6]&&(t[6]-=h.top),t})),h):h}}},"07e2":function(t,e,n){"use strict";var i=n("5530"),r=(n("d3b7"),n("159b"),n("99af"),n("a15b"),n("25f0"),n("9b02")),a=n.n(r),o=n("c352"),s=n.n(o),c=n("66cb"),l=n.n(c),u=n("c7eb"),d=n("1da1"),h=(n("e9c4"),n("a026")),f=n("2ef0"),m=n("9afd"),g=n.n(m),p=n("3c8c"),v=Object(p["a"])(h["default"],{template:g.a,name:"background-image",props:["editor","global","options","element","layout"],data:function(){return{model:null}},computed:{isDesignMode:function(){return"design"===this.options.mode||"flow"===this.options.mode},inpaintUrl:function(){return Object(f["get"])(this.layout,"metaInfo.thirdParty.inpaint.url")},effectImage:function(){var t=Object(f["get"])(this.layout,"background.image");return t&&"mp4"!==t.resourceType?Object(i["a"])(Object(i["a"])({},t),{},{transform:t.transform,imageTransform:t.imageTransform,width:t.width,imageUrl:this.layout.backgroundEffectImage,url:this.inpaintUrl||t.url}):null}},watch:{effectImage:{deep:!0,immediate:!0,handler:function(t){if(!t)return this._cache=null,void(this.model=null);t=Object(f["pick"])(t,["url","imageUrl","filterInfo","filter","naturalWidth","naturalHeight","imageTransform","transform","width","height","left","top","opacity","watermarkEnable","naturalDuration"]),t.left=t.left||0,t.top=t.top||0;var e=JSON.stringify(t);e!==this._stringifyCache&&(this._stringifyCache=e,this.model?Object.assign(this.model,t):(this.model=this.editor.createElement(Object(i["a"])(Object(i["a"])({},t),{},{type:"image"})),this.model.$id=this.layout.$id))}},inpaintUrl:function(t){if(t&&this.isDesignMode){var e=this.model.hasFilters;this.layout.backgroundEffectImage=e?null:t}},"model.$loaded":function(t){this.$emit("loaded",t)},"layout.background.image.url":function(){this.isDesignMode&&(this.layout.backgroundEffectImage=null)},"model.naturalDuration":function(t){this.isDesignMode&&this.$set(this.layout.background.image,"naturalDuration",t)}},events:{"imageRenderer.renderAfter":function(t){var e=this;return Object(d["a"])(Object(u["a"])().mark((function n(){return Object(u["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.isDesignMode&&t.$id===e.model.$id){n.next=2;break}return n.abrupt("return");case 2:e.layout.backgroundEffectImage=null;case 3:case"end":return n.stop()}}),n)})))()}},methods:{}});function b(t){var e={},n=[];n.push(90-t.angle+"deg"),t.stops.forEach((function(t){n.push("".concat(t.color," ").concat(100*t.offset,"%"))}));var i=n.join(",");return e.backgroundImage="linear-gradient(".concat(i,")"),e}e["a"]={props:["layout","element","global","options","selected","mode"],name:"background",template:s.a,components:{BackgroundImage:v},data:function(){return{clickCount:0}},computed:{editor:function(){return this.$parent.editor||this.$parent.$parent},isDesignMode:function(){return"design"===this.options.mode||"flow"===this.options.mode},model:function(){return this.layout},background:function(){return this.model.background},effectImage:function(){var t=a()(this.background,"image");return t&&"mp4"!==t.resourceType?Object(i["a"])(Object(i["a"])({},t),{},{url:this.layout.backgroundEffectImage||t.url}):null},effectGradient:function(){return a()(this.background,"gradient")},backgroundColor:function(){var t=a()(this.background,"color","#00000000");return t?l()(t).toString("rgb"):""},backgroundGradientStyle:function(){if(this.effectGradient)return b(this.effectGradient)}},methods:{checkClickAdp:function(){var t=this,e=256;this.clickCount=(this.clickCount||0)+1,clearTimeout(this.checkClickAdpTimer),this.checkClickAdpTimer=setTimeout((function(){var e=t.clickCount;e>=2&&t.onDblClick(),t.clickCount=0}),e)},onDblClick:function(){this.editor.showBackgrounCroper(this.layout),this.editor.$events.$emit("background.dblClick")},onClick:function(t){var e=this,n=this.editor.$refs.tempGroup,i=n&&n.currentTempGroupId;if(!this._selectorLocked&&this.editor.editable&&"preview"!==this.options.mode&&!this.layout.$backgroundEditing){var r=this.layout,a=this.editor,o=a.pointFromEvent(t);this.$nextTick((function(){o.x-=r.left||0,o.y-=r.top||0,o.x<0||o.y<0||o.x>r.width||o.y>r.height||(e.editor.currentElement||i?e.layout.$backgroundSelected=!1:(e.layout.$backgroundSelected=!0,e.editor.focusLayoutBackground(e.layout),e.checkClickAdp()))}))}},onLoadedChange:function(t){this.layout.$backgroundLoaded=t,this.editor.$events.$emit("background.loaded")}},events:{"selector.active":function(){this._selectorLocked=!0},"selector.inactive":function(){var t=this;this.layout.$backgroundSelected=!1,setTimeout((function(){t._selectorLocked=!1}))},"base.mouseDown":function(t){if(this.editor.editable&&"preview"!==this.options.mode){var e=this.layout,n=this.editor,i=n.pointFromEvent(t);i.x-=e.left||0,i.y-=e.top||0,(i.x<0||i.y<0||i.x>e.width||i.y>e.height)&&!e.$backgroundEditing&&(e.$backgroundSelected=!1)}},"base.click":function(t){this.onClick(t)}}}},"0894":function(t,e,n){"use strict";var i=n("5530"),r=n("3835");n("13d5"),n("d3b7"),n("4fad"),n("25f0");e["a"]={computed:{element:function(){return{global:this.global,model:this.model,options:this.options,rect:this.rect}},boxStyle:function(){var t=this.rect,e=this.baseStyle,n=e.position,a=void 0===n?"absolute":n,o=e.top,s=e.left,c=e.bottom,l=e.zIndex,u=t.padding,d=Object.entries({position:a,top:o,left:s,bottom:c,zIndex:l}).reduce((function(t,e){var n=Object(r["a"])(e,2),i=n[0],a=n[1];return void 0!==a&&(t[i]=a),t}),{});return Object(i["a"])({height:"".concat(t.height+u[0]+u[2],"px"),width:"".concat(t.width+u[1]+u[3],"px"),transform:this.transform.toString(),opacity:this.opacity},d)},innerStyle:function(){var t=this.model,e=this.global.zoom,n=void 0===e?1:e;return{width:"".concat(t.width,"px"),height:"".concat(t.height,"px"),transform:"scale(".concat(n,")")}}}}},"0c26":function(t,e,n){"use strict";n("a6d9")},"0e29":function(t,e,n){"use strict";n("a15b"),n("13d5"),n("d3b7"),n("99af"),n("3ca3"),n("ddb0");var i=n("f684"),r=n.n(i),a=n("2ef0"),o=n("cdbf"),s=n.n(o),c=n("6c62"),l=n("af9f");e["a"]={props:["editor","global","options","layout","elements"],name:"background-mosaic",template:s.a,data:function(){return{canvasRendered:!1}},computed:{mosaic:function(){return this.layout.mosaic},mosaicType:function(){return this.mosaic.type},mosaicPaths:function(){return this.mosaic.paths},cssStyle:function(){var t=this.layout,e=this.global,n=t.width,i=t.height,r={width:n*e.zoom+"px",height:i*e.zoom+"px"};return r},imageUrl:function(){return"mosaic"===this.options.operateMode||this.canvasRendered?"":l["a"].getComputedUrl(this.mosaic.imageUrl,this.options.fitCrossOrigin)},rendererId:function(){return this.layout.$id+"-mosaic"},isDesignMode:function(){return"design"===this.options.mode||"flow"===this.options.mode}},mounted:function(){var t=this;this.mosaicRenderer=this.createRenderer(),this.$watch((function(){var e=t.mosaic,n=[e.url,e.color,e.type].join(""),i=t.mosaicPaths.reduce((function(t,e){return t+[e.left,e.top,e.width,e.height,e.rotate,e.scaleX,e.scaleY,e.path,e.hidden].join("")}),"");return n+i}),(function(){t.isDesignMode&&t.render()})),this.$watch((function(){var e=t.layout,n=e.backgroundEffectImage,i=e.width,r=e.height;return[].concat(n,i,r,t.mosaic.tileWidth,t.mosaic.tileHeight,t.mosaic.blur).join(" ")}),(function(){t.isDesignMode&&t.lazyRender()})),this.$watch("layout.background",{deep:!0,handler:function(){t.isDesignMode&&t.lazyRender()}}),this.$watch((function(){var e=t.layout,n=e.background,i=e.backgroundEffectImage;return[Object(a["get"])(n,"image.url",""),i]}),(function(){t.checkLoad()})),this.checkLoad()},beforeDestroy:function(){this.editor.$renderers.destory(this.rendererId)},methods:{checkLoad:function(){var t,e=this;return this.layout.$backgroundLoaded=!1,t=this.imageUrl?l["a"].loadImage(this.imageUrl):this.lazyRender(!1),r.a.try((function(){return t})).finally((function(){e.layout.$backgroundLoaded=!0,e.editor.$events.$emit("background.loaded")}))},createRenderer:function(){var t=this.editor,e=this.editor.getLayout(this.layout.$id),n=t.$renderers.get(this.rendererId);return n?(t.$renderers.count(this.rendererId),n.layout=e):n=t.$renderers.create(this.rendererId,new c["a"]({layout:e,editor:t})),n},render:function(){var t=this;return this.canvasRendered=!0,this.mosaicRenderer.render().then((function(){t.layout.mosaic.imageUrl=""}))},lazyRender:Object(a["throttle"])((function(){return this.render()}),100)},watch:{"options.operateMode":function(t){this.isDesignMode&&"mosaic"===t&&this.render()}},events:{"mosaicRenderer.renderAfter":function(t){this.layout.$id===t.$id&&this.mosaicRenderer.renderByCanvas(this.$refs.canvas,this.mosaicRenderer.canvas)}}}},"0f57":function(t,e,n){"use strict";var i=n("2909");n("b64b"),n("99af"),n("4de4"),n("d3b7"),n("caad"),n("2532"),n("159b");e["a"]={FILTER:["design_filter","filter"],ANIMATION:"animation",TEXT_EFFECT:"text_effect",IMAGE_EFFECT:"image_effect",THREE_TEXT:"three_text",POSTER:"poster",MOSAIC:"mosaic",BORDER:"border",POSTERS:["poster","web_page","gif","odyssey","h5_bargraph","ppt","list"],_clearElementMateInfo:function(t){var e=Object.assign({},t.metaInfo),n=e.materials||[];n.length||delete e.materials,Object.keys(e).length?t.metaInfo=e:t.metaInfo=null},clearElementMaterialMeta:function(t){if(t.metaInfo&&t.metaInfo.materials){var e=Object.assign({},t.metaInfo);e.materials=[],t.metaInfo=e}this._clearElementMateInfo(t)},removeElementMaterialMeta:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"type";if(e=[].concat(e),t.metaInfo&&t.metaInfo.materials){var i=Object.assign({},t.metaInfo);i.materials=i.materials.filter((function(t){return!e.includes(t[n])})),t.metaInfo=i}this._clearElementMateInfo(t)},keepElementMaterialMeta:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"type";if(e=[].concat(e),t.metaInfo){var i=Object.assign({},t.metaInfo);i.materials&&(i.materials=i.materials.filter((function(t){return e.includes(t[n])}))),i.teamMaterials&&(i.teamMaterials=i.teamMaterials.filter((function(t){return e.includes(t[n])}))),t.metaInfo=i}this._clearElementMateInfo(t)},replaceImageMaterialMeta:function(t,e){var n=[this.IMAGE_EFFECT].concat(Object(i["a"])(this.FILTER));this.keepElementMaterialMeta(e,n);var r=Object.assign({},e.metaInfo);r.materials=r.materials||[],r.teamMaterials=r.teamMaterials||[],t.metaInfo&&t.metaInfo.materials&&t.metaInfo.materials.forEach((function(t){!n.includes(t.type)&&r.materials.push(t)})),t.metaInfo&&t.metaInfo.teamMaterials&&t.metaInfo.teamMaterials.forEach((function(t){!n.includes(t.type)&&r.teamMaterials.push(t)})),e.metaInfo=r,this._clearElementMateInfo(e)}}},"0faf":function(t,e,n){var i={"./en.json":"41f1","./zh.json":"953e"};function r(t){var e=a(t);return n(e)}function a(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}r.keys=function(){return Object.keys(i)},r.resolve=a,t.exports=r,r.id="0faf"},1:function(t,e){},"113e":function(t,e,n){},"11b5":function(t,e,n){"use strict";n.d(e,"c",(function(){return m})),n.d(e,"b",(function(){return g})),n.d(e,"a",(function(){return v}));var i=n("15fd"),r=n("c7eb"),a=n("1da1"),o=(n("d3b7"),n("159b"),n("c740"),n("d81d"),n("4e82"),n("4de4"),n("cb29"),n("ac1f"),n("1276"),n("fb6a"),n("13d5"),n("0481"),n("4069"),n("99af"),n("b0c0"),n("c9b4")),s=n("9911"),c=(n("92d6"),["order","keyframes","customValues"]),l={none:!0,forwards:!0,backwards:!0,both:!0},u=new IntersectionObserver((function(t){t.forEach(function(){var t=Object(a["a"])(Object(r["a"])().mark((function t(e){var n,i,a,o;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.target,i=e.intersectionRatio,!(i>0)){t.next=12;break}u.unobserve(n),a=n.animations,o=0;case 5:if(!(o<a.length)){t.next=11;break}return t.next=8,a[o].start();case 8:o+=1,t.next=5;break;case 11:n.remove();case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),{threshold:.05});function d(t){var e=t.el,n=t.model,i=t.editor,r=n.width,a=n.height,o=n.left,s=n.top,c=i.$el.offsetWidth/i.width;e.style.position="absolute",e.style.zIndex=-1,e.style.width="".concat(r*c,"px"),e.style.height="".concat(a*c,"px"),e.style.top="".concat(s*c,"px"),e.style.left="".concat(o*c,"px")}function h(t){var e=t.el,n=t.model,i=t.editor,r=t.observer,a=document.createElement("div");return a.classList.add("editor-element-ghost"),a.__observer=r,a.__updateGhostStyle=function(){d({model:n,editor:i,el:a})},a.__updateGhostStyle(),e.parentElement.appendChild(a),r.observe(a),a}function f(t){var e=t.editor,n=t.element,r=t.isEdit,a=t.isFlow,o=t.layoutWidth,d=n.$el,f=n.model,m=f.$id,g=f.animations,p=void 0===g?[]:g,v=p.findIndex((function(t){var e=t.customValues;return e&&e.path&&e.path.length}))>-1,b=p.filter((function(t){return null===t||void 0===t?void 0:t.keyframes})).sort((function(t,e){return t.order-e.order})).map((function(t,a){var u=t.order,h=t.keyframes,f=t.customValues,g=Object(i["a"])(t,c);g.fill||(g.fill="both"),g.iterations&&(g.iterations=+g.iterations),v&&(g.forceJsExcute=!0);var b=f||{},y=b.path,w=void 0===y?[]:y,_=h.offsetPath;if(_&&_.length){var x=r?e.global.zoom:e.$el.offsetWidth/o,k=Object(s["a"])(n.model,w,x);h.offsetPath=new Array(_.length).fill(k)}g.fill=l[g.fill]?g.fill:"both";var E,O,S=Object(s["c"])(h);if(r){var j=m.split(".")[1]||m,I=d.parentNode.querySelector("#animation-".concat(j));if(I)O=I;else{O=d.cloneNode(!0),O.id="animation-".concat(j);var A=[].slice.call(O.querySelectorAll("canvas"));if(A.length){var T=[].slice.call(d.querySelectorAll("canvas"));T.forEach((function(t,e){var n=A[e].getContext("2d");n.drawImage(t,0,0)}))}O.classList.add("element-clone"),O.classList.remove("editor-element-editing")}d.parentNode.insertBefore(O,d),d.classList.add("element-animating")}else O=d;if("text"===g.method){var C=a===p.length-1;E=Object(s["b"])({el:O,keyframes:S,options:g},r,C)}else E=O.animate(S,g),E.start=function(){return new Promise((function(t){E.play(),E.addEventListener("finish",t)}))};return E.cancel(),0===a&&(E.first=!0,E.play(),E.pause()),E.order=u,E}));if(a&&b.length){var y=h({el:d,editor:e,observer:u,model:n.model});y.animations=b}return b}function m(t){return t.flat().sort((function(t,e){return t.order-e.order})).reduce((function(t,e){var n=t.slice(-1)[0];return n&&n[0].order===e.order?(n.push(e),t):t.concat([[e]])}),[])}function g(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.currentLayout,n="flow"===t.global.mode,i="preview"!==t.mode,r=e.elements.map((function(r){var a=t.getComponentById(r.$id),o=a.$el;return f({editor:t,element:{model:r,$el:o},isEdit:i,isFlow:n,layoutWidth:e.width})}));return m(r)}function p(t,e){return Object(o["a"])(t,{name:e,mounted:function(){var t=this.model,e=this.$parent,n=e.layout,i=e.global,r=e.editor;if(n&&t.animations&&t.animations.length){n.animations||(n.animations=[]);var a="flow"===i.mode;n.animations.push(f({element:this,isEdit:!1,editor:r,isFlow:a,layoutWidth:n.width}))}}})}function v(t){var e=t.layoutComponent,n=Array.isArray(e)?e:[e],i=n[n.length-1];return Object.assign(t,{layoutComponent:p(e,i.name)})}},1211:function(t,e,n){"use strict";n("659e")},"1b17":function(t,e,n){"use strict";n.d(e,"a",(function(){return T}));var i=n("c7eb"),r=n("1da1"),a=(n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("ac1f"),n("00b4"),n("99af"),n("466d"),n("5319"),n("25f0"),n("5db7"),n("73d9"),n("159b"),n("a026")),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"share-image",style:t.style},[t.url?i("div",{staticClass:"share-image__image"},[i("button",{staticClass:"share-image__close",on:{click:function(e){return t.$emit("close")}}},[i("Icon",{attrs:{name:"close"}})],1),i("img",{attrs:{src:t.url,alt:""}}),i("div",{staticClass:"share-image__tip"},[t._v(" 长按图片保存到手机 ")])]):t._e(),i("transition",{attrs:{name:"share-image-fade"}},[t.url?t._e():i("div",{staticClass:"share-image__loading"},[i("img",{attrs:{src:n("62ec"),alt:""}}),t._v(" 海报生成中... ")])])],1)},s=[],c={name:"ShareImage",data:function(){return{url:"",view:{width:window.innerWidth,height:window.innerHeight}}},computed:{style:function(){var t=this.view,e=Math.min(t.height,window.innerHeight);return{width:"".concat(t.width,"px"),height:"".concat(e,"px")}}}},l=c,u=(n("e36a"),n("2877")),d=Object(u["a"])(l,o,s,!1,null,null,null),h=d.exports,f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"share-link"},[i("img",{staticClass:"share-link__guide",attrs:{src:n("39aa"),alt:""}}),i("button",{staticClass:"share-link__close",on:{click:function(e){return t.$emit("close")}}},[t._v(" 我知道了 ")])])},m=[],g={name:"ShareLink"},p=g,v=(n("a45e"),Object(u["a"])(p,f,m,!1,null,null,null)),b=v.exports,y=n("b7da"),w=n("b156"),_=n("9911"),x=n("6c34"),k=n("573f"),E=n("e222"),O={linkUrl:"https://interaction.clotfun.online/chicken?appkey=c5388375b0870cefcba94c15535633c3&adSpaceKey=8c7abd9fc03e9b24bac6a117d6f4352f&source=media&from=H5&1=1"};function S(t){var e,n={"data:":!0,"blob:":!0,"chrome:":!0,"javascript:":!0};try{var i=new URL(t),r=i.protocol;e=!n[r]}catch(a){e=!1}return e}function j(t){var e=t.$el,n=t.view,i=a["default"].extend(h),r=new i({data:{view:n,url:""}}),o=r.$mount();return e.appendChild(o.$el),o}function I(t){var e=a["default"].extend(b),n=new e,i=n.$mount();return t.appendChild(i.$el),i}function A(t,e){if(/^(https?:)?\/\//.test(t))return e?t:"".concat(w["URL_PROXY_ORIGIN"],"?addr=").concat(encodeURIComponent(t));var n=t.match(/^ttxs|focodesign|focovideo/);if(!Object(y["isApp"])()&&n){var i=t.replace(n[0],"https");return"https://m.gaoding.com/callapp?redirect=".concat(i)}return t}var T={url:function(t){return t.href&&!/^\w+:\/\//.test(t.href)&&(t.href="http://".concat(t.href)),t.url=t.href,t},internalPage:function(t){return/^\/{1}/.test(t.href)&&(t.href="".concat(window.location.origin).concat(t.href)),t.url=t.href,t},telephone:function(t){return t.url="tel:".concat(t.phoneNumber),t},email:function(t){return t.url="mailto:".concat(t.to),t}};e["b"]={openUrl:function(t,e){var n=e.bubbles,i=e.detail,r=e.type,a=e.vm;n||t.stopPropagation();var o=i.url,s=i.target;if(S(o)){if(Object(y["isWXMP"])())switch(r){case"url":return Object(k["a"])(i.url),void a.eventAdaptor.$emit("open-url",{type:r,detail:i});case"email":if(Object(y["isAndroid"])())return Object(k["a"])(i.url),void a.eventAdaptor.$emit("open-url",{type:r,detail:i});break;default:break}var c=document.createElement("a");c.href=A(o,!0),"url"!==r&&"internalPage"!==r||(c.target=s,c.rel="noopener"),c.click()}},showTip:function(t,e){var n,i=e.bubbles,r=e.detail;i||t.stopPropagation();var a=r.tipText||"提交成功！",o="success",s=new URLSearchParams({title:a,type:o}).toString(),c=window,l=c.__ODYSSEY_PAGE,u=!1===(null===l||void 0===l||null===(n=l.advert)||void 0===n?void 0:n.show),d=(null===l||void 0===l?void 0:l.id)||"",h=(null===l||void 0===l?void 0:l.code)||"",f="".concat("https://www.gaoding.com","/odyssey/advert?source=web&isVip=").concat(u,"&").concat(s,"&id=").concat(d,"&code=").concat(h);window.location.href=encodeURI(f)},showDialog:function(t,e){var n,i=e.bubbles,r=e.detail,a=e.that,o=e.vm;i||t.stopPropagation();var s=o.editor,c="GAODING-ADVERT",l=E["b"].get(c)||O;"design"!==s.global.mode&&delete O.linkUrl,E["b"].set(c,l);var u=r.tipText||"提交成功！",d="success",h=new URLSearchParams({title:u,type:d}).toString(),f=window,m=f.__ODYSSEY_PAGE,g=!1===(null===m||void 0===m||null===(n=m.advert)||void 0===n?void 0:n.show),p=(null===m||void 0===m?void 0:m.id)||"",v=(null===m||void 0===m?void 0:m.code)||"",b="".concat("https://www.gaoding.com","/odyssey/advert?source=web&isVip=").concat(g,"&").concat(h,"&id=").concat(p,"&code=").concat(v);a.$AdvertBox.show({url:b})},goToLayout:function(t,e){var n=e.bubbles,i=e.detail.index,r=e.vm;if(n||t.stopPropagation(),null!==i){var a=r.editor,o=a.layouts,s=a.currentLayout,c=o.indexOf(s),l="number"===typeof i?i:i[Math.floor(Math.random()*i.length)];-1===l&&(l=c+1),l>=o.length||r.toggleLayout(l,l>=c)}},copyContent:function(t,e){var n=e.bubbles,i=e.detail.content,r=e.vm;n||t.stopPropagation();var a=r.$clipboard(i);if(a){var o=window.od.i18n;r.$messageBox.open({title:o.use("prompt.copy.title"),content:o.use("prompt.copy.message",{content:i}),tip:o.use("prompt.copy.confirm"),type:"success",maskClose:!0})}},shareImage:function(t,e){var n=e.vm,i=e.bubbles,r=e.target,a=e.detail.index;if(i||t.stopPropagation(),null!==a){var o=n.editor,s="number"===typeof a?a:a[Math.floor(Math.random()*a.length)];if(-1===s){var c=o.getLayoutByElement(r);s=o.layouts.indexOf(c)+1}if(!(s>=o.layouts.length)){var l=o.layouts[s],u=j(n),d=o.copyLayout(l);d.temporal=!0,d=o.addLayout(d);var h=function(){var t,e=o._isSupportSvgExport(d.elements),i=(null===(t=window.od)||void 0===t?void 0:t.renderStrategy)||{};o.exportImage(d,i,void 0,void 0,e).then((function(t){u.url=t.toDataURL(),u.$once("close",(function(){u.$el.remove(),u.$destroy()}))})).catch((function(t){console.log(t),u.$el.remove(),u.$destroy();var e=window.od.i18n;n.$messageBox.open({title:e.use("prompt.shareImage.title"),content:e.use("prompt.shareImage.message"),tip:e.use("prompt.shareImage.confirm"),type:"error",maskClose:!0})})).finally((function(){o.removeLayout(d)}))},f=d.elements.flatMap((function(t){return t.elements||[t]}));setTimeout((function t(){var e=f.every((function(t){return t.$loaded}));e?h():setTimeout(t,100)}),100)}}},convertToImage:function(t,e){var n=e.target,i=e.layout,r=e.vm,a=r.editor,o=a.addLayout({backgroundColor:"#FFFFFF00"});o.width=n.width,o.height=n.height,o.temporal=!0,a.addLayout(o);var s=a.copyElement(n)[0];s.left=0,s.top=0,a.addElement(s,o),setTimeout((function(){var t,e=!a._isSupportCanvasExport(o.elements),r=(null===(t=window.od)||void 0===t?void 0:t.renderStrategy)||{};a.exportImage(o,r,void 0,void 0,e).then((function(t){var e=t.toDataURL();a.replaceElement(n,{type:"image",url:e,top:n.top,left:n.left,width:n.width,height:n.height},i),a.removeLayout(o)}))}),500)},shareLink:function(t,e){var n=e.bubbles,i=e.vm;n||t.stopPropagation();var r=I(i.$el);r.$once("close",(function(){r.$el.remove(),r.$destroy()}))},toggleVisible:function(t,e,n){return Object(r["a"])(Object(i["a"])().mark((function r(){var a,o,s,c,l,u,d,h,f,m,g,p,v,b,y,w,k;return Object(i["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(s=e.bubbles,c=e.detail,l=c.enter,u=c.leave,d=e.vm.editor,s||t.stopPropagation(),n){i.next=4;break}return i.abrupt("return");case 4:if(h=d.getComponentById,f=d.layouts,m=Object(x["c"])(f,n.uuid),m){i.next=8;break}return i.abrupt("return");case 8:if(g=h(m.$id),p=g.$el,(null!==(a=null===p||void 0===p||null===(o=p.getAnimations)||void 0===o?void 0:o.call(p))&&void 0!==a?a:[]).forEach((function(t){return t.cancel()})),v=m.hidden,b=v?l:u,y={start:function(){return Promise.resolve()}},b&&(w=b.keyframes,k=Object(_["c"])(w),"text"===b.method?y=Object(_["b"])({el:p,keyframes:k,animateConfig:b},!1,!1):(y=p.animate(k,b),y.start=function(){return new Promise((function(t){y.play(),y.addEventListener("finish",t)}))})),!v){i.next=19;break}m.hidden=!1,y.start(),i.next=22;break;case 19:return i.next=21,y.start();case 21:m.hidden=!0;case 22:case"end":return i.stop()}}),r)})))()},trackData:function(t,e){console.log(t);var n=e.target,i=e.bubbles;i||t.stopPropagation(),"function"===typeof n.trackEventHandler&&n.trackEventHandler(e)}}},"1c39":function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"a",(function(){return r})),n.d(e,"e",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return c}));n("5530"),n("caad"),n("2532"),n("d3b7"),n("13d5"),n("99af"),n("2ef0"),n("7aca"),n("b494"),n("925e");function i(t){return t&&("group"===t.type||"flex"===t.type)}function r(t){return t&&["image","mask"].includes(t.type)&&["apng"].includes(t.resourceType)&&t.naturalDuration>0}function a(t){return t&&"image"===t.type&&"mp4"===t.resourceType&&t.naturalDuration>0}function o(t){return t.isGif||"gif"===t.resourceType}function s(t){return t.isApng||"apng"===t.resourceType}function c(t){var e;return(o(t)||s(t)||"video"===t.type||(null===(e=t.animations)||void 0===e?void 0:e.length))&&t.naturalDuration}},"1d86":function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var i=n("c7eb"),r=n("1da1"),a=n("d4ec"),o=n("bee2"),s=(n("d3b7"),n("3ca3"),n("ddb0"),n("07ac"),n("d81d"),n("159b"),n("b64b"),n("b0c0"),n("4de4"),n("f684")),c=n.n(s),l=["https://st0.dancf.com/csc/208/configs/system/20210303-131232-121b.zip","https://st0.dancf.com/csc/208/configs/system/20210303-131314-e20b.zip","https://st0.dancf.com/csc/208/configs/system/20210303-131302-edf5.zip","https://st0.dancf.com/csc/208/configs/system/20210303-131325-c7a3.zip","https://st0.dancf.com/csc/208/configs/system/20210303-131335-82a7.zip"],u={contrast:[{key:"contrast",index:"0",params:["uniContrast"],format:function(t){return Math.floor(t)/100}}],sharpness:[{key:"clarityFast",index:"3",params:["alpha"],format:function(t){return Math.floor(t)/100}}],gaussianBlur:[{key:"gaussian-ex",index:"0",params:["sigma"],format:function(t){return Math.floor(5*t)}},{key:"gaussian-ex",index:"1",params:["sigma"],format:function(t){return Math.floor(5*t)}}],hueRotate:[{key:"hslAdjust",index:"0",params:["hue"],format:function(t){return Math.floor(t)}}],saturate:[{key:"hslAdjust",index:"0",params:["saturation"],format:function(t){return Math.floor(t)/100}}],brightness:[{key:"hslAdjust",index:"0",params:["Lightness"],format:function(t){return Math.floor(t)/100}}],temperature:[{key:"whiteBalance",index:"0",params:["temperature"],format:function(t){return Math.floor(t)/100}}],tint:[{key:"whiteBalance",index:"0",params:["tint"],format:function(t){return Math.floor(t)/100}}]},d=function(){function t(){Object(a["a"])(this,t),this.renderPromise=null,this.baseFilters=[],this.baseFiltersPromise=null,this.contrast=null,this.sharpness=null,this.gaussianBlur=null,this.hueRotate=null,this.saturate=null,this.brightness=null,this.imageData=null,window._illusionService=this}return Object(o["a"])(t,[{key:"createFilterLayer",value:function(){var t=Object(r["a"])(Object(i["a"])().mark((function t(e){var n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getRender();case 2:return n=t.sent,t.next=5,n.setSourceImage(e);case 5:return t.next=7,n.resetFiltes();case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getRender",value:function(){return this.renderPromise||(this.renderPromise=n.e("filter-renderer").then(n.bind(null,"4d69")).then((function(t){return new t.EditorIllusion({encryptMode:!0,preloads:[],useWorker:!0})})).then((function(t){return t.checkReady().then((function(){return t}))}))),this.renderPromise}},{key:"loadBaseFilters",value:function(){var t=this,e=Object.values(l);return this.baseFiltersPromise||(this.baseFiltersPromise=this.getRender().then((function(n){return c.a.map(e,(function(t){return n.loadFilters(t)})).then((function(e){e.forEach((function(e){e.forEach((function(e){t.baseFilters.push(e)}))})),t._initFilterParams(t.baseFilters)})).then((function(){return t.baseFilters}))}))),this.baseFiltersPromise}},{key:"_initFilterParams",value:function(t){var e=this,n=Object.keys(u);n.forEach((function(n){var i=u[n],r=[];i.forEach((function(i){t.forEach((function(t){t.name===i.key&&t.index===i.index&&(i.params.forEach((function(e){t.params[e]&&r.push({filter:t,param:e,format:i.format})})),e[n]=r)}))}))}))}},{key:"updateFilterParam",value:function(t,e){var n=this[t];return n?c.a.map(n,(function(t){var n=t.filter,i=t.param,r=t.format,a=r(e);return n.updateParamValue(i,a)})):(console.warn("param key(".concat(t,") not exist!")),c.a.resolve())}}]),t}(),h=new d},2:function(t,e){},2032:function(t,e,n){"use strict";e["a"]={clamp:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return Math.max(e,Math.min(t,n))},getVectorRotator:function(t){var e=[Math.sin(t/180*Math.PI),Math.cos(t/180*Math.PI)],n=e[0],i=e[1];return function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r?[t*i-e*n,t*n+e*i]:[t*i+e*n,-t*n+e*i]}},radToDeg:function(t){return 180*t/Math.PI},degToRad:function(t){return t*Math.PI/180},intLimit:function(t,e){return(t%e+e)%e},getAngle:function(t,e,n,i,r){var a=Math.atan2(e-i,t-n),o=180*a/Math.PI;return o-=r,this.intLimit(o,360)},getRadius:function(t,e){return Math.sqrt(t*t+e*e)},getDxyByAngle:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{x:1,y:1},r=this.getRadius(t,e),a=Math.atan2(e,t)-n*Math.PI/180;return{dx:i.x*r*Math.cos(a),dy:i.y*r*Math.sin(a)}},getRotationPoint:function(t,e){var n=t.x,i=t.y,r=Math.sin(e),a=Math.cos(e);return{x:n*a-i*r,y:n*r+i*a}},getSkewPoint:function(t,e,n,i){var r=t.x-e.x,a=t.y-e.y;return{x:e.x+(r+Math.tan(n)*a),y:e.y+(a+Math.tan(i)*r)}},getScalePoint:function(t,e,n,i){var r=n<0?e.x-t.x+e.x:t.x,a=i<0?e.y-t.y+e.y:t.y;return{x:r*Math.abs(n),y:a*Math.abs(i)}}}},2171:function(t,e,n){t.exports=n.p+"img/message_active.6f4e2f6f.jpg"},"256d":function(t,e){t.exports='<div class="editor-mask-editor" @mousedown="activeOuterEdit" :style="boxStyle">\n    <div :style="imageStyle" class="editor-mask-editor-main">\n        <canvas v-if="isAnimationImage || model.isGif || isVideo" ref="bgCanvas" />\n\n        <img crossorigin v-else :src="editModel.url" />\n    </div>\n\n    <canvas class="editor-mask-editor-canvas" ref="canvas" />\n\n    <div class="editor-croper-grid editor-mask-editor-grid" :class="{active: showGrid}">\n        <i class="editor-croper-grid-x1"></i>\n        <i class="editor-croper-grid-x2"></i>\n        <i class="editor-croper-grid-y1"></i>\n        <i class="editor-croper-grid-y2"></i>\n        <slot name="watermark"></slot>\n    </div>\n</div>\n'},2784:function(t,e,n){"use strict";n("6104")},"2f4d":function(t,e,n){"use strict";n("b4b5")},"31c5":function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return a}));var i=n("937e"),r=function(){return Object(i["a"])()},a=function(t){return t&&t.indexOf(";base64")>0};e["a"]={uuid:r,isBase64:a}},"33ec":function(t,e,n){"use strict";n.d(e,"b",(function(){return h})),n.d(e,"a",(function(){return d}));n("d3b7"),n("159b"),n("b0c0"),n("b64b"),n("6062"),n("3ca3"),n("ddb0"),n("a630"),n("a15b"),n("4e82"),n("ac1f"),n("5319"),n("4de4");var i=n("2ef0"),r=n("925e"),a=500,o=/[\u0000\u0001\u0002\u0003\u0004\u0005\u0006\u0007\u0008\u0009\u000b\u000c\u000e\u000f\u0010\u0011\u0012\u0013\u0014\u0015\u0016\u0017\u0018\u0019\u001a\u001b\u001c\u001d\u001e\u001f\u007F]/gm,s=/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,c=/<br>|\r|\n/g,l={decimal:"0123456789.","upper-alpha":"ABCDEFGHIJKLMNOPQRSTUVWXYZ.","lower-alpha":"abcdefghijklmnopqrstuvwxyz.","cjk-ideographic":"一二三四五六七八九十、","decimal-leading-zero":"0123456789."};function u(t,e){var n=e.fontSubset||{},a=n.supportTypes,u=void 0===a?["text"]:a,d={},h=[];return r["a"].walkTemplet((function(t){var e=t.contents&&t.contents.length||t.content;-1!==u.indexOf(t.type)&&e&&h.push(t)}),!0,t),h.forEach((function(t){var n=t.contents,i=t.content,r=t.fontFamily;n=n&&n.length>0?n:[{content:i}],n.forEach((function(n){var i=e.fontsMap[r],a=e.fontsMap[n.fontFamily]||i;a&&(d[a.name]||(d[a.name]=e.fontSubset.defaultContent||""),d[a.name]+=n.content,i&&l[t.listStyle]&&(d[i.name]||(d[i.name]=""),d[i.name]+=l[t.listStyle]))}))})),Object.keys(d).forEach((function(t){d[t]=Object(i["unescape"])(d[t]),d[t]=new Set(d[t]),d[t]=Array.from(d[t]),d[t]=d[t].sort().join(""),d[t]=d[t].replace(c,"").replace(s,"").replace(o,"")})),d}function d(t,e){var n=u(t,e),i={},r=Object.keys(n).filter((function(t){var r=e.fontsMap[t],a=n[t],o=e.fontSubsetsMap[r.name]&&e.fontSubsetsMap[r.name].subsetContent;if(!o)return i[t]=a,!0;for(var s=0;s<a.length;s++){var c=a.charAt(s);if(-1===o.indexOf(c))return i[t]=n[t],!0}return!1}));return r.length?i:null}function h(t,e){var n=d(t,e);n&&e.fontSubset.getUrl&&Object.keys(n).forEach((function(t){var i=e.fontsMap[t],r=e.fontSubsetsMap[i.name];n[t]&&n[t].length<a?e.fontSubsetsMap[i.name]={loadType:r?r.loadType:"subset",subsetContent:n[t],subsetPromise:e.fontSubset.getUrl(i,n[t])}:delete e.fontSubsetsMap[i.name]}))}},3557:function(t,e){t.exports="<div\n    class=\"editor-element\"\n    :class=\"[\n        'editor-element-' + model.type,\n        model.lock ? 'editor-element-lock' : '',\n        model.hidden ? 'editor-element-hidden' : '',\n        model.frozen ? 'editor-element-frozen' : '',\n        model.$loaded ? '' : 'editor-element-loading',\n        model.$selected ? 'editor-element-selected' : '',\n        model.$editing ? 'editor-element-editing' : '',\n        errorMessage ? 'editor-element-error' : ''\n    ]\"\n    :style=\"[baseStyle, cssStyle]\"\n>\n    <div class=\"element-main\"></div>\n\n    <ElementCommon\n        :element=\"model\"\n        :options=\"options\"\n        :global=\"global\"\n        :editor=\"editor\"\n        :layout=\"editor.currentLayout\"\n        :hideBlink=\"hideBlink\"\n        :isShowBlink=\"isShowBlink\"\n        :bgNinePatch=\"bgNinePatch\"\n    />\n</div>\n"},"38ac":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("ac1f"),n("1276"),n("d3b7"),n("e25e"),n("13d5");function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0.0.0",e=String(t).split(".");while(e.length<3)e.push("0");return new function(n){var i=this;["major","minor","patch"].forEach((function(t,e){i[t]=parseInt(n[e],10)})),this._string=t,this._version=e,this.number=e.reduce((function(t,e){return t+=("000"+e).substr(-3,3),parseInt(t,10)}))}(e)}function r(t,e){return t=i(t),e=i(e),t.major>e.major||t.major===e.major&&t.minor>e.targetVersion||t.major===e.major&&t.minor===e.minor&&t.patch>=e.patch}e["b"]={parse:i,checkVersion:r}},3999:function(t,e,n){},"39aa":function(t,e,n){t.exports=n.p+"img/wx_tip_share_2x.22217fbd.png"},"3a49":function(t,e,n){},"3a93":function(t,e,n){"use strict";n.d(e,"b",(function(){return A})),n.d(e,"a",(function(){return T}));var i=n("262e"),r=n("2caf"),a=n("d4ec"),o=n("bee2"),s=(n("2ca0"),n("ac1f"),n("5319"),n("c7eb")),c=n("b85c"),l=n("1da1"),u=(n("d3b7"),n("3ca3"),n("10d1"),n("ddb0"),n("6062"),n("159b"),n("a434"),function(t){console.error(t)}),d=new WeakMap,h=new WeakMap,f=new Set;function m(t){return null===t.signal}function g(t,e){return p.apply(this,arguments)}function p(){return p=Object(l["a"])(Object(s["a"])().mark((function t(e,n){var i,r,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.signal,r=e.slot,a=e.thisArg,t.prev=1,t.abrupt("return",r.call(a,i.sender,n));case 5:t.prev=5,t.t0=t["catch"](1),u(t.t0);case 8:return t.abrupt("return",null);case 9:case"end":return t.stop()}}),t,null,[[1,5]])}))),p.apply(this,arguments)}function v(t){var e=[];t.forEach((function(t,n){m(t)&&e.push(n)}));while(e.length){var n=e.pop();t.splice(n,1)}}function b(t,e,n,i){var r,a=Object(c["a"])(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o.signal===e&&o.slot===n&&o.thisArg===i)return o}}catch(s){a.e(s)}finally{a.f()}return null}function y(){f.forEach(v),f.clear()}function w(t){0===f.size&&requestAnimationFrame(y),f.add(t)}function _(t,e,n){n=n||void 0;var i=d.get(t.sender);if(i||(i=[],d.set(t.sender,i)),b(i,t,e,n))return!1;var r=n||e,a=h.get(r);a||(a=[],h.set(r,a));var o={signal:t,slot:e,thisArg:n};return i.push(o),a.push(o),!0}function x(t,e,n){n=n||void 0;var i=d.get(t.sender);if(!i||0===i.length)return!1;var r=b(i,t,e,n);if(!r)return!1;var a=n||e,o=h.get(a);return r.signal=null,w(i),w(o),!0}function k(t,e){var n=d.get(t.sender);if(!n||0===n.length)return Promise.resolve();for(var i=[],r=0,a=n.length;r<a;++r){var o=n[r];o.signal===t&&i.push(g(o,e))}return Promise.all(i)}var E=function(){function t(e){Object(a["a"])(this,t),this.sender=e}return Object(o["a"])(t,[{key:"connect",value:function(t,e){return _(this,t,e)}},{key:"disconnect",value:function(t,e){return x(this,t,e)}},{key:"emit",value:function(){var t=Object(l["a"])(Object(s["a"])().mark((function t(e){var n=this;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.before){t.next=3;break}return t.next=3,this.before.emit(e);case 3:return t.abrupt("return",k(this,e).then((function(){n.after&&n.after.emit(e)})));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),O=function(){function t(e){Object(a["a"])(this,t),this.od=e,this.signals={}}return Object(o["a"])(t,[{key:"createSignal",value:function(t){var e=new E(this.od);return this.signals[t]=e,e}},{key:"getSignal",value:function(t){return this.signals[t]}}]),t}(),S=function(t){Object(i["a"])(n,t);var e=Object(r["a"])(n);function n(t){var i;return Object(a["a"])(this,n),i=e.call(this,t),i.createSignal("onPluginLoaded"),i.createSignal("onEditorCreated"),i.createSignal("onHeaderbarItemChanged"),i.createSignal("onPanelChanged"),i.createSignal("onComponentShowInPortalRequested"),i.createSignal("onPauseBackgroundAudio"),i}return Object(o["a"])(n)}(O),j=function(t){Object(i["a"])(n,t);var e=Object(r["a"])(n);function n(t){var i;return Object(a["a"])(this,n),i=e.call(this,t),i.createSignal("onGameStart"),i.createSignal("onGamePause"),i.createSignal("onGameRestart"),i.createSignal("onGameReset"),i.createSignal("onGameStop"),i.createSignal("onGameEnd"),i.createSignal("onUpdateGameStatus"),i.createSignal("onChangeResources"),i}return Object(o["a"])(n)}(O),I={get:function(t,e){var n=t[e];if("string"===typeof e&&e.startsWith("on")){if(n=t.getSignal(e),n)return n;if(e.startsWith("onBefore")){var i=e.replace(/^onBefore/,"on"),r=t.getSignal(i),a=t.createSignal(e);return r.before=a,a}if(e.startsWith("onAfter")){var o=e.replace(/^onAfter/,"on"),s=t.getSignal(o),c=t.createSignal(e);return s.after=c,c}}return n}};function A(t){return new Proxy(new S(t),I)}function T(t){return new Proxy(new j(t),I)}},"3c8c":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n("d3b7"),n("159b");var i="_eventBus",r=function(t){var e=t.constructor;while(e.super)e=e.super;return e},a={computed:{$events:function(){var t=this;while(t&&!Object.prototype.hasOwnProperty.call(t,i)){if(t.editor&&t.editor.layouts){t=t.editor;break}t=t.$parent}return t&&t[i]||this.$createEventBus()}},methods:{$createEventBus:function(){if(!Object.prototype.hasOwnProperty.call(this,i)){var t=r(this);this[i]=new t}return this[i]}}};function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Array.isArray(e)||(e=[e]);var n=t.extend(a),i={},r=function t(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.forEach((function(e){var a=e.events;for(var o in e.mixins&&t(e.mixins,!1),a)i[o]||(i[o]=[]),i[o].push(a[o]);r&&(n=n.extend(e))}))};return r(e),n=n.extend({created:function(){var t=this,e=this.$eventStore={},n=this.$events;if(n){var r=function(r){t.$eventStore[r]=[],i[r].forEach((function(i){var a=i.bind(t);e[r].push(a),n.$on(r,a)}))};for(var a in i)r(a)}},beforeDestroy:function(){var t=this.$eventStore,e=this.$events;if(e){var n=function(n){t[n].forEach((function(t){e.$off(n,t)}))};for(var i in t)n(i)}}}),n}},"3d6e":function(t,e,n){},"3de7":function(t,e){t.exports='<div\n    ref="container"\n    class="editor-container"\n    tabindex="-1"\n    :class="[\n        \'editor-container-\' + mode,\n        global && global.$loaded ? \'editor-loaded\' : null,\n        global && global.$rendered ? \'editor-rendered\' : null,\n        global && global.layout ? \'editor-global-layout\' : null,\n        global && global.$backgroundLoaded ? \'editor-global-layout-loaded\' : null\n    ]"\n    :style="{\n        paddingTop: containerRect.topOffset + \'px\'\n    }"\n>\n    \x3c!-- Shell --\x3e\n    <div class="editor-shell-wrap" :style="{\n        padding: containerRect.paddingCss,\n        height: zoom * height + \'px\',\n        width: zoom * width + \'px\'\n    }">\n        <div\n            v-if="global && currentLayout"\n            class="editor-shell"\n            :class="options.canvasOverflowHidden ? \'\' : \'editor-overflow-mask\'"\n            :style="{\n                height: zoom * height + \'px\',\n                width: zoom * width + \'px\'\n            }"\n        >\n        \n            <editor-canvas\n                ref=\'canvas\'\n                v-if="mode==\'design\' || mode==\'preview\'"\n                :global="global"\n                :options="options"\n                :layouts="layouts"\n                :current-layout="currentLayout" />\n\n            <editor-mirror\n                v-if="mode==\'mirror\'"\n                :global="global"\n                :options="options"\n                :layouts="layouts"\n                :current-layout="currentLayout" />\n\n            <editor-flow\n                v-if="mode==\'flow\'"\n                :global="global"\n                :options="options"\n                :layouts="layouts"\n                :current-layout="currentLayout"\n                :style="{\n                    width: width * global.zoom + \'px\',\n                    height: height * global.zoom + \'px\'\n                }"\n            >\n            </editor-flow>\n\n            <hover\n                ref="hover"\n                :global="global"\n                :options="options"\n                :current-element="currentElement" />\n            \n            <transform\n                ref=\'transform\'\n                v-if="editable && currentElement && currentElement.type !== \'$background-croper\'"\n                :global="global"\n                :options="options"\n                :current-layout="currentLayout"\n                :model.sync="currentElement"\n                :sub-model.sync="currentSubElement" />\n\n            <toolbar\n                ref=\'toolbar\'\n                v-if="editable && currentElement"\n                :global="global"\n                :options="options"\n                :current-layout="currentLayout"\n                :model.sync="currentElement"\n                :sub-model.sync="currentSubElement" />\n\n            <guider\n                ref=\'guider\'\n                v-if="editable && options.showGuider"\n                :currentElement="currentElement"\n                :currentSubElement="currentSubElement"\n                :options="options"\n                :layout="currentLayout"\n                :global="global" />\n\n            <resize-guider\n                ref=\'resize-guider\'\n                v-if="editable && options.showResizeGuider"\n                :model="currentElement"\n                :layout="currentLayout"\n                :options="options"\n                :global="global" />\n\n            <mask-editor\n                ref=\'croper\'\n                v-if="editable && currentCropElement"\n                :model.sync="currentCropElement"\n                :current-element="currentElement"\n                :current-layout="currentLayout"\n                :global="global"\n                :options="options">\n                <watermark\n                    slot="watermark"\n                    v-if="currentCropElement.watermarkEnable"\n                    :global="global"\n                    :options="options"\n                    :model="currentElement" />\n            </mask-editor>\n\n            <mask-editor\n                ref=\'maskEditor\'\n                v-if="editable && currentEditMask"\n                :model.sync="currentEditMask"\n                :current-element="currentElement"\n                :current-layout="currentLayout"\n                :global="global"\n                :options="options">\n                <watermark\n                    slot="watermark"\n                    v-if="currentEditMask.watermarkEnable"\n                    :global="global"\n                    :options="options"\n                    :model="currentElement" />\n            </mask-editor>\n\n            <background-editor\n                ref="backgroundEditor"\n                v-if="editable && currentLayout && currentLayout.$backgroundEditing && currentLayout.backgroundImage"\n                :layout="currentLayout"\n                :global="global"\n                :options="options" >\n                <watermark\n                    slot="watermark"\n                    v-if="currentLayout.backgroundWatermarkEnable"\n                    :global="global"\n                    :options="options"\n                    :layout="currentLayout" />\n            >\n            </background-editor>\n\n            <watermark-editor\n                ref="watermarkEditor"\n                v-if="editable && currentEditWatermark" \n                :model.sync="currentEditWatermark"\n                :current-element="currentElement"\n                :global="global"\n                :options="options"/>\n            <tips\n                ref="tips"\n                :global="global"\n                :options="options"\n                :current-element="currentElement" />\n            \n            <bleeding-line\n                v-if="options.bleedingLine.show"\n                :layout="currentLayout"\n                :global="global"\n                :options="options" />\n\n            <temp-group\n                ref="tempGroup"\n                :current-element="currentElement"\n                :currentSubElement="currentSubElement"\n                :layout="currentLayout"\n                :global="global"\n                :options="options" />\n\n            <slot name="shell-slot"></slot>\n        </div>\n    </div>\n\n    <selector\n        ref=\'selector\'\n        v-if="editable && currentLayout && !(currentLayout.$backgroundEditing && currentLayout.backgroundImageInfo)"\n        :current-element="currentElement"\n        :layout="currentLayout" />\n\n    <contextmenu\n        ref=\'contextmenu\'\n        v-if="editable && currentLayout" />\n\n    <highlight\n        :current-layout="currentLayout" />\n\n    <div class="editor-slot">\n        <slot></slot>\n    </div>\n\n</div>'},"3e63":function(t,e,n){},"3e6e":function(t,e,n){},"413b":function(t){t.exports=JSON.parse('{"version":"7.2.1","name":"@gaoding/editor-framework","description":"A poster editor based on Vue.js","author":"xiaomi <admin@laoshu133.com>","license":"UNLICENSED","repository":{"type":"git","url":"git@git.huanleguang.com:danchaofan/vue-poster-editor.git"},"maintainers":[{"name":"liulangren","email":"liulangren@gaoding.com"},{"name":"juanbai","email":"juanbai@gaoding.com"},{"name":"facai","email":"facai@gaoding.com"},{"name":"kuake","email":"kuake@gaoding.com"}],"scripts":{"dev":"cd ../editor-ui-v2 && npm run dev","dev2":"vue-cli-service serve src/index.js","build":"node scripts/build.js","changelog":"node scripts/changelog.js","analyse":"cross-env ANALYSE_BUNDLE=true npm run dev","dist":"cross-env NODE_ENV=production npm run build","release":"./scripts/release.sh","test":"ava --verbose","e2e-dev":"webpack-dev-server --config test/e2e-entry/webpack.config.js --disable-host-check --host 0.0.0.0 --mode development --port 8100","e2e-repeater":"repeater test/e2e-cases --diff-threshold 1","e2e-pre":"http-server -p 8100 &","e2e-build":"webpack --config test/e2e-entry/webpack.config.js","e2e":"npm run e2e-build && npm run e2e-pre && npm run e2e-repeater && pkill -f http-server","matcher":"node test/matcher/index.js","lint":"eslint src","link":"npm run build && node scripts/link.js","reporter":"nyc npm test && nyc report --reporter=html","test:watch":"ava --watch --verbose","docs":"node_modules/.bin/jsdoc -c jsdoc.json JSDOC.md","publish-hlg":"npm publish --registry https://npm.huanleguang.com","publish-gd":"npm publish --registry https://registry-npm.gaoding.com","prepublishOnly":"rm -rf lib && npx yarn build"},"main":"./lib/index.js","files":["README.md","vue-poster-editor.js","index.*","dist","src","lib"],"ava":{"files":"./test/**/*-test.js"},"dependencies":{"@gaoding/beam-renderers":"^0.1.2","@gaoding/editor-illusion":"1.0.0","@gaoding/editor-utils":"1.1.37","animejs":"^3.1.0","bin-pack":"1.0.2","bluebird":"^3.5.5","crypto-js":"^3.1.8","fontfaceobserver":"^2.0.5","lodash":"^4.17.15","lru_map":"^0.3.3","pica":"^4.1.1","quick-gif.js":"0.0.1","sat":"0.8.0","stateshot":"^1.2.2","tinycolor2":"^1.4.1","vue":"^2.6.11","vue-slider-component":"^3.2.10","is-hotkey":"^0.2.0"},"devDependencies":{"@babel/cli":"^7.12.8","@babel/core":"^7.12.10","@babel/plugin-proposal-class-properties":"^7.12.1","@babel/plugin-transform-runtime":"^7.12.10","@babel/preset-env":"^7.12.10","ava":"^3.14.0","axios":"^0.19.0","babel-loader":"^7.1.5","babel-plugin-add-module-exports":"^0.2.1","babel-plugin-lodash":"^3.3.4","babel-plugin-transform-inline-environment-variables":"^6.8.0","babel-plugin-transform-remove-console":"^6.9.4","babel-plugin-transform-require-ignore":"^0.0.2","css-loader":"^0.25.0","docdash":"^0.4.0","file-loader":"^1.1.11","html-loader":"^0.4.4","http-server":"^0.11.1","jsdoc":"^3.6.2","jsdom":"11.12.0","less":"^3.9.0","less-loader":"^5.0.0","nyc":"^13.3.0","pixelmatch":"^4.0.2","pngjs":"^3.3.3","postcss":"^5.2.5","postcss-cssnext":"^2.11.0","postcss-inline-svg":"^2.3.1","postcss-loader":"^2.1.5","postcss-url":"^5.1.2","puppeteer-core":"^1.11.0","repeater.js":"0.3.1","rimraf":"^2.5.4","style-loader":"^0.13.1","url-loader":"^0.5.7","vue-loader":"^15.2.6","vue-template-compiler":"^2.6.11","webpack":"^4.35.3","webpack-bundle-analyzer":"^2.13.1","webpack-cli":"^3.1.0","webpack-dev-server":"^3.2.1"}}')},"41f1":function(t){t.exports=JSON.parse('{"prompt":{"copy":{"title":"Copy Successfully","message":"“{content}” copied","confirm":"Close"},"shareImage":{"title":"Generation Error","message":"Image generation error, please wait and try again","confirm":"Close"}}}')},"41fc":function(t,e,n){"use strict";n("ace4"),n("d3b7"),n("5cc6"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("fa9e"),n("77d9"),n("fb6a"),n("fb2c"),n("84c3"),n("4de4"),n("25f0"),n("4e82");var i=n("d7ac"),r=n.n(i),a={toRGBA8:function(t){var e=t.width,n=t.height;if(null==t.tabs.acTL)return[a.toRGBA8.decodeImage(t.data,e,n,t).buffer];var i=[];null==t.frames[0].data&&(t.frames[0].data=t.data);for(var r=e*n*4,o=new Uint8Array(r),s=new Uint8Array(r),c=new Uint8Array(r),l=0;l<t.frames.length;l++){var u=t.frames[l],d=u.rect.x,h=u.rect.y,f=u.rect.width,m=u.rect.height,g=a.toRGBA8.decodeImage(u.data,f,m,t);if(0!=l)for(var p=0;p<r;p++)c[p]=o[p];if(0==u.blend?a._copyTile(g,f,m,o,e,n,d,h,0):1==u.blend&&a._copyTile(g,f,m,o,e,n,d,h,1),i.push(o.buffer.slice(0)),0==u.dispose);else if(1==u.dispose)a._copyTile(s,f,m,o,e,n,d,h,0);else if(2==u.dispose)for(p=0;p<r;p++)o[p]=c[p]}return i}};a.toRGBA8.decodeImage=function(t,e,n,i){var r=e*n,o=a.decode._getBPP(i),s=Math.ceil(e*o/8),c=new Uint8Array(4*r),l=new Uint32Array(c.buffer),u=i.ctype,d=i.depth,h=a._bin.readUshort;Date.now();if(6==u){var f=r<<2;if(8==d)for(var m=0;m<f;m+=4)c[m]=t[m],c[m+1]=t[m+1],c[m+2]=t[m+2],c[m+3]=t[m+3];if(16==d)for(m=0;m<f;m++)c[m]=t[m<<1]}else if(2==u){var g=i.tabs["tRNS"];if(null==g){if(8==d)for(m=0;m<r;m++){var p=3*m;l[m]=255<<24|t[p+2]<<16|t[p+1]<<8|t[p]}if(16==d)for(m=0;m<r;m++){p=6*m;l[m]=255<<24|t[p+4]<<16|t[p+2]<<8|t[p]}}else{var v=g[0],b=g[1],y=g[2];if(8==d)for(m=0;m<r;m++){var w=m<<2;p=3*m;l[m]=255<<24|t[p+2]<<16|t[p+1]<<8|t[p],t[p]==v&&t[p+1]==b&&t[p+2]==y&&(c[w+3]=0)}if(16==d)for(m=0;m<r;m++){w=m<<2,p=6*m;l[m]=255<<24|t[p+4]<<16|t[p+2]<<8|t[p],h(t,p)==v&&h(t,p+2)==b&&h(t,p+4)==y&&(c[w+3]=0)}}}else if(3==u){var _=i.tabs["PLTE"],x=i.tabs["tRNS"],k=x?x.length:0;if(1==d)for(var E=0;E<n;E++){var O=E*s,S=E*e;for(m=0;m<e;m++){w=S+m<<2;var j=t[O+(m>>3)]>>7-((7&m)<<0)&1,I=3*j;c[w]=_[I],c[w+1]=_[I+1],c[w+2]=_[I+2],c[w+3]=j<k?x[j]:255}}if(2==d)for(E=0;E<n;E++)for(O=E*s,S=E*e,m=0;m<e;m++){w=S+m<<2,j=t[O+(m>>2)]>>6-((3&m)<<1)&3,I=3*j;c[w]=_[I],c[w+1]=_[I+1],c[w+2]=_[I+2],c[w+3]=j<k?x[j]:255}if(4==d)for(E=0;E<n;E++)for(O=E*s,S=E*e,m=0;m<e;m++){w=S+m<<2,j=t[O+(m>>1)]>>4-((1&m)<<2)&15,I=3*j;c[w]=_[I],c[w+1]=_[I+1],c[w+2]=_[I+2],c[w+3]=j<k?x[j]:255}if(8==d)for(m=0;m<r;m++){w=m<<2,j=t[m],I=3*j;c[w]=_[I],c[w+1]=_[I+1],c[w+2]=_[I+2],c[w+3]=j<k?x[j]:255}}else if(4==u){if(8==d)for(m=0;m<r;m++){w=m<<2;var A=m<<1,T=t[A];c[w]=T,c[w+1]=T,c[w+2]=T,c[w+3]=t[A+1]}if(16==d)for(m=0;m<r;m++){w=m<<2,A=m<<2,T=t[A];c[w]=T,c[w+1]=T,c[w+2]=T,c[w+3]=t[A+2]}}else if(0==u)for(v=i.tabs["tRNS"]?i.tabs["tRNS"]:-1,E=0;E<n;E++){var C=E*s,P=E*e;if(1==d)for(var $=0;$<e;$++){T=255*(t[C+($>>>3)]>>>7-(7&$)&1);var M=T==255*v?0:255;l[P+$]=M<<24|T<<16|T<<8|T}else if(2==d)for($=0;$<e;$++){T=85*(t[C+($>>>2)]>>>6-((3&$)<<1)&3),M=T==85*v?0:255;l[P+$]=M<<24|T<<16|T<<8|T}else if(4==d)for($=0;$<e;$++){T=17*(t[C+($>>>1)]>>>4-((1&$)<<2)&15),M=T==17*v?0:255;l[P+$]=M<<24|T<<16|T<<8|T}else if(8==d)for($=0;$<e;$++){T=t[C+$],M=T==v?0:255;l[P+$]=M<<24|T<<16|T<<8|T}else if(16==d)for($=0;$<e;$++){T=t[C+($<<1)],M=h(t,C+($<<m))==v?0:255;l[P+$]=M<<24|T<<16|T<<8|T}}return c},a.decode=function(t){for(var e,n=new Uint8Array(t),i=8,r=a._bin,o=r.readUshort,s=r.readUint,c={tabs:{},frames:[]},l=new Uint8Array(n.length),u=0,d=0,h=[137,80,78,71,13,10,26,10],f=0;f<8;f++)if(n[f]!=h[f])throw"The input is not a PNG file!";while(i<n.length){var m=r.readUint(n,i);i+=4;var g=r.readASCII(n,i,4);if(i+=4,"IHDR"==g)a.decode._IHDR(n,i,c);else if("CgBI"==g)c.tabs[g]=n.slice(i,i+4);else if("IDAT"==g){for(f=0;f<m;f++)l[u+f]=n[i+f];u+=m}else if("acTL"==g)c.tabs[g]={num_frames:s(n,i),num_plays:s(n,i+4)},e=new Uint8Array(n.length);else if("fcTL"==g){if(0!=d){var p=c.frames[c.frames.length-1];p.data=a.decode._decompress(c,e.slice(0,d),p.rect.width,p.rect.height),d=0}var v={x:s(n,i+12),y:s(n,i+16),width:s(n,i+4),height:s(n,i+8)},b=o(n,i+22);b=o(n,i+20)/(0==b?100:b);var y={rect:v,delay:Math.round(1e3*b),dispose:n[i+24],blend:n[i+25]};c.frames.push(y)}else if("fdAT"==g){for(f=0;f<m-4;f++)e[d+f]=n[i+f+4];d+=m-4}else if("pHYs"==g)c.tabs[g]=[r.readUint(n,i),r.readUint(n,i+4),n[i+8]];else if("cHRM"==g){c.tabs[g]=[];for(f=0;f<8;f++)c.tabs[g].push(r.readUint(n,i+4*f))}else if("tEXt"==g||"zTXt"==g){null==c.tabs[g]&&(c.tabs[g]={});var w=r.nextZero(n,i),_=r.readASCII(n,i,w-i),x=i+m-w-1;if("tEXt"==g)S=r.readASCII(n,w+1,x);else{var k=a.decode._inflate(n.slice(w+2,w+2+x));S=r.readUTF8(k,0,k.length)}c.tabs[g][_]=S}else if("iTXt"==g){null==c.tabs[g]&&(c.tabs[g]={});w=0;var E=i;w=r.nextZero(n,E);_=r.readASCII(n,E,w-E);E=w+1;var O=n[E];n[E+1];E+=2,w=r.nextZero(n,E);r.readASCII(n,E,w-E);E=w+1,w=r.nextZero(n,E);var S;r.readUTF8(n,E,w-E);E=w+1;x=m-(E-i);if(0==O)S=r.readUTF8(n,E,x);else{k=a.decode._inflate(n.slice(E,E+x));S=r.readUTF8(k,0,k.length)}c.tabs[g][_]=S}else if("PLTE"==g)c.tabs[g]=r.readBytes(n,i,m);else if("hIST"==g){var j=c.tabs["PLTE"].length/3;c.tabs[g]=[];for(f=0;f<j;f++)c.tabs[g].push(o(n,i+2*f))}else if("tRNS"==g)3==c.ctype?c.tabs[g]=r.readBytes(n,i,m):0==c.ctype?c.tabs[g]=o(n,i):2==c.ctype&&(c.tabs[g]=[o(n,i),o(n,i+2),o(n,i+4)]);else if("gAMA"==g)c.tabs[g]=r.readUint(n,i)/1e5;else if("sRGB"==g)c.tabs[g]=n[i];else if("bKGD"==g)0==c.ctype||4==c.ctype?c.tabs[g]=[o(n,i)]:2==c.ctype||6==c.ctype?c.tabs[g]=[o(n,i),o(n,i+2),o(n,i+4)]:3==c.ctype&&(c.tabs[g]=n[i]);else if("IEND"==g)break;i+=m;r.readUint(n,i);i+=4}if(0!=d){p=c.frames[c.frames.length-1];p.data=a.decode._decompress(c,e.slice(0,d),p.rect.width,p.rect.height),d=0}return c.data=a.decode._decompress(c,l,c.width,c.height),delete c.compress,delete c.interlace,delete c.filter,c},a.decode._decompress=function(t,e,n,i){Date.now();var r=a.decode._getBPP(t),o=Math.ceil(n*r/8),s=new Uint8Array((o+1+t.interlace)*i);e=t.tabs["CgBI"]?a.inflateRaw(e,s):a.decode._inflate(e,s);Date.now();return 0==t.interlace?e=a.decode._filterZero(e,t,0,n,i):1==t.interlace&&(e=a.decode._readInterlace(e,t)),e},a.decode._inflate=function(t,e){var n=a["inflateRaw"](new Uint8Array(t.buffer,2,t.length-6),e);return n},a.inflateRaw=function(){var t={H:{}};return t.H.N=function(e,n){var i,r,a=Uint8Array,o=0,s=0,c=0,l=0,u=0,d=0,h=0,f=0,m=0;if(3==e[0]&&0==e[1])return n||new a(0);var g=t.H,p=g.b,v=g.e,b=g.R,y=g.n,w=g.A,_=g.Z,x=g.m,k=null==n;k&&(n=new a(e.length>>>2<<5));while(0==o)if(o=p(e,m,1),s=p(e,m+1,2),m+=3,0!=s){if(k&&(n=t.H.W(n,f+(1<<17))),1==s&&(i=x.J,r=x.h,d=511,h=31),2==s){c=v(e,m,5)+257,l=v(e,m+5,5)+1,u=v(e,m+10,4)+4,m+=14;for(var E=1,O=0;O<38;O+=2)x.Q[O]=0,x.Q[O+1]=0;for(O=0;O<u;O++){var S=v(e,m+3*O,3);x.Q[1+(x.X[O]<<1)]=S,S>E&&(E=S)}m+=3*u,y(x.Q,E),w(x.Q,E,x.u),i=x.w,r=x.d,m=b(x.u,(1<<E)-1,c+l,e,m,x.v);var j=g.V(x.v,0,c,x.C);d=(1<<j)-1;var I=g.V(x.v,c,l,x.D);h=(1<<I)-1,y(x.C,j),w(x.C,j,i),y(x.D,I),w(x.D,I,r)}while(1){var A=i[_(e,m)&d];m+=15&A;var T=A>>>4;if(T>>>8==0)n[f++]=T;else{if(256==T)break;var C=f+T-254;if(T>264){var P=x.q[T-257];C=f+(P>>>3)+v(e,m,7&P),m+=7&P}var $=r[_(e,m)&h];m+=15&$;var M=$>>>4,R=x.c[M],L=(R>>>4)+p(e,m,15&R);m+=15&R;while(f<C)n[f]=n[f++-L],n[f]=n[f++-L],n[f]=n[f++-L],n[f]=n[f++-L];f=C}}}else{0!=(7&m)&&(m+=8-(7&m));var U=4+(m>>>3),z=e[U-4]|e[U-3]<<8;k&&(n=t.H.W(n,f+z)),n.set(new a(e.buffer,e.byteOffset+U,z),f),m=U+z<<3,f+=z}return n.length==f?n:n.slice(0,f)},t.H.W=function(t,e){var n=t.length;if(e<=n)return t;var i=new Uint8Array(n<<1);return i.set(t,0),i},t.H.R=function(e,n,i,r,a,o){var s=t.H.e,c=t.H.Z,l=0;while(l<i){var u=e[c(r,a)&n];a+=15&u;var d=u>>>4;if(d<=15)o[l]=d,l++;else{var h=0,f=0;16==d?(f=3+s(r,a,2),a+=2,h=o[l-1]):17==d?(f=3+s(r,a,3),a+=3):18==d&&(f=11+s(r,a,7),a+=7);var m=l+f;while(l<m)o[l]=h,l++}}return a},t.H.V=function(t,e,n,i){var r=0,a=0,o=i.length>>>1;while(a<n){var s=t[a+e];i[a<<1]=0,i[1+(a<<1)]=s,s>r&&(r=s),a++}while(a<o)i[a<<1]=0,i[1+(a<<1)]=0,a++;return r},t.H.n=function(e,n){for(var i,r,a,o,s=t.H.m,c=e.length,l=s.j,u=0;u<=n;u++)l[u]=0;for(u=1;u<c;u+=2)l[e[u]]++;var d=s.K;for(i=0,l[0]=0,r=1;r<=n;r++)i=i+l[r-1]<<1,d[r]=i;for(a=0;a<c;a+=2)o=e[a+1],0!=o&&(e[a]=d[o],d[o]++)},t.H.A=function(e,n,i){for(var r=e.length,a=t.H.m,o=a.r,s=0;s<r;s+=2)if(0!=e[s+1]){var c=s>>1,l=e[s+1],u=c<<4|l,d=n-l,h=e[s]<<d,f=h+(1<<d);while(h!=f){var m=o[h]>>>15-n;i[m]=u,h++}}},t.H.l=function(e,n){for(var i=t.H.m.r,r=15-n,a=0;a<e.length;a+=2){var o=e[a]<<n-e[a+1];e[a]=i[o]>>>r}},t.H.M=function(t,e,n){n<<=7&e;var i=e>>>3;t[i]|=n,t[i+1]|=n>>>8},t.H.I=function(t,e,n){n<<=7&e;var i=e>>>3;t[i]|=n,t[i+1]|=n>>>8,t[i+2]|=n>>>16},t.H.e=function(t,e,n){return(t[e>>>3]|t[1+(e>>>3)]<<8)>>>(7&e)&(1<<n)-1},t.H.b=function(t,e,n){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)&(1<<n)-1},t.H.Z=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)},t.H.i=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16|t[3+(e>>>3)]<<24)>>>(7&e)},t.H.m=function(){var t=Uint16Array,e=Uint32Array;return{K:new t(16),j:new t(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new t(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new e(32),J:new t(512),_:[],h:new t(32),$:[],w:new t(32768),C:[],v:[],d:new t(32768),D:[],u:new t(512),Q:[],r:new t(32768),s:new e(286),Y:new e(30),a:new e(19),t:new e(15e3),k:new t(65536),g:new t(32768)}}(),function(){for(var e=t.H.m,n=32768,i=0;i<n;i++){var r=i;r=(2863311530&r)>>>1|(1431655765&r)<<1,r=(3435973836&r)>>>2|(858993459&r)<<2,r=(4042322160&r)>>>4|(252645135&r)<<4,r=(4278255360&r)>>>8|(16711935&r)<<8,e.r[i]=(r>>>16|r<<16)>>>17}function a(t,e,n){while(0!=e--)t.push(0,n)}for(i=0;i<32;i++)e.q[i]=e.S[i]<<3|e.T[i],e.c[i]=e.p[i]<<4|e.z[i];a(e._,144,8),a(e._,112,9),a(e._,24,7),a(e._,8,8),t.H.n(e._,9),t.H.A(e._,9,e.J),t.H.l(e._,9),a(e.$,32,5),t.H.n(e.$,5),t.H.A(e.$,5,e.h),t.H.l(e.$,5),a(e.Q,19,0),a(e.C,286,0),a(e.D,30,0),a(e.v,320,0)}(),t.H.N}(),a.decode._readInterlace=function(t,e){var n=e.width,i=e.height,r=a.decode._getBPP(e),o=r>>3,s=Math.ceil(n*r/8),c=new Uint8Array(i*s),l=0,u=[0,0,4,0,2,0,1],d=[0,4,0,2,0,1,0],h=[8,8,8,4,4,2,2],f=[8,8,4,4,2,2,1],m=0;while(m<7){var g=h[m],p=f[m],v=0,b=0,y=u[m];while(y<i)y+=g,b++;var w=d[m];while(w<n)w+=p,v++;var _=Math.ceil(v*r/8);a.decode._filterZero(t,e,l,v,b);var x=0,k=u[m];while(k<i){var E=d[m],O=l+x*_<<3;while(E<n){if(1==r){var S=t[O>>3];S=S>>7-(7&O)&1,c[k*s+(E>>3)]|=S<<7-((7&E)<<0)}if(2==r){S=t[O>>3];S=S>>6-(7&O)&3,c[k*s+(E>>2)]|=S<<6-((3&E)<<1)}if(4==r){S=t[O>>3];S=S>>4-(7&O)&15,c[k*s+(E>>1)]|=S<<4-((1&E)<<2)}if(r>=8)for(var j=k*s+E*o,I=0;I<o;I++)c[j+I]=t[(O>>3)+I];O+=r,E+=p}x++,k+=g}v*b!=0&&(l+=b*(1+_)),m+=1}return c},a.decode._getBPP=function(t){var e=[1,null,3,1,2,null,4][t.ctype];return e*t.depth},a.decode._filterZero=function(t,e,n,i,r){var o=a.decode._getBPP(e),s=Math.ceil(i*o/8),c=a.decode._paeth;o=Math.ceil(o/8);var l=0,u=1,d=t[n],h=0;if(d>1&&(t[n]=[0,0,1][d-2]),3==d)for(h=o;h<s;h++)t[h+1]=t[h+1]+(t[h+1-o]>>>1)&255;for(var f=0;f<r;f++)if(l=n+f*s,u=l+f+1,d=t[u-1],h=0,0==d)for(;h<s;h++)t[l+h]=t[u+h];else if(1==d){for(;h<o;h++)t[l+h]=t[u+h];for(;h<s;h++)t[l+h]=t[u+h]+t[l+h-o]}else if(2==d)for(;h<s;h++)t[l+h]=t[u+h]+t[l+h-s];else if(3==d){for(;h<o;h++)t[l+h]=t[u+h]+(t[l+h-s]>>>1);for(;h<s;h++)t[l+h]=t[u+h]+(t[l+h-s]+t[l+h-o]>>>1)}else{for(;h<o;h++)t[l+h]=t[u+h]+c(0,t[l+h-s],0);for(;h<s;h++)t[l+h]=t[u+h]+c(t[l+h-o],t[l+h-s],t[l+h-o-s])}return t},a.decode._paeth=function(t,e,n){var i=t+e-n,r=i-t,a=i-e,o=i-n;return r*r<=a*a&&r*r<=o*o?t:a*a<=o*o?e:n},a.decode._IHDR=function(t,e,n){var i=a._bin;n.width=i.readUint(t,e),e+=4,n.height=i.readUint(t,e),e+=4,n.depth=t[e],e++,n.ctype=t[e],e++,n.compress=t[e],e++,n.filter=t[e],e++,n.interlace=t[e],e++},a._bin={nextZero:function(t,e){while(0!=t[e])e++;return e},readUshort:function(t,e){return t[e]<<8|t[e+1]},writeUshort:function(t,e,n){t[e]=n>>8&255,t[e+1]=255&n},readUint:function(t,e){return 16777216*t[e]+(t[e+1]<<16|t[e+2]<<8|t[e+3])},writeUint:function(t,e,n){t[e]=n>>24&255,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=255&n},readASCII:function(t,e,n){for(var i="",r=0;r<n;r++)i+=String.fromCharCode(t[e+r]);return i},writeASCII:function(t,e,n){for(var i=0;i<n.length;i++)t[e+i]=n.charCodeAt(i)},readBytes:function(t,e,n){for(var i=[],r=0;r<n;r++)i.push(t[e+r]);return i},pad:function(t){return t.length<2?"0"+t:t},readUTF8:function(t,e,n){for(var i,r="",o=0;o<n;o++)r+="%"+a._bin.pad(t[e+o].toString(16));try{i=decodeURIComponent(r)}catch(s){return a._bin.readASCII(t,e,n)}return i}},a._copyTile=function(t,e,n,i,r,a,o,s,c){for(var l=Math.min(e,r),u=Math.min(n,a),d=0,h=0,f=0;f<u;f++)for(var m=0;m<l;m++)if(o>=0&&s>=0?(d=f*e+m<<2,h=(s+f)*r+o+m<<2):(d=(-s+f)*e-o+m<<2,h=f*r+m<<2),0==c)i[h]=t[d],i[h+1]=t[d+1],i[h+2]=t[d+2],i[h+3]=t[d+3];else if(1==c){var g=t[d+3]*(1/255),p=t[d]*g,v=t[d+1]*g,b=t[d+2]*g,y=i[h+3]*(1/255),w=i[h]*y,_=i[h+1]*y,x=i[h+2]*y,k=1-g,E=g+y*k,O=0==E?0:1/E;i[h+3]=255*E,i[h+0]=(p+w*k)*O,i[h+1]=(v+_*k)*O,i[h+2]=(b+x*k)*O}else if(2==c){g=t[d+3],p=t[d],v=t[d+1],b=t[d+2],y=i[h+3],w=i[h],_=i[h+1],x=i[h+2];g==y&&p==w&&v==_&&b==x?(i[h]=0,i[h+1]=0,i[h+2]=0,i[h+3]=0):(i[h]=p,i[h+1]=v,i[h+2]=b,i[h+3]=g)}else if(3==c){g=t[d+3],p=t[d],v=t[d+1],b=t[d+2],y=i[h+3],w=i[h],_=i[h+1],x=i[h+2];if(g==y&&p==w&&v==_&&b==x)continue;if(g<220&&y>20)return!1}return!0},a.encode=function(t,e,n,i,r,o,s){null==i&&(i=0),null==s&&(s=!1);var c=a.encode.compress(t,e,n,i,[!1,!1,!1,0,s]);return a.encode.compressPNG(c,-1),a.encode._main(c,e,n,r,o)},a.encodeLL=function(t,e,n,i,r,o,s,c){for(var l={ctype:0+(1==i?0:2)+(0==r?0:4),depth:o,frames:[]},u=(Date.now(),(i+r)*o),d=u*e,h=0;h<t.length;h++)l.frames.push({rect:{x:0,y:0,width:e,height:n},img:new Uint8Array(t[h]),blend:0,dispose:1,bpp:Math.ceil(u/8),bpl:Math.ceil(d/8)});a.encode.compressPNG(l,0,!0);var f=a.encode._main(l,e,n,s,c);return f},a.encode._main=function(t,e,n,i,r){null==r&&(r={});var o=a.crc.crc,s=a._bin.writeUint,c=a._bin.writeUshort,l=a._bin.writeASCII,u=8,d=t.frames.length>1,h=!1,f=33+(d?20:0);if(null!=r["sRGB"]&&(f+=13),null!=r["pHYs"]&&(f+=21),3==t.ctype){for(var m=t.plte.length,g=0;g<m;g++)t.plte[g]>>>24!=255&&(h=!0);f+=8+3*m+4+(h?8+1*m+4:0)}for(var p=0;p<t.frames.length;p++){var v=t.frames[p];d&&(f+=38),f+=v.cimg.length+12,0!=p&&(f+=4)}f+=12;var b=new Uint8Array(f),y=[137,80,78,71,13,10,26,10];for(g=0;g<8;g++)b[g]=y[g];if(s(b,u,13),u+=4,l(b,u,"IHDR"),u+=4,s(b,u,e),u+=4,s(b,u,n),u+=4,b[u]=t.depth,u++,b[u]=t.ctype,u++,b[u]=0,u++,b[u]=0,u++,b[u]=0,u++,s(b,u,o(b,u-17,17)),u+=4,null!=r["sRGB"]&&(s(b,u,1),u+=4,l(b,u,"sRGB"),u+=4,b[u]=r["sRGB"],u++,s(b,u,o(b,u-5,5)),u+=4),null!=r["pHYs"]&&(s(b,u,9),u+=4,l(b,u,"pHYs"),u+=4,s(b,u,r["pHYs"][0]),u+=4,s(b,u,r["pHYs"][1]),u+=4,b[u]=r["pHYs"][2],u++,s(b,u,o(b,u-13,13)),u+=4),d&&(s(b,u,8),u+=4,l(b,u,"acTL"),u+=4,s(b,u,t.frames.length),u+=4,s(b,u,null!=r["loop"]?r["loop"]:0),u+=4,s(b,u,o(b,u-12,12)),u+=4),3==t.ctype){m=t.plte.length;s(b,u,3*m),u+=4,l(b,u,"PLTE"),u+=4;for(g=0;g<m;g++){var w=3*g,_=t.plte[g],x=255&_,k=_>>>8&255,E=_>>>16&255;b[u+w+0]=x,b[u+w+1]=k,b[u+w+2]=E}if(u+=3*m,s(b,u,o(b,u-3*m-4,3*m+4)),u+=4,h){s(b,u,m),u+=4,l(b,u,"tRNS"),u+=4;for(g=0;g<m;g++)b[u+g]=t.plte[g]>>>24&255;u+=m,s(b,u,o(b,u-m-4,m+4)),u+=4}}var O=0;for(p=0;p<t.frames.length;p++){v=t.frames[p];d&&(s(b,u,26),u+=4,l(b,u,"fcTL"),u+=4,s(b,u,O++),u+=4,s(b,u,v.rect.width),u+=4,s(b,u,v.rect.height),u+=4,s(b,u,v.rect.x),u+=4,s(b,u,v.rect.y),u+=4,c(b,u,i[p]),u+=2,c(b,u,1e3),u+=2,b[u]=v.dispose,u++,b[u]=v.blend,u++,s(b,u,o(b,u-30,30)),u+=4);var S=v.cimg;m=S.length;s(b,u,m+(0==p?0:4)),u+=4;var j=u;l(b,u,0==p?"IDAT":"fdAT"),u+=4,0!=p&&(s(b,u,O++),u+=4),b.set(S,u),u+=m,s(b,u,o(b,j,u-j)),u+=4}return s(b,u,0),u+=4,l(b,u,"IEND"),u+=4,s(b,u,o(b,u-4,4)),u+=4,b.buffer},a.encode.compressPNG=function(t,e,n){for(var i=0;i<t.frames.length;i++){var r=t.frames[i],o=(r.rect.width,r.rect.height),s=new Uint8Array(o*r.bpl+o);r.cimg=a.encode._filterZero(r.img,o,r.bpp,r.bpl,s,e,n)}},a.encode.compress=function(t,e,n,i,r,o){var s=r[0],c=r[1],l=r[2],u=r[3],d=r[4],h=6,f=8,m=255;if(!o)for(var g=0;g<t.length;g++)for(var p=new Uint8Array(t[g]),v=p.length,b=0;b<v;b+=4)m&=p[b+3];var y=255!=m,w=a.encode.framize(t,e,n,s,c,l),_={},x=[],k=[];if(0!=i){var E=[];for(b=0;b<w.length;b++)E.push(w[b].img.buffer);var O=a.encode.concatRGBA(E),S=a.quantize(O,i),j=0,I=new Uint8Array(S.abuf);for(b=0;b<w.length;b++){var A=w[b].img,T=A.length;k.push(new Uint8Array(S.inds.buffer,j>>2,T>>2));for(g=0;g<T;g+=4)A[g]=I[j+g],A[g+1]=I[j+g+1],A[g+2]=I[j+g+2],A[g+3]=I[j+g+3];j+=T}for(b=0;b<S.plte.length;b++)x.push(S.plte[b].est.rgba)}else for(g=0;g<w.length;g++){var C=w[g],P=new Uint32Array(C.img.buffer),$=C.rect.width,M=(v=P.length,new Uint8Array(v));k.push(M);for(b=0;b<v;b++){var R=P[b];if(0!=b&&R==P[b-1])M[b]=M[b-1];else if(b>$&&R==P[b-$])M[b]=M[b-$];else{var L=_[R];if(null==L&&(_[R]=L=x.length,x.push(R),x.length>=300))break;M[b]=L}}}var U=x.length;U<=256&&0==d&&(f=U<=2?1:U<=4?2:U<=16?4:8,f=Math.max(f,u));for(g=0;g<w.length;g++){C=w[g],C.rect.x,C.rect.y,$=C.rect.width;var z=C.rect.height,D=C.img,B=(new Uint32Array(D.buffer),4*$),N=4;if(U<=256&&0==d){B=Math.ceil(f*$/8);for(var F=new Uint8Array(B*z),H=k[g],V=0;V<z;V++){b=V*B;var G=V*$;if(8==f)for(var W=0;W<$;W++)F[b+W]=H[G+W];else if(4==f)for(W=0;W<$;W++)F[b+(W>>1)]|=H[G+W]<<4-4*(1&W);else if(2==f)for(W=0;W<$;W++)F[b+(W>>2)]|=H[G+W]<<6-2*(3&W);else if(1==f)for(W=0;W<$;W++)F[b+(W>>3)]|=H[G+W]<<7-1*(7&W)}D=F,h=3,N=1}else if(0==y&&1==w.length){F=new Uint8Array($*z*3);var Y=$*z;for(b=0;b<Y;b++){A=3*b;var q=4*b;F[A]=D[q],F[A+1]=D[q+1],F[A+2]=D[q+2]}D=F,h=2,N=3,B=3*$}C.img=D,C.bpl=B,C.bpp=N}return{ctype:h,depth:f,plte:x,frames:w}},a.encode.framize=function(t,e,n,i,r,o){for(var s=[],c=0;c<t.length;c++){var l,u=new Uint8Array(t[c]),d=new Uint32Array(u.buffer),h=0,f=0,m=e,g=n,p=i?1:0;if(0!=c){for(var v=o||i||1==c||0!=s[c-2].dispose?1:2,b=0,y=1e9,w=0;w<v;w++){for(var _=new Uint8Array(t[c-1-w]),x=new Uint32Array(t[c-1-w]),k=e,E=n,O=-1,S=-1,j=0;j<n;j++)for(var I=0;I<e;I++){var A=j*e+I;d[A]!=x[A]&&(I<k&&(k=I),I>O&&(O=I),j<E&&(E=j),j>S&&(S=j))}-1==O&&(k=E=O=S=0),r&&(1==(1&k)&&k--,1==(1&E)&&E--);var T=(O-k+1)*(S-E+1);T<y&&(y=T,b=w,h=k,f=E,m=O-k+1,g=S-E+1)}_=new Uint8Array(t[c-1-b]);1==b&&(s[c-1].dispose=2),l=new Uint8Array(m*g*4),a._copyTile(_,e,n,l,m,g,-h,-f,0),p=a._copyTile(u,e,n,l,m,g,-h,-f,3)?1:0,1==p?a.encode._prepareDiff(u,e,n,l,{x:h,y:f,width:m,height:g}):a._copyTile(u,e,n,l,m,g,-h,-f,0)}else l=u.slice(0);s.push({rect:{x:h,y:f,width:m,height:g},img:l,blend:p,dispose:0})}if(i)for(c=0;c<s.length;c++){var C=s[c];if(1!=C.blend){var P=C.rect,$=s[c-1].rect,M=Math.min(P.x,$.x),R=Math.min(P.y,$.y),L=Math.max(P.x+P.width,$.x+$.width),U=Math.max(P.y+P.height,$.y+$.height),z={x:M,y:R,width:L-M,height:U-R};s[c-1].dispose=1,c-1!=0&&a.encode._updateFrame(t,e,n,s,c-1,z,r),a.encode._updateFrame(t,e,n,s,c,z,r)}}if(1!=t.length)for(A=0;A<s.length;A++){C=s[A];C.rect.width*C.rect.height}return s},a.encode._updateFrame=function(t,e,n,i,r,o,s){for(var c=Uint8Array,l=Uint32Array,u=new c(t[r-1]),d=new l(t[r-1]),h=r+1<t.length?new c(t[r+1]):null,f=new c(t[r]),m=new l(f.buffer),g=e,p=n,v=-1,b=-1,y=0;y<o.height;y++)for(var w=0;w<o.width;w++){var _=o.x+w,x=o.y+y,k=x*e+_,E=m[k];0==E||0==i[r-1].dispose&&d[k]==E&&(null==h||0!=h[4*k+3])||(_<g&&(g=_),_>v&&(v=_),x<p&&(p=x),x>b&&(b=x))}-1==v&&(g=p=v=b=0),s&&(1==(1&g)&&g--,1==(1&p)&&p--),o={x:g,y:p,width:v-g+1,height:b-p+1};var O=i[r];O.rect=o,O.blend=1,O.img=new Uint8Array(o.width*o.height*4),0==i[r-1].dispose?(a._copyTile(u,e,n,O.img,o.width,o.height,-o.x,-o.y,0),a.encode._prepareDiff(f,e,n,O.img,o)):a._copyTile(f,e,n,O.img,o.width,o.height,-o.x,-o.y,0)},a.encode._prepareDiff=function(t,e,n,i,r){a._copyTile(t,e,n,i,r.width,r.height,-r.x,-r.y,2)},a.encode._filterZero=function(t,e,n,i,o,s,c){var l,u=[],d=[0,1,2,3,4];-1!=s?d=[s]:(e*i>5e5||1==n)&&(d=[0]),c&&(l={level:0});for(var h,f=o.length>1e7&&null!=UZIP?UZIP:r.a,m=(Date.now(),0);m<d.length;m++){for(var g=0;g<e;g++)a.encode._filterLine(o,t,g,i,n,d[m]);u.push(f["deflate"](o,l))}var p=1e9;for(m=0;m<u.length;m++)u[m].length<p&&(h=m,p=u[m].length);return u[h]},a.encode._filterLine=function(t,e,n,i,r,o){var s=n*i,c=s+n,l=a.decode._paeth;if(t[c]=o,c++,0==o)if(i<500)for(var u=0;u<i;u++)t[c+u]=e[s+u];else t.set(new Uint8Array(e.buffer,s,i),c);else if(1==o){for(u=0;u<r;u++)t[c+u]=e[s+u];for(u=r;u<i;u++)t[c+u]=e[s+u]-e[s+u-r]+256&255}else if(0==n){for(u=0;u<r;u++)t[c+u]=e[s+u];if(2==o)for(u=r;u<i;u++)t[c+u]=e[s+u];if(3==o)for(u=r;u<i;u++)t[c+u]=e[s+u]-(e[s+u-r]>>1)+256&255;if(4==o)for(u=r;u<i;u++)t[c+u]=e[s+u]-l(e[s+u-r],0,0)+256&255}else{if(2==o)for(u=0;u<i;u++)t[c+u]=e[s+u]+256-e[s+u-i]&255;if(3==o){for(u=0;u<r;u++)t[c+u]=e[s+u]+256-(e[s+u-i]>>1)&255;for(u=r;u<i;u++)t[c+u]=e[s+u]+256-(e[s+u-i]+e[s+u-r]>>1)&255}if(4==o){for(u=0;u<r;u++)t[c+u]=e[s+u]+256-l(0,e[s+u-i],0)&255;for(u=r;u<i;u++)t[c+u]=e[s+u]+256-l(e[s+u-r],e[s+u-i],e[s+u-r-i])&255}}},a.crc={table:function(){for(var t=new Uint32Array(256),e=0;e<256;e++){for(var n=e,i=0;i<8;i++)1&n?n=3988292384^n>>>1:n>>>=1;t[e]=n}return t}(),update:function(t,e,n,i){for(var r=0;r<i;r++)t=a.crc.table[255&(t^e[n+r])]^t>>>8;return t},crc:function(t,e,n){return 4294967295^a.crc.update(4294967295,t,e,n)}},a.quantize=function(t,e){var n,i=new Uint8Array(t),r=i.slice(0),o=new Uint32Array(r.buffer),s=a.quantize.getKDtree(r,e),c=s[0],l=s[1],u=a.quantize.planeDst,d=i,h=o,f=d.length,m=new Uint8Array(i.length>>2);if(i.length<2e7)for(var g=0;g<f;g+=4){var p=d[g]*(1/255),v=d[g+1]*(1/255),b=d[g+2]*(1/255),y=d[g+3]*(1/255);n=a.quantize.getNearest(c,p,v,b,y),m[g>>2]=n.ind,h[g>>2]=n.est.rgba}else for(g=0;g<f;g+=4){p=d[g]*(1/255),v=d[g+1]*(1/255),b=d[g+2]*(1/255),y=d[g+3]*(1/255);n=c;while(n.left)n=u(n.est,p,v,b,y)<=0?n.left:n.right;m[g>>2]=n.ind,h[g>>2]=n.est.rgba}return{abuf:r.buffer,inds:m,plte:l}},a.quantize.getKDtree=function(t,e,n){null==n&&(n=1e-4);var i=new Uint32Array(t.buffer),r={i0:0,i1:t.length,bst:null,est:null,tdst:0,left:null,right:null};r.bst=a.quantize.stats(t,r.i0,r.i1),r.est=a.quantize.estats(r.bst);var o=[r];while(o.length<e){for(var s=0,c=0,l=0;l<o.length;l++)o[l].est.L>s&&(s=o[l].est.L,c=l);if(s<n)break;var u=o[c],d=a.quantize.splitPixels(t,i,u.i0,u.i1,u.est.e,u.est.eMq255),h=u.i0>=d||u.i1<=d;if(h)u.est.L=0;else{var f={i0:u.i0,i1:d,bst:null,est:null,tdst:0,left:null,right:null};f.bst=a.quantize.stats(t,f.i0,f.i1),f.est=a.quantize.estats(f.bst);var m={i0:d,i1:u.i1,bst:null,est:null,tdst:0,left:null,right:null};m.bst={R:[],m:[],N:u.bst.N-f.bst.N};for(l=0;l<16;l++)m.bst.R[l]=u.bst.R[l]-f.bst.R[l];for(l=0;l<4;l++)m.bst.m[l]=u.bst.m[l]-f.bst.m[l];m.est=a.quantize.estats(m.bst),u.left=f,u.right=m,o[c]=f,o.push(m)}}o.sort((function(t,e){return e.bst.N-t.bst.N}));for(l=0;l<o.length;l++)o[l].ind=l;return[r,o]},a.quantize.getNearest=function(t,e,n,i,r){if(null==t.left)return t.tdst=a.quantize.dist(t.est.q,e,n,i,r),t;var o=a.quantize.planeDst(t.est,e,n,i,r),s=t.left,c=t.right;o>0&&(s=t.right,c=t.left);var l=a.quantize.getNearest(s,e,n,i,r);if(l.tdst<=o*o)return l;var u=a.quantize.getNearest(c,e,n,i,r);return u.tdst<l.tdst?u:l},a.quantize.planeDst=function(t,e,n,i,r){var a=t.e;return a[0]*e+a[1]*n+a[2]*i+a[3]*r-t.eMq},a.quantize.dist=function(t,e,n,i,r){var a=e-t[0],o=n-t[1],s=i-t[2],c=r-t[3];return a*a+o*o+s*s+c*c},a.quantize.splitPixels=function(t,e,n,i,r,o){var s=a.quantize.vecDot;i-=4;while(n<i){while(s(t,n,r)<=o)n+=4;while(s(t,i,r)>o)i-=4;if(n>=i)break;var c=e[n>>2];e[n>>2]=e[i>>2],e[i>>2]=c,n+=4,i-=4}while(s(t,n,r)>o)n-=4;return n+4},a.quantize.vecDot=function(t,e,n){return t[e]*n[0]+t[e+1]*n[1]+t[e+2]*n[2]+t[e+3]*n[3]},a.quantize.stats=function(t,e,n){for(var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=[0,0,0,0],a=n-e>>2,o=e;o<n;o+=4){var s=t[o]*(1/255),c=t[o+1]*(1/255),l=t[o+2]*(1/255),u=t[o+3]*(1/255);r[0]+=s,r[1]+=c,r[2]+=l,r[3]+=u,i[0]+=s*s,i[1]+=s*c,i[2]+=s*l,i[3]+=s*u,i[5]+=c*c,i[6]+=c*l,i[7]+=c*u,i[10]+=l*l,i[11]+=l*u,i[15]+=u*u}return i[4]=i[1],i[8]=i[2],i[9]=i[6],i[12]=i[3],i[13]=i[7],i[14]=i[11],{R:i,m:r,N:a}},a.quantize.estats=function(t){var e=t.R,n=t.m,i=t.N,r=n[0],o=n[1],s=n[2],c=n[3],l=0==i?0:1/i,u=[e[0]-r*r*l,e[1]-r*o*l,e[2]-r*s*l,e[3]-r*c*l,e[4]-o*r*l,e[5]-o*o*l,e[6]-o*s*l,e[7]-o*c*l,e[8]-s*r*l,e[9]-s*o*l,e[10]-s*s*l,e[11]-s*c*l,e[12]-c*r*l,e[13]-c*o*l,e[14]-c*s*l,e[15]-c*c*l],d=u,h=a.M4,f=[Math.random(),Math.random(),Math.random(),Math.random()],m=0,g=0;if(0!=i)for(var p=0;p<16;p++){if(f=h.multVec(d,f),g=Math.sqrt(h.dot(f,f)),f=h.sml(1/g,f),0!=p&&Math.abs(g-m)<1e-9)break;m=g}var v=[r*l,o*l,s*l,c*l],b=h.dot(h.sml(255,v),f);return{Cov:u,q:v,e:f,L:m,eMq255:b,eMq:h.dot(f,v),rgba:(Math.round(255*v[3])<<24|Math.round(255*v[2])<<16|Math.round(255*v[1])<<8|Math.round(255*v[0])<<0)>>>0}},a.M4={multVec:function(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3],t[4]*e[0]+t[5]*e[1]+t[6]*e[2]+t[7]*e[3],t[8]*e[0]+t[9]*e[1]+t[10]*e[2]+t[11]*e[3],t[12]*e[0]+t[13]*e[1]+t[14]*e[2]+t[15]*e[3]]},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},sml:function(t,e){return[t*e[0],t*e[1],t*e[2],t*e[3]]}},a.encode.concatRGBA=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n].byteLength;var i=new Uint8Array(e),r=0;for(n=0;n<t.length;n++){for(var a=new Uint8Array(t[n]),o=a.length,s=0;s<o;s+=4){var c=a[s],l=a[s+1],u=a[s+2],d=a[s+3];0==d&&(c=l=u=0),i[r+s]=c,i[r+s+1]=l,i[r+s+2]=u,i[r+s+3]=d}r+=o}return i.buffer},e["a"]=a},4281:function(t,e,n){"use strict";n.d(e,"c",(function(){return y})),n.d(e,"d",(function(){return I})),n.d(e,"e",(function(){return P})),n.d(e,"b",(function(){return T}));var i=n("3835"),r=n("5530"),a=n("c7eb"),o=n("1da1"),s=(n("99af"),n("e9c4"),n("d3b7"),n("3ca3"),n("ddb0"),n("13d5"),n("159b"),n("b64b"),n("caad"),n("2532"),n("b0c0"),n("4ec9"),n("d81d"),n("f684")),c=n.n(s),l=n("660d"),u=n("2ef0"),d=n("b354");function h(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=t.length,r=n^i,a=0;while(i>=4)e=255&t.charCodeAt(a)|(255&t.charCodeAt(++a))<<8|(255&t.charCodeAt(++a))<<16|(255&t.charCodeAt(++a))<<24,e=1540483477*(65535&e)+((1540483477*(e>>>16)&65535)<<16),e^=e>>>24,e=1540483477*(65535&e)+((1540483477*(e>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^e,i-=4,++a;switch(i){case 3:r^=(255&t.charCodeAt(a+2))<<16;case 2:r^=(255&t.charCodeAt(a+1))<<8;case 1:r^=255&t.charCodeAt(a),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)}return r^=r>>>13,r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16),r^=r>>>15,r>>>0}var f=n("c521"),m=n("af9f"),g=n("49bc"),p=(n("d9e2"),n("a434"),function(t){return new c.a((function(e,n){setTimeout((function(){n(new Error("timeout"))}),t)}))});function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new Map,n=[],i=!1,r=function(){var s=Object(o["a"])(Object(a["a"])().mark((function o(){var s,l,u,d,h,f,m,g;return Object(a["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=!0,s=n.shift(),l=e.get(s),u=l.pop(),d=u.createPromise,h=u.resolve,f=u.reject,m=[d()].concat(t.timeout?[p(t.timeout)]:[]),a.prev=5,a.next=8,c.a.race(m);case 8:g=a.sent,h(g),a.next=15;break;case 12:a.prev=12,a.t0=a["catch"](5),f(a.t0);case 15:if(!n.length){a.next=18;break}return a.next=18,r();case 18:i=!1;case 19:case"end":return a.stop()}}),o,null,[[5,12]])})));return function(){return s.apply(this,arguments)}}(),s={debounceTimer:null,promises:[],lock:!1,debounce:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300;return this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout((function(){n.lock||n.promises.push(n.run(t,e)),clearTimeout(n.debounceTimer)}),i),new c.a((function(t){var e=setInterval((function(){n.promises.length&&(n.lock=!0,t(e))}),i)})).then((function(){return c.a.all(n.promises).then((function(t){return n.lock=!1,n.promises=[],t}))}))},run:function(s,l){return Object(o["a"])(Object(a["a"])().mark((function o(){var u;return Object(a["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.get(s)||e.set(s,[]),n.includes(s)||n.push(s),u=new c.a((function(t,n){e.get(s).push({createPromise:l,resolve:t,reject:n})})),i){a.next=9;break}if(!t.wait){a.next=8;break}return i=!0,a.next=8,c.a.delay(t.wait);case 8:r();case 9:return a.abrupt("return",u);case 10:case"end":return a.stop()}}),o)})))()},clear:function(){n.splice(0,n.length),e.clear(),i=null}};return s}var b=v({timeout:1e4}),y={data:new Map,longData:new f["LRUMap"](15),get:function(t){return y.data.get(t)||y.longData.get(t)},set:function(t,e){if(t){var n=y.data;Object(u["isString"])(t)&&t.length>100?n=y.longData:b.run(e,(function(){return m["a"].loadImage(e)})),n.set(t,e)}}};var w=function(t,e){var n={},i=[];return e.forEach((function(e){var r=Object(u["get"])(t,e),a=r&&r.includes(";base64"),o=r&&r.includes("blob:");y.get(r)?n[e]=y.get(r):a?n[e]=m["a"].dataurlToBlob(r):o&&i.push(m["a"].bloburlToBlob(r).then((function(t){n[e]=t})))})),Promise.all(i).then((function(){return n}))},_=function(t,e){return new Promise((function(e){t.toBlob((function(t){e(t)}),"image/png")})).then((function(t){return e.imageUrl=t,e}))},x=function(t,e){var n=t.getComponentById(e);if(!n){var i=document.querySelector('.editor-element[data-id="'.concat(e,'"]'));n=i&&i.__vue__}return n},k=function t(e,n){var i=200;setTimeout((function(){e.$loaded?n():t(e,n)}),i)},E=Object(u["omit"])(Object.assign({},g["a"].element,{imageUrl:!0}),["padding","width","height","transform","title"]),O=["mask","image","group","text","flex","svg","watermark","ninePatch"].reduce((function(t,e){return t[e]=!0,t}),{}),S=function(t){if(t.imageUrl&&!O[t.type]){var e=Object(u["omitBy"])(t,(function(t,e){return"$"===e[0]||void 0!==E[e]})),n=h(JSON.stringify(e));return n}},j=function(t){return t=Object(u["isObject"])(t)&&t.type?S(t):t,t&&y.get(t)},I=function(t,e){return t=Object(u["isObject"])(t)&&t.type?S(t):t,t&&y.set(t,e)},A=function(){var t=Object(o["a"])(Object(a["a"])().mark((function t(e){var n,i,r,o,s;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.imageEffects?"imageEffects":"textEffects",i=e[n],r=[],i){t.next=5;break}return t.abrupt("return",{});case 5:for(o=0;o<i.length;o++)s="".concat(n,"[").concat(o,"].filling.imageContent.image"),Object(u["get"])(e,s)&&r.push(s);return t.abrupt("return",w(e,r));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),T=function(t){return{layout:function(){var e=Object(o["a"])(Object(a["a"])().mark((function e(n){var i,o,s,c,l;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,w(n,["background.image.url","backgroundEffectImage"]);case 2:if(i=e.sent,!n.backgroundEffectImage&&n.hasFilters){e.next=5;break}return e.abrupt("return",i);case 5:if(o=h(JSON.stringify(Object(r["a"])(Object(r["a"])({},n.background.image),Object(u["get"])(n,"metaInfo.thirdParty",{})))),s=j(o),!s){e.next=10;break}return i.backgroundEffectImage=s,e.abrupt("return",i);case 10:return e.next=12,t.$renderers.get(n.$id);case 12:return c=e.sent,e.next=15,null===c||void 0===c?void 0:c.exportBlob().catch((function(){return null}));case 15:return l=e.sent,l&&(l.hash=o,i.backgroundEffectImage=l),e.abrupt("return",i);case 18:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}(),chart:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.chartOptions,r=void 0===i?{}:i,a=r.useCache,o=void 0===a||a,s=S(e);if(o){var l=j(s);if(l)return c.a.resolve({imageUrl:l})}var u=x(t,e.$id);return u?new c.a((function(t,n){k(e,(function(){try{u.$chartRender.getCanvas().then((function(e){e&&e.toBlob(t,"image/png")})).catch((function(t){n(t)}))}catch(e){n(e)}}))})).then((function(t){return t.hash=s,{imageUrl:t}})):c.a.resolve({})},table:function(e){var n=S(e),i=j(n);if(i)return c.a.resolve({imageUrl:i});var r={},a=x(t,e.$id);if(!a)return c.a.resolve({});var o=a&&a.$el,s=o.cloneNode(!0),u=new l["a"](e,s.outerHTML,t);return u.renderCanvas().then((function(t){return _(t,r).then((function(t){return t.imageUrl.hash=n,t}))}))},mask:function(e){var n=w(e,["url","mask"]),r=y.get(e.$renderId);return e.isGif||e.isApng?n:!e.imageUrl&&e.url&&t.$renderers.get(e.$id)?c.a.all([n,e.$renderId?r?c.a.resolve(r):t.$renderers.get(e.$id).exportBlob().catch((function(){return null})):""]).then((function(t){var e=Object(i["a"])(t,2),n=e[0],r=e[1];return r&&(n.imageUrl=r),n})):n},image:function(e){var n=w(e,["url"]),r=e.hasEffects||e.hasFilters,a=y.get(e.$renderId);return r&&!e.imageUrl&&t.$renderers.get(e.$id)?c.a.all([n,a?c.a.resolve(a):t.$renderers.get(e.$id).exportBlob().catch((function(){return null}))]).then((function(t){var e=Object(i["a"])(t,2),n=e[0],r=e[1];return r&&(n.imageUrl=r),n})):n},ninePatch:function(t){return w(t,["url","imageUrl"])},svg:function(t){var e={},n=t.content;return n&&n.length>=5&&(e.content=new Blob([n],{type:"image/svg+xml"})),c.a.resolve(e)},threeText:function(){var e=Object(o["a"])(Object(a["a"])().mark((function e(n){var i,r,o,s,l;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=S(n),r=j(i),!r){e.next=4;break}return e.abrupt("return",c.a.resolve({imageUrl:r}));case 4:if(o=x(t,n.$id),s={},o&&!o.$refs.img){e.next=8;break}return e.abrupt("return",c.a.resolve(s));case 8:if(!o.isRendering){e.next=13;break}return e.next=11,c.a.delay(10);case 11:e.next=8;break;case 13:return e.next=15,t.getThreeTextCanvas(n);case 15:return l=e.sent,e.abrupt("return",_(l,s).then((function(t){return t.imageUrl.hash=i,t})));case 17:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}(),effectText:function(){var e=Object(o["a"])(Object(a["a"])().mark((function e(n){var i,r,o,s;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=S(n),r=j(i),!r){e.next=4;break}return e.abrupt("return",c.a.resolve({imageUrl:r}));case 4:if(o=x(t,n.$id),s={},o&&!o.$refs.img){e.next=8;break}return e.abrupt("return",c.a.resolve(s));case 8:if(!o.isRendering){e.next=13;break}return e.next=11,c.a.delay(10);case 11:e.next=8;break;case 13:return e.abrupt("return",_(o.$refs.canvas,s).then((function(t){return t.imageUrl.hash=i,t})));case 14:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}(),cell:function(){var t=Object(o["a"])(Object(a["a"])().mark((function t(e){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",w(e,["url"]));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),watermark:function(){var t=Object(o["a"])(Object(a["a"])().mark((function t(e){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",w(e,["imageUrl","url","logo.url","logo.defaultUrl"]));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),video:function(e){var n=w(e,["url","mask"]),r=S(e),a=j(r);if(a)return n.then((function(t){return t.imageUrl=a,t}));var o=new d["a"]({model:e,editor:t});return c.a.all([n,o.exportBlob({exportType:e.mask?"image/png":"image/jpeg"})]).then((function(t){var e=Object(i["a"])(t,2),n=e[0],a=e[1];return a.hash=r,a&&(n.imageUrl=a),n}))}}},C=["border.image","backgroundEffect.image.url","metaInfo.thirdParty.imageEditor.url","metaInfo.thirdParty.inpaint.url","maskInfo.imageUrl","metaInfo.thirdParty.matting.url","background.image.url","imageDataUrl"],P=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T,n=e[t.type||"layout"];return c.a.all([w(t,C),A(t),n&&n(t,e)]).then((function(t){return t.reduce((function(t,e){return Object.assign(t,e)}),{})}))};e["a"]=function(t,e,n){n=Object(u["defaults"])(n,{keepPrivateProps:[],upload:function(e){var n={jpeg:"jpg","svg+xml":"svg",png:"png",gif:"gif"};return Object.keys(n).forEach((function(t){e.type.includes(t)&&(e.name="."+n[t])})),c.a.try((function(){return t.options.resource.upload?t.options.resource.upload(e):""}))}});var i,r=n,a=r.keepPrivateProps,o=r.upload,s=new Map,l=new Map;return c.a.try((function(){return t.exportTempletData(e,{keepPrivateProps:Object(u["uniq"])(["$id","$renderId"].concat(a)),clean:!1})})).then((function(n){return i=n,i.layouts.forEach((function(t){s.set(t.$id,t)})),t.walkTemplet((function(t){s.set(t.$id,t),delete t.$id}),!0,i.layouts),t._exportResourceBlobs(e||t.layouts)})).then((function(e){return n.uploadCount=0,n.materialsTotal=e.length,t.options.resource.uploadProgress&&t.options.resource.uploadProgress(n.uploadCount,n.materialsTotal,{}),e})).map((function(e){var i=e.element,r=e.layout,a=Object.assign({},i),d=Object.assign({},r),h={},f=["image","mask"].includes(a.type);return delete e.element,delete e.layout,c.a.map(Object.keys(e),(function(c){var m=e[c];if(Object(u["isString"])(m)&&i){var g=s.get(a.$id);return Object(u["set"])(g,c,m),void(h[c]=m)}if(Object(u["isString"])(m)&&r){var p=s.get(d.$id);return Object(u["set"])(p,c,m),void(h[c]=m)}i&&"svg"===i.type&&"content"===c&&(c="url");var v=f&&"imageUrl"===c;if(!(v&&m.size>=12582912))return o(m).then((function(e){var o;if(r){var f=s.get(d.$id);o=Object(u["get"])(f,c),l.set(d.$id+c,o),f&&Object(u["set"])(f,c,e),h[c]=e}if(i){var g=s.get(a.$id);o=Object(u["get"])(g,c),l.set(a.$id+c,o),g&&("svg"===g.type&&"url"===c&&(g.content=""),Object(u["set"])(g,c,e)),h[c]=e}n.uploadCount+=1,t.options.resource.uploadProgress&&t.options.resource.uploadProgress(n.uploadCount,n.materialsTotal,{key:c,url:e,layout:r,element:i}),m.hash&&I(m.hash,e),v?y.set(a.$renderId,e):o&&Object(u["isString"])(o)&&y.set(o,e)}));var b=s.get(a.$id);b&&Object(u["get"])(b,c)===Object(u["get"])(a,c)&&Object(u["set"])(b,c,"")})).then((function(){Object.keys(h).forEach((function(t){if(r){var e=s.get(r.$id);if(!e)return;if(l.get(d.$id+t)!==Object(u["get"])(r,t))return;Object(u["set"])(r,t,h[t])}else{t.includes("metaInfo.thirdParty")&&Object(u["set"])(i,t,h[t]);var n=s.get(i.$id);n&&l.get(a.$id+t)===Object(u["get"])(i,t)&&(f||("svg"===i.type&&"url"===t&&(i.content=""),Object(u["set"])(i,t,h[t])))}}))}))}),{concurrency:4}).then((function(){var e=a.includes("$id"),n=a.includes("$renderId");return i.layouts.forEach((function(t){delete t.$id})),t.walkTemplet((function(t){var i=["image","mask"].includes(t.type);i&&y.get(t.$renderId)&&!t.imageUrl&&(t.imageUrl=y.get(t.$renderId)),e||delete t.$id,n||delete t.$renderId}),!0,i.layouts),l.clear(),i}))}},"449d":function(t,e){t.exports='<div\n    class="editor-background is-element"\n    :style="{\n        width: model.width * global.zoom + \'px\',\n        height: model.height * global.zoom + \'px\',\n        backgroundColor: backgroundColor\n    }"\n>\n    <div v-if="effectGradient" class="editor-background__main" :style="mainStyle" />\n\n    <div class="editor-background__main" v-if="backgroundImage">\n        <div class="editor-background__image-wrap" :style="imageStyle">\n            <img\n                draggable="false"\n                crossorigin="anonymous"\n                :src="backgroundImage"\n            />\n        </div>\n    </div>\n\n    <slot></slot>\n    <slot name="watermark"></slot>\n</div>\n'},"44d1":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return a}));n("b0c0"),n("d3b7"),n("99af");var i=n("25a2");function r(t){var e=t.name,n=t.module,r=t.layoutIndex,a=t.component,o=t.editor;i["registerApplication"](e,(function(){return Promise.resolve(n)}),(function(){return"flow"===o.global.mode||o.layouts.indexOf(o.currentLayout)===r}),(function(){if(!a)return{};if(!a.$refs)return{};var t=a.$refs.container;if(!t)return{};while(t.firstChild)t.removeChild(t.firstChild);var e=document.createElement("div");return e.style.width="100%",e.style.height="100%",t.appendChild(e),{container:e,model:a.model}}))}function a(t,e,n){return"".concat(t,"_m").concat(e.$$ref,"_c").concat(n.$$ref)}},"47d6":function(t,e,n){"use strict";var i={uuid:null,type:"",title:"",category:"",opacity:1,padding:[0,0,0,0],width:200,height:200,left:0,top:0,transform:{a:1,b:0,c:0,d:1,tx:0,ty:0},boxShadow:null,resize:7,dragable:!0,rotatable:!0,editable:!0,frozen:!1,hidden:!1,lock:!1,borderRadius:0,filter:{contrast:0,sharpness:0,hueRotate:0,saturate:0,brightness:0,gaussianBlur:0,temperature:0,tint:0},watermarkEnable:!1,metaInfo:null,linkId:"",groupable:!0,flex:null,backgroundColor:null,backgroundEffect:null,border:null,blendMode:null,maskInfo:{enable:!1,showSelf:!1,imageUrl:"",effectedResult:{width:0,height:0,left:0,top:0}},transitionIn:null,transitionOut:null,animations:[]};e["a"]=i},"49bc":function(t,e,n){"use strict";n("d81d"),n("d3b7"),n("25f0");var i=n("413b"),r=n("2ef0"),a=n("66cb"),o=n.n(a),s={mode:"design",operateMode:null,padding:[40,40,40,40],canvasOverflowHidden:!0,autoFitZoom:!0,mousewheelMinZoom:.15,mousewheelMaxZoom:4,showHover:!0,showToolbar:!0,showEditConfirmToolbar:!0,showGuider:!0,showResizeGuider:!0,marginGuiderOptions:{enable:!0,showValue:!1},selector:!0,clipboard:{storageKey:"template_clipboard",get:function(){},set:function(){}},onDropFile:function(t){return t},onPasteFile:function(){},onPasteText:function(){},resource:{localType:"dataUrl",imageMaxSize:2e3,uploadProgress:null,upload:null},snapshotScope:"layout",snapshotDisableSync:!1,placeImage:"https://st0.dancf.com/csc/213/configs/system/20201131-101949-cd09.png",hookImagePicker:!1,watermarkImages:{enable:!0,exportEnable:!0,layoutRepeat:"https://st-gdx.dancf.com/gaodingx/213/configs/system/20200611-180327-3f35.svg",layoutNoRepeat:"https://st-gdx.dancf.com/gaodingx/213/configs/system/20200611-180327-3f35.svg",element:"https://st-gdx.dancf.com/gaodingx/213/configs/system/20200611-180327-3f35.svg"},watermarkSafeEnable:!1,crossLayoutDrag:!1,fitCrossOrigin:!1,bindHotkey:null,cropperOptions:{switchable:!1,defaultTarget:"inner",outerResize:0,imageTransformTypes:["mask"]},tipsOptions:{resizeable:!0,dragable:!1,tempGroup:!1},exportable:!0,fontSubset:{getUrl:null,exportEnableCallback:function(){return!1},initialEnable:!0,supportTypes:["text","effectText","threeText","table"],defaultContent:""},fontList:[{name:"Microsoft Yahei",alias:"微软雅黑"},{name:"Simsun",alias:"宋体"}],fontSizeList:[6,8,9,10,11,12,14,18,24,30,36,48,60,72,84,96,108,120],fontLoadTimeout:1e4,defaultFont:"SourceHanSansSC-Regular",minCellCount:2,bleedingLine:{show:!1,width:[3,3,3,3]},supportLinkElements:[{types:["text","effectText","threeText"],propName:"contents"},{types:["image","mask"],propName:"url"}],layerPickerDefaultSize:1e3,picaResizeEnable:!1,picaResizeOptions:{alpha:!0},supportAdaptiveElements:["video"],elementMaxWidth:0,elementMaxHeight:0,dragImageToMaskEnable:!0,scopePointerEventsEnable:!0,contextmenu:!0,touchEnable:!1},c={uuid:null,elements:[],title:"",backgroundImage:null,backgroundEffectImage:null,backgroundColor:"#ffffffff",background:{color:"#ffffffff",watermarkEnable:!1},backgroundImageInfo:{opacity:1,width:100,height:100,transform:{a:1,b:0,c:0,d:1,tx:0,ty:0},resourceType:"image",naturalDuration:0},backgroundWatermarkEnable:!1,backgroundRepeat:"no-repeat",backgroundGradient:null,backgroundMask:{color:"#000000FF",opacity:.7},height:480,width:640,mosaic:{enable:!1,type:-1,color:"#000000ff",url:"",imageUrl:"",tileWidth:0,tileHeight:0,blur:50,paths:[]},border:null,className:null,repeatId:null,repeatGroup:null,metaInfo:null,watermarkEnable:!1,filter:{contrast:0,sharpness:0,hueRotate:0,saturate:0,brightness:0,gaussianBlur:0,temperature:0,tint:0},filterInfo:null,userAdded:!1,$loaded:!1,$dragOver:!1,$backgroundLoaded:!1,$backgroundEditing:!1,$backgroundSelected:!1};var l=c,u=n("47d6"),d={enable:!1,type:"color",opacity:1,width:10,direction:[1,1,1,1],image:"",imageRepeat:"round",imageSlice:{left:0,right:0,top:0,bottom:0},color:"#000000ff",$loaded:!1},h=d,f={enable:!1,type:"gradient",opacity:1,gradient:{angle:0,stops:[{color:"#ffffffff",offset:0},{color:"#000000ff",offset:1}],type:"linear"},image:{url:"",repeat:"no-repeat",transform:{a:1,b:0,c:0,d:1,tx:0,ty:0},naturalWidth:0,naturalHeight:0},ninePatch:{url:"",imageSlice:{left:0,top:0,right:0,bottom:0},originWidth:0,originHeight:0,effectScale:1}},m=f,g={height:480,width:640,backgroundImage:null,backgroundColor:"#ffffff00",backgroundImageInfo:{opacity:1,width:100,height:100,transform:{a:1,b:0,c:0,d:1,tx:0,ty:0}},backgroundRepeat:"no-repeat",backgroundSize:[0,0],watermarkEnable:!1,$backgroundLoaded:!1,$backgroundEditing:!1,$backgroundSelected:!1},p=g,v={version:Object({NODE_ENV:"production",VUE_APP_ENV:"prod",VUE_APP_GAODINGX_URL:"https://www.gaoding.com",VUE_APP_OSS_HOST:"st-gdx.dancf.com",VUE_APP_UMS_URL:"https://ums.gaoding.com",VUE_APP_GAODINGX_WAP_URL:"https://m.gaoding.com",VUE_APP_SEARCH_API_URL:"https://search.hlgdata.com",VUE_APP_SEARCH_V2_API_URL:"https://search-v2.hlgdata.com",VUE_APP_SEARCH_INNER_API_URL:"http://search.inner.hlgdata.com",VUE_APP_DIANSHANG_URL:"https://dianshang.gaoding.com",VUE_APP_SEARHC_PIC_URL:"https://ai-temp-retrieval.dancf.com",VUE_APP_TEAM_API:"https://www.gaoding.com/api/team-service",VUE_APP_RAM_API:"https://www.gaoding.com/api/team-ram",VUE_APP_LOGROCKET_ENV:"master",VUE_APP_TRACKER_ENV:"prod",VUE_APP_SENTRY_ENV:"production",VUE_APP_DESIGN_CATEGORY_ENV:"prod",VUE_APP_PAY_ENV:"production",VUE_APP_FONTER_API:"https://fonter.dancf.com",VUE_APP_OAUTH2_ENV:"prod",VUE_APP_DESIGN_AB_TEST_APP_NAME:"gd_web",VUE_APP_DESIGN_AB_TEST_APP_KEY:"ABTEST_f6519045-8bfd-4f0d-b690-8ab5b019bf8c",VUE_APP_PAY_QRCODE_URL:"https://m.gaoding.com",VUE_APP_PAY_QRCODE_V2_URL:"https://m.gaoding.com/me/pay",VUE_APP_UXMS_ORIGIN:"https://uxms.gaoding.com",VUE_APP_INPAINT_URL:"http://172.16.2.30/inpaint/v10",VUE_APP_SAAS_BASE_URL:"https://api.my.gaoding.com",VUE_APP_SAAS_SSO_URL:"https://sso.my.gaoding.com",VUE_APP_SAAS_EXTRANET_URL:"https://qiye.gaoding.com",VUE_APP_DOMAIN_URL:"qiye.gaoding.com",VUE_APP_SAAS_OAUTH2_CLIENT_ID:"saas",VUE_APP_QIYE_OAUTH2_CLIENT_ID:"qiye",VUE_APP_GAODING_CHANNEL_ID:"8",VUE_APP_CMS_ORGIN:"https://odyssey-cms.gaoding.com",VUE_APP_TEMPLATE_FILTER_ID:"4812582",VUE_APP_CHANNEL_CATEGORY_ID:"513",VUE_APP_UXMS_USER_ID:"353976720",VUE_APP_ODYSSEY_ABTEST_ACTIVITIES:"odyssey_private_config",VUE_APP_ODYSSEY_ABTEST_NAME:"gd_web",VUE_APP_ODYSSEY_ABTEST_KEY:"ABTEST_f6519045-8bfd-4f0d-b690-8ab5b019bf8c",VUE_APP_CMC_CD_ORG_ID:"8012556623856798766",VUE_APP_CMC_CD_ORG_CODE:"mcm79j",VUE_APP_ANALYTICS_ORGIN:"https://odyssey-analytics.gaoding.com/",VUE_APP_LEADERBOARD_ORGIN:"https://odyssey-game.gaoding.com/",VUE_APP_LEADERBOARD_INSTANCE_URL:"https://leaderboard-code.my.gd-share.cn/",VUE_APP_GD_ADVERT_ORIGIN:"https://www.gaoding.com",VUE_APP_QINGZHAN_ORGIN:"https://www.qingzhan.com",VUE_APP_PROJECT_NAME:"design",VUE_APP_FETCH_CHANNEL_ID:"8",VUE_APP_CHANNEL_ID:"8",VUE_APP_GD_DOMAIN_PUBLISH_URLS:"g.h5gdsvip.com|g.gd-share.cn|g.h5gd.com|g.h5gdvip.com|g1.h5gdvip.com",VUE_APP_MEDIA_SVIP_ID:"125",VUE_APP_OSS_ORGIN:"https://dancf-st-gdx.oss-cn-hangzhou.aliyuncs.com",VUE_APP_GAODING_ADVERT:"GAODING-ADVERT",VUE_APP_DATA_TRACKER:"https://data-think-tank.gaoding.com",VUE_APP_GDEESIGN_DAM_URL:"http://gdesign-dam-gateway.api.prod",BASE_URL:"//cdn.dancf.com/odyssey-editor/"}).VUE_APP_DOCUMENT_VERSION||i.version,options:s,metaInfo:null,global:{zoom:1,dpi:72,unit:"px",showWatermark:!1,referenceLines:[],layout:p,metaInfo:null,cover:null},globalExts:{$draging:!1,$rendered:!1,$loaded:!1,$tempGroup:!1,$referenceLineDraging:!1},layout:l,element:u["a"],border:h,backgroundEffect:m,flex:{alignSelf:"auto",flexGrow:0,flexShrink:1,flexBasis:-1,margin:[0,0,0,0]},elementExts:{$id:0,$loaded:!1,$selected:!1,$editing:!1,$draging:!1,$blinking:!1,$imageDraging:!1,$guider:{show:!0,snapTo:!0,marginShow:!0,resizeShow:!0},$getDragLimit:null,$getResizeLimit:null,$dragLimit:!1,$resizeLimit:!1,$autoFlatten:!0,$parentId:"",$cacheParentId:"",$tempGroupId:"",$renderId:""},textEffect:{enable:!0,excludeScale:[],offset:{x:0,y:0},skew:{enable:!1,x:0,y:0},stroke:{enable:!1,type:"center",color:"#000000",width:0},shadow:{enable:!1,color:"#000000",offsetX:0,offsetY:0,blur:0},filling:{enable:!1,type:0,color:"#000000",imageContent:{repeat:0,scaleX:1,scaleY:1,image:null,width:null,height:null},gradient:{byLine:0,angle:0,stops:[{color:"#FFFFFF",offset:0},{color:"#000000",offset:1}]}}},imageEffect:{enable:!0,collapse:!1,excludeScale:[],offset:{enable:!0,x:0,y:0},stroke:{enable:!1,color:"#000000",width:0},shadow:{enable:!1,inset:!1,color:"#000000",offsetX:0,offsetY:0,blur:0},expand:{enable:!1,offset:{left:0,top:0,right:0,bottom:0},scale:1},filling:{enable:!1,type:"color",color:"#000000",imageContent:{repeat:"no-repeat",scaleX:1,scaleY:1,image:null,width:null,height:null},gradient:{byLine:0,angle:0,stops:[{color:"#FFFFFF",offset:0},{color:"#000000",offset:1}],type:"linear"}},mask:{type:"ellipse",enable:!1,image:null,height:null,width:null,radius:0,repeat:"no-repeat"}},imageElement:{url:"",imageUrl:"",effectedResult:{width:0,height:0,left:0,right:0},imageEffects:[],aggregatedColors:[],mainColor:null,effectScale:1,imageTransform:{a:1,b:0,c:0,d:1,tx:0,ty:0},filterInfo:null,naturalWidth:0,naturalHeight:0,resourceType:"image",naturalDuration:0,enableDragToMask:!0,blendMode:"blendNormal",loop:0,$playing:!1,$frames:[],$currentTime:0,$enableImageRenderer:!0,speed:1},videoElement:{url:"",mask:"",naturalWidth:0,naturalHeight:0,imageWidth:0,imageHeight:0,effectedResult:{width:0,height:0,left:0,right:0},imageTransform:{a:1,b:0,c:0,d:1,tx:0,ty:0},startTime:0,endTime:0,naturalDuration:0,previewImageUrl:"",duration:0,fps:30,volume:1,speed:1,voxType:"default",currentFrame:0,loop:1,muted:!1,invertPlay:!1,$playing:!1,$currentTime:0},audioElement:{url:"",startTime:0,endTime:0,naturalDuration:0,duration:0,volume:1,speed:1,voxType:"default",$currentTime:0,loop:1,muted:!1,invertPlay:!1,title:"",hidden:!0,frozen:!0,width:0,height:0,padding:[0,0,0,0]},textElement:{color:"#000000",padding:[0,0,0,0],fontFamily:"Simsun",fontStyle:"normal",fontWeight:400,fontSize:20,lineHeight:1.2,letterSpacing:0,textDecoration:"none",writingMode:"horizontal-tb",textAlign:"left",verticalAlign:"top",content:"",contents:[],effectScale:1,textShadow:null,resize:5,autoScale:!0,textEffects:[],aggregatedColors:[],mainColor:null,listStyle:"",autoAdaptive:1,adjustsFontSize:!1},svgElement:{url:"",content:"",colors:null,resize:7,containerTransform:null},maskElement:{resize:1,url:"",mask:"",imageUrl:"",imageTransform:{a:1,b:0,c:0,d:1,tx:0,ty:0},effectedResult:{width:0,height:0,left:0,right:0},aggregatedColors:[],mainColor:null,effectScale:1,imageEffects:[],filterInfo:null,naturalWidth:0,naturalHeight:0,resourceType:"image",$frames:[],$currentTime:0,$enableImageRenderer:!0},groupElement:{elements:[],splitenable:!0,resize:1,autoGrow:!1},ninePatchElement:{url:"",imageUrl:"",imageSlice:{left:0,top:0,right:0,bottom:0},originWidth:0,originHeight:0,effectScale:1},watermarkElement:{resize:1,groupable:!1,waterType:0,isCustom:!1,imageUrl:"",imageWidth:0,imageHeight:0,cellLeft:0,cellTop:0,cellTransform:{a:1,b:0,c:0,d:1,tx:0,ty:0},fullScreenInfo:{left:0,top:0,leftIndent:0,colGap:0,rowGap:0,repeat:[{leftIndent:0,colGap:0,rowGap:0,transform:{a:1,b:0,c:0,d:1,tx:0,ty:0}}]},template:{transform:{a:1,b:0,c:0,d:1,tx:0,ty:0}},logo:{enable:!0,url:"",defaultUrl:"",placeholder:""},$logoModel:null,$infoModels:[],$titleModel:null,$backgroundModel:null},rectElement:{radius:0,fill:null,stroke:"#000000FF",strokeWidth:1,strokeLineStyle:"solid",strokeDasharray:[],maskEnable:!1},ellipseElement:{fill:null,stroke:"#000000FF",strokeWidth:1,strokeLineStyle:"solid",strokeDasharray:[],maskEnable:!1},lineElement:{stroke:"#000000FF",strokeWidth:1,strokeLineStyle:"solid",strokeDasharray:[],resize:4},arrowElement:{color:"#000000FF",head:{svg:"",$svg:"",left:0,top:0,width:0,height:0},tail:{svg:"",$svg:"",left:0,top:0,width:0,height:0},trunk:{top:0,left:0,width:0,height:0,leftHeight:0,rightHeight:0},resize:4,minWidth:150,$originalScale:null,$minScale:1},brushElement:{path:"",stroke:"#000000FF",strokeWidth:1,strokeLineStyle:"solid",strokeDasharray:[]},effectTextElement:{$miniFontSize:12,typoWidthRatio:1,typoHeightRatio:1,color:"#000000",padding:[0,0,0,0],fontFamily:"Simsun",fontStyle:"normal",fontWeight:400,fontSize:20,lineHeight:1.2,letterSpacing:0,textDecoration:"none",writingMode:"horizontal-tb",textAlign:"left",verticalAlign:"top",contents:[],effectScale:1,resize:1,textEffects:[],deformation:{enable:!1,type:"archCurve",intensitys:[50],isFollowTangent:!0,randNum:0},aggregatedColors:[],mainColor:null,image:{offset:{x:0,y:0},width:400,height:200},autoAdaptive:3},threeTextElement:{resize:1,rotate3d:[.4400000000000002,-.5800000000000001,0],fontFamily:"Reeji - CloudYuanCu - GB - Regular",layers:[{frontMaterials:{metalRoughness:"#00ffff",normal:"#807fff",albedo:{type:1,image:"https://st0.dancf.com/csc/147/material-three-textures/0/20190606-150053-46e8.jpg",color:"#ace030ff",gradient:{angle:0,stops:[{color:"#ffffffff",offset:0},{color:"#000000ff",offset:1}],direction:[1,0,0],type:0,face:0},texRotateAngle:0,texTranslate:[0,0]},metalStrength:.4252873563218391,roughnessStrength:.25287356321839083,albedoStrength:1,normalStrength:0,normalDisable:!1,scale:1},sideMaterials:{enable:!1,metalRoughness:"#00ffff",normal:"#807fff",albedo:{type:0,image:"",color:"#0008ffff",gradient:{angle:0,stops:[{color:"#ffffffff",offset:0},{color:"#000000ff",offset:1}],direction:[1,0,0],type:0,face:0},texRotateAngle:0,texTranslate:[0,0]},metalStrength:1,roughnessStrength:1,albedoStrength:1,normalStrength:0,normalDisable:!1,scale:1},bevelMaterials:{enable:!1,metalRoughness:"#00ffff",normal:"#807fff",albedo:{type:0,image:"",color:"#ff00ffff",gradient:{angle:0,stops:[{color:"#ffffffff",offset:0},{color:"#000000ff",offset:1}],direction:[1,0,0],type:0,face:0},texRotateAngle:0,texTranslate:[0,0]},metalStrength:1,roughnessStrength:0,albedoStrength:1,normalStrength:2,normalDisable:!1,scale:1},bevelSize:80,bevelThickness:10,bevelSegments:4,bevelType:"quadEllipse",curveSegments:1,extrudeDepth:40,extrudeOffsetX:0,extrudeOffsetY:0,extrudeScaleX:0,extrudeScaleY:0}],pointLights:[],viewAngle:30,environment:{enable:!0,maps:["https://st-gdx.dancf.com/gaodingx/17/design/three/20190530-210836-623d.jpg"],strength:1.031914893617021,rotate3d:[0,0,0]},fontSize:200,content:"a",contents:[],lineHeight:1,letterSpacing:0,textAlign:"center",writingMode:"horizontal-tb",isOrtho:!1,shadow:{enable:!1,type:"projection-2d",blur:10,color:"#000000ff",offset:0,opacity:1,angle:0,isBindRotate:!1,offsetRatio:1},deformation:{type:"none",intensity:0,intensity1:0,extrudeScaleX:0,extrudeScaleY:0},warpByWord:{enable:!1,intensity:0,intensity1:0,randNum:1e3,pattern:"1",offsetX:0},modelCube:[-.7524567801774561,.7734723016721756,-.9387875937860526,.7611583178067339],centerRatioX:-.5,centerRatioY:-.5,imageUrl:"",isMesh:!1,hemiLight:{enable:!1,color:"#ffffff",dir:[0,0,1],strength:1},isFloodLightOff:!1},flexElement:{elements:[],autoAdaptive:0,splitenable:!0,resize:7,flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-start",alignContent:"flex-start",flexWrap:"nowrap"}},b=function t(e){(Object(r["isObject"])(e)||Object(r["isArray"])(e))&&Object(r["forIn"])(e,(function(n,i){"aggregatedColors"===i?e[i]=e[i].map((function(t){return o()(t).toString("rgb")})):"color"===i||"backgroundColor"===i?e[i]=n?o()(n).toString("rgb"):n:t(n)}))};b(v);e["a"]=v},"4a6f":function(t,e){t.exports='<div class="editor-canvas editor-flow" :style="flowStyle">\n    \x3c!-- Layout --\x3e\n    <editor-layout\n        v-for="(layout, index) in layouts"\n        :key="layout.$id || index"\n        :editor="editor"\n        :options="options"\n        :global="global"\n        :layout="layout"\n    >\n    </editor-layout>\n</div>\n'},"4a77":function(t,e,n){},"4bab":function(t,e,n){"use strict";n("5cfb")},"4d06":function(t,e,n){},5342:function(t,e,n){"use strict";n.d(e,"d",(function(){return d})),n.d(e,"a",(function(){return f})),n.d(e,"c",(function(){return v})),n.d(e,"b",(function(){return b}));var i=n("2909"),r=n("5530"),a=(n("4de4"),n("d3b7"),n("159b"),n("d81d"),n("99af"),n("13d5"),n("2ef0")),o=n("7aca"),s=n("2032"),c=n("b494"),l=Math.max,u=Math.round;function d(t,e){var n=t.width,i=t.height,r=t.hasEffects,a=t.effectedResult,o=t.resourceType,s=r&&(!o||"image"===o);return{canvas:e,offsetX:s?-a.left:0,offsetY:s?-a.top:0,elementRealWidth:s?a.width:n,elementRealHeight:s?a.height:i}}function h(t){var e=0,n=0,i=0,r=0;if(t.offset&&t.offset.enable&&(e+=t.offset.x,n-=t.offset.x,i+=t.offset.y,r-=t.offset.y),t.stroke&&t.stroke.enable){var a=6,o="outer"===t.stroke.type?2:1;e+=t.stroke.width*o+a,n+=t.stroke.width*o+a,i+=t.stroke.width*o+a,r+=t.stroke.width*o+a}return t.shadow&&t.shadow.enable&&(e+=Math.max(t.shadow.offsetX,0),n-=Math.min(t.shadow.offsetX,0),i+=Math.max(t.shadow.offsetY,0),r-=Math.min(t.shadow.offsetY,0),e+=t.shadow.blur,n+=t.shadow.blur,i+=t.shadow.blur,r+=t.shadow.blur),[e,n,i,r]}function f(t){var e=[0,0,0,0];return t=t.filter((function(t){return t.enable})),t.forEach((function(t){for(var n=h(t),i=0;i<4;i++)e[i]=Math.max(e[i],Math.ceil(n[i]),0)})),{left:e[1],top:e[3],right:e[0],bottom:e[2]}}function m(t){var e=t.elements.map((function(t){var e=b(t),n={x:t.left+t.width/2,y:t.top+t.height/2},i=Object(a["get"])(t,"transform.toJSON")?t.transform:Object(c["b"])(t.transform),r=o["a"].newGetRectPoints({left:t.left+e.left,top:t.top+e.top,width:e.width,height:e.height,rotate:i.rotate,scaleX:i.scale.x,scaleY:i.scale.y},n),s=o["a"].getRectByPoints(r);return s}));return e=e.concat([{width:t.width,height:t.height,left:0,top:0,rotate:0}]),o["a"].getBBoxByBBoxs(e)}function g(t){var e=f(t.imageEffects);return{left:-e.left,top:-e.top,width:t.width+e.left+e.right,height:t.height+e.top+e.bottom}}function p(t){var e={width:t.width,height:t.height,left:0,top:0,rotate:0},n=t.textEffects.filter((function(t){return t.enable&&t.skew&&t.skew.enable}));if(!n.length)return e;var i=n.reduce((function(t,n){var i=o["a"].newGetRectPoints(Object(r["a"])(Object(r["a"])({},e),{},{skewX:s["a"].degToRad(n.skew.x),skewY:s["a"].degToRad(n.skew.y)}),{x:0,y:0});return t.push(i.nw,i.ne,i.sw,i.se),t}),[]),a=1/0,c=1/0,l=-1/0,u=-1/0;return i.forEach((function(t){t.x<c&&(c=t.x),t.x>l&&(l=t.x),t.y<a&&(a=t.y),t.y>u&&(u=t.y)})),{width:l-c,height:u-a,left:c,top:a}}function v(t){if(0===t.autoAdaptive)return{left:0,top:0,width:u(t.width),height:u(t.height)};var e=p(t),n=f(t.textEffects),r=t.contents||[t],a=l.apply(void 0,Object(i["a"])(r.map((function(e){return e.fontSize||t.fontSize}))))/2;return{width:u(e.width+n.left+n.right+a),height:u(e.height+n.top+n.bottom+a),left:u(e.left-n.left-a/2),top:u(e.top-n.top-a/2)}}function b(t){switch(t.type){case void 0:return m(t);case"group":return m(t);case"flex":return m(t);case"image":return g(t);case"mask":return g(t);case"text":return v(t)}return t.imageUrl&&t.effectedResult?t.effectedResult:{left:0,top:0,width:t.width,height:t.height}}},"573f":function(t,e,n){"use strict";var i=n("a026"),r=(n("d3b7"),n("d9e2"),function(t){var e="mycustom-clipboard-textarea-hidden-id",n=document.getElementById(e);if(!n){var i=document.createElement("textarea");i.id=e,i.style.position="fixed",i.style.top="-1px",i.style.left="-1px",i.style.width="1px",i.style.height="1px",i.style.padding=0,i.style.border="none",i.style.outline="none",i.style.boxShadow="none",i.style.background="transparent",document.querySelector("body").appendChild(i),n=document.getElementById(e)}return n.value=t,n.select(),new Promise((function(t,e){try{var n=document.execCommand("copy");n?t():e(new Error("复制失败！"))}catch(i){e(i)}}))});e["a"]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=t||window.location.href;i["default"].prototype.$confirm({icon:function(){return""},title:"无法打开页面中的链接",content:"请复制链接后在其他浏览器打开，以获得更好的使用体验！",okText:"复制链接",onOk:function(){r(e),i["default"].prototype.$message.info("复制成功！")},onCancel:function(){},class:"link-tip"})}},5916:function(t,e,n){},"59da":function(t,e){t.exports='<div\n    class="editor-element"\n    :class="[\n        \'editor-element-\' + model.type,\n        model.lock ? \'editor-element-lock\' : \'\',\n        model.hidden ? \'editor-element-hidden\' : \'\',\n        model.frozen ? \'editor-element-frozen\' : \'\',\n        model.$loaded ? \'\' : \'editor-element-loading\',\n        model.$selected ? \'editor-element-selected\' : \'\',\n        model.$editing ? \'editor-element-editing\' : \'\',\n        linkSelected ? \'editor-element-link-selected\' : \'\'\n    ]"\n    :style="[cssStyle, baseStyle]"\n>\n    <div v-if="isBackground" draggable="false" class="element-main" :style="mainStyle">\n        <div\n            class="element-main-inner"\n            :style="imageWrapStyle"\n        >\n            <img\n                ref="img"\n                crossorigin\n                v-if="!canvasRendered || !model.hasFilters"\n                :src="imageUrl || originUrl || null" :style="imageStyle" />\n\n            <canvas\n                v-else\n                ref="canvas"\n                :style="imageStyle"\n            />\n        </div>\n    </div>\n\n    <div v-else draggable="false" class="element-main" :style="mainStyle">\n        <template v-if="isVideoResource">\n            <div class="element-main-inner" :style="imageWrapStyle">\n                <video\n                    ref="video"\n                    crossorigin="anonymous"\n                    :src="originUrl || null"\n                    :style="imageStyle"\n                />\n            </div>\n        </template>\n\n        <template v-else-if="model.$imageDraging || !canvasRendered">\n            <div class="element-main-inner" v-if="usePlaceholder" :style="imageWrapStyle">\n                <img ref="img" crossorigin :src="options.placeImage" :style="imageStyle" />\n            </div>\n            <div\n                class="element-main-inner"\n                v-else-if="showOriginImage || model.$imageDraging"\n                :style="imageWrapStyle"\n            >\n                <img ref="img" crossorigin :src="originUrl || null" :style="imageStyle" />\n            </div>\n            <img ref="img" v-else crossorigin :src="effectedImageUrl" :style="effectedImageStyle" />\n        </template>\n\n        <canvas\n            ref="canvas"\n            :style="effectedImageStyle"\n            v-if="canvasRendered"\n            v-show="!model.$imageDraging"\n        />\n    </div>\n\n    <div class="element-tips-loading" v-if="lazyRendering">\n        <i class="fa fa-spin fa-spinner"></i>\n    </div>\n\n    <ElementCommon\n        v-if="!isBackground"\n        :element="model"\n        :options="options"\n        :global="global"\n        :editor="editor"\n        :layout="editor.currentLayout"\n        :hideBlink="hideBlink"\n        :isShowBlink="isShowBlink"\n        :bgNinePatch="bgNinePatch"\n    />\n</div>\n'},"5b44":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"e",(function(){return c})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return u}));n("d3b7"),n("25f0"),n("acd8"),n("ac1f"),n("1276"),n("5319"),n("7db0"),n("159b"),n("b64b");var i=n("66cb"),r=n.n(i),a=n("2ef0"),o="data-customize",s=d({color:"color","text-decoration":"textDecoration","text-decoration-line":"textDecoration","font-size":"fontSize","font-family":"fontFamily","font-weight":"fontWeight","font-style":"fontStyle"});s.textDecoration="text-decoration";var c={color:function(t){return t&&r()(t).toString("rgb")},"font-size":function(t){return isNaN(t-0)?t:t+"px"},fontSize:function(t){return parseFloat(t)},"font-weight":h,fontWeight:h,fontFamily:function(t){var e=t.replace(/"/g,"").split(",");return e=e.find((function(t){return-1===t.indexOf("-subset")}))||"",Object(a["trim"])(e)},textDecoration:function(t){return null===t||"null"===t?"none":t},"text-decoration":function(t){return null===t||"null"===t?"none":t},fontStyle:function(t){return null===t||"null"===t?"normal":t},"font-style":function(t){return null===t||"null"===t?"normal":t}},l={fontWeight:"bold",fontStyle:"italic",color:"foreColor",fontFamily:"fontName"},u={fontSize:function(t){return parseFloat(t)},fontWeight:function(t){return t?700:400},fontStyle:function(t){return t?"italic":"normal"},fontFamily:function(t){if(t){var e=t.toString().replace(/"/g,"").split(",");return e=e.find((function(t){return-1===t.indexOf("-subset")}))||"",Object(a["trim"])(e)}return t},color:function(t){return t},textDecoration:function(t){return t}};function d(t){return Object.keys(t).forEach((function(e){t[t[e]]=e})),t}function h(t){var e={700:700,bold:700,true:700};return e[t]||400}},"5c33":function(t,e){t.exports='<div\n    class="editor-element"\n    :class="[\n        \'editor-element-ninePatch\',\n        model.lock ? \'editor-element-lock\' : \'\',\n        model.hidden ? \'editor-element-hidden\' : \'\',\n        model.frozen ? \'editor-element-frozen\' : \'\',\n        model.$loaded ? \'\' : \'editor-element-loading\',\n        model.$selected ? \'editor-element-selected\' : \'\',\n        model.$editing ? \'editor-element-editing\' : \'\'\n    ]"\n    :style="baseStyle"\n>\n    <div class="element-main" :style="mainStyle" v-if="!canvasRender" />\n    <canvas class="element-main" ref="canvas" v-show="canvasRender"></canvas>\n    <ElementCommon\n        :element="model"\n        :options="options"\n        :global="global"\n        :editor="editor"\n        :layout="editor.currentLayout"\n        :hideBlink="hideBlink"\n        :isShowBlink="isShowBlink"\n        :bgNinePatch="bgNinePatch"\n    />\n</div>\n'},"5cfb":function(t,e,n){},"5eea":function(t,e,n){"use strict";var i=n("5530"),r=(n("a15b"),n("4de4"),n("d3b7"),n("b64b"),n("25f0"),n("7db0"),n("caad"),n("2532"),n("3ca3"),n("ddb0"),n("159b"),n("b0c0"),n("d81d"),n("f4d5")),a=n("bcdf"),o=n.n(a),s=n("6747"),c=n.n(s),l=n("9b02"),u=n.n(l),d=n("f684"),h=n.n(d),f=n("af9f"),m=n("c9b4"),g=n("2ef0"),p=n("9178");function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy",e=document.querySelector(".editor-transform");e&&(e.style.cursor=t)}var b={props:["model","global","options"],data:function(){return{dragger:{pageX:0,pageY:0,left:0,top:0,dx:0,dy:0}}},methods:{isDraggable:function(t){var e,n=this.model,i=this.editor.currentElement;return!(t.touches&&(!i||(null===i||void 0===i?void 0:i.$id)!==n.$id||(null===(e=t.touches)||void 0===e?void 0:e.length)>=2))&&!(!n||n.$parentId||n.lock||n.$draging||!n.dragable||void 0!==t.button&&0!==t.button||"design"!==this.options.mode&&"flow"!==this.options.mode||f["a"].isEditable(t.target))},initDragger:function(t){var e=this,n=Object(r["a"])(document),i=this.dragger,a=!1,o=!1;function s(){o=!0,v(),e.editor.toggleSnapshot(!1)}function c(){o=!1,v(""),e.editor.toggleSnapshot(!0)}var l={init:function(t,r){if(t=r||t,e.isDraggable(t)){var a=e.model,o=Object(p["a"])(t),s=o.pageX,c=o.pageY;Object(g["assign"])(i,{left:a.left,top:a.top,pageX:s,pageY:c,dx:0,dy:0}),n.on("mousemove",l.move),document.documentElement.addEventListener("touchmove",l.move,{passive:!1,capture:!0}),n.one("mouseup",l.cancel),n.one("touchend",l.cancel)}},move:function(t){var n=e.model,r=e.editor;if(n){if(t.stopPropagation(),t.cancelable&&t.preventDefault(),t.altKey&&!o&&!r.hotkeys._disabled){s();var c="$"===n.type[0]?n.elements:[n];r.pasteElement(r.copyElement(c),null,{noOffset:!0}),1===c.length&&(r.focusElement(c[0]),r.setElementToTop(c[0]))}var l=e.global.zoom,u=Object(p["a"])(t).pageX,d=Object(p["a"])(t).pageY;if(i.dx=(u-i.pageX)/l,i.dy=(d-i.pageY)/l,t.shiftKey){if(!a&&(Math.abs(i.dx)>=3||Math.abs(i.dy)>=3)){var h=Math.abs(i.dx/i.dy);a=h>1?"x":"y"}"x"===a?i.dy=0:i.dx=0}var f=3;!n.$draging&&(Math.abs(i.dx)>=f||Math.abs(i.dy)>=f)&&(n.$draging=!0,e.$events.$emit("base.dragStart",n,t)),n.$draging&&e.$events.$emit("base.dragMove",i,n,t)}},cancel:function(){c(),n.off("mousemove",l.move),document.documentElement.removeEventListener("touchmove",l.move,{passive:!1,capture:!0});var t=e.model;t&&t.$draging&&(t.$draging=!1,e.$events.$emit("base.dragEnd",t)),a=!1}};t.on("mousedown.editor-dragger",l.init),t.on("touchstart.editor-dragger",l.init),this.$on("destroy",(function(){t.off(".editor-dragger")}))}},events:{"base.dragMove":function(t,e){if(e!==this.model||e.lock||!this.isDesignMode)return!1;var n=t.dx,i=t.dy,r=t.left+t.dx,a=t.top+t.dy;e.$customDragMove?this.$events.$emit("element.customDragMove",{element:e,dx:n,dy:i,drag:t}):this.customDragMove?this.customDragMove({element:e,dx:n,dy:i,drag:t}):(e.left=r,e.top=a)}},mounted:function(){var t=this;this.$nextTick((function(){var e=Object(r["a"])(t.$el);e.length&&t.initDragger(e)}))},beforeDestroy:function(){this.$emit("destroy")}},y=n("49bc"),w=n("1c39"),_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t.isShowBlink?n("div",{staticClass:"element-blink",on:{animationend:t.hideBlink}}):t._e(),n("i",{staticClass:"border-before",style:{visibility:t.global.$draging?"hidden":"unset"}}),t.element.watermarkEnable?n("watermark",{attrs:{global:t.global,options:t.options,model:t.element}}):t._e(),t.backgroundVisible?n("background",{attrs:{element:t.element,mode:t.options.mode,global:t.global,options:t.options,layout:t.layout}}):t._e(),t.element.backgroundEffect&&t.element.backgroundEffect.enable&&"ninePatch"===t.element.backgroundEffect.type&&t.editor.supportTypesMap.ninePatch?n("ninePatch-element",{staticClass:"is-background",attrs:{editor:t.editor,model:t.bgNinePatch,global:t.global,options:t.options}}):t._e(),t.element.border&&t.element.border.enable?n("border",{attrs:{global:t.global,options:t.options,mode:t.options.mode,element:t.element,layout:t.layout}}):t._e()],1)},x=[],k=n("a026"),E=n("3c8c"),O=(n("bf19"),n("99af"),n("449d")),S=n.n(O),j=n("66cb"),I=n.n(j),A=n("b494"),T={props:["layout","element","global","options","selected","mode"],name:"editor-element-background",template:S.a,data:function(){return{}},computed:{editor:function(){return this.$parent.editor||this.$parent.$parent},isDesignMode:function(){return"design"===this.options.mode||"flow"===this.options.mode},model:function(){return this.element},opacity:function(){return u()(this,"model.backgroundEffect.opacity",1)},effectImage:function(){return"image"===u()(this,"element.backgroundEffect.type")&&u()(this,"element.backgroundEffect.image")},effectGradient:function(){return"gradient"===u()(this,"element.backgroundEffect.type")&&u()(this,"element.backgroundEffect.gradient")},$imageWidth:function(){return Math.abs(this.effectImage.naturalWidth*this.backgroundTransform.scale.x)},$imageHeight:function(){return Math.abs(this.effectImage.naturalHeight*this.backgroundTransform.scale.y)},$imageLeft:function(){var t=this.backgroundTransform.position,e=this.$imageWidth,n=this.model.width;return n/2-e/2+t.x},$imageTop:function(){var t=this.backgroundTransform.position,e=this.$imageHeight,n=this.model.height;return n/2-e/2+t.y},backgroundImage:function(){return this.effectImage&&this.effectImage.url},backgroundTransform:function(){var t=this.effectImage.transform;return t.toJSON?t:Object(A["b"])(t)},backgroundImageInfo:function(){return this.layout.backgroundImageInfo||{}},backgroundColor:function(){var t=this.model.backgroundColor;return t?I()(t).toString("rgb"):""},mainStyle:function(){var t=this.effectGradient,e=this.opacity,n={opacity:e};if(t){var i=[];i.push(90-t.angle+"deg"),t.stops.forEach((function(t){i.push("".concat(t.color," ").concat(100*t.offset,"%"))}));var r=i.join(",");n.backgroundImage="linear-gradient(".concat(r,")")}return n},imageStyle:function(){var t=this.global,e=this.backgroundTransform,n=e.scale,i=e.rotation,r=this.opacity;return{position:"absolute",left:this.$imageLeft*t.zoom+"px",top:this.$imageTop*t.zoom+"px",width:this.$imageWidth*t.zoom+"px",height:this.$imageHeight*t.zoom+"px",transform:"rotate(".concat(i,"rad) scale(").concat(n.x>0?1:-1,", ").concat(n.y>0?1:-1,")"),opacity:r}}}},C=n("bf7d"),P=n("032a"),$=Object(E["a"])(k["default"],{name:"element-common",components:{background:Object(E["a"])(k["default"],T),watermark:Object(E["a"])(k["default"],C["a"]),border:Object(E["a"])(k["default"],P["a"])},props:{editor:{type:Object,required:!0},options:{type:Object,required:!0},element:{type:Object,required:!0},layout:{type:Object,required:!0},global:{type:Object,required:!0},hideBlink:{type:Function,default:function(){}},isShowBlink:{type:Boolean,default:!1},bgNinePatch:{type:Object,default:null}},computed:{backgroundVisible:function(){var t,e,n=this.element,i=n.backgroundColor&&I()(n.backgroundColor).getAlpha();return i||(null===n||void 0===n||null===(t=n.backgroundEffect)||void 0===t?void 0:t.enable)&&(null===n||void 0===n||null===(e=n.backgroundEffect)||void 0===e?void 0:e.type)}}}),M=$,R=n("2877"),L=Object(R["a"])(M,_,x,!1,null,null,null),U=L.exports,z=Object(m["a"])(b,{name:"base-element",components:{ElementCommon:U},props:["isWatermarkChildren","editor","options"],data:function(){return{dragLocked:!1,errorMessage:""}},watch:{"model.$editing":function(){this.model.$blinking=!1}},computed:{zoom:function(){return this.global.zoom},isDesignMode:function(){return"design"===this.options.mode||"flow"===this.options.mode},isPreviewMode:function(){return"preview"===this.options.mode},isInEditor:function(){var t=this.$parent;while(t){if(t===this.editor)return!0;t=t.$parent}return!1},isSvg:function(){return"svg"===this.model.type},isMask:function(){return"mask"===this.model.type},isText:function(){return"text"===this.model.type},isEffectText:function(){return"effectText"===this.model.type},isImage:function(){return"image"===this.model.type},isVideo:function(){return"video"===this.model.type},isGroup:function(){return Object(w["d"])(this.model)},isStyledText:function(){return"styledText"===this.model.type},isChart:function(){return"chart"===this.model.type},isThreeText:function(){return"threeText"===this.model.type},isWatermark:function(){return"watermark"===this.model.type},isLine:function(){return"line"===this.model.type},isArrow:function(){return"arrow"===this.model.type},isRect:function(){return"rect"===this.model.type},isEllipse:function(){return"ellipse"===this.model.type},transform:function(){return this.isWatermarkChildren?"":this.model.transform},rect:function(){var t=this.model,e=this.global.zoom;return f["a"].getElementRect(t,e)},opacity:function(){var t=this.model,e=t.opacity,n=t.maskInfo;return n&&n.enable&&!n.showSelf?0:e>.999?null:e},padding:function(){var t=this.rect;return t.padding.join("px ")+"px"},boxShadow:function(){var t=this.model.boxShadow;return t?[t.offsetX+"px",t.offsetY+"px",t.blurRadius+"px",t.spreadRadius+"px",t.color].join(" "):""},borderRadius:function(){var t=this.model.borderRadius;return t?t<1?100*t+"%":t*this.global.zoom+"px":0},isFilters:function(){var t=this.model.filter,e=Object.keys(t);return e.some((function(e){return t[e]!==y["a"].element.filter[e]}))&&(!this.model.filterInfo||!this.model.filterInfo.url||!this.model.filterInfo.prunedZipUrl)},isShowBlink:function(){var t=this.model,e=this.options,n=this.isMask,i=this.isImage,r=t.frozen,a=t.hidden,o=t.editable,s=t.$loaded,c=t.$blinking,l=("design"===e.mode||"flow"===e.mode)&&c&&!r&&!a&&o;return n||i?s&&l:!this.isGroup&&l},baseStyle:function(){var t=this.rect,e=this.opacity;return{height:t.height+"px",width:t.width+"px",transform:this.transform?this.transform.toString():"",left:t.left+"px",top:t.top+"px",opacity:e}},bdImageUrl:function(){return u()(this.model,"border.enable")&&"image"===u()(this.model,"border.type")&&u()(this.model,"border.image")},bgImageUrl:function(){return u()(this.model,"backgroundEffect.enable")&&"image"===u()(this.model,"backgroundEffect.type")&&u()(this.model,"backgroundEffect.image.url")},bgNinePatchUrl:function(){return u()(this.model,"backgroundEffect.enable")&&"ninePatch"===u()(this.model,"backgroundEffect.type")&&u()(this.model,"backgroundEffect.ninePatch.url")},bgNinePatch:function(){if(this.bgNinePatchUrl)return Object.assign({},u()(this.model,"backgroundEffect.ninePatch"),{width:this.model.width,height:this.model.height,left:0,top:0,opacity:this.model.backgroundEffect.opacity})}},methods:{getRect:function(){var t=Object(r["a"])(this.$el),e=t.find(".element-main"),n=this.isText||this.isStyledText||this.isEffectText,i=n?this.global.zoom:1;n&&this.model.$editing&&(e=Object(r["a"])(".editor-text-editor .element-main")),e.length&&(t=e);var a=t.prop("offsetHeight")||0,o=t.prop("offsetWidth")||0;return{height:a*i,width:o*i}},isInSelector:function(t){return"$selector"===t.type&&t.elements.includes(this.model)},isModelRelative:function(t){return t===this.model||this.isInSelector(t)},updateRect:function(){var t=this.model,e=this.global.zoom,n=this.getRect(),i=n.height/e,r=n.width/e,a=!1,o={width:0,height:0};i>0&&r>0&&(Math.abs(r-t.width)>.1&&(o.width=r-t.width,t.width=r,a=!0),Math.abs(i-t.height)>.1&&(o.height=i-t.height,t.height=i,a=!0),a&&this.isDesignMode&&!Object(w["d"])(t)&&this.$events.$emit("element.rectUpdate",t,o))},syncRect:o.a,checkLoad:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=this.model;return r.$loaded=!1,h.a.try((function(){var e=[t.load.apply(t,n)],i=r.watermarkEnable?u()(t.options,"watermarkImages.element"):null;return[t.bdImageUrl,t.bgImageUrl,t.bgNinePatchUrl,i].forEach((function(t){t&&e.push(f["a"].loadImage(t))})),h.a.all(e)})).then((function(){r.$loaded=!0,t.$events.$emit("element.loaded",r)})).catch((function(e){r.$loaded=!0,t.$events.$emit("element.loadError",e,r)}))},load:function(){return h.a.delay(16)},hideBlink:function(){this.model.$blinking=!1},isLinkWith:function(t){var e=this.model;return!(!t||!e.linkId||t===e)&&("$selector"===t.type?t.elements.some((function(t){return t.linkId===e.linkId})):t.linkId===e.linkId)}},events:{"base.click":function(t){if(this.isDesignMode)return this.dragLocked&&(t.preventDefault(),this.dragLocked=!1),!0},"base.dragStart":function(t){this.isDesignMode&&this.model===t&&(this.dragLocked=!0,this.$events.$emit("element.dragStart",t))},"base.dragEnd":function(t){var e=this;this.isDesignMode&&"transform"!==this.$options.name&&this.model===t&&(setTimeout((function(){e.dragLocked=!1}),160),"collage"!==this.model.type?this.$events.$emit("element.dragEnd",t):this.$nextTick((function(){e.$events.$emit("element.dragEnd",t)})))},"base.dragMove":function(t,e,n){this.isDesignMode&&this.model===e&&this.$events.$emit("element.dragMove",t,e,n)},"element.syncRect":function(t){this.model===t&&this.syncRect()}},created:function(){},mounted:function(){this.$nextTick(this.checkLoad)},beforeDestroy:function(){this.hideBlink()}});z.createStaticBaseElement=function(t){return(t||z).map((function(t){var e=t;return c()(t.props)&&(e=Object(i["a"])(Object(i["a"])({},e),{},{props:t.props.filter((function(t){return"editor"!==t}))})),e}))};e["a"]=z},"5f2b":function(t,e){t.exports='<div\n    class="editor-global-background"\n    :class="{\n            \'editor-global-background--hasimage\': !!backgroundImageInfo,\n            \'editor-global-background--selected\': selected,\n            \'editor-global-background--loaded\': editor.global.$backgroundLoaded\n        }"\n>\n    <div :style="cssStyle">\n        <div\n            v-if="backgroundImageInfo"\n            class="editor-global-background__main"\n            :style="mainStyle"\n        >\n            <img\n                v-if="!isRepeat && imageUrl"\n                draggable="false"\n                crossorigin="anonymous"\n                :src="imageUrl"\n                :style="imageStyle"\n            />\n        </div>\n    </div>\n</div>\n'},"607a":function(t,e,n){"use strict";var i=n("c7eb"),r=n("1da1"),a=n("c9b4"),o=n("5eea"),s=n("b95f"),c=n.n(s),l=n("0894"),u=1;e["a"]=Object(a["a"])(o["a"],{mixins:[l["a"]],name:"slot-element",template:c.a,created:function(){this.$$ref=u,u+=1},mounted:function(){this.editor.$emit("slot.mounted",this),window.od.loadSinglePlugin(this.model,this)},beforeDestroy:function(){var t=this;return Object(r["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.od.unloadSinglePlugin(t.model,t);case 2:case"end":return e.stop()}}),e)})))()}})},6104:function(t,e,n){},6158:function(t,e){t.exports='<div v-if="options.watermarkImages.enable" class="editor-watermark" :style="cssStyle" />\n'},"619d":function(t,e,n){"use strict";n("99af"),n("a15b");var i=n("bcf9"),r=n.n(i),a=n("e86a");e["a"]={props:["model","options","global","editor","elements","maskInfoElement"],name:"mask-wrap",template:r.a,computed:{reversedMaskInfoElementMatrix:function(){var t=this.maskInfoElement,e=t.transform.localTransform,n=e.a,i=e.b,r=e.c,o=e.d,s=e.tx,c=e.ty,l=new a["a"](n,i,r,o,s,c).invert();return{"transform-origin":this.maskInfoElementTransformOrigin,transform:this.matrix2Str(l)}},reversedMaskInfoElementOffset:function(){var t=this.maskInfoElement,e=t.maskInfo.effectedResult,n=this.global.zoom,i=(-t.left-e.left)*n,r=(-t.top-e.top)*n;return{transform:"translate(".concat(i,"px, ").concat(r,"px)")}},maskInfoElementTransformOrigin:function(){var t=this.global.zoom,e=this.maskInfoElement,n=e.maskInfo.effectedResult,i=n.left*t,r=n.top*t,a=e.width*t,o=e.height*t;return"".concat(a/2-i,"px ").concat(o/2-r,"px")},maskStyle:function(){var t=this.global.zoom,e=this.maskInfoElement,n=e.maskInfo,i=n.imageUrl,r=n.effectedResult,a=e.transform.localTransform,o=e.type,s=r.width*t,c=r.height*t;"svg"===o&&(s=e.width*t,c=e.height*t);var l=(e.left+r.left)*t,u=(e.top+r.top)*t;return{transform:this.matrix2Str(a),"transform-origin":this.maskInfoElementTransformOrigin,"mask-image":"url(".concat(i,")"),width:s+"px",height:c+"px",top:u+"px",left:l+"px"}}},methods:{matrix2Str:function(t){var e=[t.a,t.b,t.c,t.d,t.tx,t.ty];return"matrix(".concat(e.join(","),")")}}}},"61d3":function(t,e,n){"use strict";var i=n("53ca"),r=n("d4ec"),a=n("bee2"),o=(n("d9e2"),n("a9e3"),n("e9c4"),n("13d5"),n("d3b7"),n("d81d"),n("b64b"),n("2ca0"),n("2ef0")),s=n("2032"),c=n("31c5"),l=n("1c39"),u=n("e002"),d=n("49bc"),h=function(){function t(e){Object(r["a"])(this,t);var n=e&&e.type;if(!n)throw new Error("No type to create model: "+n);if(Object(o["merge"])(this,d["a"].element,d["a"].elementExts,d["a"][n+"Element"],e),this.backgroundEffect&&this.backgroundEffect.image&&(this.backgroundEffect.image.transform=this.parseTransform(this.backgroundEffect.image.transform)),this.backgroundColor&&(this.backgroundColor=Object(u["d"])(this.backgroundColor)),this.border&&(this.border.color=Object(u["d"])(this.border.color)),this.transform=this.parseTransform(e.transform),this.boxShadow){var a=this.boxShadow;a.color=Object(u["d"])(a.color)}this.width=Number(this.width),this.height=Number(this.height),this.left=Number(this.left),this.top=Number(this.top),0!==this.linkId&&"0"!==this.linkId||(this.linkId=""),"object"===Object(i["a"])(this.category)&&(this.category=""),this.$id||(this.$id=Object(c["c"])()),this.uuid||(this.uuid=Object(c["c"])())}return Object(a["a"])(t,[{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:"rotate",get:function(){return s["a"].radToDeg(this.rotation)},set:function(t){this.transform.rotation=s["a"].degToRad(t)}},{key:"scaleX",get:function(){return this.transform.scale.x},set:function(t){this.transform.scale.x=t}},{key:"scaleY",get:function(){return this.transform.scale.y},set:function(t){this.transform.scale.y=t}},{key:"skewX",get:function(){return this.transform.skew.x},set:function(t){this.transform.skew.x=t}},{key:"skewY",get:function(){return this.transform.skew.y},set:function(t){this.transform.skew.y=t}},{key:"parseTransform",value:function(t){return Object(u["e"])(t)}},{key:"reset",value:function(){var t=this.$id,e=this.$parentId,n=this.$cacheParentId,i=this.$tempGroupId,r=this.$renderId,a=Object(o["cloneDeep"])(d["a"].elementExts);Object(o["merge"])(this,a),this.$id=t,this.$parentId=e,this.$cacheParentId=n,this.$tempGroupId=i,this.$renderId=r}},{key:"enableEditable",value:function(){this.rotatable=!0,this.dragable=!0}},{key:"disableEditable",value:function(){this.rotatable=!1,this.dragable=!1}},{key:"toString",value:function(){return JSON.stringify(this)}},{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["$renderId"];t=t||[];var e=t.reduce((function(t,e){return t[e]=!0,t}),{}),n=function t(n){return Object(l["d"])(n)&&(n.elements=n.elements.map((function(e){return t(Object.assign({},e))}))),Object.keys(n).reduce((function(t,i){return i.startsWith("$")&&!e[i]||(t[i]=Object(o["cloneDeep"])(n[i])),t}),{})};return n(Object.assign({},this))}}]),t}();e["a"]=h},6231:function(t,e,n){"use strict";var i=n("c7eb"),r=n("1da1"),a=n("5530"),o=(n("d3b7"),n("25f0"),n("3ca3"),n("ddb0"),n("13d5"),n("99af"),n("f4d5")),s=n("1209"),c=n("f684"),l=n.n(c),u=n("2ef0"),d=n("5eea"),h=n("af9f"),f=n("c9b4"),m=n("e156"),g=(n("acd8"),n("b680"),n("2032")),p=n("7aca"),v=n("2909"),b=(n("d81d"),n("4de4"),n("159b"),n("caad"),n("0481"),n("4069"),n("61cd")),y=n.n(b),w=y.a.Vector,_=y.a.Box,x=y.a.Polygon,k=function(t,e){var n=t.center;return t.points=t.points.map((function(t){return p["a"].getPointPosition(t,n,g["a"].radToDeg(e))})),t},E={MIN:-1e5,MAX:1e5,getSlope:function(t,e){return(e.y-t.y)/(e.x-t.x)},getPointsByPointOblique:function(t,e){var n=function(n){return{x:n,y:t.y-e*t.x+e*n}},i=n(E.MIN),r=n(E.MAX);return[i,r]},getIntersection:function(t,e,n,i){var r=t.x-e.x,a=n.x-i.x,o=t.y-e.y,s=n.y-i.y,c=r*s-o*a;if(0===c)return null;var l=t.x*e.y-t.y*e.x,u=n.x*i.y-n.y*i.x,d=(l*a-r*u)/c,h=(l*s-o*u)/c;return d<Math.min(t.x,e.x)||d>Math.max(t.x,e.x)||d<Math.min(n.x,i.x)||d>Math.max(n.x,i.x)||h<Math.min(t.y,e.y)||h>Math.max(t.y,e.y)||h<Math.min(n.y,i.y)||h>Math.max(n.y,i.y)?null:{x:d,y:h}}},O=function(t){var e=[[0,1],[1,2],[2,3],[3,0]];return e.map((function(e){return e.map((function(e){return t.points[e]}))}))},S=function(t,e){var n=t.center,i=e.center,r=E.getSlope(n,i),a=e.points.map((function(t){return E.getPointsByPointOblique(t,r)})),o=O(t),s=a.map((function(t){return o.map((function(e){return E.getIntersection.apply(E,Object(v["a"])(t).concat(Object(v["a"])(e)))})).filter((function(t){return t}))})),c=.1,l=new x(new w,t.points);s.forEach((function(t,n){var i=[function(t){return t},function(t){return{x:t.x-e.width,y:t.y}},function(t){return{x:t.x-e.width,y:t.y-e.height}},function(t){return{x:t.x,y:t.y-e.height}}],r=[0,3].includes(n)?c:-c,a=[0,1].includes(n)?c:-c;t.forEach((function(t){var o=i[n](t),s=new _(new w(o.x+r,o.y+a),e.width-c,e.height-c).toPolygon(),u=new y.a.Response;y.a.testPolygonPolygon(l,s,u),t.collided=u.b&&u.bInA,t.x=o.x,t.y=o.y}))}));var u=s.flat().filter((function(t){return t.collided})),d=u.map((function(t){var n=t.x+e.width/2,i=t.y+e.height/2,r=n-e.center.x,a=i-e.center.y;return Math.sqrt(Math.pow(r,2)+Math.pow(a,2))})),h=Math.min.apply(Math,Object(v["a"])(d)),f=d.indexOf(h),m=u[f];return m||{x:t.center.x-e.width/2,y:t.center.y-e.height/2}},j=function(t){var e=t.position,n=t.width,i=t.height,r=t.rotation,a={width:n,height:i,center:{x:n/2+e.x,y:i/2+e.y},points:[{x:0,y:0},{x:n,y:0},{x:n,y:i},{x:0,y:i}].map((function(t){return{x:t.x+e.x,y:t.y+e.y}}))};return k(a,r),a},I=function(t){var e=t.imageTransform,n=t.$imageWidth,i=t.$imageHeight,r=t.$imageLeft,a=t.$imageTop,o=j({position:{x:0,y:0},width:n,height:i,rotation:e.rotation}),s=j({position:{x:-r,y:-a},width:t.width,height:t.height,rotation:0}),c=S(o,s);return{x:-c.x,y:-c.y}};function A(t){var e=t.width,n=t.height,i=t.$imageWidth,r=t.$imageHeight,a=t.$imageLeft,o=t.$imageTop,s=t.imageTransform,c=Math.max,l=Math.min,u=Math.abs,d=Math.round,h=s.rotation,f=g["a"].radToDeg(h),m=u(f)%90<1;if(m){var v={rotate:f,width:i,height:r,left:a,top:o},b=p["a"].getBBoxByElement(v);if(b.width<e||b.height<n){var y=p["a"].getRectCover(b,{width:e,height:n}),w=y.width/b.width;return t.$imageWidth*=w,t.$imageHeight*=w,b.width<e&&(t.$imageLeft=0,t.$imageTop-=(t.$imageHeight-r)/2),void(b.height<n&&(t.$imageTop=0,t.$imageLeft-=(t.$imageWidth-i)/2))}var _=Math.round(v.left)-d(b.left),x=d(v.top)-d(b.top),k=l(_,d(a));k=k===_?_:c(k,d(e)-d(b.width)+_);var E=l(x,d(o));return E=E===x?x:c(E,d(n)-d(b.height)+x),t.$imageLeft=k,t.$imageTop=E,t}}function T(t){var e=t.imageTransform,n=t.$imageWidth,i=t.$imageHeight,r={left:t.$imageLeft-.4,top:t.$imageTop-.4,width:n+.8,height:i+.8,rotate:g["a"].radToDeg(e.rotation)},a={left:0,top:0,width:t.width,height:t.height,rotate:0,skewX:0,skewY:0},o=p["a"].getRectPoints(a),s=p["a"].pointInRect(o.nw.x,o.nw.y,r),c=p["a"].pointInRect(o.sw.x,o.sw.y,r),l=p["a"].pointInRect(o.ne.x,o.ne.y,r),u=p["a"].pointInRect(o.se.x,o.se.y,r),d=s&&c&&l&&u;return d}function C(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;if(("rotate"===n||!A(t))&&!T(t))if("scale"===n||"rotate"===n){i=parseFloat(i.toFixed(1));var r={finalScale:e.finalScale,width:t.width,height:t.height,$imageWidth:t.$imageWidth,$imageHeight:t.$imageHeight,$imageLeft:t.$imageLeft,$imageTop:t.$imageTop,imageTransform:Object(u["cloneDeep"])(t.imageTransform)},a=i/Math.max(t.$imageWidth,t.$imageHeight);e.finalScale+=a;var o=e.width*e.finalScale,s=e.height*e.finalScale;t.$imageWidth=o,t.$imageHeight=s,t.$imageLeft=e.left-(o-e.width)/2,t.$imageTop=e.top-(s-e.height)/2;var c=T(t);if(c&&i<=1)return;c?(e.finalScale=r.finalScale,Object.assign(t,r),C(t,e,n,i/2)):C(t,e,n,i)}else if("draging"===n){var l=I(t);t.$imageLeft=l.x,t.$imageTop=l.y}else{i=parseFloat(i.toFixed(1));var d={width:t.width,height:t.height,$imageWidth:t.$imageWidth,$imageHeight:t.$imageHeight,$imageLeft:t.$imageLeft,$imageTop:t.$imageTop,imageTransform:Object(u["cloneDeep"])(t.imageTransform)},h={x:Math.round(t.width/2),y:Math.round(t.height/2)},f={x:Math.round(t.$imageLeft+t.$imageWidth/2),y:Math.round(t.$imageTop+t.$imageHeight/2)},m=f.x-h.x,g=f.y-h.y,p=Math.abs(f.x-h.x),v=Math.abs(f.y-h.y),b=Math.min(p,i),y=Math.min(v,i),w=m>0?-b:b,_=g>0?-y:y;t.$imageLeft=t.$imageLeft+w,t.$imageTop=t.$imageTop+_;var x=T(t);if(x&&i<=1)return;if(x)Object.assign(t,d),C(t,e,n,Math.max(1,b/2,y/2));else if(i<=1)return e.left=t.$imageLeft,e.top=t.$imageTop,void C(t,e,"scale");C(t,e,n,Math.max(b,y))}}var P=n("1c39"),$=n("256d"),M=n.n($);e["a"]=Object(f["a"])(d["a"].createStaticBaseElement(),{template:M.a,name:"mask-editor",props:["model","currentElement","currentLayout","global"],data:function(){return{animation:null,clickLocked:!0,showGrid:!1,rectPrefix:null,innerProps:{editModel:null},type:"background-croper"===this.model.type?"background-croper":"mask"===this.model.type?"masker":"croper"}},computed:{editor:function(){return this.$parent.editor||this.$parent},zoom:function(){return this.global.zoom},editModel:function(){return this.getEditModel()},isBackgroundClipper:function(){return"background-croper"===this.type},isMasker:function(){return"masker"===this.type},isVideo:function(){return"video"===this.editModel.$originalType},boxStyle:function(){var t=this.editModel,e=this.zoom;return{left:t.left*e+"px",top:(this.currentLayout.top+t.top)*e+"px",width:t.width*e+"px",height:t.height*e+"px",transform:t.transform.toString()}},imageStyle:function(){var t=this.editModel,e=this.zoom,n=t.imageTransform,i=t.$imageWidth,r=t.$imageHeight,a=t.$imageLeft,o=t.$imageTop;return{left:a*e+"px",top:o*e+"px",width:i*e+"px",height:r*e+"px",transform:"rotate(".concat(h["a"].radToDeg(n.rotation),"deg)")}},isAnimationImage:function(){return Object(P["a"])(this.model)}},methods:{activeInnerEdit:function(t){var e=this.editModel;this.editor.focusElement(e),e.active=!0,this.$events.$emit("imageCroper.activeInner",t)},activeOuterEdit:function(t){var e=this;Object(o["a"])(this.$el).off("mousedown"),setTimeout((function(){e.$events.$emit("transform.drag",t)}),0)},updateStage:function(){var t=this,e=this.$refs.canvas,n=this.editModel,i=this.options.fitCrossOrigin,r="video"===n.$originalType?h["a"].loadVideo(n.url,this.model.$currentTime/1e3,i):h["a"].loadImage(n.url,i,!0),a=n.mask?h["a"].loadImage(n.mask,i):null;return l.a.all([r,a]).spread((function(i,r){var a=e.getContext("2d"),o=n.width,s=n.height,c=n.$imageWidth,l=n.$imageHeight,u=n.$imageLeft,d=n.$imageTop,h=n.imageTransform,f=h.rotation,g=Math.ceil(o),p=Math.ceil(s);e.width=g,e.height=p;var v={width:Math.round(c),height:Math.round(l)},b={x:u+v.width/2,y:d+v.height/2};a.clearRect(0,0,g,p),r?a.drawImage(r,0,0,g,p):a.fillRect(0,0,g,p),a.globalCompositeOperation="source-over",t.isAnimationImage?Object(m["c"])(e,t.$refs.bgCanvas,b,v,f,"source-in"):Object(m["c"])(e,i,b,v,f,"source-in")}))},getRectPrefix:function(t){this.lastCurrentElement||(this.lastCurrentElement=this.currentElement);var e=t||this.model,n=this.lastCurrentElement,i={parent:{left:0,top:0,width:0,height:0,rotate:0},rotate:e.rotate,left:e.left,top:e.top,transform:e.transform};if(n&&n!==this.model){var r=this.editor.getParentGroups(e),a=[r[0]];i=r.concat(e).reduce((function(t,e){var n=h["a"].mergeTransform(t,e);return n=Object.assign({},e,n),a.push(n),n})),i.rotate=h["a"].radToDeg(i.transform.rotation);var o=a[a.length-2];i.parent={left:o.left,top:o.top,width:o.width,height:o.height,rotate:h["a"].radToDeg(o.transform.rotation)}}return i},getImageModel:function(t){var e=this.rectPrefix||this.getRectPrefix(),n=e.transform.scale,i=t.$imageLeft,r=t.$imageTop;n.y<0&&(r=t.height-t.$imageHeight-r),n.x<0&&(i=t.width-t.$imageWidth-i);var a=h["a"].getPointPosition({x:e.left+i+t.$imageWidth/2,y:e.top+r+t.$imageHeight/2},{x:e.left+t.width/2,y:e.top+t.height/2},e.rotate),o=Object(u["merge"])({},t,{height:t.$imageHeight,width:t.$imageWidth,left:a.x-t.$imageWidth/2,top:a.y-t.$imageHeight/2,rotatable:!0,dragable:!0});return o.rotate=h["a"].radToDeg(t.imageTransform.rotation+e.transform.rotation),o},getEditModel:function(){var t=this.model,e=this.innerProps,n=e.editModel;if(n&&t===e.modelCache)return n;var i=this.getRectPrefix(),r=t.padding;n=Object(u["merge"])({},t,{type:"$"+this.type,$name:"$cropperInner",height:t.height+r[0]+r[2],width:t.width+r[1]+r[3],left:i.left,top:i.top,lock:t.lock,$dragLimit:!0,$customDragMove:!0,rotatable:!0,dragable:!0,transform:i.transform,imageTransform:t.parseTransform(t.imageTransform),$guider:{snapTo:!0,show:!1,marginShow:!1,resizeShow:!1},active:!1,$currentElement:this.currentElement}),n.$imageWidth=t.$imageWidth,n.$imageHeight=t.$imageHeight,n.$imageLeft=t.$imageLeft,n.$imageTop=t.$imageTop,n=this.editor.createElement(n),n.rotate=i.rotate,n.$parentId=null,t.$editing=!0;var a=Object(u["cloneDeep"])(n),o=["width","height","$imageWidth","$imageHeight","$imageLeft","$imageTop","left","top","rotate","imageTransform"];return a=Object(u["pick"])(a,o),n.$reset=function(){Object(u["merge"])(n,Object(u["omit"])(a,"imageTransform"),{imageTransform:{rotation:a.imageTransform.rotation}})},n.$canReset=function(){return!Object(u["isEqualWith"])(a,Object(u["pick"])(n,o),(function(t,e,n){if("number"===typeof t)return n&&"rotate"!==n?Math.round(t)===Math.round(e):t===e}))},e.editModel=n,e.modelCache=t,n},setModelStartCache:function(){var t=this.editModel,e=t.width,n=t.height,i=t.$imageWidth,r=t.$imageHeight,a=t.$imageLeft,o=t.$imageTop,s=t.imageTransform,c=t.left,l=t.top,u=s.rotation;this.$startCache={imageLeft:a,imageTop:o,imageRotate:h["a"].radToDeg(u),boxWidth:e,boxHeight:n,boxLeft:c,boxTop:l,$imageWidth:i,$imageHeight:r}},resetBounding:function(t){var e=this,n=function(t){var n=t||i,r=n.width,a=n.height,o=n.$imageWidth,s=n.$imageHeight;e.$events.$emit("imageCroper.resizeEnd",{width:o,height:s},{width:r,height:a})},i=this.editModel,r=Object(u["cloneDeep"])(i);if(this.animation=null,T(r))n();else{if(C(r,{finalScale:1,height:r.$imageHeight,width:r.$imageWidth,left:r.$imageLeft,top:r.$imageTop}),!t)return i.$imageLeft=r.$imageLeft,i.$imageTop=r.$imageLeft,i.$imageWidth=r.$imageWidth,i.$imageHeight=r.$imageHeight,void n();var a={width:i.$imageWidth,height:i.$imageHeight,left:i.$imageLeft,top:i.$imageTop},o=Math.max(Math.max(Math.abs(r.$imageWidth-a.width),Math.abs(r.$imageLeft-a.left))/(r.$imageWidth/2)*600,Math.max(Math.abs(r.$imageHeight-a.height),Math.abs(r.$imageTop-a.top))/(r.$imageHeight/2)*600),c=function(){i.$imageLeft=a.left,i.$imageTop=a.top,i.$imageWidth=a.width,i.$imageHeight=a.height};n(r),this.animation=Object(s["a"])({targets:a,width:r.$imageWidth,height:r.$imageHeight,left:r.$imageLeft,top:r.$imageTop,delay:0,duration:Math.min(600,Math.max(200,o)),easing:"easeOutExpo",update:c,complete:function(){c(),n(i),e.animation=null}})}},destroyEditModel:function(){var t=this.model;if(t){if(this.isBackgroundClipper)return this.currentLayout.$backgroundEditing=!1,void this.editor.focusElement(null);this.lastCurrentElement&&this.currentElement===this.editModel&&this.editor.focusElement(this.lastCurrentElement),t.$editing=!1,this.$emit("update:model",null)}},save:function(){var t=this.currentLayout,e=this.model,n=this.editModel,i=this.rectPrefix;this.animation&&this.animation.seek(1e5);var r={x:n.left+n.width/2,y:n.top+n.height/2},o=h["a"].getPointPosition(r,{x:i.parent.left+i.parent.width/2,y:i.parent.top+i.parent.height/2},-i.parent.rotate),s={height:n.height,width:n.width,left:n.left+(o.x-r.x)-i.parent.left,top:n.top+(o.y-r.y)-i.parent.top,lock:n.lock,imageTransform:n.imageTransform,$imageWidth:n.$imageWidth,$imageHeight:n.$imageHeight,$imageLeft:n.$imageLeft,$imageTop:n.$imageTop};if(this.isBackgroundClipper)Object.assign(e,s),this.editor.changeLayout({background:Object(a["a"])(Object(a["a"])({},t.background),{},{image:Object(a["a"])(Object(a["a"])({},t.background.image),{},{width:e.width,height:e.height,left:e.left,top:e.top,imageTransform:e.imageTransform})})},this.currentLayout);else{this.editor.changeElement(s,e);for(var c=this.editor.getParentGroups(e),l=c.length-1;l>=0;l--)this.$events.$emit("group.boundingReset",c[l])}this.destroyEditModel()},cancel:function(){this.destroyEditModel()},renderAnimationImageFrame:function(){var t=this;return Object(r["a"])(Object(i["a"])().mark((function e(){var n,r,a,o,s,c;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.$refs.bgCanvas,r=t.model,a=r.naturalWidth,o=r.naturalHeight,s=r.url,n.width=a,n.height=o,c=n.getContext("2d"),!t.isVideo){e.next=9;break}return e.abrupt("return",h["a"].loadVideo(s,t.model.$currentTime/1e3).then((function(t){c.drawImage(t,0,0)})));case 9:return e.abrupt("return",h["a"].loadImage(s).then((function(t){c.drawImage(t,0,0)})));case 10:case"end":return e.stop()}}),e)})))()}},events:{"base.click":function(t){if(t.preventDefault(),this.clickLocked&&!this.scaling){var e=this.editor.pointFromEvent(t),n=h["a"].getElementRect(this.getImageModel(this.editModel),1);h["a"].pointInRect(e.x,e.y,n)||this.save()}},"imageCroper.activeInner":function(){this.editor.focusElement(this.editModel),this.editModel.active||this.activeInnerEdit()},"imageCroper.activeOuter":function(){this.editModel.active&&this.editor.focusElement(this.editModel)},"element.dragStart":function(t){t.type==="$"+this.type?(this.clickLocked=!1,this.showGrid=!0,this.setModelStartCache()):this.editor.$events.$emit("element.editApply",this.editModel)},"element.customDragMove":function(t){var e=t.element,n=t.dx,i=t.dy;if(e===this.editModel){var r=this.$startCache,a=r.imageLeft,o=r.imageTop,s=h["a"].getDxyByAngle(n,i,e.rotate,e.transform.scale);e.$imageLeft=a+s.dx,e.$imageTop=o+s.dy}},"element.dragEnd":function(){var t=this;this.clickLocked=!1,this.showGrid=!1,setTimeout((function(){t.clickLocked=!0}),0),this.resetBounding(!0)},"element.transformStart":function(t){this.showGrid=!0,t===this.editModel&&(this.clickLocked=!0)},"element.transformEnd":function(){var t=this;this.clickLocked=!1,this.showGrid=!1,setTimeout((function(){t.clickLocked=!0}),0),this.resetBounding(!0)},"element.editApply":function(t){t===this.editModel&&this.save()},"element.editCancel":function(t){t===this.editModel&&this.cancel()},"element.editReset":function(){this.editModel.$reset();var t=this.editModel,e=t.width,n=t.height,i=t.$imageWidth,r=t.$imageHeight;this.$events.$emit("imageCroper.resizeEnd",{width:i,height:r},{width:e,height:n})},"element.editFitImage":function(){var t=this.editModel,e=t.$imageLeft,n=t.$imageTop,i=t.$imageWidth,r=t.$imageHeight,a=2*this.editor.currentLayout.width,o=2*this.editor.currentLayout.height,s=Math.max(r/o,i/a);if(s>1){var c=i/s,l=r/s;this.editModel.left+=(i-c)/2,this.editModel.top+=(r-l)/2,this.editModel.$imageWidth=i=c,this.editModel.$imageHeight=r=l}this.editModel.imageTransform.rotation=0,this.editModel.$imageLeft=0,this.editModel.$imageTop=0,this.editModel.left+=e,this.editModel.top+=n,this.editModel.width=i,this.editModel.height=r,this.$events.$emit("imageCroper.resizeEnd",{width:i,height:r},{width:i,height:r})},"element.imageTransformStart":function(){this.setModelStartCache()},"element.imageTransformEnd":function(t){t===this.editModel&&this.resetBounding(!0)},"imageCroper.scale":function(t,e){!this.scaling&&this.setModelStartCache(),this.scaling=!0;var n=this.editModel,i=this.$startCache,r=n.$imageWidth,a=n.$imageHeight,o=n.width,s=n.height,c=Math.max(o/r,s/a),l=r*c,u=a*c;n.$imageWidth=l*t,n.$imageHeight=u*t;var d={x:i.$imageWidth/2,y:i.$imageHeight/2},h={x:-i.imageLeft+i.boxWidth/2,y:-i.imageTop+i.boxHeight/2},f=h.x/d.x,m=h.y/d.y;n.$imageLeft=i.imageLeft-(n.$imageWidth-i.$imageWidth)/2*f,n.$imageTop=i.imageTop-(n.$imageHeight-i.$imageHeight)/2*m,"click"===e&&(delete this.scaling,this.resetBounding(!0))},"imageCroper.scaleEnd":function(){delete this.scaling,this.resetBounding(!0)}},watch:{currentElement:function(t){t!==this.editModel&&(this.$events.$emit("element.editApply",this.editModel),this.destroyEditModel())}},created:function(){this.lastCurrentElement=this.currentElement,this.rectPrefix=this.getRectPrefix()},mounted:function(){var t=this;(this.isAnimationImage||this.model.isGif||this.isVideo)&&this.renderAnimationImageFrame(),this.editor.focusElement(this.editModel),this.editModel.active=!0,this.$watch((function(){var e=t.editModel,n=e.width,i=e.height,r=e.$imageWidth,a=e.$imageHeight,o=e.$imageLeft,s=e.$imageTop,c=e.imageTransform,l=c.rotation;return[r,a,o,s,n,i,l]}),this.updateStage),this.updateStage()}})},"62d3":function(t,e,n){"use strict";var i=n("bee2"),r=n("d4ec"),a=n("262e"),o=n("2caf"),s=n("61d3"),c=n("607a"),l=function(t){Object(a["a"])(n,t);var e=Object(o["a"])(n);function n(){return Object(r["a"])(this,n),e.apply(this,arguments)}return Object(i["a"])(n)}(s["a"]);e["a"]={model:l,layoutComponent:c["a"]}},"62ec":function(t,e,n){t.exports=n.p+"img/ios_loading_dark.3a682b22.png"},"640a":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("ac1f"),n("5319");var i={mask:"@odyssey/mask",ninePatch:"@odyssey/nine-patch",threeText:"@odyssey/three-text",chart:"@odyssey/chart",watermark:"@odyssey/watermark",effectText:"@odyssey/effect-text",table:"@odyssey/table",rect:"@odyssey/rect",form:"@odyssey/form",button:"@odyssey/button",map:"@odyssey/map",question:"@odyssey/question","linked-video":"@odyssey/linked-video"};function r(t){var e=t.type,n=t.subType,r=t.wxNickname,a=t.pluginVersions;if("visits"===n&&!a)return{name:"@odyssey/visits",version:"latest"};if(r&&!a)return{name:"@odyssey/wx-nickname",version:"latest"};if(a){var o=/(@\w+\/[a-z-]+)@(.+)/i,s=o.exec(a);if(s){var c=s[1],l=s[2];return{name:c.replace("@odyssey/wx-avatar","@od2/wx-avatar"),version:l}}console.error("不正确的版本信息",a)}else{var u=i[e];if(u)return{name:u,version:"latest"}}return null}},"659e":function(t,e,n){},"660d":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n("d4ec"),r=n("bee2"),a=(n("99af"),n("4de4"),n("d3b7"),n("b0c0"),n("159b"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("fbba")),o=n("f4d5"),s=window.navigator.userAgent.indexOf("Edge")>-1,c=!1,l=function(){function t(e,n,r){Object(i["a"])(this,t),this._model=e,this._html=n,this.editor=r}return Object(r["a"])(t,[{key:"createStyle",value:function(){return"<style>\n            * {\n                box-sizing: border-box;\n                margin: 0;\n                padding: 0;\n            }\n            .editor-element-table {\n                position: relative;\n                width: ".concat(this._model.width," + 'px';\n                height: ").concat(this._model.height," + 'px';\n                left: 0 !important;\n                top: 0 !important;\n                transform: none !important;\n            }\n\n            .editor-element .element-main {\n                height: 100%;\n                width: 100%;\n                position: absolute;\n                left: 0;\n                top: 0;\n            }\n\n            .editor-element {\n                background: no-repeat 50% 50%;\n                line-height: 1;\n                position: absolute;\n                z-index: 1;\n                text-align: left;\n            }\n\n            .grid-base-cell {\n                position: relative;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                overflow: hidden;\n                width: 100%;\n                height: 100%;\n                margin: 0;\n                background-clip: content-box;\n                border: none;\n            }\n            \n            .editor-element-table .element-inner {\n                position: relative;\n                width: 100%;\n                height: 100%;\n                transform-origin: 0 0;\n                transform: none !important\n            }\n            .editor-table {\n                width: 100%;\n                height: 100%;\n                position: relative;\n            }\n            .grid-core {\n                position: relative;\n                box-sizing: border-box;\n                overflow: hidden;\n                width: 100%;\n                height: 100%;\n                border-collapse: collapse;\n            }\n            \n            .grid-core__cell {\n                padding: 0;\n                margin: 0;\n                border: none;\n            }\n            \n            .grid-core__cell--checkbox {\n                width: 200px;\n            }\n            \n            .grid-core__cell--checkbox-header {\n                width: 300px;\n            }\n            .grid-checkbox {\n                overflow: hidden;\n                width: 100%;\n                height: 100%;\n                border: none;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n            }\n            \n            .grid-checkbox__content {\n                position: relative;\n                border-color: transparent;\n            }\n            \n            .grid-checkbox__content::after {\n                content: \" \";\n                position: absolute;\n                width: 100%;\n                top: 130%;\n                left: 0;\n                border-bottom: 2px solid transparent;\n                border-color: inherit;\n            }\n\n            .fill-checkbox {\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                overflow: hidden;\n                width: 100%;\n                height: 100%;\n                border: none;\n            }\n            \n            .fill-checkbox__content {\n                position: relative;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                width: 100%;\n                height: 32px;\n                border: none;\n            }\n            .fill-checkbox__content--start {\n                border-radius: 16px 0 0 16px;\n            }\n            .fill-checkbox__content--end {\n                border-radius: 0 16px 16px 0;\n            }\n            .gradient-checkbox {\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                overflow: hidden;\n                width: 100%;\n                height: 100%;\n                border: none;\n            }\n            \n            .gradient-checkbox__content {\n                position: relative;\n                width: 100%;\n                height: 8px;\n                text-align: center;\n            }\n            .grid-container {\n                position: relative;\n                overflow: hidden;\n                width: 100%;\n                height: 100%;\n                font-size: 22px;\n                font-weight: 400;\n                background: none;\n            }\n            .gradient-checkbox__content--start {\n                border-radius: 4px 0 0 4px;\n            }\n            .gradient-checkbox__content--end {\n                border-radius: 0 4px 4px 0;\n            }\n        \n            .gradient-checkbox__hide {\n                opacity: 0;\n            }\n        \n            .gradient-checkbox__text {\n                display: block;\n                position: absolute;\n                top: 200%;\n                left: 0;\n                width: 100%;\n                font-size: 18px;\n            }\n        \n            .gradient-checkbox__sliding {\n                position: absolute;\n                top: 50%;\n                left: 50%;\n                width: 60%;\n                height: 180%;\n                transform: translate(-50%, -50%);\n                border: 1px solid #000;\n                background: #fff;\n                border-radius: 50px;\n            }\n        </style>")}},{key:"renderImage",value:function(){var t=this,e=this.editor.options.fontList.filter((function(e){return e.name===t._model.fontFamily})),n=e&&e.length&&e[0]||this.editor.options.fontList[0];return Object(a["a"])(n).then((function(e){return t.createSvg([e])}))}},{key:"createSvg",value:function(t){var e=this._model,n=e.width,i=e.height;n=Math.round(n),i=Math.round(i);var r="";t.forEach((function(t){t.dataURL&&(r+='@font-face {font-family: "'.concat(t.name,'";src: url(').concat(t.dataURL,") format('woff');font-display: swap;font-weight: ").concat(t.weight,"}"))}));var l,u='<svg viewBox="0 0 '.concat(n," ").concat(i,'" width="').concat(n,'" height="').concat(i,'" xmlns="http://www.w3.org/2000/svg">').concat(this.createStyle(),"<style>").concat(r,'</style><foreignObject x="0" y="0" width="').concat(n,'" height="').concat(i,'"><div xmlns="http://www.w3.org/1999/xhtml" style="width:').concat(n,"px; height:").concat(i,'px; position: relative">').concat(this._html,"</div></foreignObject></svg>");if(c&&Object(o["a"])(u).appendTo(document.body),s){var d=new Blob([u],{type:"image/svg+xml"});l=URL.createObjectURL(d)}else l="data:image/svg+xml;charset=utf8,"+encodeURIComponent(u);return Object(a["c"])(l).delay(window.safari?1500:500).then((function(t){return c&&document.body.appendChild(t),t}))}},{key:"renderCanvas",value:function(){var t=this;return this.renderImage().then((function(e){var n=t._model,i=document.createElement("canvas"),r=i.getContext("2d");return i.width=n.width,i.height=n.height,r.drawImage(e,0,0,n.width,n.height),i}))}}]),t}()},"6a19":function(t,e){t.exports='<div class="editor-canvas">\n    \x3c!-- Layout --\x3e\n    <editor-layout\n        :options="options"\n        :global="global"\n        :editor="editor"\n        :layout="currentLayout"\n    ></editor-layout>\n</div>\n'},"6c34":function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return l})),n.d(e,"d",(function(){return u})),n.d(e,"c",(function(){return d}));n("2909"),n("3835"),n("5530");var i=n("53ca"),r=(n("e9c4"),n("ac1f"),n("5319"),n("d3b7"),n("159b"),n("99af"),n("4de4"),n("caad"),n("2532"),n("b0c0"),n("5db7"),n("73d9"),n("d81d"),n("6062"),n("3ca3"),n("ddb0"),n("b156")),a="cjxq.oss.aliyuncs.com";function o(t){var e=JSON.stringify(t,(function(t,e){if("string"===typeof e){if(-1!==e.indexOf(r["OSS_ORIGIN_HOST"]))return"//".concat(e.replace(r["OSS_ORIGIN_HOST"],r["OSS_CDN_HOST"]));if("mask"===t&&-1!==e.indexOf(a))return""}return"filterInfo"===t&&"object"===Object(i["a"])(e)?null:e}));return JSON.parse(e)}function s(t,e){var n=[],i=t.elements||t.elems||[];return i.length?(i.forEach((function(t,r){"group"!==t.type?e?e(t,r,i)&&n.push(t):n.push(t):n=n.concat(s(t,e))})),n):n}function c(t){var e=function t(e){var n=e.filter((function(e){return e.elements&&e.elements.length&&(e.elements=t(e.elements)),[!e.width||!e.height,"text"===e.type&&(e.content||"").includes(";base64,")].every((function(t){return!t}))}));return n};t.elements=e(t.elements)}function l(t,e){return t.global.layout||(t.global.layout={}),t.layouts.forEach((function(t){t.height<r["MIN_LAYOUT_HEIGHT"]&&(t.height=r["MIN_LAYOUT_HEIGHT"]),e&&e(t,"layout"),s(t,(function(t){null==t.title&&(t.title=""),e&&e(t,"element")})),c(t)})),o(t)}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign(t||{},{global:(null===t||void 0===t?void 0:t.global)||{},layouts:(null===t||void 0===t?void 0:t.layouts)||[]}),n=e.layouts,i=void 0===n?[]:n,r=e.global;r=void 0===r?{}:r;var a=r.backgroundColor,o=r.layout,s=o;if(!s){var c=0,l=i[0]?i[0].width:0;i.forEach((function(t){c+=t.height})),s={width:l,height:c,title:"全局背景",elements:[],backgroundColor:a||"#ffffff",backgroundRepeat:"no-repeat",backgroundImage:"",backgroundImageInfo:{width:0,height:0,opacity:1,transform:{a:1,b:0,c:0,d:1,tx:0,ty:0}},backgroundPosition:[0,0],backgroundSize:[0,0]}}return Object.assign(e.global,{layout:s}),e}function d(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,i=function e(i){for(var r=0;r<i.length;r++){var a=i[r];if(a.uuid===n)return void(t=a);Array.isArray(a.elements)&&e(a.elements)}};return i(e),t}},"6c62":function(t,e,n){"use strict";n.d(e,"a",(function(){return k}));var i=n("c7eb"),r=n("3835"),a=n("1da1"),o=n("d4ec"),s=n("bee2"),c=n("262e"),l=n("2caf"),u=(n("d3b7"),n("3ca3"),n("ddb0"),n("99af"),n("e9c4"),n("25f0"),n("159b"),n("cb29"),n("f684")),d=n.n(u),h=n("6ed2"),f=n.n(h),m=n("66cb"),g=n.n(m),p=n("e156"),v=n("d10d"),b=function(){function t(e){var n=e.ctx,i=e.tileWidth,r=e.tileHeight;Object(o["a"])(this,t),this.ctx=n,this.canvas=n.canvas,this.imageWidth=n.canvas.width,this.imageHeight=n.canvas.height,this.tileWidth=Math.round(i),this.tileHeight=Math.round(r)}return Object(s["a"])(t,[{key:"getAverageRGB",value:function(t,e,n,i,r){for(var a=t.width,o=t.data,s=[0,0,0,0],c=0,l=e;l<e+i;l++)for(var u=n;u<n+r;u++){var d=4*(u*a+l);o[d]&&(s[0]+=o[d+0],s[1]+=o[d+1],s[2]+=o[d+2],s[3]+=o[d+3],c++)}return s[0]=Math.floor(s[0]/c),s[1]=Math.floor(s[1]/c),s[2]=Math.floor(s[2]/c),s[3]=1,"rgba("+s.toString()+")"}},{key:"render",value:function(){for(var t=this.ctx,e=this.imageWidth,n=this.imageHeight,i=this.tileWidth,r=this.tileHeight,a=t.getImageData(0,0,e,n),o=0;o<e;o+=i)for(var s=0;s<n;s+=r){var c=this.getAverageRGB(a,o,s,i,r);t.save(),t.fillStyle=c,t.fillRect(o,s,i,r),t.restore()}return this.canvas}}]),t}(),y=n("af9f"),w=n("2ef0"),_=n("0485"),x=function(t){Object(c["a"])(n,t);var e=Object(l["a"])(n);function n(t){var i;return Object(o["a"])(this,n),i=e.call(this,t),i.tileCanvas2=Object(p["b"])(),i.tileCanvas=Object(p["b"])(),i}return Object(s["a"])(n,[{key:"setTileCanvas",value:function(t){this.tileCanvas.width=t.width,this.tileCanvas.height=t.height,this.tileCanvas2.width=t.width,this.tileCanvas2.height=t.height}},{key:"renderBrush",value:function(){var t=Object(a["a"])(Object(i["a"])().mark((function t(e){var n,a,o,s,c,l,u,h,f,m,g,p,v,b,y,_,x,k,E;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.canvas,t.next=3,d.a.all([this.load(),this.loadBackgroundImage()]);case 3:for(a=t.sent,o=Object(r["a"])(a,2),s=o[0],c=o[1],e.drawImage(c,0,0,n.width,n.height),this.setTileCanvas(s),l=this.tileCanvas.getContext("2d"),l.drawImage(s,0,0),u=e.getImageData(0,0,n.width,n.height),h=u.width,f=u.height,m=u.data,g=Math.ceil(h/this.tileWidth),p=Math.ceil(f/this.tileHeight),v=0;v<p;v++)for(b=0;b<g;b++)y=this.getTileCanvas({width:h,height:f,data:m},b*this.tileWidth+Object(w["random"])(-10,10),v*this.tileHeight+Object(w["random"])(-10,10),n),_=b*this.tileWidth-(y.width-this.tileWidth)/2-this.tileWidth/2,x=v*this.tileHeight-(y.height-this.tileHeight)/2-this.tileHeight/2,k=_+y.width/2,E=x+y.width/2,e.save(),e.globalAlpha=.75*Object(w["random"])(.8,1),e.translate(k,E),e.rotate(180*Math.PI/Object(w["random"])(0,360)),e.translate(-k,-E),e.drawImage(y,_,x),e.restore(),e.save(),e.globalAlpha=.75*Object(w["random"])(.8,1),e.translate(k,E),e.rotate(180*Math.PI/Object(w["random"])(0,360)),e.translate(-k,-E),e.drawImage(y,_,x),e.restore();case 15:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getTileCanvas",value:function(t,e,n,i){var r=i.width,a=i.height,o=Math.ceil(r/this.tileWidth),s=Math.ceil(a/this.tileHeight);n=Math.round(Math.min(Math.max(0,n),s*this.tileWidth)),e=Math.round(Math.min(Math.max(0,e),o*this.tileHeight));var c=n*r*4+4*e,l="rgb(".concat(t.data[c],", ").concat(t.data[c+1],", ").concat(t.data[c+2],")"),u=this.tileCanvas2,d=u.getContext("2d");return d.save(),d.fillStyle=l,d.fillRect(0,0,u.width,u.height),d.globalCompositeOperation="destination-in",d.drawImage(this.tileCanvas,0,0),d.restore(),u}}]),n}(_["a"]),k=function(t){Object(c["a"])(n,t);var e=Object(l["a"])(n);function n(t){var i,r=t.layout,a=t.canvas,s=t.editor,c=t.options,l=t.ratio;return Object(o["a"])(this,n),i=e.call(this,{renderProvide:{layout:r,background:function(){return r.background&&JSON.stringify(r.background)}},renderDiffKeys:["background","layout.mosaic.type","layout.mosaic.url","layout.mosaic.tileWidth","layout.mosaic.tileHeight","layout.mosaic.blur","layout.width","layout.height"]}),i.layout=r,i.canvas=a||Object(p["b"])(),i.editor=s,i.options=c||s.options,i.ratio=l,i}return Object(s["a"])(n,[{key:"mosaic",get:function(){return this.layout.mosaic}},{key:"mosaicUrl",get:function(){return this.mosaic.url}},{key:"mosaicType",get:function(){return this.mosaic.type}},{key:"zoom",get:function(){return 0===this.mosaicType?1:this.ratio||Math.min(800/this.layout.width,800/this.layout.height,1)}},{key:"mosaicBlur",get:function(){return Math.round(this.mosaic.blur)}},{key:"mosaicColor",get:function(){return g()(this.mosaic.color).toString("rgb")}},{key:"mosaicPaths",get:function(){return this.mosaic.paths}},{key:"backgroundImage",get:function(){var t;return this.layout.backgroundEffectImage||(null===(t=this.layout.background)||void 0===t?void 0:t.image)}},{key:"tileWidth",get:function(){return Math.round(this.mosaic.tileWidth*this.zoom)}},{key:"tileHeight",get:function(){return Math.round(this.mosaic.tileHeight*this.zoom)}},{key:"initCanvas",value:function(){var t=this.canvas;t.width=Math.round(this.layout.width*this.zoom),t.height=Math.round(this.layout.height*this.zoom),this.offCanvas||(this.offCanvas=Object(p["b"])())}},{key:"initOffCanvas",value:function(){this.offCanvas.width=Math.round(this.layout.width*this.zoom),this.offCanvas.height=Math.round(this.layout.height*this.zoom)}},{key:"load",value:function(){var t=Object(a["a"])(Object(i["a"])().mark((function t(){var e=this;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",y["a"].loadImage(this.mosaicUrl).then((function(t){if(3===e.mosaicType){var n=1.8*Math.min(e.tileWidth/t.width,e.tileHeight/t.height);return Object(p["g"])(t,t.width*n,t.height*n,{},!1)}return t})));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"loadBackgroundImage",value:function(){var t=Object(a["a"])(Object(i["a"])().mark((function t(){var e;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.backgroundRender,e&&e.canvas.width===this.layout.width&&e.canvas.height===this.layout.height||(this.backgroundRender=new v["a"]({layout:this.layout,editor:this.editor})),t.abrupt("return",this.backgroundRender.render());case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"export",value:function(){var t=Object(a["a"])(Object(i["a"])().mark((function t(){var e,n,r,a,o,s;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.editor,n=this.layout,n.mosaic.enable&&n.mosaic.paths.length){t.next=3;break}return t.abrupt("return");case 3:if(!e.getComponentById(n.$id)){t.next=16;break}if(r=this.editor.getComponentById(n.$id),a=r.$refs.backgroundMosaic&&r.$refs.backgroundMosaic.$refs.image,o=r.$refs.backgroundMosaic&&r.$refs.backgroundMosaic.$refs.canvas,s=a&&"none"!==window.getComputedStyle(a).display?a:o,!s||"none"===window.getComputedStyle(s).display){t.next=16;break}return t.next=11,d.a.delay(10);case 11:if(t.t0=this._promise,!t.t0){t.next=15;break}return t.next=15,this._promise;case 15:return t.abrupt("return",s);case 16:return t.next=18,this.render();case 18:return t.abrupt("return",this.canvas);case 19:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"render",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{force:!1},n=this.editor;return this._promise=d.a.try(Object(a["a"])(Object(i["a"])().mark((function r(){var a,o,s;return Object(i["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.initCanvas(),n.$events.$emit("mosaicRenderer.renderBefore",t.layout),a=t.canvas,o=a.getContext("2d"),o.clearRect(0,0,a.width,a.height),o.globalAlpha=1,i.next=8,t.renderUnderlying(e.force);case 8:return s=i.sent,o.save(),t.mosaicPaths.forEach((function(e){o.save(),t.renderPath(o,e),o.restore()})),o.globalCompositeOperation="source-in",o.drawImage(s,0,0),o.restore(),i.abrupt("return",a);case 15:case"end":return i.stop()}}),r)})))),this._promise.finally((function(){n.$events.$emit("mosaicRenderer.renderAfter",t.layout)}))}},{key:"renderUnderlying",value:function(){var t=Object(a["a"])(Object(i["a"])().mark((function t(e){var n,r,o=this;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=this.offCanvas,r=this.mosaicType,(e||this.isNeedRender())&&(this.setPreData(),this._renderUnderlyingPromise=d.a.try(Object(a["a"])(Object(i["a"])().mark((function t(){var e;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o.initOffCanvas(),e=n.getContext("2d"),e.clearRect(0,0,n.width,n.height),-1!==r){t.next=7;break}o.renderColor(e),t.next=25;break;case 7:if(0!==r){t.next=12;break}return t.next=10,o.renderImage(e);case 10:t.next=25;break;case 12:if(1!==r){t.next=17;break}return t.next=15,o.renderPixelated(e);case 15:t.next=25;break;case 17:if(2!==r){t.next=22;break}return t.next=20,o.renderGaussianBlur(e);case 20:t.next=25;break;case 22:if(3!==r){t.next=25;break}return t.next=25,o.renderBrush(e);case 25:return t.abrupt("return",e.canvas);case 26:case"end":return t.stop()}}),t)}))))),t.abrupt("return",this._renderUnderlyingPromise);case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"renderColor",value:function(t){var e=t.canvas;t.fillStyle=g()(this.mosaicColor),t.fillRect(0,0,e.width,e.height)}},{key:"renderPath",value:function(t,e){if(!e.hidden){var n="mosaicBrush"===e.type;t.lineJoin="round",t.lineCap="round",t.lineWidth=e.strokeWidth||0;var i={x:e.left+e.width/2,y:e.top+e.height/2};t.scale(this.zoom,this.zoom),t.translate(i.x,i.y),t.rotate(y["a"].degToRad(e.rotate)),t.scale(e.transform.scale.x,e.transform.scale.y),t.translate(-i.x,-i.y),t.translate(e.left,e.top);var r=new Path2D(e.path);n?t.stroke(r):t.fill(r),t.setTransform(1,0,0,1,0,0)}}},{key:"renderImage",value:function(){var t=Object(a["a"])(Object(i["a"])().mark((function t(e){var n,r;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.load();case 2:if(n=t.sent,!this.tileWidth||!this.tileHeight){t.next=7;break}return t.next=6,Object(p["g"])(n,this.tileWidth,this.tileHeight,{},!1);case 6:n=t.sent;case 7:r=e.createPattern(n,"repeat"),e.fillStyle=r,e.fillRect(0,0,e.canvas.width,e.canvas.height);case 10:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"renderPixelated",value:function(){var t=Object(a["a"])(Object(i["a"])().mark((function t(e){var n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.loadBackgroundImage();case 2:return n=t.sent,e.drawImage(n,0,0,e.canvas.width,e.canvas.height),t.abrupt("return",new b({ctx:e,tileHeight:this.tileHeight,tileWidth:this.tileWidth}).render());case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"renderGaussianBlur",value:function(){var t=Object(a["a"])(Object(i["a"])().mark((function t(e){var n,r,a,o;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.canvas,t.next=3,this.loadBackgroundImage();case 3:r=t.sent,e.drawImage(r,0,0,n.width,n.height),a=e.getImageData(0,0,n.width,n.height),o=f.a.StackBlur(a,this.mosaicBlur),e.putImageData(o,0,0);case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),n}(x)},"6cec":function(t,e){t.exports='<div class="editor-canvas editor-mirror">\n    <editor-layout\n        v-for="(layout, index) in layouts"\n        :key="layout.$id || index"\n        :editor="editor"\n        :options="options"\n        :global="global"\n        :layout="layout"\n    >\n    </editor-layout>\n</div>\n'},"6f62":function(t,e){t.exports='\x3c!-- Layout --\x3e\n<div\n    class="editor-layout"\n    v-if="layout"\n    :key="layout.$id"\n    :class="[layout.className, {\n        \'editor-layout-dragover\': layout.$dragOver,\n        \'editor-layout-current\': isCurrentLayout,\n        \'editor-layout-loaded\': layout.$loaded,\n        \'editor-layout-preview\': options.mode === \'preview\'\n    }]"\n    :style="layoutStyle"\n    @click="setCurrentLayout(layout)"\n>\n    <global-background\n        v-if="global.layout && !options.notGlobal"\n        ref="globalBackground"\n        :selected="global.layout.$backgroundSelected"\n        :mode="options.mode"\n        :global="global"\n        :editor="editor"\n        :options="options"\n        :global-layout="global.layout"\n        :layout="layout"\n    />\n\n    <background\n        ref="background"\n        v-show="!layout.$backgroundEditing || !layout.$backgroundImageInfo || !editor.editable"\n        :key="layout.$id"\n        :selected="layout.$backgroundSelected"\n        :mode="options.mode"\n        :global="global"\n        :options="options"\n        :layout="layout"\n    >\n        <background-mosaic\n            v-if="layout.mosaic && layout.mosaic.enable && (options.operateMode === \'mosaic\' || layout.mosaic.paths.length)"\n            ref="backgroundMosaic"\n            :global="global"\n            :options="options"\n            :editor="editor"\n            :layout="layout"\n        >\n            <background-mosaic-path-element\n                v-for="(element) in layout.mosaic.paths"\n                :class="{\n                        \'editor-element-disabled\': options.operateMode !== \'mosaic\'\n                    }"\n                :key="element.$id"\n                :options="options"\n                :global="global"\n                :model="element"\n                :editor="editor"\n            />\n        </background-mosaic>\n\n        <watermark\n            slot="watermark"\n            v-if="layout.background && layout.background.watermarkEnable"\n            :global="global"\n            :options="options"\n            :layout="layout"\n        />\n    </background>\n\n    <background-mask\n        v-if="backgroundMaskElements.length"\n        ref="backgroundMask"\n        :elements="backgroundMaskElements"\n        :mode="options.mode"\n        :global="global"\n        :options="options"\n        :editor="editor"\n        :layout="layout"\n    />\n\n    <border\n        v-if="layout.border && layout.border.enable"\n        v-show="!layout.$backgroundEditing"\n        :global="global"\n        :options="options"\n        :mode="options.mode"\n        :layout="layout"\n    />\n\n    \x3c!-- elements --\x3e\n    <template v-for="(element) in elements">\n        <component\n            :key="element.$id"\n            :is="element.type + \'-element\'"\n            :data-id="element.$id"\n            v-if="editor.supportTypesMap[element.type]"\n            :options="options"\n            :global="global"\n            :model="element"\n            :editor="editor"\n            :class="[{\n                \'editor-element-current\': editor.currentElement === element,\n                \'editor-element-disabled\': options.operateMode === \'mosaic\'\n            }, element.$className]"\n        />\n\n        <template v-else-if="element.$maskElement">\n            <mask-wrap\n                v-if="element.$maskElement.maskInfo.enable && element.elements.length"\n                :elements="element.elements"\n                :maskInfoElement="element.$maskElement"\n                :key="`mask-wrap-${element.$maskElement.id}`"\n                :model="element"\n                :global="global"\n                :options="options"\n                :editor="editor"\n            />\n        </template>\n\n        \x3c!-- 默认元素 --\x3e\n        <common-element\n            v-else\n            :key="element.$id"\n            :model="element"\n            :global="global"\n            :options="options"\n            :editor="editor"\n        />\n    </template>\n\n    <watermark v-if="watermarkEnable" :global="global" :options="options" :layout="layout" />\n</div>\n'},"76a9":function(t,e,n){"use strict";n.r(e);var i={};n.r(i),n.d(i,"getScrollWidth",(function(){return ci})),n.d(i,"getStyle",(function(){return ui})),n.d(i,"elementScrollIntoView",(function(){return di})),n.d(i,"isInViewPort",(function(){return hi})),n.d(i,"getTextWidth",(function(){return fi}));var r=n("3835"),a=n("2909"),o=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("13d5"),n("d3b7"),n("3ca3"),n("ddb0"),n("9861"),n("ac1f"),n("841c"),n("a026")),s=n("5530"),c=n("7713"),l=(n("b64b"),n("da42")),u=n("d4ec"),d=n("bee2"),h=n("257e"),f=n("262e"),m=n("2caf"),g=(n("159b"),n("4de4"),n("d81d"),n("a9e3"),n("61d3")),p=n("e002"),v=n("2ef0"),b=n("af9f"),y=n("49bc"),w=n("8e5e"),_=function(t){Object(f["a"])(n,t);var e=Object(m["a"])(n);function n(t){var i;if(Object(u["a"])(this,n),i=e.call(this,t),i.backgroundColor&&(i.backgroundColor=Object(p["d"])(i.backgroundColor)),i.color&&(i.color=Object(p["d"])(i.color)),i.textShadow){var r=i.textShadow;r.color=Object(p["d"])(r.color)}i.textEffects&&i.textEffects.length&&(i.textEffects.forEach((function(t){if(t.enable&&(!t.filling||!t.filling.enable)){var e=i.contents||[],n=Object(v["uniq"])(e.map((function(t){return t.color})).filter((function(t){return t})));n.length>1||(i.color=Object(p["d"])(n[0]||i.color),t.filling=Object(v["cloneDeep"])(y["a"].textEffect.filling),t.filling.color=i.color,t.filling.enable=!0)}})),i.textEffects.forEach((function(t){if(t.stroke&&(t.stroke.color=Object(p["d"])(t.stroke.color)),t.shadow&&(t.shadow.color=Object(p["d"])(t.shadow.color)),t.filling){t.filling.color=Object(p["d"])(t.filling.color);var e=Object(v["get"])(t,"filling.gradient.stops");e&&e.forEach((function(t){t.color=Object(p["d"])(t.color)}))}!t.offset||0===t.offset.x&&0===t.offset.y||(t.offset.enable=!0)}))),Object(p["f"])("text",Object(h["a"])(i),!0),"string"===typeof i.lineHeight&&(i.lineHeight=Number(i.lineHeight)||1.2),"string"===typeof i.letterSpacing&&(i.letterSpacing=Number(i.letterSpacing)||0);var a=t.writingMode,o=void 0===a?"horizontal-tb":a,s=t.resize;if(!i.autoScale&&("horizontal-tb"===o&&5===s||"vertical-rl"===o&&3===s)&&(i.autoScale=!0),void 0===t.autoAdaptive&&"vertical-rl"===i.writingMode&&5===i.resize&&i.autoScale?t.resize=i.resize=3:void 0===t.autoAdaptive&&"vertical-rl"!==i.writingMode&&3===i.resize&&i.autoScale&&(t.resize=i.resize=5),void 0===t.autoAdaptive){var c={0:3,1:3,2:2,3:2,4:1,5:1,6:0,7:0};i.autoAdaptive=c[i.resize]}if(!i.contents||!i.contents.length){var l=i.listStyle?"<ul><li>".concat(Object(v["escape"])(i.content),"</li></ul>"):Object(v["escape"])(i.content);i.contents=b["b"].fromJSON(l||"",Object.assign({},Object(h["a"])(i)),{listStyle:i.listStyle})}return i.contents=i.contents.map((function(t){return Object.assign({},{color:i.color,fontFamily:i.fontFamily,fontStyle:i.fontStyle||"normal",fontSize:i.fontSize,fontWeight:i.fontWeight||400,textDecoration:i.textDecoration||"none"},t)})).filter((function(t){return t.content})),i}return Object(d["a"])(n,[{key:"$miniFontSize",get:function(){return b["c"].checkVersion(this.version,w["a"])?12:14}},{key:"$renderProps",get:function(){return[this.maskInfo.enable,this.width,this.height,this.lineHeight,this.letterSpacing,this.fontFamily,this.fontSize,this.fontWeight,this.textAlign,this.autoAdaptive,this.textDecoration,this.textShadow,this.contents,this.opacity,this.textEffects]}}]),n}(g["a"]),x=_,k=(n("99af"),n("a434"),n("c740"),n("caad"),n("5319"),n("1276"),n("00b4"),n("2532"),n("f4d5")),E=n("5b44"),O=n("1c39");function S(t){return Math.round(100*t)/100}var j={addText:function(t,e,n){var i=Object(v["assign"])({type:"text",fontSize:16,fontFamily:"Simsun",content:t,lineHeight:1.2},e);return this.calculateBox(i),this.addElement(i,n)},calculateBox:function(t){if(!t.width){var e=10,n=10,i=this.$el,r=document.createElement("span"),a="position:absolute;left:0;top:-100px;";a+="max-width:".concat(this.width,"px;"),a+="line-height:".concat(t.lineHeight||"normal",";"),a+="font-size:".concat(t.fontSize,"px;"),a+="letter-spacing:".concat(t.letterSpacing||0,"px;"),t.fontFamily&&(a+="font-family:"+t.fontFamily),r.innerHTML=t.content,r.style.cssText=a,i.appendChild(r),t.width=r.offsetWidth+e,t.height=r.offsetHeight+n,t.lineHeight||(t.lineHeight=t.height/t.fontSize),i.removeChild(r)}},addTextEffect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e=this.getElement(e),e&&("text"===e.type||"effectText"===e.type)){var i;if(n)i=Object(v["merge"])({},y["a"].textEffect,{filling:{color:e.color}});else{var r=["enable","excludeScale"];i=Object(v["pick"])(Object(v["merge"])({},y["a"].textEffect,{filling:{color:e.color}}),r.concat(Object.keys(t)))}var a=Object(v["merge"])({},i,t);e.textEffects.push(a),this.makeSnapshot("change_text_effect")}},removeTextEffect:function(t,e){if(e=this.getElement(e),t&&e&&"text"===e.type){var n=e.textEffects.indexOf(t);-1!==n&&(e.textEffects.splice(n,1),this.makeSnapshot("change_text_effect"))}},removeAllTextEffects:function(t){t=this.getElement(t),t&&("text"===t.type||"effectText"===t.type)&&t.textEffects.length&&(t.textEffects=[],this.makeSnapshot("change_text_effect"))},changeTextEffect:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(n=this.getElement(n),t&&n&&("text"===n.type||"effectText"===n.type)){var a=n.textEffects.findIndex((function(e){return e===t}));if(-1!==a){var o;if(r)o=Object(v["merge"])({},y["a"].textEffect,{filling:{color:n.color}});else{var s=["enable","excludeScale"];o=Object(v["pick"])(Object(v["merge"])({},y["a"].textEffect,{filling:{color:n.color}}),s.concat(Object.keys(e)))}var c=Object(v["merge"])(o,e);n.textEffects.splice(a,1,c),i&&this.makeSnapshot("change_text_effect")}}},changeTextContents:function(t,e){var n=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e=this.getElement(e);var r=this.currentRichText;if(["text","effectText"].includes(e.type))if(e.$editing){if(r){var a=this.currentSelection;Object.keys(t).forEach((function(e){var i=t[e],o=n.options.fontsMap;"listStyle"===e&&i&&r.cmd.do("insertList"),(!a||a[e]&&a[e]!==i)&&("fontFamily"===e&&i.includes(".")&&o[i]&&o[i].family&&(i=o[i].family),r.cmd.do(e,i))}))}}else{e.contents=b["b"].injectStyleProps(e.contents,t);var o=[];Object(v["isString"])(t.listStyle)&&""!==t.listStyle?(e.contents.forEach((function(t){var e=t.content.replace(/(\r?\n|\r)/gm,"__BR__"),n=e.split("__BR__");delete t.beginParentTag,delete t.closeParentTag,o=o.concat(n.filter((function(t){return!!t})).map((function(e){return Object(s["a"])(Object(s["a"])({},t),{},{content:e,beginParentTag:"li",closeParentTag:"li"})})))})),e.contents=b["b"].mergeChild(o)):Object(v["isString"])(t.listStyle)&&(o=e.contents.filter((function(t){return!!t.content})),o=o.map((function(t,e){var n=/(\r?\n|\r)$/.test(t.content);return t.closeParentTag&&e!==o.length-1&&!n&&(t.content+="\n"),delete t.beginParentTag,delete t.closeParentTag,Object(s["a"])({},t)})),e.contents=b["b"].mergeChild(o)),Object(v["merge"])(e,t),i&&this.makeSnapshot("change_text_contents")}},toggleBold:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentSubElement||this.currentElement,e=this.currentSelection||t;this.changeTextContents({fontWeight:700===+e.fontWeight?400:700},t)},toggleItalic:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentSubElement||this.currentElement,e=this.currentSelection||t;this.changeTextContents({fontStyle:"italic"===e.fontStyle?"normal":"italic"},t)},toggleUnderline:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentSubElement||this.currentElement,e=this.currentSelection||t,n="underline"===e.textDecoration?"none":"underline";this.changeTextContents({textDecoration:n},t)},toggleThrough:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentSubElement||this.currentElement,e=this.currentSelection||t,n="line-through"===e.textDecoration?"none":"line-through";this.changeTextContents({textDecoration:n},t)},setFontFamily:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentSubElement||this.currentElement;this.changeTextContents({fontFamily:t},e)},setFontSize:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentSubElement||this.currentElement;this.changeTextContents({fontSize:t},e)},setColor:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentSubElement||this.currentElement;this.changeTextContents({color:t},e)},updateCurrentSelection:function(){var t=this,e=Object.keys(E["c"]),n={fontWeight:400,fontStyle:"normal",textDecoration:"none"},i={};e.forEach((function(t){i[t]=null})),e.forEach((function(t){i[t+"Mixed"]=!1}));var r=function(){},a=function(t){var i={},r=[];return t.forEach((function(t){var e=t.contents.filter((function(t){var e=/<br>|\r|\n/g;return!(!t.content||!t.content.replace(e,""))})).map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{element:t})}));r=r.concat(e)})),r.length>1&&r.reduce((function(t,r){return e.forEach((function(e){var a=t[e]||t.element[e]||n[e],o=r[e]||r.element[e]||n[e];"fontSize"===e&&(a=S(a),o=S(o)),a!==o&&a&&o&&(i[e+"Mixed"]=!0)})),r})),i},o=function(t){var i={};return e.forEach((function(e){i[e]=t[e]||n[e]})),i.fontSize=S(i.fontSize),i};this.$watch((function(){var e=null,n=t.currentElement,i=t.currentSubElement,r=t.selectedElements,c=r||[];return n=i||n,n&&/text/i.test(n.type)&&!n.$editing&&(e=Object(s["a"])(Object(s["a"])({},a([n])),o(n))),Object(O["d"])(n)?(c=[],t.walkTemplet((function(t){c.push(t)}),!0,[n])):c.length>1&&n&&"$selector"===n.type?(c=n.elements||[],c=c.reduce((function(t,e){return t.concat(e.elements||e)}),[])):c.length>1&&(c=[]),c=c.filter((function(t){return/text/i.test(t.type)})),c.length&&(e=Object(s["a"])(Object(s["a"])({},a(c)),o(c[0]))),{result:e,length:c.length,currentElement:n}}),(function(e){var n=e.result,r=e.currentElement;n?t.currentTextSelection=Object.assign({},i,n):r&&/text/i.test(r.type)||(t.currentTextSelection=null)})),this.$watch("currentRichText",(function(n){var o=t.currentElement,c=t.currentSubElement;if(o=c||o,r(),o&&n){var l=function(){var r=t.currentElement,o=t.currentSubElement;if(r=o||r,r.$editing){var c={};e.forEach((function(t){var e=n.cmd.queryCommandValue(t);c[t]=E["c"][t](e)||r[t]})),c.fontSize=S(c.fontSize),t.currentTextSelection=Object.assign({},i,c);var l=n.selection._currentRange;if(l){var u=Object(k["a"])("<div></div>").append(l.cloneContents());if(u.children().length){var d=b["b"].fromJSON(u.html());if(d&&!(d.length<2)){var h=a([Object(s["a"])(Object(s["a"])({},r),{},{contents:d})]);Object.assign(t.currentTextSelection,h)}}}}};n.on("change",l),n.selection.on("change",l),r=function(){n.off("change",l),n.selection.off("change",l)}}}))},showTextEditor:function(t){t.$editing=!0}},I=(n("38cf"),n("a15b"),n("b0c0"),n("c9b4")),A=n("33ec"),T=n("d2ab"),C=n("91e8");function P(){this.syncRect()}var $=Object(I["a"])(T["a"],{name:"text-element",computed:{effectedTextEffects:function(){return Object(p["c"])(this.model)},effectStyles:function(){var t=this;return this.effectedTextEffects.map((function(e){var n=t.getEffectStyle(e);return Object.assign({},t.textStyle,n)}))}},methods:{getEffectStyle:function(t){var e={};if(t.offset&&(t.offset.x&&(e.left=t.offset.x+"px"),t.offset.y&&(e.top=t.offset.y+"px")),t.stroke&&t.stroke.enable&&"outer"!==t.stroke.type&&t.stroke&&t.stroke.width&&(e.textStroke="".concat(t.stroke.width,"px ").concat(t.stroke.color)),t.shadow&&t.shadow.enable){var n=t.shadow;e.textShadow="".concat(n.offsetX,"px ").concat(n.offsetY,"px ").concat(n.blur,"px ").concat(n.color)}if(t.skew&&t.skew.enable&&(t.skew.x||t.skew.y)&&(e.transform="skew(".concat(t.skew.x,"deg, ").concat(t.skew.y,"deg)")),t.filling&&t.filling.enable){var i=t.filling;if(0===i.type&&(e.webkitTextFillColor=i.color),1===i.type&&i.imageContent&&i.imageContent.image){var r=i.imageContent,a={width:r.width,height:r.height},o={width:this.model.width,height:this.model.height},s=r.type,c=a.width&&a.height&&o.width&&o.height;if(e.webkitBackgroundClip="text",e.webkitTextFillColor="transparent",e.backgroundImage="url(".concat(r.image,")"),e.backgroundRepeat="no-repeat",e.backgroundPosition="center",c&&"fill"===s){var l=Object(C["a"])(a,o);e.backgroundSize="".concat(a.width*l,"px ").concat(a.height*l,"px")}else if(c&&"fit"===s){var u=Object(C["b"])(a,o);e.backgroundSize="".concat(a.width*u,"px ").concat(a.height*u,"px")}else if(c&&"crop"===s)e.backgroundSize="100% 100%";else if(!c||"tiled"!==s&&s){r.repeat&&(e.backgroundRepeat=r.repeat);var d=r.width,h=r.height,f=r.scaleX,m=r.scaleY;d&&h&&(e.backgroundSize="".concat(d*f,"px ").concat(h*m,"px"))}else e.backgroundPosition="0 0",e.backgroundRepeat="repeat",e.backgroundSize="".concat(a.width*r.scaleX,"px ").concat(a.height*r.scaleY,"px")}if(2===i.type){e.webkitBackgroundClip="text",e.webkitTextFillColor="transparent";var g=[],p=i.gradient;g.push(90-p.angle+"deg"),p.stops.forEach((function(t){g.push("".concat(t.color," ").concat(100*t.offset,"%"))}));var v=g.join(",");e.backgroundImage="linear-gradient(".concat(v,")")}}return e},scaleEffect:function(t){this.model.textEffects.forEach((function(e){var n=e.offset,i=e.stroke,r=e.shadow;n&&(n.x*=t,n.y*=t),i&&(i.width*=t),r&&(r.offsetX*=t,r.offsetY*=t)}))},checkLoadFullFont:function(){var t=this.model,e=this.options,n=Object(A["a"])([{elements:[t]}],e);n&&(Object.keys(n).forEach((function(t){var n=e.fontSubsetsMap[t];n&&(n.loadType="all")})),this.checkLoad())}},watch:{"model.$editing":function(t){var e,n=this;t?(this.model.contents.forEach((function(t){var i=n.options.fontsMap[t.fontFamily||n.model.fontFamily]||n.options.defaultFont,r=n.options.fontSubsetsMap[i.name];r&&"all"!==r.loadType&&(r.loadType="all",e=!0)})),e&&this.checkLoad()):this.syncRect()},"model.fontSize":function(t,e){var n=this.options,i=this.scaleEffect,r=t/e||1;"preview"===n.mode||this.model.$resizeApi||i(r)},"model.writingMode":function(){var t=this;if("preview"!==this.options.mode){var e=this.model,n={2:4,4:2,5:3,3:5}[e.resize];e.resize=n||e.resize;var i={1:2,2:1}[e.autoAdaptive];e.autoAdaptive=i||e.autoAdaptive;var r=[e.height,e.width];e.width=r[0],e.height=r[1],this.$nextTick((function(){t.$events.$emit("element.rectUpdate",e,{width:e.width-e.height,height:e.height-e.width}),t.syncRect()}))}},"model.contents":function(){var t=this.$parent.model,e=this.editor.isGroup(t)&&t.autoGrow;this.model.$editing||this.model.$draging||this.checkLoadFullFont(),this.$textResizeMeta&&e||this.syncRect()},"model.letterSpacing":P,"model.lineHeight":P,"model.padding":P},mounted:function(){this.checkLoadFullFont(),this.syncRect()}}),M=(n("7db0"),n("a630"),function(){function t(){Object(u["a"])(this,t),this.$events=Object(k["a"])({})}return Object(d["a"])(t,[{key:"on",get:function(){return this.$events.on.bind(this.$events)}},{key:"once",get:function(){return this.$events.one.bind(this.$events)}},{key:"off",get:function(){return this.$events.off.bind(this.$events)}},{key:"emit",get:function(){return this.$events.trigger.bind(this.$events)}}]),t}()),R=n("cd8b"),L=(n("acd8"),n("25f0"),n("66cb")),U=n.n(L),z=["fontWeight","fontFamily","fontSize","fontStyle","color","textDecoration"];z.concat(z.filter((function(t){return E["b"][t]})).map((function(t){return E["b"][t]})));var D=function(t){Object(f["a"])(n,t);var e=Object(m["a"])(n);function n(t){var i;return Object(u["a"])(this,n),i=e.call(this),i.selection=t,i._initMode(),i}return Object(d["a"])(n,[{key:"_initMode",value:function(){document.execCommand("styleWithCSS",!1,!0)}},{key:"_customizeStyle",value:function(t,e){var n=this.selection,i=n.$textElem.find("span[style*=background]");i.css({"background-color":"",background:""}),this._execCommand("hiliteColor","rgba(255,255,255,0)"),i=n.$textElem.find("span[style*=background]"),i.css(t,e).find("span").css(t,"");var r=i[0],a=i[i.length-1];r&&n.createRangeByElems(r,a,0,a.childNodes.length)}},{key:"_fontSize",value:function(t){t=parseFloat(t)+"px",this._customizeStyle("font-size",t)}},{key:"_color",value:function(t){Object(R["e"])()?(t=t&&U()(t).toString("rgb"),this._customizeStyle("color",t)):this._execCommand("color",t)}},{key:"_textDecoration",value:function(t){var e={underline:"underline","line-through":"strikeThrough"},n=this.queryCommandValue("underline"),i=this.queryCommandValue("strikeThrough");if(this._execCommand("underline"),this._execCommand("underline"),this._execCommand("strikeThrough"),this._execCommand("strikeThrough"),n=this.queryCommandValue("underline"),i=this.queryCommandValue("strikeThrough"),!e[t])return n&&this._execCommand("underline"),void(i&&this._execCommand("strikeThrough"));"line-through"===t&&n?this._execCommand("underline"):"underline"===t&&i&&this._execCommand("strikeThrough"),this._execCommand(e[t])}},{key:"_insertHTML",value:function(t){var e=this.selection.getRange();this.queryCommandSupported("insertHTML")?this._execCommand("insertHTML",t):e.insertNode?(e.deleteContents(),e.insertNode(Object(k["a"])(t)[0])):e.pasteHTML&&e.pasteHTML(t)}},{key:"_insertElem",value:function(t){var e=this.selection.getRange();e.insertNode&&(e.deleteContents(),e.insertNode(t))}},{key:"_insertList",value:function(){var t=this.selection.$textElem;this.selection.createRangeByElem(t[0],!0),this._execCommand("InsertOrderedList"),this._execCommand("InsertUnorderedList"),t.children("span").each((function(t,e){var n=Object(k["a"])(e),i=Object(k["a"])(e).text();i||n.remove()}))}},{key:"_execCommand",value:function(t,e){this._initMode(),t=E["b"][t]||t,document.execCommand(t,!1,e)}},{key:"_queryCommandValue",value:function(t){if("textDecoration"===t){var e="none";return!0===this.queryCommandState("strikeThrough")?e="line-through":!0===this.queryCommandState("underline")&&(e="underline"),e}var n=this.selection.$textElem[0],i=this.selection.getSelectionStartElem(),r=Object(k["a"])(i).css(t);if("font-size"===t)while("0px"===r){if(i=Object(k["a"])(i).children().get(0),!i)break;r=Object(k["a"])(i).css(t)}return["color","font-family"].includes(t)&&i===n&&(i=Object(k["a"])(i).children().get(0),r=Object(k["a"])(i).css(t)),r}},{key:"do",value:function(t,e){var n=this.selection;if(n.getRange()){var i=z.includes(t)&&n.isSelectionEmpty();i&&n.createEmptyRange(this),n.restoreSelection();var r="_"+t;this[r]?this[r](e):this._execCommand(t,e),this.emit("do",[t,e]),n.saveRange(),n.restoreSelection(),i&&(n.collapse(),n.restoreSelection())}}},{key:"queryCommandValue",value:function(t){var e=["bold","Bold","italic","Italic","strikeThrough","StrikeThrough","underline","Underline"],n={fontSize:"font-size",FontSize:"font-size",textDecoration:"textDecoration"};return Object(R["e"])()&&Object.assign(n,{fontName:"font-family",foreColor:"color"}),t=E["b"][t]||t,n[t]?this._queryCommandValue(n[t]):-1!==e.indexOf(t)?this.queryCommandState(t):document.queryCommandValue(t)}},{key:"queryCommandState",value:function(t){return document.queryCommandState(t)}},{key:"queryCommandSupported",value:function(t){return document.queryCommandSupported(t)}}]),n}(M),B=(n("d9e2"),function(t){Object(f["a"])(n,t);var e=Object(m["a"])(n);function n(t){var i;return Object(u["a"])(this,n),i=e.call(this),i.$textElem=Object(k["a"])(t),i._currentRange=null,i}return Object(d["a"])(n,[{key:"getRange",value:function(){return this._currentRange}},{key:"saveRange",value:function(t){if(t)this._currentRange=t;else{var e=this.$textElem,n=window.getSelection();if(0!==n.rangeCount){var i=n.getRangeAt(0),r=this.getSelectionContainerElem(i);r&&((k["a"].contains(e[0],r)||e[0]===r)&&(this._currentRange=i),this._changed())}}}},{key:"collapse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._currentRange&&(this._currentRange.collapse(t),this.restoreSelection())}},{key:"restoreSelection",value:function(){var t=window.getSelection();t.removeAllRanges(),t.addRange(this._currentRange),this._changed()}},{key:"isSelectionEmpty",value:function(){var t=this._currentRange;return t&&t.startContainer&&t.startContainer===t.endContainer&&t.startOffset===t.endOffset}},{key:"createEmptyRange",value:function(t){var e=this.getRange();if(e&&this.isSelectionEmpty())try{var n=Object(k["a"])("<span>&#8203;</span>")[0];t.do("insertElem",n),this.createRangeByElem(n,!0)}catch(i){console.error(i)}}},{key:"getSelectionStartElem",value:function(){var t=this._currentRange;if(t){var e=t.startContainer;return 1===e.nodeType?e:e.parentNode}}},{key:"getSelectionContainerElem",value:function(t){if(t=t||this._currentRange,t){var e=t.commonAncestorContainer;return 1===e.nodeType?e:e.parentNode}}},{key:"cloneContents",value:function(){var t=this._currentRange;if(t){var e=t.cloneContents();return e}}},{key:"createRangeByElem",value:function(t,e){if(t=t||this.$textElem[0],t){var n=document.createRange();e?n.selectNodeContents(t):n.selectNode(t),this._currentRange=n,this.restoreSelection()}}},{key:"createRangeByElems",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=document.createRange();if(!t||!e)throw new Error("startElem endElem is required");!1===n?r.setStartBefore(t):r.setStart(t,n),!1===i?r.setEndAfter(e):r.setEnd(e,i),this._currentRange=r,this.restoreSelection()}},{key:"clearRange",value:function(){if(this._currentRange){var t=window.getSelection();t.removeRange(this._currentRange),this._currentRange=null}}},{key:"_changed",value:function(){var t=this;clearTimeout(this._timer),this.timer=setTimeout((function(){var e=t._currentRange,n=[e.startContainer,e.endContainer,e.startOffset,e.endOffset,e.toString()],i=function(){return n.some((function(e,n){return e!==t._prevRangeInfo[n]}))};t._prevRangeInfo&&!i()||(t.emit("change",t._currentRange),t.emit("_change",t._currentRange),t._prevRangeInfo=n)}),100)}}]),n}(M)),N=n("eb3b"),F=(n("fb6a"),/[\u0000\u0001\u0002\u0003\u0004\u0005\u0006\u0007\u0008\u0009\u000a\u000b\u000c\u000d\u000e\u000f\u0010\u0011\u0012\u0013\u0014\u0015\u0016\u0017\u0018\u0019\u001a\u001b\u001c\u001d\u001e\u001f\u007F]/gm);function H(t){var e,n=t.clipboardData||t.originalEvent&&t.originalEvent.clipboardData;return e=null==n?window.clipboardData&&window.clipboardData.getData("text"):n.getData("text"),Object(v["escape"])(e.slice(0,1500)).replace(/(\r\n|\r|\n)/g,"<br/>").replace(F,"")}var V=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,G=function(t){Object(f["a"])(n,t);var e=Object(m["a"])(n);function n(t,i){var r,a=i.options,o=i.editorOptions,s=i.model;return Object(u["a"])(this,n),r=e.call(this),r.model=s,r.editorOptions=o,r.$textElem=Object(k["a"])(t),r.setConfig(a),r._init(),r}return Object(d["a"])(n,[{key:"_init",value:function(){this.selection=new B(this.$textElem),this.cmd=new D(this.selection),this.clear(),this._bindSaveRange(),this._bindPaste(),this._changed(),this._bindClear()}},{key:"_bindSaveRange",value:function(){var t=this.$textElem,e=this.selection,n=function(){return e.saveRange()};t.on("keyup.richText",n),t.on("mousedown.richText",(function(){t.on("mouseleave.richText",n)})),t.on("mouseup.richText",(function(){setTimeout(n,50),t.off("mouseleave.richText",n)}))}},{key:"_bindPaste",value:function(){var t=this,e=this.selection,n=this.cmd,i=this.$textElem;i.on("paste.richText",(function(r){if("true"===i.prop("contenteditable")){t.selection.saveRange();var a=H(r,t.editorOptions,t.model),o=e.getSelectionContainerElem();o&&(n.do("insertHTML",a),t._createPlaceholderDOM()),r.stopPropagation(),r.preventDefault()}})).on("copy.richText cut.richText",(function(t){"true"===i.prop("contenteditable")&&t.stopPropagation()}))}},{key:"_createPlaceholderDOM",value:function(t){var e=this.$textElem,n=e.children().not("br"),i=e.text().replace(/\u200b/g,"");n.length&&i||this._insertWrap(i,t)}},{key:"_insertWrap",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.config,i=n.defaultStyle,r=n.listStyle,a=this.$textElem,o=this.selection,s="<span style='".concat(i,"'>").concat(t||(Object(R["d"])()?"&#8203;":"<br>"),"</span>");s=r?"<ul><li>".concat(s,"</li></ul>"):"<div>".concat(s,"</div>"),a.html(""),!1===e?(a.focus(),this.cmd.do("insertHTML",s)):(s=Object(k["a"])(s)[0],a.append(s),o.createRangeByElem(s,!0)),o.collapse(!1)}},{key:"_bindClear",value:function(){var t=this,e=this.$textElem,n=!1;e.on("keydown",(function(){n=!0})).on("input",(function(){setTimeout((function(){n&&t._createPlaceholderDOM(),n=!1}))})),this._createPlaceholderDOM(!0)}},{key:"_changed",value:function(){var t=this,e=null,n=this.$textElem[0],i={attributes:!0,childList:!0,subtree:!0,characterData:!0},r=n.__richeTextObserver__=new V((function(){t.emit("changeImmediate",t.$textElem[0]),t.emit("_changeImmediate",t.$textElem[0]),clearTimeout(e),e=setTimeout((function(){var e=t.$textElem.html();e!==t._prevHtml&&(t.emit("change",t.$textElem[0]),t.emit("_change",t.$textElem[0]),t._prevHtml=e)}),100)}));r.observe(n,i)}},{key:"setConfig",value:function(t){if(t){var e=this.config||{defaultStyle:"",listStyle:""};Object.assign(e,t);var n=e.defaultStyle;e.defaultStyle="string"===typeof n?n:N["a"]._getStyleString(n),this.config=e}}},{key:"fromJSON",value:function(t){t=t||this.$textElem.html();for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=N["a"].fromJSON.apply(N["a"],[t].concat(n));return r}},{key:"fromHTML",value:function(){return N["a"].fromHTML.apply(N["a"],arguments)}},{key:"clear",value:function(){var t=this.$textElem;t[0].__richeTextObserver__&&t[0].__richeTextObserver__.disconnect(),t.off("keyup.richText"),t.off("mousedown.richText"),t.off("mouseleave.richText"),t.off("mouseup.richText"),t.off("paste.richText"),t.off("copy.richText"),t.off("cut.richText")}}]),n}(M);Object.keys(N["a"]).forEach((function(t){var e=N["a"][t];G[t]=e}));var W=n("d6d7"),Y=n.n(W),q=Object(k["a"])(document),X=/\u200b/gm,Z=/<br>|\r|\n/g,K=T["a"].find((function(t){return t.methods.checkLoad})).methods.checkLoad,J=Object(I["a"])(T["a"],{name:"text-editor",template:Y.a,props:["global","model","options"],data:function(){return{clickLocked:!1,html:""}},methods:{syncRect:v["noop"],initTextEditor:function(){var t=this;this.createRichText(),this.html=this.contentsHTML,this._initContents=G.fromJSON(this.html,{},{listStyle:this.model.listStyle}),this.$on("destroy",(function(){t.model.$editing=!1,t.$events.$emit(t._isChange?"element.editApply":"element.editCancel",t.model),t.$events.$emit("richText.update",null),t._richText.clear()}))},createRichText:function(){var t=this;this._richText=new G(this.$refs.edit,{options:this.richTextOptions,editorOptions:this.options,model:this.model}),this.$events.$emit("richText.update",this._richText),this._richText.cmd.on("do",(function(e,n,i){t.model.$editing&&"fontFamily"===n&&t.load(i).then((function(){return t._checkLoad()})).catch(console.error)})),this._richText.on("changeImmediate",(function(e,n){var i=n.innerHTML;i!==t._prevHtml&&t.setContents(t.model),t._prevHtml=i}))},setContents:function(t){if(this._richText&&t&&["text","styledText","threeText","effectText"].includes(t.type)&&t.$editing){var e=this._richText.fromJSON(null,{},{listStyle:t.listStyle});Array.from(e).reverse().some((function(t){return t.content=t.content.replace(/\n+\s*$/,""),!!t.content}));var n=e.some((function(t){return t.content&&!!t.content.replace(Z,"")}));e=e.filter((function(t){return!!t.content}));var i=n?G.getAllEqualStyleProps(e):{};t.contents=e,t.content=this.$refs.edit.textContent,Object(v["merge"])(t,i),Object(v["isEqual"])(this._initContents,e)||(this._isChange=!0),this.editor.resetAggregatedColors(t,!1),this.$events.$emit("element.change",t,"contents")}},checkFocus:function(){var t=this,e=this.model;e.$editing&&this._richText&&this.$nextTick((function(){var e=Object(k["a"])(t.$refs.edit),n=e.text().replace(X,"");n?t._richText.selection.createRangeByElem(e[0],!0):(t._richText.selection.createRangeByElem(e.children().last()[0]||e[0],!0),t._richText.selection.collapse())}))},onMousedown:function(){var t=this,e=function(){setTimeout((function(){t.clickLocked=!1}),160)};this.clickLocked=!0,q.one("mouseup.editor-text-editor",e)},_checkLoad:K,checkLoad:v["noop"]},events:{"base.click":function(t){this.clickLocked&&t.preventDefault()},"base.zoom":function(){this.html=this.contentsHTML,this.checkFocus()},"base.keyDown":function(t){var e=this.model;e&&27===t.keyCode&&(e.$editing=!1)},"element.editApply":function(t){t=t||this.model,this.setContents(t),t.$editing=!1},"element.transformResize":function(){this.html=this.contentsHTML,this.checkFocus()}},computed:{newGlobal:function(){return Object(s["a"])(Object(s["a"])({},this.global),{},{zoom:1})},richTextOptions:function(){return this.model&&{listStyle:this.model.listStyle,defaultStyle:Object(s["a"])(Object(s["a"])({},this.model),{},{fontSize:this.model.fontSize,fontFamily:this.fontFamily})}}},watch:{"model.fontSize":function(){"threeText"===this.model.type&&(this.html=this.contentsHTML)},"model.$editing":function(t){t&&(this.html=this.contentsHTML),this.checkFocus()},model:function(t,e){e&&(this._isChange&&this.$events.$emit("element.editApply",e),e.$editing=!1),this._isChange=!1,this.html=this.contentsHTML},richTextOptions:function(){this._richText&&this.model&&this._richText.setConfig(this.richTextOptions)}},created:function(){this.editElement=this.editor.currentSubElement||this.editor.currentElement},mounted:function(){this.initTextEditor(),this.checkFocus()}}),Q={model:x,methods:j,layoutComponent:$,editComponent:J},tt=n("996d"),et=n("b9fd"),nt=n("c7cc"),it={createGroup:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this;t||(t=this.getSelectedElements()),t=(t||[]).filter((function(t){return!(e.isGroup(t)&&n)&&t.groupable}));var r=[];if(n){var a=function t(n){n.forEach((function(n){e.isGroup(n)?t(i.collapseGroup(n)):r.push(n)}))};a(t)}else r=t;var o=b["a"].getBBoxByElements(r),s=this.createElement({type:"group",height:o.height,width:o.width,left:o.left,top:o.top,elements:[]});return r.forEach((function(t){t=e.addElement(t,s),t.disableEditable(),t.$selected=!1,t.left-=s.left,t.top-=s.top})),s},collapseGroup:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.isGroup,a=this.getElement(t),o=a&&a.elements;if(!o||!o.length)return[];var c=function t(a){var o=a.rotate,c=a.elements,l=[];return(a.backgroundColor||a.backgroundEffect)&&i&&l.push(Object(s["a"])(Object(s["a"])({},a),{},{watermarkEnable:!1,elements:[]})),l=c.reduce((function(i,c){c=e.createElement(Object(s["a"])({},c)),c.enableEditable(),c.rotate+=o,a.scaleY<0&&(c.scaleY*=a.scaleY,c.top=a.height-c.top-c.height),a.scaleX<0&&(c.scaleX*=a.scaleX,c.left=a.width-c.left-c.width);var l={x:a.left+c.left+c.width/2,y:a.top+c.top+c.height/2},u=b["a"].getRectPoints({left:l.x,top:l.y,width:a.width-2*c.left-c.width,height:a.height-2*c.top-c.height,rotate:o,skewX:0,skewY:0});return c.left+=a.left+u.nw.x-l.x,c.top+=a.top+u.nw.y-l.y,delete c.$parentId,n&&r(c)&&(c=t(c)),i.concat(c)}),l),a.watermarkEnable&&i&&l.push(Object(s["a"])(Object(s["a"])({},a),{},{backgroundColor:null,backgroundEffect:null,elements:[]})),l};return c(a)},addGroupByElements:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t||(t=this.getSelectedElements()),t=(t||[]).filter((function(t){return!(e.isGroup(t)&&i)&&t.groupable})),!(t.length<=1)){var r=this.createGroup(t,i);Object.keys(n).forEach((function(t){r[t]=n[t]}));var a=this.getLayoutByElement(t[0]),o=null;return a&&(o=Math.max.apply(null,t.map((function(t){return a.elements.findIndex((function(e){return t===e}))}))),o-=t.length-1),this.addElement(r,a,!0,o),this.focusElement(r),t.forEach((function(t){e.removeElement(t)})),this.makeSnapshot("add_group",null,!0),r}},flatGroup:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.isGroup,r=this.getElement(t),a=r&&r.elements;if(a&&"$selector"!==r.type){if(r.splitenable||n){var o=r.$parentId?this.getElement(r.$parentId):this.getLayoutByElement(r),s=o.elements.indexOf(r),c=i(o);a=this.collapseGroup(r,e,!1,i),this.walkTemplet((function(t){t.$selected=!1}),!0,[r]),this.removeElement(r,o);for(var l=function(t){o.elements.splice(s,0,a[t]),a[t].$selected=!c,a[t].$weight=et["a"].get(),i(a[t])&&a[t].elements.forEach((function(e){e.$parentId=a[t].$id}))},u=a.length-1;u>=0;u--)l(u);return!c&&this.selector&&this.selector.showSelector(),r.$tempGroupId||Object(nt["d"])(a),a}this.$events.$emit("element.flatGroupError")}},createTempGroup:function(t){var e=this.getElement(t);this.isGroup(e)&&(this.currentSubElement&&(this.currentSubElement.$editing=!1),this.$events.$emit("element.createTempGroup",e))},cancelTempGroup:function(){this.currentSubElement&&(this.currentSubElement.$editing=!1),this.$events.$emit("element.cancelTempGroup")}},rt=n("f5f2"),at={model:tt["a"],methods:it,layoutComponent:rt["a"]},ot=n("e9fa"),st=function(t){Object(f["a"])(n,t);var e=Object(m["a"])(n);function n(t,i){Object(u["a"])(this,n);var r=b["c"].parse(t.version||"0.0.0");if(r.major<2){t.imageUrl=t.imageUrl||t.image,delete t.image;var a=t.clip;if(a){t.imageWidth+=a.left+a.right,t.imageHeight+=a.top+a.bottom;var o=t.imageTransform;o||(t.imageTransform={a:1,b:0,c:0,d:1,tx:0,ty:0}),t.imageTransform.tx=-a.left,t.imageTransform.ty=-a.top,delete t.clip}}return e.call(this,t,i)}return Object(d["a"])(n)}(ot["a"]),ct=st,lt={showMaskEditor:function(t){t=this.getElement(t),this.currentEditMask=t},hideMaskEditor:function(){this.currentEditMask=null},convertMaskToImage:function(t,e,n){if(t=this.getElement(t),t){var i=y["a"].element,r=y["a"].imageElement,a=[].concat(Object.keys(r)).concat(Object.keys(i)),o=Object(v["pick"])(t,a);o.type="image",o.url=n||t.url||t.mask,o.version=y["a"].version;var s=this.replaceElement(t,o,e);return this.focusElement(s),s}}},ut=n("fc5f"),dt=n("0f57"),ht=n("cb22"),ft=n.n(ht),mt=Object(I["a"])(ut["a"],{name:"mask-element",template:ft.a,data:function(){return{readyForDrop:!1,insideDropArea:!1}},computed:{mainStyle:function(){var t=this.padding,e=this.borderRadius;return{padding:t,borderRadius:e}},maskDropAreaDimension:function(){var t=[{width:120,height:50,size:"big",breakpoint:300},{width:80,height:42,size:"medium",breakpoint:170},{width:40,height:40,size:"small",breakpoint:80}],e=this.model.width*this.global.zoom;return t.find((function(t){return t.breakpoint<e}))||{size:"small",width:.4*e,height:.4*e}},maskDropAreaStyle:function(){var t=this.global.zoom,e=this.maskDropAreaDimension,n=e.width,i=e.height;return{width:"".concat(n,"px"),height:"".concat(i,"px"),left:"".concat((this.model.width*t-n)/2,"px"),top:"".concat((this.model.height*t-i)/2,"px")}},dropAreaText:function(){var t="";return t="medium"===this.maskDropAreaDimension.size?this.insideDropArea?"释放":"拖入":this.insideDropArea?"释放图片":"拖入图片",t}},methods:{load:function(){var t=this;return this.model.url?!this.imageUrl||this.isGif||this.model.isVideo?this.baseLoad().then(this.loadGifOrApng):(this.isFirstRendered=!0,Promise.all([this.isPreviewMode?null:b["a"].loadImage(this.model.url,this.options.fitCrossOrigin,!0),b["a"].loadImage(this.imageUrl,this.options.fitCrossOrigin)]).then((function(e){var n=Object(r["a"])(e,1),i=n[0];i&&t.initDataByImg(i)}))):this.imageRenderer.renderBackground({force:!0})},lazyRender:function(){var t;if(this.isDesignMode&&!this.isGif&&!this.isVideo)return this.hasFilters||this.hasEffects?(t=this.imageRenderer).lazyRender.apply(t,arguments):this.render.apply(this,arguments)}},events:{"element.readyForDrop":function(t,e,n){var i=this;if(t===this.model&&e&&t.editable&&this.isDesignMode&&(!e||e.editable)&&this.editor.options.dragImageToMaskEnable&&t===this.model&&e&&e.enableDragToMask){this.readyForDrop=!0;var r=e.imageUrl||e.url,a=this.global.zoom,o=this.editor.getLayoutByPoint(n),s=this.model,c=s.width,l=s.height,u=s.left,d=s.top,h=function(t){var e=i.editor.getParentGroups(t.model,o);e.forEach((function(t){n.x-=t.left,n.y-=t.top,n=b["a"].getPointPosition(n,{x:t.width/2,y:t.height/2},-t.rotate,-t.skewX,-t.skewY)}))};h(this);var f=this.maskDropAreaDimension,m=f.width,g=f.height,p=f.size,v=(1-a)*m/a,y=(1-a)*g/a,w=u+(c-m)/2-v/2,_=d+(l-g)/2-y/2,x=w+m+v,k=_+g+y,E="big"===p?m/8:0,O=b["a"].getElementRect({left:w-E,top:_-E,width:x-w+2*E,height:k-_+2*E,rotate:this.model.rotate},1),S=b["a"].pointInRect(n.x,n.y-o.top,O);if(S){var j=e.naturalWidth,I=e.naturalHeight,A=Math.max(this.model.width/j,this.model.height/I);j*=A,I*=A,this.insideDropArea!==S&&this.render({resizeByPica:!1,renderFilter:!1,renderEffect:!1,imgWidth:j,imgHeight:I,img:r,force:!0}),e.$insideDropArea=!0,this.$events.$emit("element.imageInsideDropArea",e)}else this.model.url&&this.insideDropArea!==S?this.render({img:t.url,force:!0}):this.insideDropArea!==S&&this.imageRenderer.renderBackground({force:!0}),this.$events.$emit("element.imageOutsideDropArea",e),e.$insideDropArea=!1;this.insideDropArea=S}},"element.resetReadyForDrop":function(t){(!t||t.editable||this.editor.options.dragImageToMaskEnable)&&this.isDesignMode&&t===this.model&&this.readyForDrop&&(this.readyForDrop=!1,this.insideDropArea=!1)},"element.applyImageDrop":function(t,e){var n=this;if(t===this.model&&e&&this.insideDropArea&&e.enableDragToMask){var i=e.imageUrl||e.url;b["a"].loadImage(i,this.options.fitCrossOrigin,!0).then((function(r){var a=r.naturalWidth,o=r.naturalHeight;n.editor.removeElement(e,null,!0),n.editor.changeElement({resourceType:e.resourceType},t),n.editor.replaceImage(i,{forwardEdit:!1,width:a,height:o},t),dt["a"].replaceImageMaterialMeta(e,t),n.editor.focusElement(t),n.$events.$emit("element.applyImageDrop.success",t,e)}))}this.readyForDrop=!1,this.insideDropArea=!1}},mounted:function(){var t=this;this.$watch((function(){var e=t.model,n=e.url,i=e.mask,r=e.width,a=e.height,o=e.$imageWidth,s=e.$imageHeight,c=e.$imageLeft,l=e.$imageTop,u=e.imageTransform,d=u.rotation,h=[n,i,r,a,o,s,c,l].map((function(t){return Math.round(t)}));return h.push(d),h.join(" ")}),(function(){t.isDesignMode&&(t.model.$imageDraging||t.options.supportAdaptiveElements.includes(t.model.type)?t.render({resizeByPica:!1,renderFilter:!1,renderEffect:!1,force:!0}):t.editor.global.$draging||t.hasEffects||(t.lazyRender({force:!0}),t.isNeedRenderAnimatioFrame&&t.renderAnimationImage()))}))}}),gt=n("6231"),pt={model:ct,methods:lt,layoutComponent:mt,editComponent:gt["a"]},vt=function(t){Object(f["a"])(n,t);var e=Object(m["a"])(n);function n(t,i){var r;Object(u["a"])(this,n);var a=t.clip;if(a&&!t.imageTransform){t.imageWidth=a.left+a.right+t.width,t.imageHeight=a.top+a.bottom+t.height;var o=t.imageTransform;o||(t.imageTransform={a:1,b:0,c:0,d:1,tx:0,ty:0}),t.imageTransform.tx=-a.left,t.imageTransform.ty=-a.top}return r=e.call(this,t,i),r.hasEffects||r.hasFilters||(r.imageUrl=""),delete r.mask,Object(O["a"])(t)&&(r.imageUrl=t.imageUrl||"",r.enableDragToMask=!1),r}return Object(d["a"])(n)}(ot["a"]),bt=vt,yt=n("c7eb"),wt=n("1da1"),_t=n("dce5"),xt=n.n(_t),kt=n("77c1"),Et=n.n(kt),Ot=n("1d86"),St={addImage:function(t,e){var n=xt()({type:"image"},e);return n.url=t||this.options.placeImage,this.addElement(n)},replaceImage:function(t,e,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(n=this.getElement(n),n){var r=n.type;if("image"===r||"mask"===r){e=xt()({forwardEdit:!0},e);var a=n.width,o=n.height,s=e.width||a,c=e.height||o,l=Math.max(a/s,o/c),u=s*l,d=c*l;n.imageTransform=n.parseTransform({a:1,b:0,c:0,d:1,tx:0,ty:0}),this.changeElement({url:t,naturalWidth:s,naturalHeight:c,$imageWidth:u,$imageHeight:d},n,i),e.forwardEdit&&n!==this.currentSubElement&&("image"===r?this.showImageCroper(n):"mask"===r&&this.showMaskEditor(n))}}},showImageCroper:function(t){t=this.getElement(t),this.currentCropElement=t},hideImageCroper:function(){this.currentCropElement=null},convertImageToMask:function(t,e){if(t=this.getElement(t),t&&!t.isVideo){var n=Et()(t,(function(t,e){return"$"!==e.charAt(0)}));n.type="mask",n.mask=n.url,n.imageUrl=null,n.version=y["a"].version;var i=this.replaceElement(t,n,e);return this.focusElement(i),i}},toggleCropperFocus:function(){var t=this.currentElement;if(t&&("$masker"===t.type||"$croper"===t.type)){var e=7===t.resize,n=e?"imageCroper.activeOuter":"imageCroper.activeInner";this.$events.$emit(n)}},createFilterTask:function(t,e,n){return Ot["a"].getRender().then(function(){var i=Object(wt["a"])(Object(yt["a"])().mark((function i(r){return Object(yt["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,r.loadMaterial(e);case 2:return i.abrupt("return",r.engine.synchronize(Object(wt["a"])(Object(yt["a"])().mark((function i(){return Object(yt["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if("function"!==typeof n||!n()){i.next=2;break}return i.abrupt("return");case 2:return i.abrupt("return",r.renderMaterial(t,e,1));case 3:case"end":return i.stop()}}),i)})))).promise);case 3:case"end":return i.stop()}}),i)})));return function(t){return i.apply(this,arguments)}}())}},jt=n("78b3"),It={model:bt,methods:St,layoutComponent:jt["a"],editComponent:gt["a"]},At=function(t){Object(f["a"])(n,t);var e=Object(m["a"])(n);function n(t){var i;Object(u["a"])(this,n),t.iconType&&(t.iconType=t.iconType.toLocaleLowerCase()),i=e.call(this,t);var r=Object(h["a"])(i),a=r.colors;return Object(v["forEach"])(a||[],(function(t,e){a[e]=Object(p["d"])(t)})),i}return Object(d["a"])(n,[{key:"$renderProps",get:function(){return[this.width,this.height,this.opacity,this.maskInfo.enable]}}]),n}(g["a"]),Tt=At,Ct=n("ade3"),Pt=(n("6062"),n("4d63"),n("c607"),n("2c3e"),n("e25e"),n("5eea")),$t=n("3557"),Mt=n.n($t),Rt=Object(I["a"])(Pt["a"],{name:"svg-element",template:Mt.a,data:function(){return{svg:null,isContainer:!1,viewBox:[null,null,null,null],boxes:{container:null,nw:null,n:null,ne:null,w:null,c:null,e:null,sw:null,s:null,se:null},errorMessage:""}},computed:{tempId:function(){return String(this.model.$id).replace(/[^\w]/g,"").substr(0,4)+Math.floor(1e3*Math.random())},isDesign:function(){return"design"===this.options.mode||"flow"===this.options.mode},supportTransform:function(){return!!this.model.containerTransform},cssStyle:function(){var t=this.rect,e=t.padding;return{height:t.height+e[0]+e[2]+"px",width:t.width+e[1]+e[3]+"px"}}},methods:{load:function(){var t=this.model,e=t.content,n=t.url;return e?b["a"].parseXML(e):b["a"].loadXML(n)},buildSvg:function(t){t=Object(k["a"])(t),this.fixSvgAttrs(t);var e=/(fill|stroke|stop-color)="([^{}]*?)"/g,n=/(fill|stroke|stop-color)="{{(.*?)}}"/g,i=this.serializeXML(t[0]);i=i.replace(/xmlns:xlink="http[^"]*"/g,""),i=i.replace(/(<\/?)style>/gi,"$1svg:style>");var a=new Set,o=this.tempId;i=i.replace(/\s(id|class)=(['"])([^'"]+)\2/g,(function(t,e,n,i){return a.add("".concat("id"===e?"#":".").concat(i))," ".concat(e,'="').concat(i,"_").concat(o,'"')})),Array.from(a).forEach((function(t){var e=new RegExp(Object(v["escapeRegExp"])(t)+"([)\\b\\s'\"])","g");i=i.replace(e,(function(e,n){return"".concat(t,"_").concat(o)+n}))})),i=i.replace(e,(function(t,e,n){return n&&U()(n).isValid()?"".concat(e,'="').concat(U()(n).toString("rgb"),'"'):t})),i=i.replace(n,' :$1="rgba$2"'),this.model.$content=i,this.errorMessage="",this.loading=!1;var c=Object(k["a"])(".element-main",this.$el);c.html(i);var l=this.constructor;while(l.super)l=l.super;this.viewBox=(Object(k["a"])(i).filter("svg").attr("viewBox")||Object(k["a"])(i).find("svg").attr("viewBox")||"0 0 0 0").split(" ").map((function(t){return parseInt(t,10)})),this.isContainer&&(this.boxes=this.getBBoxes());var u=this,d={tempId:this.tempId,isContainer:this.isContainer,el:c[0],computed:{width:function(){return u.model.width},height:function(){return u.model.height},containerTransform:function(){return u.model.containerTransform},rgbacolors:function(){return u.model.colors?Object.keys(u.model.colors).reduce((function(t,e){var n=U()(u.model.colors[e]);return Object(s["a"])(Object(s["a"])({},t),{},Object(Ct["a"])({},e,n.toRgbString()))}),{}):{}}},methods:{getComputedTransform:function(t){if(!this.containerTransform)return null;var e=this.containerTransform[t],n=e.sx,i=e.sy,r=e.tx,a=e.ty,o=u.boxes[t];if(!o)return null;var s=o.x+o.width/2,c=o.y+o.height/2;return"translate(".concat(r," ").concat(a,") translate(").concat(s," ").concat(c,") scale(").concat(n," ").concat(i,") translate(").concat(-s," ").concat(-c,")")},grapHack:function(t){var e=this;if(this.$options.isContainer){var n={nw:"translate(".concat(t,", ").concat(t,")"),sw:"translate(".concat(t,", -").concat(t,")"),n:"translate(0, ".concat(t,")"),s:"translate(0, -".concat(t,")"),ne:"translate(-".concat(t,", ").concat(t,")"),se:"translate(-".concat(t,", -").concat(t,")"),w:"translate(".concat(t,", 0)"),c:"translate(0, 0)",e:"translate(-".concat(t,", 0)")};["se","s","sw","e","c","w","ne","n","nw"].forEach((function(t){var i=".editor-svg-".concat(t,"_").concat(e.$options.tempId);Object(k["a"])(i,e.$el).attr("transform",n[t])}))}}},mounted:function(){}};this.isContainer&&(d.computed={viewBox:function(){var t=Object(r["a"])(u.viewBox,2),e=t[0],n=t[1];return"".concat(e," ").concat(n," ").concat(e+this.width," ").concat(n+this.height)},tScale:function(){return this.containerTransform?"scale(".concat(this.containerTransform.scale,")"):null},tNW:function(){return this.getComputedTransform("nw")},tN:function(){return this.getComputedTransform("n")},tNE:function(){return this.getComputedTransform("ne")},tW:function(){return this.getComputedTransform("w")},tC:function(){return this.getComputedTransform("c")},tE:function(){return this.getComputedTransform("e")},tS:function(){return this.getComputedTransform("s")},tSE:function(){return this.getComputedTransform("se")},tSW:function(){return this.getComputedTransform("sw")}}),u.svg=new l(d),u.$on("destroy",(function(){u.svg&&u.svg.$destroy(!0,!0)}))},fixSvgAttrs:function(t){var e=this,n=this.model,i=".editor-props-color",r={xmlns:String,preserveAspectRatio:String,viewBox:String,x:parseInt,y:parseInt},a=0,o={},s={},c=function(t,e){var n=t.getAttribute(e),i=s[n];i||(i=s[n]="color_p_"+ ++a,o[i]=n),t.setAttribute(":".concat(e),"colors.".concat(i))};t.children("svg").each((function(t,n){n=Object(k["a"])(n);var a=[].slice.call(n[0].attributes);if(Object(v["forEach"])(a,(function(t){var e=t.name;if(r[e]){var i=r[e],a=i(n.attr(e));n.attr(e,a)}else n.removeAttr(e)})),n.find(i).each((function(t,e){e.hasAttribute("fill")&&c(e,"fill"),e.hasAttribute("stroke")&&c(e,"stroke")})),n.attr(":width","Math.max(1, width)"),n.attr(":height","Math.max(1, height)"),e.isContainer=!!n.has(".editor-svg-container").length,e.isContainer){n.attr(":view-box.camel","viewBox"),n.find(".editor-svg-container").each((function(t,e){Object(k["a"])(e).attr(":transform","tScale")}));var o=["nw","n","ne","w","c","e","sw","s","se"];o.forEach((function(t){var e="t"+t.toUpperCase();n.find(".editor-svg-".concat(t," *")).each((function(t,n){Object(k["a"])(n).attr(":transform",e)}))}))}})),Object(v["isEmpty"])(o)||(n.colors=Object(v["merge"])(o,n.colors))},getBBox:function(t){var e="editor-svg-".concat(t,"_").concat(this.tempId),n=this.$el.getElementsByClassName(e);return n[0]&&n[0].getBBox()},getContainerBBox:function(){return{width:this.model.width,height:this.model.height,x:this.left,y:this.top}},getBBoxes:function(){var t=this.getBBox,e=this.getContainerBBox;return{container:e(),se:t("se"),s:t("s"),sw:t("sw"),e:t("e"),c:t("c"),w:t("w"),ne:t("ne"),n:t("n"),nw:t("nw")}},setTransform:function(t,e,n){var i=this.model.containerTransform;i&&i[t]&&(i[t][e]=n)},resizeInit:function(t){this.isContainer&&(this.$svgResizeMeta={dir:t,originalBoxes:this.boxes,currentBoxes:this.getBBoxes(),containerTransform:Object(v["cloneDeep"])(this.model.containerTransform),width:this.model.width,height:this.model.height})},resizeEnd:function(){delete this.$svgResizeMeta},setScale:function(t){this.model.containerTransform&&(this.model.containerTransform.scale=t)},setSize:function(t){var e=t.dir,n=t.dx,i=t.dy,r=this.$svgResizeMeta,a=this.setTransform,o=this.setScale,s=this.model,c=s.$minWidth,l=s.$minHeight;if(r){var u=r.containerTransform,d=r.originalBoxes,h=r.currentBoxes;if(u){var f=u,m=f.scale;if(c&&(n=Math.max(c-h.container.width,n)),l&&(i=Math.max(l-h.container.height,i)),"w"===e||"e"===e){var g=["n","c","s"];g.forEach((function(t){var e=f[t].tx,i=d[t].width,r=h[t].width;a(t,"sx",(r+n/m)/i),a(t,"tx",e+n/m/2)}));var p=["ne","e","se"];p.forEach((function(t){var e=f[t].tx;a(t,"tx",e+n/m)}))}else if("n"===e||"s"===e){var v=["w","c","e"];v.forEach((function(t){var e=f[t].ty,n=d[t].height,r=h[t].height;a(t,"sy",(r+i/m)/n),a(t,"ty",e+i/m/2)}));var b=["sw","s","se"];b.forEach((function(t){var e=f[t].ty;a(t,"ty",e+i/m)}))}else if(2===e.length){var y=h.container.width,w=(y+n)/(y/f.scale);o(w)}}}},serializeXML:function(t){var e="";e=window.XMLSerializer?(new XMLSerializer).serializeToString(t):t.xml;var n=e.replace(/<\s*svg/i,"<svg").indexOf("<svg");return e.slice(Math.max(0,n))},render:function(){var t=this;this.load().then((function(e){t.buildSvg(e)})).catch((function(e){t.errorMessage=e.message})).then((function(){return t.checkLoad()})).then((function(){return Object(nt["b"])(t.model,t.editor)}))}},events:{"group.contentScale":function(t,e){var n=this,i=this.$parent.model;if(i===t){var r=this.model,a=r.width,o=r.height;this.$scaling=!0,this.resizeInit("se"),this.setSize({dir:"se",dx:a*(e-1),dy:o*(e-1)}),this.resizeEnd(),setTimeout((function(){delete n.$scaling}),0)}},"element.transformStart":function(t,e){if(this.supportTransform&&(t===this.model||Object(O["d"])(t)&&t.elements.indexOf(this.model)>-1)){var n=this.getBBoxes(),i=n.container,r=n.n,a=n.w,o=this.model.containerTransform.scale;i&&r&&a&&(e.dir&&1===e.dir.length?(this.model.$minWidth=i.width-r.width*o,this.model.$minHeight=i.height-a.height*o):e.dir&&2===e.dir.length&&(this.model.$minWidth=10,this.model.$minHeight=this.model.$minWidth*(i.height/i.width)),this.resizeInit(e.dir))}},"element.transformResize":function(t){this.setSize(t)},"element.transformEnd":function(){this.resizeEnd(),delete this.model.$minWidth,delete this.model.$minHeight}},watch:{"model.content":function(){var t=this;this.checkLoad().then((function(){t.render()}))},"model.url":function(){var t=this;this.checkLoad().then((function(){t.render()}))},"model.width":function(t,e){this.supportTransform&&!this.$svgResizeMeta&&!this.$scaling&&this.isDesign&&(this.resizeInit("e"),this.setSize({dir:"e",dx:t-e,dy:0}),this.resizeEnd())},"model.height":function(t,e){this.supportTransform&&!this.$svgResizeMeta&&!this.$scaling&&this.isDesign&&(this.resizeInit("s"),this.setSize({dir:"s",dx:0,dy:t-e}),this.resizeEnd())}},mounted:function(){var t=this;this.render(),this.$watch((function(){return t.model.$renderProps}),(function(){return Object(nt["a"])(t.model,t.editor)}),{deep:!0})}}),Lt={model:Tt,layoutComponent:Rt},Ut=function(t){Object(f["a"])(n,t);var e=Object(m["a"])(n);function n(t){var i;if(Object(u["a"])(this,n),i=e.call(this,t),t.stretchPoint){var r=t.stretchPoint,a=t.originWidth,o=t.originHeight;i.imageSlice={left:r.x,top:r.y,right:a-r.x-1,bottom:o-r.y-1},delete i.stretchPoint}return i}return Object(d["a"])(n)}(g["a"]),zt=Ut,Dt=n("e0b4"),Bt=n("01b8");function Nt(t){return Ft.apply(this,arguments)}function Ft(){return Ft=Object(wt["a"])(Object(yt["a"])().mark((function t(e){var n,i=arguments;return Object(yt["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{crossOrigin:!0},t.abrupt("return",new Promise((function(t,i){var r=new Image,a=function(){r.onload=r.onerror=null};n&&n.crossOrigin&&(r.crossOrigin="Anonymous"),r.onload=function(){a(),t(r)},r.onerror=function(){a(),i(new Error("Image load error"))},r.src=e})));case 2:case"end":return t.stop()}}),t)}))),Ft.apply(this,arguments)}function Ht(t){for(var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r="x"===n,a=t.data,o=t.width,s=t.height,c=r?o:s,l=new Array(c),u=0;u<c;u++)e=r?4*(i*o+u):4*(u*o+i),l[u]=[a[e],a[e+1],a[e+2],a[e+3]];return l}var Vt=function(t,e){for(var n=0,i=0,r=t.length;i<r;i++)n+=(t[i]-e[i])*(t[i]-e[i]);return Math.sqrt(n)},Gt=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return Vt(t,e)<n},Wt=function(t,e){return t.every((function(t,n){return Gt(t,e[n])}))},Yt=function(t){var e=t.width,n=t.height,i=Math.floor(e/2),r=Math.floor(n/2),a=Ht(t,"x",r),o=Ht(t,"y",i);return["y","x"].forEach((function(s){var c="x"===s?a:o,l="x"===s?r:i,u="x"===s?n:e,d=c,h=c,f=l-1,m=l+1,g=function(t,e){"x"===s?(a=e,r=t):(o=e,i=t)};while(f>=0||m<u){if(f>=0){var p=Ht(t,s,f);if(Wt(p,d)){g(f,d);break}d=p}if(f--,m<u){var v=Ht(t,s,m);if(Wt(v,h)){g(m,h);break}h=v}m++}})),{yBaseLineOffset:i,xBaseLineOffset:r,xBaseLine:a,yBaseLine:o}};function qt(t){return Xt.apply(this,arguments)}function Xt(){return Xt=Object(wt["a"])(Object(yt["a"])().mark((function t(e){var n,i,r,a,o,s,c,l,u,d,h,f,m,g,p,v,b,y,w,_,x,k;return Object(yt["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e,"string"!==typeof e){t.next=5;break}return t.next=4,Nt(e);case 4:n=t.sent;case 5:return i=document.createElement("canvas"),r=i.getContext("2d"),a=n,o=a.width,s=a.height,i.width=o,i.height=s,r.drawImage(n,0,0),c=r.getImageData(0,0,o,s),l=Yt(c),u=l.xBaseLineOffset,d=l.yBaseLineOffset,h=l.xBaseLine,f=l.yBaseLine,m={bottom:u+1,right:d+1,left:d,top:u},Object.keys(m).forEach(function(){var t=Object(wt["a"])(Object(yt["a"])().mark((function t(e){var n,i,r,a,l,u,d;return Object(yt["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n="left"===e||"right"===e?"y":"x",i="x"===n?h:f,r="left"===e||"top"===e,a=r?0:"right"===e?o:s,l=r?-1:1,d=m[e]+l;case 6:if(!(r&&d<a)){t.next=10;break}return t.abrupt("break",19);case 10:if(r||!(d>a)){t.next=12;break}return t.abrupt("break",19);case 12:if(u=Ht(c,n,d),Wt(u,i)){t.next=15;break}return t.abrupt("break",19);case 15:m[e]=d;case 16:d+=l,t.next=6;break;case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),g=document.createElement("canvas"),p=g.getContext("2d"),v=m.left,b=m.top,y=m.right,w=m.bottom,_=b+1+(s-w),x=v+1+(o-y),g.width=x,g.height=_,k=function(t){try{t()}catch(e){}},k((function(){return p.putImageData(r.getImageData(0,0,v,b),0,0)})),k((function(){return p.putImageData(r.getImageData(y,0,o-y,b),v+1,0)})),k((function(){return p.putImageData(r.getImageData(y,w,o-y,s-w),v+1,b+1)})),k((function(){return p.putImageData(r.getImageData(0,w,v,s-w),0,b+1)})),k((function(){return p.putImageData(r.getImageData(v,0,1,b),v,0)})),k((function(){return p.putImageData(r.getImageData(y,b,o-y,1),v+1,b)})),k((function(){return p.putImageData(r.getImageData(v,w,1,s-w),v,b+1)})),k((function(){return p.putImageData(r.getImageData(0,b,v,1),0,b)})),p.putImageData(r.getImageData(v,b,1,1),v,b),t.abrupt("return",{image:g.toDataURL(),height:_,width:x,offset:{bottom:b+1,right:v+1,left:v,top:b}});case 33:case"end":return t.stop()}}),t)}))),Xt.apply(this,arguments)}var Zt=qt,Kt={convertNinePatchToImage:function(t,e){var n=this;return Object(wt["a"])(Object(yt["a"])().mark((function i(){var r,a,o,s,c;return Object(yt["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t=n.getElement(t),t){i.next=3;break}return i.abrupt("return");case 3:return r=y["a"].element,a=y["a"].imageElement,o=[].concat(Object.keys(a)).concat(Object.keys(r)),s=Object(v["pick"])(t,o),s.type="image",i.next=10,Object(Bt["a"])(t.url,{targetWidth:Math.round(t.width),targetHeight:Math.round(t.height),imageSlice:t.imageSlice,targetImageSlice:{left:t.imageSlice.left*t.effectScale,top:t.imageSlice.top*t.effectScale,right:t.imageSlice.right*t.effectScale,bottom:t.imageSlice.bottom*t.effectScale}}).then((function(t){return t.toDataURL("image/png",1)}));case 10:return s.url=i.sent,s.version=y["a"].version,c=n.replaceElement(t,s,e),n.focusElement(c),i.abrupt("return",c);case 15:case"end":return i.stop()}}),i)})))()},convertElementToNinePatch:function(t,e){var n=this;return Object(wt["a"])(Object(yt["a"])().mark((function i(){var r,a,o,s,c,l,u,d,h,f,m,g,p,b,w;return Object(yt["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t=n.getElement(t),t){i.next=3;break}return i.abrupt("return");case 3:if(r=y["a"].element,a=y["a"].ninePatchElement,o=[].concat(Object.keys(a)).concat(Object.keys(r)),s=Object(v["pick"])(t,o),"svg"!==t.type){i.next=18;break}if(l=n.getComponentById(t.$id),u=l&&l.$el.querySelector("svg"),!u){i.next=16;break}return d=u.querySelector("title"),d&&u.removeChild(d),i.next=15,Object(Dt["a"])(u);case 15:c=i.sent;case 16:i.next=19;break;case 18:c=t.url;case 19:return s.type="ninePatch",i.next=22,Zt(c);case 22:return h=i.sent,f=h.offset,m=f.left,g=f.top,p=f.right,b=f.bottom,s.url=h.image,s.version=y["a"].version,s.imageSlice={left:m,top:g,right:Math.max(0,h.width-p-1),bottom:Math.max(0,h.height-b-1)},w=n.replaceElement(t,s,e),n.focusElement(w),i.abrupt("return",w);case 30:case"end":return i.stop()}}),i)})))()}},Jt=n("ded9"),Qt=n.n(Jt),te=n("5c33"),ee=n.n(te),ne=navigator.userAgent.includes("QQBrowser"),ie=Object(I["a"])(Pt["a"],{name:"nine-patch-element",template:ee.a,data:function(){return{canvasRendered:!1}},computed:{canvasRender:function(){return this.canvasRendered||ne||this.model.width<this.model.originWidth||this.model.height<this.model.originHeight},mainStyle:function(){var t=this.model,e=this.global.zoom,n=t.url,i=t.imageSlice,r=[i.top,i.right,i.bottom,i.left],a=r.map((function(n){return 1*n*e*t.effectScale+"px"})).join(" ");return{borderImageSource:"url(".concat(n,")"),borderImageSlice:r.join(" ")+" fill",borderImageWidth:a,borderImageRepeat:"repeat",borderStyle:"solid"}}},methods:{load:function(){var t=this,e=this.model.url;return e?b["a"].loadImage(e,this.options.fitCrossOrigin).then((function(e){return t.$img=e,t.model.originWidth=e.naturalWidth,t.model.originHeight=e.naturalHeight,t.render()})):Qt.a.resolve()},autoStretchImage:function(t){var e=this.model,n=e.width,i=e.height,r=e.imageSlice,a=e.effectScale;return Object(Bt["a"])(t,{targetWidth:Math.round(n),targetHeight:Math.round(i),imageSlice:r,targetImageSlice:{left:r.left*a,top:r.top*a,right:r.right*a,bottom:r.bottom*a},canvas:this.$refs.canvas})},render:function(){if(this.$refs.canvas&&this.canvasRender){var t=this.model,e=t.url,n=t.$img;return this.canvasRendered=!0,this.autoStretchImage(n||e)}},exportImage:function(){var t=this,e=this.model.url;return this.autoStretchImage(e).then((function(e){var n="image/png",i=e.toDataURL(n,1)||null;t.model.imageUrl=i}))}},watch:{canvasRender:function(){this.render()},"model.url":function(){this.checkLoad()}},events:{"element.transformEnd":function(t,e,n){var i=n.action,r=this.editor.getParentGroups(this.model),a=r.map((function(t){return t.$id})).concat(this.model.$id).includes(this.model.$id);"resize"===i&&a&&this.lazyExportImage()}},mounted:function(){var t=this;this.lazyExportImage=Object(v["debounce"])((function(){t.exportImage()}),350),this.$watch((function(){var e=t.model,n=e.width,i=e.height,r=e.url;return[n,i,r]}),(function(){t.editor.global.$draging||t.isDesignMode?t.render():t.lazyExportImage()})),this.model.imageUrl||this.lazyExportImage()}}),re={model:zt,methods:Kt,layoutComponent:ie},ae={text:function(){return Promise.resolve({default:Q})},image:function(){return Promise.resolve({default:It})},mask:function(){return Promise.resolve({default:pt})},svg:function(){return Promise.resolve({default:Lt})},group:function(){return Promise.resolve({default:at})},ninePatch:function(){return Promise.resolve({default:re})},audio:function(){return n.e("audio-element").then(n.bind(null,"455c"))},video:function(){return n.e("video-element").then(n.bind(null,"fc20"))},threeText:function(){return n.e("three-element").then(n.bind(null,"3f8f"))},cell:function(){return n.e("cell-element").then(n.bind(null,"48f4"))},collage:function(){return n.e("collage-element").then(n.bind(null,"c5d3"))},table:function(){return n.e("table-element").then(n.bind(null,"7ed3"))},chart:function(){return n.e("chart-element").then(n.bind(null,"0673"))},watermark:function(){return n.e("watermark-element").then(n.bind(null,"d29f"))},effectText:function(){return Promise.all([n.e("effect-text-element~three-font-parser"),n.e("effect-text-element")]).then(n.bind(null,"eea3"))},rect:function(){return n.e("rect-element").then(n.bind(null,"60cb"))},ellipse:function(){return n.e("ellipse-element").then(n.bind(null,"c9bd"))},line:function(){return n.e("line-element").then(n.bind(null,"951e"))},arrow:function(){return n.e("arrow-element").then(n.bind(null,"8a6e"))},brush:function(){return n.e("brush-element").then(n.bind(null,"edea"))},flex:function(){return n.e("flex-element").then(n.bind(null,"60bc"))}};l&&(window.___ELEMENTS_VERSION__=l.version);var oe=Object.keys(ae).reduce((function(t,e){return t[e]=ae[e](),t}),{}),se=function(t){Object(f["a"])(n,t);var e=Object(m["a"])(n);function n(t){var i;Object(u["a"])(this,n),t.iconType&&(t.iconType=t.iconType.toLocaleLowerCase()),i=e.call(this,t),i.animations||(i.animations=[]);var r=Object(h["a"])(i),a=r.colors;return Object(v["forEach"])(a||[],(function(t,e){a[e]=Object(p["d"])(t)})),i}return Object(d["a"])(n,[{key:"$renderProps",get:function(){return[this.width,this.height,this.opacity,this.maskInfo.enable]}}]),n}(g["a"]),ce=se,le={model:ce,layoutComponent:Rt},ue=function(t){Object(f["a"])(n,t);var e=Object(m["a"])(n);function n(t,i){var r;return Object(u["a"])(this,n),r=e.call(this,t,i),r.canDownload=!1,r}return Object(d["a"])(n)}(bt),de=ue,he={model:de,methods:St,layoutComponent:jt["a"]};oe.svg=Promise.resolve({default:le}),oe.image=Promise.resolve({default:he});var fe=oe,me=n("bf7d"),ge=n("07e2"),pe=n("93d6"),ve=n("0e29"),be=n("aef4"),ye=n("032a"),we=n("619d"),_e=n("b6aa"),xe=[me["a"],ge["a"],pe["a"],ve["a"],be["a"],_e["a"],ye["a"],we["a"]],ke=n("0894");function Ee(t){return{"base.click":function(e){var n=this,i=this.editor;if(i&&i.pointFromEvent&&i.getElementByPoint){null==this.elementClickQueue&&(this.elementClickQueue=[]);var r=i.pointFromEvent(e),a=i.getElementByPoint(r.x,r.y);a&&"group"===a.type&&(a=i.currentSubElement,this.elementClickQueue.push(a)),a&&a.type===t?(this.elementClickTimer?(clearTimeout(this.elementClickTimer),this.elementClickQueue.push(a),this.elementClickQueue.length>1&&(this.editor.$emit("editor.".concat(t,".dblclick"),a),this.elementClickQueue=[])):this.elementClickQueue.push(a),this.elementClickTimer=setTimeout((function(){n.elementClickQueue=[]}),300)):this.elementClickQueue=[]}}}}var Oe=n("bfd9"),Se=n("b156"),je=(n("e9c4"),n("466d"),"position:fixed;pointer-events:none;z-index:-9999;opacity:0;"),Ie="Failed to copy value to clipboard. Unknown type.",Ae=function(t){var e;if("string"!==typeof t)try{e=JSON.stringify(t)}catch(o){throw Ie}else e=t;var n=document.createElement("textarea");if(n.value=e,n.setAttribute("readonly",""),n.style.cssText=je,document.body.appendChild(n),navigator.userAgent.match(/ipad|ipod|iphone/i)){n.contentEditable=!0,n.readOnly=!0;var i=document.createRange();i.selectNodeContents(n);var r=window.getSelection();r.removeAllRanges(),r.addRange(i),n.setSelectionRange(0,999999)}else n.select();var a=!1;try{a=document.execCommand("copy")}catch(s){console.warn(s)}return document.body.removeChild(n),a},Te={install:function(t){t.prototype.$clipboard=Ae}},Ce=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"icon-font",class:t.iconClass,style:t.iconStyle,attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":t.fullName}})])},Pe=[],$e="_V_ICON_FONT_ANIMATION_PREFIX",Me={name:"Icon",animationPrefix:$e,props:{name:{type:String,required:!0},prefix:{type:String,default:"icon-"},animation:{type:String,default:""},width:{type:[Number,String],default:""},height:{type:[Number,String],default:""},color:{type:String,default:""},opacity:{type:[Number,String],default:""}},computed:{fullName:function(){return"#".concat(this.prefix).concat(this.name)},iconClass:function(){var t=this.animation,e=window[$e];return t&&e?["".concat(e).concat(t)]:[]},iconStyle:function(){var t=this.color,e=this.opacity,n=this.width,i=this.height,r={};return t&&(r.color=t),null!=n&&(r.width="number"===typeof n?"".concat(n,"px"):n),null!=i&&(r.height="number"===typeof i?"".concat(i,"px"):i),null!=e&&(r.opacity=e),r}}},Re=Me,Le=(n("1211"),n("2877")),Ue=Object(Le["a"])(Re,Ce,Pe,!1,null,null,null),ze=Ue.exports;ze.registScript=function(t){var e="_VUE_ICON_FONT_SCRIPT",n=document.querySelector("#".concat(e));!n&&t&&(n=document.createElement("script"),n.id=e,document.body.appendChild(n),n.src=t)},ze.registAnimation=function(t){window[ze.animationPrefix]=t},ze.install=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Icon";t.component(e,ze)};var De=ze,Be=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"toast-view"}},[n("section",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"toast-view"},[n("div",{staticClass:"toast-view__content",class:t.contentClass},[n("div",{staticClass:"toast-view__icon"},[n("Icon",{attrs:{name:t.iconName}})],1),n("h1",{staticClass:"toast-view__title"},[t._v(" "+t._s(t.title)+" ")]),t.message?n("p",{staticClass:"toast-view__message"},[t._v(" "+t._s(t.message)+" ")]):t._e()])])])},Ne=[],Fe={success:"tip-success",warning:"tip-caution",error:"tip-caution"},He={data:function(){return{title:"提交成功",message:"",type:"success",timeout:2500,visible:!1}},computed:{iconName:function(){return Fe[this.type]},contentClass:function(){var t=this.type,e=this.message,n=["toast-view__content--".concat(t)];return e||n.push("toast-view__content--large"),n}},mounted:function(){this.show()},methods:{show:function(){this.visible=!0,this.timeout?this.timer=setTimeout(this.hiden,this.timeout):this.$el.addEventListener("click",this.hiden,!1)},hiden:function(){clearTimeout(this.timer),this.$el.removeEventListener("click",this.hiden,!1),this.visible=!1},remove:function(){this.$destroy(),document.body.removeChild(this.$el)}}},Ve=He,Ge=(n("bdce"),Object(Le["a"])(Ve,Be,Ne,!1,null,null,null)),We=Ge.exports,Ye=o["default"].extend(We),qe={type:"success"},Xe=null;function Ze(t){if(!t.title)return null;var e=Object(s["a"])(Object(s["a"])({},qe),t);if(Xe)Object.assign(Xe,e),Xe.show();else{var n=new Ye({data:e});Xe=n.$mount(),document.body.appendChild(Xe.$el),Xe.show()}return Xe}Ze.hiden=function(){Xe&&Xe.hiden()};var Ke={install:function(t){t.prototype.$tip=Ze}},Je=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"od-plugin-message-box"}},[i("section",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"od-plugin-message-box",on:{click:t.onMaskClick}},[i("div",{staticClass:"od-plugin-message-box__inner",on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"od-plugin-message-box__icon"},[i("span",{staticClass:"od-plugin-message-box__icon-inner",style:t.iconStyle},[i("Icon",{attrs:{name:t.iconName}})],1)]),i("div",{staticClass:"od-plugin-message-box__main",class:{advertShow:t.advertShow}},[i("span",{staticClass:"od-plugin-message-box__title"},[t._v(" "+t._s(t.title||t.defaultTitle)+" ")]),t.content?i("p",{staticClass:"od-plugin-message-box__content"},[t._v(" "+t._s(t.content)+" ")]):t._e(),t.advertShow?i("img",{staticClass:"od-plugin-message-box__img",attrs:{src:n("7ab3"),alt:""},on:{click:t.goLink}}):t._e()]),i("div",{staticClass:"od-plugin-message-box__footer",on:{click:t.confirm}},[i("span",[t._v(t._s(t.tip))])])])])])},Qe=[],tn=n("bd76"),en={success:"check",error:"close",warning:"warning"},nn={success:"#34c75f",error:"#ff3b30",warning:"#faaa32"},rn={title:"",content:"",tip:""},an={data:function(){return{type:"success",title:"",content:"",tip:"下一题",show:!1,maskClose:!1,reslove:function(){}}},computed:{iconStyle:function(){return{background:nn[this.type]}},iconName:function(){return en[this.type]||""},defaultTitle:function(){return"success"===this.type?"恭喜你，答对了":"太遗憾了，答错了"},isAppointUser:function(){var t,e,n=[644642117,507650793,947688604,647072687,802413826,610350794,173799674,472831965,108252917,139518629,393108493,446369082,507650793,586026286,10812406,353233361,381644151,459166698,492540951,567215563,626343603,637586342,651803283,850081935,159478707,301346140,567215563,674306222,947688604,836524373],i=null===(t=window.__ODYSSEY_PAGE)||void 0===t||null===(e=t.templet)||void 0===e?void 0:e.user_id;return n.includes(i)},advertShow:function(){var t,e;return(null===(t=window.__ODYSSEY_PAGE)||void 0===t||null===(e=t.advert)||void 0===e?void 0:e.show)||this.isAppointUser}},watch:{show:function(t){t&&this.advertShow&&tn["b"].trackEvent("resource_loc_expose",{event_id:35001,resource_source:"h5作品表单提交结果页",resource_type:"第三方广告资源位"})}},mounted:function(){var t,e,n,i,r=null===(t=window.__ODYSSEY_PAGE)||void 0===t||null===(e=t.templet)||void 0===e?void 0:e.user_id,a=null===(n=window.__ODYSSEY_PAGE)||void 0===n||null===(i=n.templet)||void 0===i?void 0:i.status;r&&a&&tn["a"].login(r,{type:a})},beforeDestroy:function(){tn["a"].logout()},methods:{open:function(t){var e=this,n=Object.assign({},rn,t),i=n.type,r=n.title,a=n.content,o=n.tip,s=void 0===o?"下一题":o,c=n.maskClose,l=void 0!==c&&c;return this.type=i,this.title=r,this.content=a,this.tip=s,this.show=!0,this.maskClose=l,new Promise((function(t){e.reslove=t}))},onMaskClick:function(){this.maskClose&&this.confirm(!1)},confirm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.show=!1,this.reslove(t)},goLink:function(){tn["b"].trackEvent("resource_loc_click",{event_id:35002,resource_source:"h5作品表单提交结果页",resource_type:"第三方广告资源位"}),window.location.href="https://interaction.clotfun.online/chicken?appkey=c5388375b0870cefcba94c15535633c3&adSpaceKey=ee1fdf12a664fef4d784d2837ae25f02&source=media&from=H5&1=1"}}},on=an,sn=(n("8f2d"),Object(Le["a"])(on,Je,Qe,!1,null,"513318ea",null)),cn=sn.exports,ln="publish-message-box-node";function un(){var t=document.querySelector("#".concat(ln));if(t)return t.__messageBox;var e=o["default"].extend(cn),n=new e({}),i=n.$mount();return i.$el.id=ln,i.$el.__messageBox=i,document.body.appendChild(i.$el),i}var dn={install:function(t){t.prototype.$messageBox=un()}},hn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("UiDialog",{staticClass:"outside-advert-dialog",attrs:{"fit-height":"",title:"",visible:t.dialog,"is-outer-close-allow":!0},on:{"update:visible":function(e){t.dialog=e}}},[t.dialog?n("Advert",{attrs:{"dialog-url":t.advertUrl},on:{"close-result":function(e){t.dialog=!1}}}):t._e()],1)},fn=[],mn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"odyssey-advert-main"},[t.dialogUrl?n("span",{staticClass:"close_result",on:{click:function(e){return t.$emit("close-result")}}},[n("Icon",{attrs:{name:"close"}})],1):t._e(),n("Result",{ref:"result",attrs:{title:t.result.title,type:t.result.type,"is-vip":t.result.isVip}})],1)},gn=[],pn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"ui-result"},[n("div",{staticClass:"ui-result__icon"},[n("span",{staticClass:"ui-result__icon-inner",style:t.iconStyle},[n("Icon",{attrs:{name:t.iconName}})],1)]),n("div",{staticClass:"ui-result__title",domProps:{textContent:t._s(t.title)}}),t.isVip?t._e():n("div",{staticClass:"ui-result__info"},[n("span",[t._v("该表单使用")]),n("open-wxapp",{staticClass:"goBtn",on:{"open-weapp":t.trackWeapp}},[t._v(" 稿定H5小程序 ")]),n("span",[t._v("免费制作")])],1),t.isVip?t._e():n("div",{staticClass:"ui-result__activity"},[n("img",{attrs:{src:t.config.imageUrl,alt:""},on:{click:t.goLink}})])])},vn=[],bn=n("53ca"),yn=n("e222"),wn={success:"check",error:"close",warning:"warning"},_n={success:"#34c75f",error:"#ff3b30",warning:"#faaa32"},xn={props:["isVip","title","type"],data:function(){return{config:{imageUrl:n("2171"),linkUrl:"https://interaction.clotfun.online/chicken?appkey=c5388375b0870cefcba94c15535633c3&adSpaceKey=97e8f7bf8b1c2c53a21cf213d7bdfbf3&source=media&from=H5&1=1"}}},mounted:function(){var t=this.advertConfig,e=this.config;t&&"object"===Object(bn["a"])(t)&&(this.config=Object(s["a"])(Object(s["a"])({},e),t)),this.isVip||tn["b"].trackEvent("resource_loc_expose",{event_id:35001,resource_source:"表单提交完成页面",resource_type:"第三方广告资源位"})},computed:{iconStyle:function(){return{background:_n[this.type]}},iconName:function(){return wn[this.type]||""},advertConfig:function(){return yn["b"].get("GAODING-ADVERT")}},methods:{trackWeapp:function(){tn["b"].trackEvent("button_click",{event_id:39008,button_name:"跳转小程序",button_source:this.isVip?"表单提交完成页面-会员作品":"表单提交完成页面-非会员作品"})},goLink:function(){tn["b"].trackEvent("resource_loc_click",{event_id:35002,resource_type:"第三方广告资源位",resource_source:"表单提交完成页面"}),window.location.href=this.config.linkUrl}}},kn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isWeixin?n("wx-open-launch-weapp",{ref:"launchBtn",attrs:{username:t.username,path:t.pathUrl}},[n("script",{attrs:{type:"text/wxtag-template"}},[t._v(" <slot></slot> ")])]):n("div",{on:{click:t.openWeapp}},[t._t("default")],2)],1)},En=[],On=navigator.userAgent.toLowerCase(),Sn="wxwork"===On.match(/wxwork/i),jn=!Sn&&"micromessenger"===On.match(/micromessenger/i),In=!1,An=!1;navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|IEMobile)/i)?In=!0:An=!0,console.log("isMobile",In);var Tn="wx506758f097dccf01",Cn="gaoding-h5-wxcloud-6dc4q7803403c";function Pn(t){"complete"===document.readyState||"interactive"===document.readyState?t():document.addEventListener("DOMContentLoaded",t)}function $n(t,e){return Mn.apply(this,arguments)}function Mn(){return Mn=Object(wt["a"])(Object(yt["a"])().mark((function t(e,n){var i,r,a,o;return Object(yt["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!An){t.next=2;break}return t.abrupt("return");case 2:return i=window.c,r=e.path,a=e.query,t.next=6,i.callFunction({name:"openapi",data:{action:"getUrlScheme",options:{path:r,query:a}}});case 6:o=t.sent,n&&n(),window.location.href=o.result.openlink;case 9:case"end":return t.stop()}}),t)}))),Mn.apply(this,arguments)}Pn(Object(wt["a"])(Object(yt["a"])().mark((function t(){var e;return Object(yt["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!jn){t.next=4;break}window.wx.config({debug:!0,appId:"wx506758f097dccf01",timestamp:0,nonceStr:"nonceStr",signature:"signature",jsApiList:["chooseImage"],openTagList:["wx-open-launch-weapp"]}),t.next=11;break;case 4:if(!An){t.next=7;break}t.next=11;break;case 7:return e=new window.cloud.Cloud({identityless:!0,resourceAppid:Tn,resourceEnv:Cn}),t.next=10,e.init();case 10:window.c=e;case 11:case"end":return t.stop()}}),t)}))));var Rn={data:function(){return this.isWeixin=jn,{path:"/pages/home/index",query:"origin=h5",isWeixin:!1,username:"gh_1256e5530e79"}},computed:{pathUrl:function(){return"".concat(this.path,"?").concat(this.query)}},mounted:function(){var t,e=this;null===(t=this.$refs.launchBtn)||void 0===t||t.addEventListener("launch",(function(){e.$emit("open-weapp")}))},methods:{openWeapp:function(){this.$emit("open-weapp"),$n({path:this.path,query:this.query})}}},Ln=Rn,Un=Object(Le["a"])(Ln,kn,En,!1,null,null,null),zn=Un.exports,Dn={name:"Result",components:{openWxapp:zn},mixins:[xn]},Bn=Dn,Nn=(n("2784"),Object(Le["a"])(Bn,pn,vn,!1,null,null,null)),Fn=Nn.exports,Hn={components:{Result:Fn},props:{dialogUrl:{type:String,default:""}},computed:{result:function(){var t=this.dialogUrl||decodeURI(window.location.href),e=new URLSearchParams(t),n=e.get("title"),i=e.get("type"),r="true"===e.get("isVip");return{title:n,type:i,isVip:r}}}},Vn=Hn,Gn=(n("b11d"),Object(Le["a"])(Vn,mn,gn,!1,null,null,null)),Wn=Gn.exports,Yn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.syncVisible,expression:"syncVisible"}],staticClass:"ui-dialog-backdrop",on:{click:function(e){return e.target!==e.currentTarget?null:t.handleClick.apply(null,arguments)}}},[n("section",{ref:"dialog",staticClass:"ui-dialog",class:{"ui-dialog--fit-height":t.fitHeight},style:{"--width":t.width,"--height":t.height}},[t.title||t.$slots.header?n("div",{staticClass:"ui-dialog__header"},[t._t("header",(function(){return[n("h1",{staticClass:"ui-dialog__title"},[t._v(" "+t._s(t.title)+" ")]),n("button",{staticClass:"ui-dialog__close",on:{click:t.closeDialog}},[n("Icon",{attrs:{name:"close"}})],1)]}))],2):t._e(),n("div",{staticClass:"ui-dialog__content"},[t._t("default")],2),t.secondaryAction||t.primaryAction||t.$slots.footer?n("div",{staticClass:"ui-dialog__footer"},[t._t("footer",(function(){return[t.secondaryAction?n("UiButton",{attrs:{type:"secondary",label:t.secondaryAction},on:{click:function(e){return t.$emit("secondaryAction")}}}):t._e(),t.primaryAction?n("UiButton",{staticClass:"ui-dialog__confirm",attrs:{label:t.primaryAction},on:{click:function(e){return t.$emit("primaryAction")}}}):t._e()]}))],2):t._e()])])},qn=[],Xn={name:"UiDialog",props:{title:{type:String,required:!0},visible:{type:Boolean,default:!1},width:{type:String,default:"560px"},height:{type:String,default:"560px"},fitHeight:{type:Boolean,default:!1},primaryAction:{type:String,default:null},secondaryAction:{type:String,default:null},isOuterCloseAllow:{type:Boolean,default:!1}},computed:{syncVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}}},methods:{closeDialog:function(){this.syncVisible=!1,this.$emit("close")},handleClick:function(){this.isOuterCloseAllow&&this.closeDialog()}}},Zn=Xn,Kn=(n("c9d0"),Object(Le["a"])(Zn,Yn,qn,!1,null,null,null)),Jn=Kn.exports,Qn={components:{UiDialog:Jn,Advert:Wn},data:function(){return{dialog:!1,advertUrl:""}},methods:{show:function(t){this.advertUrl=t.url,this.dialog=!this.dialog}}},ti=Qn,ei=(n("d309"),Object(Le["a"])(ti,hn,fn,!1,null,null,null)),ni=ei.exports,ii="publish-advert-box-node";function ri(){var t=document.querySelector("#".concat(ii));if(t)return t.__AdvertBox;var e=o["default"].extend(ni),n=new e({}),i=n.$mount();return i.$el.id=ii,i.$el.__AdvertBox=i,document.body.appendChild(i.$el),i}var ai,oi={install:function(t){t.prototype.$AdvertBox=ri()}},si=n("b7da");function ci(){if(void 0!==ai)return ai;var t=document.createElement("div");t.className="scrollbar__wrap",t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);var e=t.offsetWidth;t.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",t.appendChild(n);var i=n.offsetWidth;return t.parentNode.removeChild(t),ai=e-i,ai}var li=function(t){var e=/([\:\-\_]+(.))/g,n=/^moz([A-Z])/;return t.replace(e,(function(t,e,n,i){return i?n.toUpperCase():n})).replace(n,"Moz$1")};function ui(t,e){if(!t||!e)return null;e=li(e),"float"===e&&(e="cssFloat");try{var n=document.defaultView.getComputedStyle(t,"");return t.style[e]||n?n[e]:null}catch(i){return t.style[e]}}function di(t,e){t&&setTimeout((function(){t.scrollIntoView({behavior:"smooth"})}),e)}function hi(t){var e=window.innerHeight,n=t.getBoundingClientRect();return n.top>-n.height&&n.top+n.height<e}function fi(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"12px Arial",n=document.createElement("canvas"),i=n.getContext("2d");i.font=e;var r=i.measureText(t);return Math.ceil(r.width)}var mi=n("1b17");function gi(t){var e={};function n(t){var n=t.data,i=e[n.event]||[];i.length&&i.forEach((function(t){var e=n.args||[];t.apply(void 0,Object(a["a"])(e))}))}return window.addEventListener("message",n,!1),{$emit:function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t.postMessage({event:e,args:i},"*")},$on:function(t,n){e[t]||(e[t]=[]),e[t].push(n)},$off:function(t,n){if(n){var i=e[t]||[];e[t]=i.filter((function(t){return t!==n}))}else e[t]=[]}}}var pi;n("5abe"),n("25ff"),n("942a");document.createTouch||(document.createTouch=function(t,e,n,i,r,a,o){return new vi(e,n,{pageX:i,pageY:r,screenX:a,screenY:o,clientX:i-window.pageXOffset,clientY:r-window.pageYOffset},0,0)}),document.createTouchList||(document.createTouchList=function(){for(var t=bi(),e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length=arguments.length,t});var vi=function(t,e,n,i,r){i=i||0,r=r||0,this.identifier=e,this.target=t,this.clientX=n.clientX+i,this.clientY=n.clientY+r,this.screenX=n.screenX+i,this.screenY=n.screenY+r,this.pageX=n.pageX+i,this.pageY=n.pageY+r};function bi(){var t=[];return t["item"]=function(t){return this[t]||null},t["identifiedTouch"]=function(t){return this[t+1]||null},t}function yi(){for(var t=[window,document.documentElement],e=["ontouchstart","ontouchmove","ontouchcancel","ontouchend"],n=0;n<t.length;n++)for(var i=0;i<e.length;i++)t[n]&&void 0===t[n][e[i]]&&(t[n][e[i]]=null)}function wi(t){return function(e){1===e.which&&(("mousedown"===e.type||!pi||pi&&!pi.dispatchEvent)&&(pi=e.target),_i(t,e),"mouseup"===e.type&&(pi=null))}}function _i(t,e){var n=document.createEvent("Event");n.initEvent(t,!0,!0),n.altKey=e.altKey,n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.shiftKey=e.shiftKey,n.touches=ki(e),n.targetTouches=ki(e),n.changedTouches=xi(e),pi.dispatchEvent(n)}function xi(t){var e=bi();return e.push(new vi(pi,1,t,0,0)),e}function ki(t){return"mouseup"===t.type?bi():xi(t)}function Ei(){yi(),window.addEventListener("mousedown",wi("touchstart"),!0),window.addEventListener("mousemove",wi("touchmove"),!0),window.addEventListener("mouseup",wi("touchend"),!0)}Ei["multiTouchOffset"]=75,function(){Object(si["isMobile"])()||new Ei}();n("f5df1"),n("cc0e"),n("4a77"),n("e724"),n("3a49");function Oi(t,e){c["a"].asyncElementsMap=fe,c["a"].staticComponents=xe,o["default"].component("editor",c["a"].createEditor(o["default"],{webpage:!0})),o["default"].component("editor-layout",c["a"].createLayout(o["default"])),o["default"].prototype.$iframeEvent=gi(window.top),De.registScript(Se["ICON_FONT_URL"].publish),De.registAnimation("icon-animation--"),o["default"].use(De),o["default"].use(Ke),o["default"].use(Te),o["default"].use(dn),o["default"].use(oi),Oe["a"].init(t),Oe["a"].apis=Object(s["a"])(Object(s["a"])({},Oe["a"].apis||{}),e.apis||{}),Oe["a"].utils={dom:i,userAgent:si,eventHandler:mi["b"],createDbclickEvent:Ee,elementDependence:ke["a"]},Oe["a"].vm=new o["default"]({render:function(t){return t(e.app)}}).$mount(e.mount||"#app")}var Si=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"odyssey-inspect-page"},[n(t.viewComponent,{tag:"Component",attrs:{params:t.params}})],1)},ji=[],Ii=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.renderEditor?n("section",{staticClass:"inspect-view",class:t.pageClass},[n("WebpageCore",{ref:"editorMain",attrs:{od:t.od,view:t.view,data:t.template,font:t.fontConf,event:t.event},on:{"init-editor":t.initEditor}}),t.showScrollbar?n("Scrollbar",{attrs:{target:".inspect-view"}}):t._e()],1):t._e()},Ai=[],Ti=n("b047"),Ci=n.n(Ti),Pi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"webpage-view",class:t.containerClass,style:t.containerStyle},[n("div",{staticClass:"webpage-view__innner",class:{backward:t.editorPlayer.isBackward},style:t.innerStyle},[n("editor",{ref:"editor",attrs:{"editor-options":t.editorOptions},scopedSlots:t._u([{key:"editor-report",fn:function(){return[t._t("editor-report")]},proxy:!0}],null,!0)},[n("PagingIcon",{attrs:{view:t.view,player:t.editorPlayer,"show-icon":t.showIcon}}),n("MusicIcon",{attrs:{od:t.od,data:t.data,zoom:t.editorZoom}})],1)],1)])},$i=[],Mi=function(){function t(){Object(u["a"])(this,t),this.events={},this.eventsCache={}}return Object(d["a"])(t,[{key:"$on",value:function(t,e){var n=this.events,i=this.eventsCache;n[t]||(n[t]=[]),n[t].push(e);var r=i[t];if(r&&r.length)while(r.length){var o=r.shift();e.apply(void 0,Object(a["a"])(o))}}},{key:"$emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=this.events,a=this.eventsCache,o=r[t]||[];if(o.length)o.forEach((function(t){return t.apply(void 0,n)}));else{var s=a[t];s||(a[t]=[]),a[t].push([].concat(n))}}}]),t}(),Ri=function(){function t(e){var n=e.acceptor,i=e.trigger;Object(u["a"])(this,t),this.acceptor=n||new Mi,this.trigger=i||new Mi}return Object(d["a"])(t,[{key:"$on",value:function(t,e){this.trigger.$on(t,e)}},{key:"$emit",value:function(t){for(var e,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(e=this.acceptor).$emit.apply(e,[t].concat(i))}}]),t}();Object(Ct["a"])(Ri,"Event",Mi);var Li=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.visible?n("div",{staticClass:"paging-icon",class:{"paging-icon--h":"h"===t.player.pageDirection,"paging-icon--absolute":t.absolute},on:{click:function(e){return t.player.switchLayout(1)}}}):t._e()},Ui=[],zi={props:{view:{type:Object,default:function(){return{width:window.innerWidth,height:window.innerHeight}}},player:{type:Object,required:!0},showIcon:{type:Boolean,default:!1}},computed:{visible:function(){var t=this.player,e=t.isFlow,n=t.editor,i=t.manualPlay,r=t.repeatPlay,a=t.activeIndex;return!(e||!n||!n.layouts.length)&&(!!this.showIcon||i&&(a!==n.layouts.length-1||r))},absolute:function(){return this.view.height<window.innerHeight}}},Di=zi,Bi=(n("0c26"),Object(Le["a"])(Di,Li,Ui,!1,null,null,null)),Ni=Bi.exports,Fi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.music.src?n("div",{staticClass:"music-icon",style:t.style,on:{click:function(e){return t.player.toggle()}}},[n("Icon",{style:{animationPlayState:"playing"===t.player.status?"running":"paused"},attrs:{name:"paused"===t.player.status?"music-off":"music-on"}})],1):t._e()},Hi=[],Vi=function(){function t(e){var n=this,i=e.src,r=e.loop,a=void 0!==r&&r,o=e.autoplay,s=void 0!==o&&o,c=e.autopause,l=void 0!==c&&c;Object(u["a"])(this,t),this.audioElement=document.createElement("audio"),this.audioElement.src=i,this.audioElement.loop=a,this.audioElement.preload="preload",this.stagingStates=null,this.status="default",this.audioElement.addEventListener("ended",(function(){n.status="default"})),s&&this.play().finally((function(){if(n.audioElement.paused){var t=function(){n.audioElement.paused&&n.play()};window.WeixinJSBridge&&window.WeixinJSBridge.invoke("getNetworkType",{},t,!1),document.addEventListener("click",t,{once:!0}),document.addEventListener("touchmove",t,{once:!0})}})),l&&document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState?(n.stagingStates=n.status,"playing"===n.status&&n.pause()):("paused"===n.status&&"playing"===n.stagingStates&&n.play(),n.stagingStates=null)}))}return Object(d["a"])(t,[{key:"play",value:function(){var t=this;return this.status="playing",new Promise((function(e){t.audioElement.play(),e()}))}},{key:"pause",value:function(){return this.status="paused",this.audioElement.pause()}},{key:"toggle",value:function(){"playing"===this.status?this.pause():this.play()}}]),t}(),Gi={name:"MusicIcon",props:{data:{type:Object,required:!0},od:{type:Object,required:!0},zoom:{type:Number,default:1}},data:function(){return{music:{src:"",options:{autoplay:!1,loop:!1}},player:{status:"paused"},style:{}}},mounted:function(){this.initAudioPlayer(),this.updateStyle(),this.od.events.onPauseBackgroundAudio.connect(this.player.pause,this.player),window.addEventListener("orientationchange",this.lazyUpdateStyle,!1),window.addEventListener("resize",this.lazyUpdateStyle,!1)},beforeDestroy:function(){window.removeEventListener("resize",this.lazyUpdateStyle,!1),window.addEventListener("orientationchange",this.lazyUpdateStyle,!1)},methods:{initAudioPlayer:function(){var t=this.data,e=t.global||{},n=e.backgroundMusic;n&&(this.music=n,this.player=new Vi({src:n.src,loop:n.options.loop,autoplay:n.options.autoplay,autopause:!0}))},updateStyle:function(){var t=this.$el.parentElement,e=t.getBoundingClientRect(),n=30,i=40*this.zoom,r=Math.floor(Math.max(e.top,0)+i),a=Math.floor(e.right-n-i);this.style={top:"".concat(r,"px"),left:"".concat(a,"px")}},lazyUpdateStyle:Ci()((function(){this.updateStyle()}),400)}},Wi=Gi,Yi=(n("7e251"),Object(Le["a"])(Wi,Fi,Hi,!1,null,null,null)),qi=Yi.exports,Xi=(n("8a79"),n("0f32")),Zi=n.n(Xi);function Ki(t,e,n){var i=function(){};e=Object.assign({up:i,left:i,right:i,down:i},e);var r=0,a=0,o=30,s=Zi()((function(t){r=t.touches[0].pageX,a=t.touches[0].pageY}),300),c=Zi()((function(t){var n=t.changedTouches[0].pageX-r,i=t.changedTouches[0].pageY-a;Math.abs(n)>Math.abs(i)?n>o?e.right():n<-o&&e.left():i>o?e.down():i<-o&&e.up()}),300);function l(t){n&&t.preventDefault()}t.addEventListener("touchstart",s),t.addEventListener("touchend",c),t.addEventListener("touchmove",l)}var Ji=n("11b5"),Qi=(n("0481"),n("4069"),{play:function(t){var e=arguments;return Object(wt["a"])(Object(yt["a"])().mark((function n(){var i,r,a;return Object(yt["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:i=e.length>1&&void 0!==e[1]&&e[1],r=0;case 2:if(!(r<t.length)){n.next=9;break}return a=t[r],n.next=6,Promise.all(a.map((function(t){return i||(t.currentTime=0),t.start()})));case 6:r+=1,n.next=2;break;case 9:case"end":return n.stop()}}),n)})))()},pause:function(t){t.flat().forEach((function(t){"running"===t.playState&&t.pause()}))},reset:function(t){t.flat().forEach((function(t){t.cancel(),t.first&&(t.play(),t.pause())}))},isPending:function(t){var e=!1;return t.flat().forEach((function(t){"running"===t.playState&&(e=!0)})),e}}),tr={IS_IOS:Object(si["isIOS"])(),IS_WEIXIN:Object(si["isWeiXin"])(),IS_WXMP:Object(si["isWXMP"])(),IS_MOBILE:Object(si["isMobile"])()},er="editor-webpage-layout--temporal",nr=function(t,e){return new Promise((function(n){var i=setTimeout(n,t);e&&e(i)}))},ir=new o["default"]({data:function(){return{el:null,data:{},editor:null,eventAdaptor:{$on:function(){},$emit:function(){}},activeIndex:0,isBackward:!1,currentAnimations:[],autoSwitchTimer:null,toggleLayoutTimer:null}},computed:{isFlow:function(){var t;return"flow"===(null===(t=this.data.global)||void 0===t?void 0:t.mode)},layoutLength:function(){return this.data.layouts.length},autoPlay:function(){var t;return(null===(t=this.data.global)||void 0===t?void 0:t.autoPage)||0},manualPlay:function(){var t=this.data.global||{},e=t.manualPage,n=void 0===e||e;return n},repeatPlay:function(){var t;return(null===(t=this.data.global)||void 0===t?void 0:t.repeatPlay)||!1},pageDirection:function(){var t;return(null===(t=this.data.global)||void 0===t?void 0:t.pageDirection)||"v"}},created:function(){},methods:{init:function(t){var e=t.el,n=t.data,i=t.editor,r=t.eventAdaptor;this.el=e,this.data=n,this.editor=i,this.eventAdaptor=r,this.editor.$on("templetCreated",this.onTempletCreated),this.editor.$on("templetLoaded",this.onTempletLoaded),this.editor.$on("layoutLoaded",this.onLayoutLoaded),this.isFlow||this.editor.$on("afterLayoutEnter",this.onAfterLayoutEnter),this.initTouchEvent()},onAfterLayoutEnter:function(t){this.editor.layouts[this.activeIndex]===this.editor.currentLayout&&(t.classList.contains(er)||"none"===t.style.display||this.playLayout(this.editor.currentLayout))},onTempletCreated:function(){this.initLayoutsAnimation(),this.eventAdaptor.$on("toggle-page",this.toggleLayout),this.eventAdaptor.$on("switch-page",this.switchLayout),this.eventAdaptor.$on("play-page",this.playAnimations),this.eventAdaptor.$on("pause-page",this.pauseAnimations),this.eventAdaptor.$on("reset-page",this.resetAnimations)},onTempletLoaded:function(){var t,e=this.isFlow,n=this.data,i=n.global.pageTransition;!e&&null!==i&&void 0!==i&&null!==(t=i.value)&&void 0!==t&&t.endsWith("3d")&&(this.el.querySelector(".editor-webpage-single").style.perspective="100vh")},onLayoutLoaded:function(t){var e=this,n=this.activeIndex,i=this.editor,r=i.layouts,a=i.currentLayout,o=r[n];o===t&&o!==a&&window.setTimeout((function(){e.toggleLayout(n,!0)}),300)},initLayoutsAnimation:function(){this.editor.layouts.forEach((function(t){t.animations&&(t.animations=Object(Ji["c"])(t.animations))}))},initTouchEvent:function(){var t=this,e=function(e){clearTimeout(t.autoSwitchTimer),window.__FORM_INPUT_ACTIVE||t.switchLayout(e)},n=this.el,i=this.isFlow,r=this.manualPlay,a=this.pageDirection;!i&&r&&Ki(n,"v"===a?{up:function(){return e(1)},down:function(){return e(-1)}}:{left:function(){return e(1)},right:function(){return e(-1)}},!0)},updateActiveIndex:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.isBackward=!e,this.activeIndex=t,this.eventAdaptor.$emit("active-page",t)},playLayout:function(t){var e=this;Qi.reset(this.currentAnimations);var n=t.animations||[];this.currentAnimations=n;var i=n.length?this.awaitAnimat(n):nr(2e3);return i.then((function(){return e.autoSwitchLayout()}))},switchLayout:Ci()((function(t){this.toggleLayout(this.activeIndex+t,t>0)}),200),awaitAnimat:function(t){var e=this;return new Promise(function(){var n=Object(wt["a"])(Object(yt["a"])().mark((function n(i){var r;return Object(yt["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.autoPlay,setTimeout((function(){Qi.isPending(t)&&i()}),1e3*r),n.next=4,Qi.play(t);case 4:i();case 5:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())},autoSwitchLayout:function(){var t=this,e=this.autoPlay,n=this.autoSwitchTimer;e&&(clearTimeout(n),this.autoSwitchTimer=setTimeout((function(){return t.switchLayout(1)}),1e3*e))},toggleLayout:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.editor,r=this.repeatPlay,a=this.layoutLength,o=r?(t+a)%a:t;if(o<0||o>a-1)this.eventAdaptor.$emit("last-page");else{this.updateActiveIndex(o,n),clearTimeout(this.autoSwitchTimer);var s=i.layouts[o];if(s===i.currentLayout)this.playLayout(s);else{clearTimeout(this.toggleLayoutTimer);var c=i.layouts.indexOf(i.currentLayout);this.toggleLayoutTimer=setTimeout((function(){i.toggleLayout(s),e.pauseIframe(c)}),tr.IS_MOBILE?300:0)}this.scrollToLayout(o),this.addhash2Router(o)}},addhash2Router:function(t){var e=window.location.href.split("#")[0];window.history.replaceState(null,"","".concat(e,"#").concat(t))},scrollToLayout:function(t){var e=this.editor,n=this.isFlow,i=e.layouts[t];if(n&&i){var r=e.getComponentById(i.$id);di(r.$el,400)}},pauseIframe:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:900;if(!(t<0)){this.editor;var n=document.querySelectorAll(".editor-webpage-layout")[t].querySelectorAll(".editor-element-linked-video iframe");n.length&&setTimeout((function(){Object(a["a"])(n).forEach((function(t){t.setAttribute("src",t.src)}))}),e)}},playAnimations:function(){var t=this.currentAnimations,e=this.editor.currentLayout,n=t.length?t:e.animations||[];this.currentAnimations=n,Qi.play(n,!0)},pauseAnimations:function(){var t=this.currentAnimations;t.length&&Qi.pause(t)},resetAnimations:function(){var t=this.currentAnimations;t.length&&Qi.reset(t)}}}),rr=n("140a"),ar=n.n(rr),or=n("022f"),sr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"interactivity-guide"},[t._l(3,(function(e){return n("div",{key:e,staticClass:"circle",style:{animationIterationCount:t.count}},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 42 42"}},[n("circle",{style:{fill:t.fill},attrs:{cx:"21",cy:"21",r:"21"}})])])})),n("div",{staticClass:"finger",style:{animationIterationCount:t.count}},[n("svg",{attrs:{viewBox:"0 0 63 76",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[n("defs",[n("filter",{attrs:{id:"filter-1",x:"-47.9%",y:"-38.3%",width:"195.8%",height:"176.7%",filterUnits:"objectBoundingBox"}},[n("feOffset",{attrs:{dx:"0",dy:"4",in:"SourceAlpha",result:"shadowOffsetOuter1"}}),n("feGaussianBlur",{attrs:{stdDeviation:"4",in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}}),n("feColorMatrix",{attrs:{values:"0 0 0 0 0.266666667\n                        0 0 0 0 0.28627451\n                        0 0 0 0 0.31372549\n                        0 0 0 0.237571023 0",type:"matrix",in:"shadowBlurOuter1",result:"shadowMatrixOuter1"}}),n("feMerge",[n("feMergeNode",{attrs:{in:"shadowMatrixOuter1"}}),n("feMergeNode",{attrs:{in:"SourceGraphic"}})],1)],1)]),n("g",{attrs:{id:"VisualDemo_Alpha",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[n("g",{attrs:{id:"顶部栏_按钮整合",transform:"translate(-647.000000, -445.000000)"}},[n("g",{attrs:{id:"Gesture",filter:"url(#filter-1)",transform:"translate(654.000000, 449.000000)"}},[n("path",{attrs:{id:"Fill-1",d:"M45.7658208,42.6276362 C45.7658208,44.9981208 45.3145166,\n                            47.3153759 44.4235259,49.5137519 L42.7720206,53.5937887 C42.2903316,\n                            54.7843539 42.0079313,56.0281485 41.9283946,57.3021065 L20.3962689,\n                            57.3021065 C19.3649718,53.7765431 14.7563069,40.0948019 2.30924764,\n                            27.7349252 C2.60058461,26.9515653 3.69980079,26.1460263 4.85353093,\n                            25.9455288 C6.70343133,25.6234906 8.29416693,25.8878635 10.9027946,\n                            28.1536635 L15.7652622,32.8768894 L15.8027964,\n                            33.8873617 C15.8242446,\n                            34.4853058 16.3202324,34.9554992 16.9180987,34.9554992 C16.9315038,\n                            34.9554992 16.9458025,34.9554992 16.9601013,34.954612 C17.5767347,\n                            34.9324331 18.0575301,34.4178818 18.0351883,33.8057432 L16.960995,\n                            4.91191434 C16.9341848,4.21904442 17.1817319,3.55722502 17.6562715,\n                            3.04977099 C18.1308112,2.54054265 18.7769358,2.2460064 19.4748934,\n                            2.22027884 C20.8538288,2.16704939 21.9959412,3.14558399 22.1675262,\n                            4.48962743 L24.9754426,26.5913794 C24.9816983,26.6428345 25.0102958,\n                            26.6836437 25.0237009,26.7324374 C25.0442554,26.8069586 25.0630225,\n                            26.8797055 25.096982,26.9471295 C25.1282605,27.0083433 25.1675821,\n                            27.0580241 25.208691,27.1112536 C25.2551619,27.1724674 25.3007391,\n                            27.2301327 25.3579341,27.2798135 C25.4097671,27.3241714 25.4651747,\n                            27.3569962 25.5250507,27.3915953 C25.5876078,27.4288559 25.6483774,\n                            27.4643422 25.7189775,27.4891826 C25.7895776,27.514023 25.8628586,\n                            27.5228946 25.9388207,27.5326533 C25.9888663,27.5397506 26.0326563,\n                            27.5619295 26.0844892,27.5619295 C26.1086183,27.5619295 26.1282791,\n                            27.5495093 26.1533019,27.547735 C26.1765374,27.5468479 26.1988792,\n                            27.5566066 26.223902,27.553058 C26.275735,27.5468479 26.3186312,\n                            27.5184588 26.3686768,27.5051515 C26.4419579,27.485634 26.5125579,\n                            27.4678908 26.5786897,27.435066 C26.6439277,27.4022412 26.697548,\n                            27.3605448 26.754743,27.3170741 C26.8110443,27.2736034 26.8664519,\n                            27.231907 26.9129229,27.1786775 C26.9611811,27.1254481 26.9951407,\n                            27.0660086 27.0317812,27.0056819 C27.0675281,26.9435808 27.1023813,\n                            26.8850284 27.1274041,26.8176045 C27.1515332,26.7484062 27.1604699,\n                            26.6765465 27.1703003,26.6011381 C27.1783434,26.5505701 27.2015788,\n                            26.5053251 27.2015788,26.4529828 L27.2015788,24.7771425 C27.2015788,\n                            23.4916514 28.2543241,22.4465801 29.5492543,22.4465801 C30.8441846,\n                            22.4465801 31.8969299,23.4916514 31.8969299,24.7771425 L31.8969299,\n                            26.4529828 C31.8969299,26.4813718 31.9112286,26.5053251 31.9139096,\n                            26.532827 C31.9121223,26.572749 31.9013982,26.6100097 31.9013982,\n                            26.6499317 L31.9013982,28.325772 C31.9013982,28.9379106 32.4018544,\n                            29.4347188 33.0184878,29.4347188 C33.636015,29.4347188 34.1355774,\n                            28.9379106 34.1355774,28.325772 L34.1355774,26.6499317 C34.1355774,\n                            25.3644407 35.1892164,24.3193693 36.483253,24.3193693 C37.7781832,\n                            24.3193693 38.8309285,25.3644407 38.8309285,26.6499317 L38.8309285,\n                            30.1000868 C38.8309285,30.7122254 39.3313846,31.2090335 39.9480181,\n                            31.2090335 C40.5655452,31.2090335 41.0651077,30.7122254 41.0651077,\n                            30.1000868 L41.0651077,30.016694 C41.0651077,30.0095968 41.0695761,\n                            30.0033867 41.0695761,29.9954022 L41.0695761,29.2067193 C41.0695761,\n                            27.9212283 42.123215,26.8761569 43.4181453,26.8761569 C44.7121819,\n                            26.8761569 45.7658208,27.9212283 45.7658208,\n                            29.2067193 L45.7658208,42.6276362 Z",fill:"#FFFFFF"}}),n("path",{attrs:{id:"Fill-1",d:"M45.7658208,42.6276362 C45.7658208,44.9981208 45.3145166,\n                            47.3153759 44.4235259,49.5137519 L42.7720206,53.5937887 C42.2903316,\n                            54.7843539 42.0079313,56.0281485 41.9283946,57.3021065 L20.3962689,\n                            57.3021065 C19.3649718,53.7765431 14.7563069,40.0948019 2.30924764,\n                            27.7349252 C2.60058461,26.9515653 3.69980079,26.1460263 4.85353093,\n                            25.9455288 C6.70343133,25.6234906 8.29416693,25.8878635 10.9027946,\n                            28.1536635 L15.7652622,32.8768894 L15.8027964,\n                            33.8873617 C15.8242446,\n                            34.4853058 16.3202324,34.9554992 16.9180987,34.9554992 C16.9315038,\n                            34.9554992 16.9458025,34.9554992 16.9601013,34.954612 C17.5767347,\n                            34.9324331 18.0575301,34.4178818 18.0351883,33.8057432 L16.960995,\n                            4.91191434 C16.9341848,4.21904442 17.1817319,3.55722502 17.6562715,\n                            3.04977099 C18.1308112,2.54054265 18.7769358,2.2460064 19.4748934,\n                            2.22027884 C20.8538288,2.16704939 21.9959412,3.14558399 22.1675262,\n                            4.48962743 L24.9754426,26.5913794 C24.9816983,26.6428345 25.0102958,\n                            26.6836437 25.0237009,26.7324374 C25.0442554,26.8069586 25.0630225,\n                            26.8797055 25.096982,26.9471295 C25.1282605,27.0083433 25.1675821,\n                            27.0580241 25.208691,27.1112536 C25.2551619,27.1724674 25.3007391,\n                            27.2301327 25.3579341,27.2798135 C25.4097671,27.3241714 25.4651747,\n                            27.3569962 25.5250507,27.3915953 C25.5876078,27.4288559 25.6483774,\n                            27.4643422 25.7189775,27.4891826 C25.7895776,27.514023 25.8628586,\n                            27.5228946 25.9388207,27.5326533 C25.9888663,27.5397506 26.0326563,\n                            27.5619295 26.0844892,27.5619295 C26.1086183,27.5619295 26.1282791,\n                            27.5495093 26.1533019,27.547735 C26.1765374,27.5468479 26.1988792,\n                            27.5566066 26.223902,27.553058 C26.275735,27.5468479 26.3186312,\n                            27.5184588 26.3686768,27.5051515 C26.4419579,27.485634 26.5125579,\n                            27.4678908 26.5786897,27.435066 C26.6439277,27.4022412 26.697548,\n                            27.3605448 26.754743,27.3170741 C26.8110443,27.2736034 26.8664519,\n                            27.231907 26.9129229,27.1786775 C26.9611811,27.1254481 26.9951407,\n                            27.0660086 27.0317812,27.0056819 C27.0675281,26.9435808 27.1023813,\n                            26.8850284 27.1274041,26.8176045 C27.1515332,26.7484062 27.1604699,\n                            26.6765465 27.1703003,26.6011381 C27.1783434,26.5505701 27.2015788,\n                            26.5053251 27.2015788,26.4529828 L27.2015788,24.7771425 C27.2015788,\n                            23.4916514 28.2543241,22.4465801 29.5492543,22.4465801 C30.8441846,\n                            22.4465801 31.8969299,23.4916514 31.8969299,24.7771425 L31.8969299,\n                            26.4529828 C31.8969299,26.4813718 31.9112286,26.5053251 31.9139096,\n                            26.532827 C31.9121223,26.572749 31.9013982,26.6100097 31.9013982,\n                            26.6499317 L31.9013982,28.325772 C31.9013982,28.9379106 32.4018544,\n                            29.4347188 33.0184878,29.4347188 C33.636015,29.4347188 34.1355774,\n                            28.9379106 34.1355774,28.325772 L34.1355774,26.6499317 C34.1355774,\n                            25.3644407 35.1892164,24.3193693 36.483253,24.3193693 C37.7781832,\n                            24.3193693 38.8309285,25.3644407 38.8309285,26.6499317 L38.8309285,\n                            30.1000868 C38.8309285,30.7122254 39.3313846,31.2090335 39.9480181,\n                            31.2090335 C40.5655452,31.2090335 41.0651077,30.7122254 41.0651077,\n                            30.1000868 L41.0651077,30.016694 C41.0651077,30.0095968 41.0695761,\n                            30.0033867 41.0695761,29.9954022 L41.0695761,29.2067193 C41.0695761,\n                            27.9212283 42.123215,26.8761569 43.4181453,26.8761569 C44.7121819,\n                            26.8761569 45.7658208,27.9212283 45.7658208,29.2067193 L45.7658208,\n                            42.6276362 Z M43.4181453,24.6582634 C42.4780026,\n                            24.6582634 41.6039917,\n                            24.9421538 40.8756493,25.4265417 C40.3331906,23.5147175 38.5807004,\n                            22.1014758 36.483253,22.1014758 C35.4644672,22.1014758 34.531474,\n                            22.4448057 33.7691721,23.0054892 C33.0721081,21.3748939 31.4438383,\n                            20.2286866 29.5492543,20.2286866 C28.4035672,20.2286866 27.3669081,\n                            20.6633937 26.5626036,21.3562636 L24.383832,4.21194717 C24.0674722,\n                            1.71903491 21.9164045,-0.0987505669 19.3908883,\n                            0.00415968977 C16.7188099,\n                            0.104408474 14.6267245,2.34359371 14.7286031,4.99441998 L15.6455102,\n                            29.6582824 L12.4202491,26.5266169 C9.5578187,24.0390276 7.32810784,\n                            23.2645392 4.46746477,\n                            23.7604601 C2.31907803,24.1348406 0,25.9091553 0,\n                            28.122613 C0,28.4198107 0.120645678,28.7045882 0.333339539,\n                            28.9130702 C14.3121521,42.5735196 18.4194671,58.5183993 18.4587887,\n                            58.6772005 C18.5830091,59.1722343 19.0307386,59.52 19.5437061,\n                            59.52 L43.0222487,59.52 C43.6388822,59.52 44.1393383,\n                            59.0231919 44.1393383,58.4110533 L44.1393383,58.0499802 C44.1393383,\n                            56.7999755 44.3761613,55.5792469 44.8462326,54.4197322 L46.4968442,\n                            50.3405825 C47.4941818,47.8778336 48,45.2828983 48,42.6276362 L48,\n                            29.2067193 C48,26.6987254 45.9445551,24.6582634 43.4181453,\n                            24.6582634 L43.4181453,24.6582634 Z","fill-opacity":"0.396088287",fill:"#444950"}})])])])])])],2)},cr=[],lr={props:{fill:{type:String,default:"#fff"},count:{type:String,default:"infinite"}}},ur=lr,dr=(n("a00a"),Object(Le["a"])(ur,sr,cr,!1,null,"7fc09a1d",null)),hr=dr.exports,fr=new o["default"]({data:function(){return{vm:null,editor:null,eventElements:new Set}},methods:{init:function(t){var e=t.vm,n=t.editor;this.vm=e,this.editor=n,this.editor.$on("templetCreated",this.onTempletCreated),this.editor.$on("templetLoaded",this.onTempletLoaded)},setElementStyle:function(){var t=this.eventElements;t.size&&t.forEach((function(t){t.classList.add("editor-event-mark");var e=Object(a["a"])(t.querySelectorAll(".element-main"));e.length&&e.forEach((function(t){t.classList.add("editor-event-mark")}))}))},setElementEvents:function(t){var e=this,n=t.layout,i=t.element,r=t.el,a=this.vm;i.events.forEach((function(t){var c=t.type,l=t.trigger,u=t.handler,d=t.event,h=t.showGuide,f=t.target;if(mi["b"][u]&&!or["b"].every((function(t){return t.value!==l}))){if(!d.detail.url&&mi["a"][c]&&(d.detail=mi["a"][c](d.detail)),h&&!r.$guide){var m=o["default"].extend(hr),g=(new m).$mount();r.$guide=g,r.appendChild(g.$el)}var p=Object(s["a"])(Object(s["a"])({},d),{},{type:c,layout:n,trigger:l,target:i,vm:a});e.eventElements.add(r),new ar.a(r,Object(Ct["a"])({},l,(function(t){mi["b"][u](t,p,f)})))}}))},recursionElementsEvent:function(t,e){var n=this,i=this.editor,r=this.setElementEvents;t.forEach((function(t){if(t.events&&t.events.length){var a=i.getComponentById(t.$id);r({layout:e,element:t,el:a.$el})}t.elements&&t.elements.length&&n.recursionElementsEvent(t.elements,e)}))},onTempletCreated:function(){var t=this.editor,e=this.recursionElementsEvent;t.layouts.forEach((function(t){e(t.elements,t)}))},onTempletLoaded:function(){tr.IS_IOS&&window.addEventListener("touchstart",(function(t){t.preventDefault()}),!0),this.setElementStyle()}}}),mr=(n("07ac"),new o["default"]({data:function(){return{data:{global:{}},editor:null,eventAdaptor:{$emit:function(){},$on:function(){}},layoutsStatus:{}}},computed:{isFlow:function(){var t;return"flow"===(null===(t=this.data.global)||void 0===t?void 0:t.mode)}},methods:{init:function(t){var e=t.data,n=t.editor,i=t.eventAdaptor;this.data=e,this.editor=n,this.eventAdaptor=i,this.editor.$on("templetCreated",this.onTempletCreated),this.editor.$on("templetLoaded",this.onTempletLoaded),this.editor.$on("layoutLoaded",this.onLayoutLoaded),this.isFlow||this.editor.$on("afterLayoutEnter",this.onAfterLayoutEnter),this.eventAdaptor.$emit("init-page",{total:e.layouts.length,index:0})},onTempletCreated:function(){var t=this;this.editor.layouts.forEach((function(e,n){t.layoutsStatus[e.$id]={index:n,rendered:!1,loaded:!1}})),this.isFlow&&this.eventAdaptor.$emit("render-page")},onTempletLoaded:function(){this.eventAdaptor.$emit("load-page",{total:this.editor.layouts.length,index:0})},onAfterLayoutEnter:function(t){var e=this.layoutsStatus,n=t.dataset.layoutId,i=e[n];i.rendered=!0;var r=Object.values(e).every((function(t){return t.rendered}));r&&(this.eventAdaptor.$emit("render-page"),this.editor.$off("afterLayoutEnter",this.onAfterLayoutEnter))},onLayoutLoaded:function(t){var e=this.layoutsStatus[t.$id];e&&(e.loaded=!0,this.eventAdaptor.$emit("load-layout",e.index))}}})),gr={components:{PagingIcon:Ni,MusicIcon:qi},props:{view:{type:Object,default:function(){return{width:window.innerWidth,height:window.innerHeight}}},font:{type:Object,default:function(){return{list:[],subset:null}}},data:{type:Object,required:!0},od:{type:Object,required:!0},event:{type:Object,default:function(){return{acceptor:new Mi,trigger:new Mi}}},wrapbox:{type:String,default:""},showIcon:{type:Boolean,default:!1}},data:function(){return{editor:null,editorPlayer:ir,editorInteractor:fr,editorLifecycle:mr,eventAdaptor:{$emit:function(){},$on:function(){}},containerStyle:{},wrapBoxOffset:null}},computed:{isFlow:function(){var t=this.data.global||{},e=t.mode;return e&&"flow"===e},editorZoom:function(){var t=this.view,e=this.data;return t.width/e.layouts[0].width},editorOptions:function(){var t=this.font,e=this.wrapBoxOffset;return{mode:"preview",padding:0,fontList:t.list,fontLoadTimeout:1e4,fontSubset:t.subset,crossOriginal:!0,autoFitZoom:!1,useNativeContextmenuEvent:!0,onPasteFile:function(){return!1},wrapBoxOffset:e}},containerClass:function(){var t=this.data.global||{},e=t.mode,n=["webpage-view--".concat(e||"flow")];return tr.IS_IOS&&n.push("ios"),tr.IS_WEIXIN&&!tr.IS_WXMP&&n.push("weixin"),n},innerStyle:function(){var t=this.view,e=this.isFlow;return{width:"".concat(t.width,"px"),height:e?"auto":"".concat(t.height,"px")}}},watch:{view:function(){var t=this,e=this.editor,n=this.editorZoom;e&&(e.zoomTo(n),setTimeout((function(){e.resetElementsAnimation&&e.resetElementsAnimation(),t.setWrapBoxOffset()}),200)),this.updateContainerStyle()}},created:function(){this.updateContainerStyle()},mounted:function(){var t=this;return Object(wt["a"])(Object(yt["a"])().mark((function e(){var n,i,r,a;return Object(yt["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.data,i=t.event,r=t.$refs.editor,t.editor=r,a=new Ri(i),t.eventAdaptor=a,t.editorPlayer.init({data:n,editor:r,eventAdaptor:a,el:t.$el}),t.editorLifecycle.init({data:n,editor:r,eventAdaptor:a}),t.editorInteractor.init({editor:r,vm:t}),t.od.events.onEditorCreated.emit(r),e.next=10,t.initRuntime();case 10:t.initEditor(),window.editor=r,window.$app=t,t.setWrapBoxOffset();case 14:case"end":return e.stop()}}),e)})))()},methods:{initRuntime:function(){return Promise.all([this.od.ready(),this.od.hydrateTemplateData(this.data)])},initEditorWatermark:function(){var t,e,n=this.data,i=this.editor,r=this.od,a=(null===(t=n.global)||void 0===t?void 0:t.watermarkImageUrl)||"";a&&(i.options.watermarkImages.element=a,i.options.watermarkImages.layoutNoRepeat=a,i.options.watermarkImages.layoutRepeat=a),null!==(e=n.global)&&void 0!==e&&e.watermarkPreviewEnable&&r.consts.IS_PREVIEW_PAGE&&n.layouts.forEach((function(t){t.watermarkEnable=!0}))},initEditor:function(){var t=this,e=this.data,n=this.editorZoom;this.initEditorWatermark(),this.editor.toggleSnapshot(!1),this.editor.setTemplet(e).then((function(){t.editor.zoomTo(n)})),this.$emit("init-editor",this.editor)},toggleLayout:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];ir.toggleLayout(t,e)},updateContainerStyle:function(){var t=this.view,e=this.isFlow,n={width:"".concat(t.width,"px")};e||(n.height="".concat(window.innerHeight,"px")),this.containerStyle=n},setWrapBoxOffset:function(){var t=this.$refs.editor,e=t.$el.getBoundingClientRect(),n={left:e.left,right:window.innerWidth-e.right};if(this.wrapbox){var i,r=null===(i=document.querySelector(this.wrapbox))||void 0===i?void 0:i.getBoundingClientRect();n.top=(null===r||void 0===r?void 0:r.top)||0,n.bottom=window.innerHeight-((null===r||void 0===r?void 0:r.bottom)||0)}this.wrapBoxOffset=n}}},pr=gr,vr=(n("dc40"),Object(Le["a"])(pr,Pi,$i,!1,null,null,null)),br=vr.exports,yr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"scroll",staticClass:"page-scroll",style:{height:t.viewHeight}},[n("div",{ref:"bar",staticClass:"page-scroll__bar",on:{mousedown:t.handlerMousedown}})])},wr=[],_r={props:{target:{type:String,default:""}},data:function(){return this.dy=0,this.content=null,this.scroll=null,this.bar=null,{viewHeight:"".concat(window.innerHeight,"px")}},mounted:function(){this.init()},beforeDestroy:function(){document.removeEventListener("mouseup",this.handlerMouseup,!1),this.content.addEventListener("scroll",this.syncContentScroll,!1)},methods:{initContent:function(){var t=this.target;this.content=t?document.querySelector(t):this.$parent.$el},init:function(){var t=this.$refs,e=t.scroll,n=t.bar;this.initContent(),this.scroll=e,this.bar=n,this.content.addEventListener("scroll",this.syncContentScroll,!1),document.addEventListener("mouseup",this.handlerMouseup,!1)},handlerMousedown:function(t){var e=t||window.event;this.dy=e.clientY-this.bar.offsetTop,document.addEventListener("mousemove",this.handlerMousemove,!1)},handlerMousemove:Zi()((function(t){this.content||this.initContent();var e=this.dy,n=this.bar,i=this.scroll,r=this.content,a=t||window.event,o=a.clientY-e;o<0&&(o=0),o>i.offsetHeight-n.offsetHeight&&(o=i.offsetHeight-n.offsetHeight),n.style.top="".concat(o,"px");var s=o/(i.offsetHeight-n.offsetHeight),c=(r.scrollHeight-r.offsetHeight)*s;r.scrollTo(0,c),window.getSelection().removeAllRanges()}),40),syncContentScroll:Zi()((function(){this.content||this.initContent();var t=this.content,e=this.scroll,n=this.bar,i=t.scrollTop/(t.scrollHeight-t.offsetHeight),r=Math.round((e.offsetHeight-n.offsetHeight)*i);n.style.top="".concat(r,"px")}),40),handlerMouseup:function(){document.removeEventListener("mousemove",this.handlerMousemove,!1)}}},xr=_r,kr=(n("4bab"),Object(Le["a"])(xr,yr,wr,!1,null,null,null)),Er=kr.exports,Or=790,Sr=1.2,jr=window!==window.top;function Ir(t){var e=t.layouts,n=void 0===e?[]:e;return n.reduce((function(t,e){return t.width=Math.max(t.width,e.width),t.height=Math.max(t.height,e.height),t}),{width:0,height:0})}function Ar(t){var e=[{check:function(){return t.width<=Or},area:{width:750,height:1206}},{check:function(){return t.width>Or},area:t}],n=e.find((function(t){return t.check()}));return n.area}function Tr(t){var e=window,n=e.innerWidth,i=e.innerHeight,r=Ir(t),a=Ar(r),o={ratio:n/r.width,width:0,height:0},s=a.height*o.ratio;return s<=i?o.width=n:(o.ratio=i/a.height,o.width=Math.round(r.width*o.ratio)),o.height=Math.round(r.height*o.ratio),o}function Cr(t){var e=t.layouts,n=void 0===e?[]:e;return n.reduce((function(t,e){return t.width=Math.max(t.width,e.width),t.height+=e.height,t}),{width:0,height:0})}function Pr(t){var e=window,n=e.innerWidth,i=Cr(t);if(i.width<=Or||jr||Object(si["isMobile"])()){var r=Math.min(i.width,n),a=r/i.width,o=Math.round(i.height*a);return{ratio:a,width:r,height:o}}var s=i.width*Sr,c=n<=s?n:i.width,l=c/i.width;return{ratio:l,width:c,height:Math.round(i.height*l)}}function $r(t){var e=t.global.mode,n=void 0===e?"flow":e;return"design"===n?Tr(t):Pr(t)}n("2b3d");var Mr="https://fonter.dancf.com",Rr=/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]|\uD83D[\uDE80-\uDEFF]|[\u2700-\u27BF]\uFE0F|[\uFFF0-\uFFFF]/g;function Lr(t){return t.replace(Rr,"")}function Ur(t){var e=new URLSearchParams;return Object.keys(t).forEach((function(n){e.append(n,t[n])})),e.toString()}function zr(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{initialEnable:!0,supportTypes:["text","table","form","question"],exportEnableCallback:function(t){var e=t.getUsedFontList().length;return e>2},getUrl:function(e,n){var i=Ur(Object(s["a"])({content:Lr(n),type:"woff",url:e.ttf||e.woff,env:Se["ENV"]},t));return fetch("".concat(Mr,"/subset?").concat(i)).then((function(t){if(t.ok)return t.blob();throw new Error("FETCH FONTSUBSET ERROR")})).then((function(t){return URL.createObjectURL(t)}))}}}function Dr(t){var e=t.events,n=t.eventBridge,i=new Mi;return e.forEach((function(t){i.$on(t,(function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];n.$emit.apply(n,[t].concat(i))}))})),i}function Br(t){var e=t.events,n=t.eventBridge,i=new Mi;return e.forEach((function(t){n.$on(t,(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];i.$emit.apply(i,[t].concat(n))}))})),i}var Nr=["load-layout","init-page","active-page","render-page","load-page","open-url"],Fr=["toggle-page","switch-page","play-page","pause-page","reset-page","last-page"],Hr={createEventAcceptor:Dr,createEventTrigger:Br,createEvent:function(t){var e=t.eventBridge,n=t.acceptorEvents,i=void 0===n?Nr:n,r=t.triggerEvents,a=void 0===r?Fr:r;return{acceptor:Dr({eventBridge:e,events:i}),trigger:Br({eventBridge:e,events:a})}}},Vr=n("98ed");function Gr(){var t="";try{var e=JSON.parse(localStorage.getItem("token")||"null");if(e){var n=(e.token_type||"Bearer").replace(/^(\w)/,(function(t,e){return e.toUpperCase()}));t="".concat(n," ").concat(e.access_token)}}catch(i){t="",console.log("LOCAL TOKEN PARSE ERROR:",i)}return t}var Wr=n("6c34");function Yr(t){var e=t.content;return e="string"===typeof e?JSON.parse(e):e,e=Object(Wr["d"])(e),e=Object(Wr["a"])(e),e.layouts.forEach((function(t){t.elements.forEach((function(t){t.lock=!0,t.editable=!1,t.dragable=!1}))})),t.content=e,t}console.log("IS_KA_PROJECT",Se["IS_KA_PROJECT"]);var qr=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(t,Object(s["a"])({mode:"cors",credentials:"include"},e)).then((function(t){return t.json()}))},Xr=Object(Vr["a"])(),Zr=function(t){var e=Se["IS_KA_PROJECT"]?"/solution":"",n=Se["IS_MIRROR_PAGE"]?"https://api.my.gaoding.com"+e:"/api",i="".concat(n,"/").concat(t);return function(t){var e=t.token,n=t.access,r=t.userId,a=t.templateId,o=t.regionId,s=t.bizCode,c=t.endpoint,l=i.replace(":material_id",a),u=[{key:"user_id",value:r},{key:"region_id",value:o},{key:"biz_code",value:s},{key:"endpoint",value:c}].reduce((function(t,e){var n=e.key,i=e.value;return i&&t.append(n,i),t}),new URLSearchParams),d="".concat(l,"?").concat(u.toString()),h={},f=n||Gr();return f&&(h.authorization=f),e&&(h["X-Token"]=e),qr(d,{headers:h})}},Kr=function(t){var e="http://gdesign-dam-gateway.api.prod",n="".concat(e,"/").concat(t);return function(t){var e=t.token,i=t.access,r=t.userId,a=t.templateId,o=t.regionId,s=t.bizCode,c=t.endpoint,l=n.replace(":material_id",a),u=[{key:"user_id",value:r},{key:"region_id",value:o},{key:"biz_code",value:s},{key:"endpoint",value:c}].reduce((function(t,e){var n=e.key,i=e.value;return i&&t.append(n,i),t}),new URLSearchParams),d="".concat(l,"?").concat(u.toString()),h={},f=i||Gr();return f&&(h.authorization=f),e&&(h["X-Token"]=e),qr(d,{headers:h})}},Jr={user:{user:function(t){if(t.token){var e=Zr("dam/editors/materials/:material_id/info");return e(t)}var n=t.userId,i=t.templateId;return qr("".concat(Se["ODYSSEY_ORIGIN"],"/usertemplet?user_id=").concat(n,"&templet_id=").concat(i))},team:function(t){var e={},n=t.access||Gr();return n&&(e.authorization=n),qr("".concat(Se["GAODING_ORIGIN"],"/api/team-service/api/templates/").concat(t.templateId),{headers:e})},source:function(t){return qr("".concat(Se["GAODING_ORIGIN"],"/api/v2/materials/").concat(t.templateId,"/info"))}},uxms:{user:function(t){return qr("".concat(Se["UXMS_ORIGIN"],"/api/templets/").concat(t.templateId))},source:function(t){return qr("".concat(Se["UXMS_ORIGIN"],"/api/templets/").concat(t.templateId))}},company:{user:Zr("cm/editors/materials/:material_id/info"),company:Zr("cm/editors/materials/:material_id/info"),source:Zr("cm/editors/gaoding/materials/:material_id/info")},gdesign:{mirror:Kr("editors/materials/:material_id/info")}};function Qr(t){Object.assign(t,{endpoint:t.endpoint,userId:t.userId||t.user_id,templateId:t.templateId||t.template_id,regionId:t.regionId||t.region_id,bizCode:t.bizCode||t.biz_code,orgCode:t.orgCode||t.org_code});var e=window,n=e.__ODYSSEY_PAGE,i=e.__ODYSSEY_TEMPLATE;if(n&&n.content)return n.content=n.content.content,Promise.resolve(Yr(n));if(i)return Promise.resolve(Yr(i));var r=Jr[Xr.mode]||{},a=r[Xr.templateFrom];if(a)return a(t).then((function(t){return Yr(t)}));throw new Error("UNKNOWN SOURCE")}function ta(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4;return new Promise((function(n,i){var r=setTimeout((function(){i(new Error("FRAME TIME OUT"))}),e);t.$emit("init-frame-sourece"),t.$on("post-frame-sourece",(function(t){clearTimeout(r),n(Yr(t))}))}))}var ea={};function na(t){return ea[t]?Promise.resolve(ea[t]):fetch(t).then((function(t){return t.json()})).then((function(e){var n=e.templet,i=e.options;return ea[t]={options:i,template:Yr(n)},ea[t]}))}function ia(t){var e=["type","page_size","page_num","from","names"],n=e.map((function(e){return"".concat(e,"=").concat(encodeURIComponent(t[e]||""))})).join("&");return fetch("".concat(Se["GAODING_ORIGIN"],"/api/v2/fonts?").concat(n)).then((function(t){return t.json()}))}n("4fad");var ra=["type","page_size","page_num","names"];function aa(t){var e={"Content-Type":"application/json"};t.token&&(e["X-Token"]=t.token);var n=t.access||Gr();n&&(e.authorization=n),delete t.token,delete t.access;var i=Object.entries(t).reduce((function(t,e){var n=Object(r["a"])(e,2),i=n[0],a=n[1];return ra.includes(i)&&t.append(i,a),t}),new URLSearchParams);return fetch("/api/dam/editors/fonts?".concat(i.toString()),{headers:e}).then((function(t){return t.json()}))}var oa=["SourceHanSansSC-Regular","Source Han Sans SC Regula","思源黑体常规"];function sa(t){var e={};return JSON.stringify(t||{},(function(t,n){return"fontFamily"===t&&(e[n]=!0),n})),Object.keys(e)}function ca(t,e){var n=sa(e),i=e?n.concat(oa).join(","):"";return function(e){var n=[],r=Object(s["a"])({type:"font",page_size:50,page_num:0},e);i&&(r.names=i);var a=function(e){return e.page_num+=1,t(e)},o=function t(){return a(r).then((function(e){return n=n.concat(e),e.length>=r.page_size?t():n}))};return o().then((function(){return n=n.filter((function(t){return!!t.content&&(Object.assign(t,t.content),!0)})),n}))}}function la(t,e){var n=Object({NODE_ENV:"production",VUE_APP_ENV:"prod",VUE_APP_GAODINGX_URL:"https://www.gaoding.com",VUE_APP_OSS_HOST:"st-gdx.dancf.com",VUE_APP_UMS_URL:"https://ums.gaoding.com",VUE_APP_GAODINGX_WAP_URL:"https://m.gaoding.com",VUE_APP_SEARCH_API_URL:"https://search.hlgdata.com",VUE_APP_SEARCH_V2_API_URL:"https://search-v2.hlgdata.com",VUE_APP_SEARCH_INNER_API_URL:"http://search.inner.hlgdata.com",VUE_APP_DIANSHANG_URL:"https://dianshang.gaoding.com",VUE_APP_SEARHC_PIC_URL:"https://ai-temp-retrieval.dancf.com",VUE_APP_TEAM_API:"https://www.gaoding.com/api/team-service",VUE_APP_RAM_API:"https://www.gaoding.com/api/team-ram",VUE_APP_LOGROCKET_ENV:"master",VUE_APP_TRACKER_ENV:"prod",VUE_APP_SENTRY_ENV:"production",VUE_APP_DESIGN_CATEGORY_ENV:"prod",VUE_APP_PAY_ENV:"production",VUE_APP_FONTER_API:"https://fonter.dancf.com",VUE_APP_OAUTH2_ENV:"prod",VUE_APP_DESIGN_AB_TEST_APP_NAME:"gd_web",VUE_APP_DESIGN_AB_TEST_APP_KEY:"ABTEST_f6519045-8bfd-4f0d-b690-8ab5b019bf8c",VUE_APP_PAY_QRCODE_URL:"https://m.gaoding.com",VUE_APP_PAY_QRCODE_V2_URL:"https://m.gaoding.com/me/pay",VUE_APP_UXMS_ORIGIN:"https://uxms.gaoding.com",VUE_APP_INPAINT_URL:"http://172.16.2.30/inpaint/v10",VUE_APP_SAAS_BASE_URL:"https://api.my.gaoding.com",VUE_APP_SAAS_SSO_URL:"https://sso.my.gaoding.com",VUE_APP_SAAS_EXTRANET_URL:"https://qiye.gaoding.com",VUE_APP_DOMAIN_URL:"qiye.gaoding.com",VUE_APP_SAAS_OAUTH2_CLIENT_ID:"saas",VUE_APP_QIYE_OAUTH2_CLIENT_ID:"qiye",VUE_APP_GAODING_CHANNEL_ID:"8",VUE_APP_CMS_ORGIN:"https://odyssey-cms.gaoding.com",VUE_APP_TEMPLATE_FILTER_ID:"4812582",VUE_APP_CHANNEL_CATEGORY_ID:"513",VUE_APP_UXMS_USER_ID:"353976720",VUE_APP_ODYSSEY_ABTEST_ACTIVITIES:"odyssey_private_config",VUE_APP_ODYSSEY_ABTEST_NAME:"gd_web",VUE_APP_ODYSSEY_ABTEST_KEY:"ABTEST_f6519045-8bfd-4f0d-b690-8ab5b019bf8c",VUE_APP_CMC_CD_ORG_ID:"8012556623856798766",VUE_APP_CMC_CD_ORG_CODE:"mcm79j",VUE_APP_ANALYTICS_ORGIN:"https://odyssey-analytics.gaoding.com/",VUE_APP_LEADERBOARD_ORGIN:"https://odyssey-game.gaoding.com/",VUE_APP_LEADERBOARD_INSTANCE_URL:"https://leaderboard-code.my.gd-share.cn/",VUE_APP_GD_ADVERT_ORIGIN:"https://www.gaoding.com",VUE_APP_QINGZHAN_ORGIN:"https://www.qingzhan.com",VUE_APP_PROJECT_NAME:"design",VUE_APP_FETCH_CHANNEL_ID:"8",VUE_APP_CHANNEL_ID:"8",VUE_APP_GD_DOMAIN_PUBLISH_URLS:"g.h5gdsvip.com|g.gd-share.cn|g.h5gd.com|g.h5gdvip.com|g1.h5gdvip.com",VUE_APP_MEDIA_SVIP_ID:"125",VUE_APP_OSS_ORGIN:"https://dancf-st-gdx.oss-cn-hangzhou.aliyuncs.com",VUE_APP_GAODING_ADVERT:"GAODING-ADVERT",VUE_APP_DATA_TRACKER:"https://data-think-tank.gaoding.com",VUE_APP_GDEESIGN_DAM_URL:"http://gdesign-dam-gateway.api.prod",BASE_URL:"//cdn.dancf.com/odyssey-editor/"}).PRIVATE_NAME||"saas"===e.from?aa:ia,i=ca(n,t);return i(e)}var ua=function(){function t(e){var n=e.editor;Object(u["a"])(this,t),this.editor=n}return Object(d["a"])(t,[{key:"exportLayoutsToBlobs",value:function(t){var e=this.editor,n=[];return e.layouts.reduce((function(i,r,a){var o=e.exportImage(r,window.od.renderStrategy,3e4,!1,!0);return i.then((function(){return new Promise((function(e){o.then((function(i){i.toBlob((function(i){n.push(i),t&&t({index:a,blob:i}),e(i)}))}))}))}))}),Promise.resolve()).then((function(){return n}))}}]),t}(),da={components:{WebpageCore:br,Scrollbar:Er},props:{params:{type:Object,required:!0}},data:function(){this.od=window.od;var t=Hr.createEvent({eventBridge:this.$iframeEvent});return{event:t,view:{width:window.innerWidth,height:window.innerHeight},template:null,fontConf:{list:[],subset:{}},embeddedPage:window!==window.top,scrollbar:"1"===this.params.scrollbar,editor:null}},computed:{pageClass:function(){return this.embeddedPage?["inspect-view--embedded"]:[]},renderEditor:function(){return this.template&&this.fontConf.list.length},showScrollbar:function(){var t=this.scrollbar,e=this.embeddedPage,n=this.template;return t&&e&&n&&"flow"===n.global.mode}},created:function(){this.initResource(),this.initExportImageEvent(),Object(si["isMobile"])()?window.addEventListener("orientationchange",this.resizeView,!1):window.addEventListener("resize",this.resizeView,!1)},beforeDestroy:function(){window.removeEventListener("resize",this.resizeView,!1),window.removeEventListener("orientationchange",this.resizeView,!1)},methods:{getTemplate:function(){var t=this,e=this.params,n=[{match:!!e.frame_source,loader:function(){return ta(t.$iframeEvent)}},{match:!!e.json,loader:function(){return na(e.json).then((function(t){return t.template}))}},{match:!0,loader:function(){return Qr(t.params)}}],i=n.find((function(t){return t.match}));return i.loader()},getFonts:function(t){var e=this.params,n=[{match:!!e.json,loader:function(){return na(e.json).then((function(t){return t.options.fontList}))}},{match:!0,loader:function(){return la(t,e)}}],i=n.find((function(t){return t.match}));return i.loader()},hideLoading:function(){var t=document.getElementById("loadingSpinner");t&&t.remove()},initResource:function(){var t=this;return Promise.all([this.getTemplate(),window.od.ready()]).then((function(e){var n=Object(r["a"])(e,1),i=n[0];return t.getFonts(i).then((function(t){return[i,t]}))})).then(function(){var e=Object(wt["a"])(Object(yt["a"])().mark((function e(n){var i,a,o;return Object(yt["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=Object(r["a"])(n,2),a=i[0],o=i[1],document.title=a.title||"页面内容预览",e.next=4,window.od.hydrateTemplateData(a.content);case 4:t.template=a.content,t.view=$r(t.template),t.fontConf.list=o,t.fontConf.subset=zr(t.params),t.hideLoading();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){var n,i=(null===e||void 0===e||null===(n=e.error)||void 0===n?void 0:n.message)||(null===e||void 0===e?void 0:e.message)||"页面初始出错";t.$tip({title:i,timeout:2500,type:"warning"}),t.hideLoading()}))},initEditor:function(t){this.editor=t},initExportImageEvent:function(){var t=this;this.$iframeEvent.$on("export-webpage-image",(function(){var e=new ua({editor:t.editor}),n=function(e){t.$iframeEvent.$emit("export-webpage-image-update",e)};e.exportLayoutsToBlobs(n).then((function(e){t.$iframeEvent.$emit("export-webpage-image-complete",e)}))}))},calcView:function(){var t=this.view,e=this.template,n=$r(e);n.width===t.width&&n.height===t.height||(this.view=n)},resizeView:Ci()((function(){window.__FORM_INPUT_ACTIVE||this.calcView()}),400)}},ha=da,fa=(n("c909"),Object(Le["a"])(ha,Ii,Ai,!1,null,null,null)),ma=fa.exports,ga=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"audit-view"},[n("div",{staticClass:"audit-view__main"},[n("div",{staticClass:"audit-view__container"},[n("div",{class:t.innerClass},[t.renderEditor?n("WebpageCore",{ref:"webpage",attrs:{od:t.od,data:t.template,font:t.fontConf,view:t.view,event:t.event,wrapbox:".audit-view__container"},on:{"active-index":t.activeLayoutIndex}}):t._e()],1),t.isFlow?n("div",{staticClass:"audit-view__scroll"},[t._v(" 滚动页面审查 ")]):n("div",{staticClass:"audit-view__paging"},[n("button",{staticClass:"audit-view__paging-item",attrs:{disabled:t.layoutIndex<1},on:{click:function(e){return t.switchLayout(-1)}}},[n("Icon",{attrs:{name:"prev"}})],1),n("span",{staticClass:"audit-view__paging-item"},[t._v(" "+t._s(t.pagingInfo)+" ")]),n("button",{staticClass:"audit-view__paging-item",attrs:{disabled:t.layoutIndex>=t.pagingLength-1},on:{click:function(e){return t.switchLayout(1)}}},[n("Icon",{attrs:{name:"next"}})],1)])])]),n("div",{staticClass:"audit-view__info"},[t.page.title?n("h1",{staticClass:"audit-view__title"},[t._v(" "+t._s(t.page.title)+" ")]):t._e(),t.page.description?n("p",{staticClass:"audit-view__desc"},[t._v(" "+t._s(t.page.description)+" ")]):t._e(),n("p",{staticClass:"audit-view__desc"},[t._v(" "+t._s(t.auditInfo)+" ")]),t.page.cover_url?n("img",{staticClass:"audit-view__cover",attrs:{alt:"微信分享图",src:t.page.cover_url}}):t._e(),t.page.publish_url?n("a",{staticClass:"audit-view__link",attrs:{target:"_blank",href:t.page.publish_url}},[t._v(" "+t._s(t.page.publish_url)+" ")]):t._e(),t.page.publish_links&&t.page.publish_links.length?n("div",{staticClass:"audit-view__links"},[n("span",[t._v("站点页面列表：")]),t._l(t.page.publish_links,(function(e){return n("a",{key:e,staticClass:"audit-view__link",attrs:{target:"_blank",href:e}},[t._v(" "+t._s(e)+" ")])}))],2):t._e()])])},pa=[];function va(t){delete t.token;var e=Object.keys(t).map((function(e){return"".concat(e,"=").concat(encodeURIComponent(t[e]))})).join("&");return fetch("".concat(Se["GAODING_ORIGIN"],"/api/v2/fonts?").concat(e)).then((function(t){return t.json()}))}var ba=Object({NODE_ENV:"production",VUE_APP_ENV:"prod",VUE_APP_GAODINGX_URL:"https://www.gaoding.com",VUE_APP_OSS_HOST:"st-gdx.dancf.com",VUE_APP_UMS_URL:"https://ums.gaoding.com",VUE_APP_GAODINGX_WAP_URL:"https://m.gaoding.com",VUE_APP_SEARCH_API_URL:"https://search.hlgdata.com",VUE_APP_SEARCH_V2_API_URL:"https://search-v2.hlgdata.com",VUE_APP_SEARCH_INNER_API_URL:"http://search.inner.hlgdata.com",VUE_APP_DIANSHANG_URL:"https://dianshang.gaoding.com",VUE_APP_SEARHC_PIC_URL:"https://ai-temp-retrieval.dancf.com",VUE_APP_TEAM_API:"https://www.gaoding.com/api/team-service",VUE_APP_RAM_API:"https://www.gaoding.com/api/team-ram",VUE_APP_LOGROCKET_ENV:"master",VUE_APP_TRACKER_ENV:"prod",VUE_APP_SENTRY_ENV:"production",VUE_APP_DESIGN_CATEGORY_ENV:"prod",VUE_APP_PAY_ENV:"production",VUE_APP_FONTER_API:"https://fonter.dancf.com",VUE_APP_OAUTH2_ENV:"prod",VUE_APP_DESIGN_AB_TEST_APP_NAME:"gd_web",VUE_APP_DESIGN_AB_TEST_APP_KEY:"ABTEST_f6519045-8bfd-4f0d-b690-8ab5b019bf8c",VUE_APP_PAY_QRCODE_URL:"https://m.gaoding.com",VUE_APP_PAY_QRCODE_V2_URL:"https://m.gaoding.com/me/pay",VUE_APP_UXMS_ORIGIN:"https://uxms.gaoding.com",VUE_APP_INPAINT_URL:"http://172.16.2.30/inpaint/v10",VUE_APP_SAAS_BASE_URL:"https://api.my.gaoding.com",VUE_APP_SAAS_SSO_URL:"https://sso.my.gaoding.com",VUE_APP_SAAS_EXTRANET_URL:"https://qiye.gaoding.com",VUE_APP_DOMAIN_URL:"qiye.gaoding.com",VUE_APP_SAAS_OAUTH2_CLIENT_ID:"saas",VUE_APP_QIYE_OAUTH2_CLIENT_ID:"qiye",VUE_APP_GAODING_CHANNEL_ID:"8",VUE_APP_CMS_ORGIN:"https://odyssey-cms.gaoding.com",VUE_APP_TEMPLATE_FILTER_ID:"4812582",VUE_APP_CHANNEL_CATEGORY_ID:"513",VUE_APP_UXMS_USER_ID:"353976720",VUE_APP_ODYSSEY_ABTEST_ACTIVITIES:"odyssey_private_config",VUE_APP_ODYSSEY_ABTEST_NAME:"gd_web",VUE_APP_ODYSSEY_ABTEST_KEY:"ABTEST_f6519045-8bfd-4f0d-b690-8ab5b019bf8c",VUE_APP_CMC_CD_ORG_ID:"8012556623856798766",VUE_APP_CMC_CD_ORG_CODE:"mcm79j",VUE_APP_ANALYTICS_ORGIN:"https://odyssey-analytics.gaoding.com/",VUE_APP_LEADERBOARD_ORGIN:"https://odyssey-game.gaoding.com/",VUE_APP_LEADERBOARD_INSTANCE_URL:"https://leaderboard-code.my.gd-share.cn/",VUE_APP_GD_ADVERT_ORIGIN:"https://www.gaoding.com",VUE_APP_QINGZHAN_ORGIN:"https://www.qingzhan.com",VUE_APP_PROJECT_NAME:"design",VUE_APP_FETCH_CHANNEL_ID:"8",VUE_APP_CHANNEL_ID:"8",VUE_APP_GD_DOMAIN_PUBLISH_URLS:"g.h5gdsvip.com|g.gd-share.cn|g.h5gd.com|g.h5gdvip.com|g1.h5gdvip.com",VUE_APP_MEDIA_SVIP_ID:"125",VUE_APP_OSS_ORGIN:"https://dancf-st-gdx.oss-cn-hangzhou.aliyuncs.com",VUE_APP_GAODING_ADVERT:"GAODING-ADVERT",VUE_APP_DATA_TRACKER:"https://data-think-tank.gaoding.com",VUE_APP_GDEESIGN_DAM_URL:"http://gdesign-dam-gateway.api.prod",BASE_URL:"//cdn.dancf.com/odyssey-editor/"}),ya=ba.VUE_APP_SAAS_BASE_URL,wa=ba.VUE_APP_SAAS_EXTRANET_URL,_a=Se["IS_MIRROR_PAGE"]?"".concat(ya,"/cm/editors/fonts"):"".concat(wa,"/editors/fonts");function xa(t,e){delete t.token;var n=Object.entries(t).reduce((function(t,e){var n=Object(r["a"])(e,2),i=n[0],a=n[1];return t.append(i,a),t}),new URLSearchParams),i={"Content-Type":"application/json"};e.token&&(i["X-Token"]=e.token);var a=e.access||Gr();return a&&(i.authorization=a),fetch("".concat(_a,"?").concat(n.toString()),{headers:i}).then((function(t){return t.json()}))}var ka="http://gdesign-dam-gateway.api.prod",Ea=(Se["IS_MIRROR_PAGE"],"".concat(ka,"/editors/fonts"));function Oa(t,e){delete t.token;var n=Object.entries(t).reduce((function(t,e){var n=Object(r["a"])(e,2),i=n[0],a=n[1];return t.append(i,a),t}),new URLSearchParams),i={"Content-Type":"application/json"};e.token&&(i["X-Token"]=e.token);var a=e.access||Gr();return a&&(i.authorization=a),fetch("".concat(Ea,"?").concat(n.toString()),{headers:i}).then((function(t){return t.json()}))}var Sa=Object(Vr["a"])(),ja=["SourceHanSansSC-Regular","Source Han Sans SC Regula","思源黑体常规"],Ia="gdesign-dam"===Sa.from?Oa:"company"===Sa.mode?xa:va;function Aa(t,e){var n=e||{},i=n.getFonts,r=void 0===i?Ia:i,a=n.params,o=void 0===a?{}:a,c=[],l=Object.assign(Object(s["a"])({type:"font",page_size:50,page_num:0},o));if(t){var u=sa(t);u.length?l.names=u.concat(ja).join(","):l.names=ja.join(",")}var d=function(t){return t.page_num+=1,r(Object.assign({},t),{token:Sa.token})},h=function t(){return d(l).then((function(e){return c=c.concat(e),e.length>=l.page_size?t():c}))};return h().then((function(){return c=c.filter((function(t){return!!t.content&&(Object.assign(t,t.content),!0)})),c}))}var Ta=n("0644"),Ca=n.n(Ta),Pa={0:"作品尚未审核，请耐心等待",1:"作品正在审核中，请耐心等待",2:"作品审核通过",3:"作品正在进行人工审核，请耐心等待",4:"作品审核失败"},$a={ad:"广告",bloody:"血腥暴力",politics:"涉政",abuse:"辱骂",porn:"色情",flood:"灌水",spa:"含垃圾信息",sexy:"性感图片",terrorism:"暴恐",contraband:"违禁",artificial:"人工审核未通过"},Ma={title:"未命名",description:"描述信息"},Ra={wechat:{push:!1,test:!1,user_id:0},dingtalk:{push:!1,test:!1,webhook:"",keyword:""},custom:{push:!1,test:!1,webhook:""},email:{push:!1,test:!1,address:""},workwechat:{push:!1,test:!1,webhook:""},limit:{authority:"all",version:Date.now()}},La=(Ma.title,Ma.description,Ca()(Ra),function(t){return fetch("/odyssey/p/pages/".concat(t.code)).then((function(t){return t.json()}))}),Ua=function(){function t(e){Object(u["a"])(this,t),this.params=e}return Object(d["a"])(t,[{key:"load",value:function(){var t=Object(wt["a"])(Object(yt["a"])().mark((function t(){var e,n,i;return Object(yt["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.params,t.next=3,La(e);case 3:return n=t.sent,i=JSON.parse(n.content.content),i=Object(Wr["d"])(i),i=Object(Wr["a"])(i),n.content=i,t.abrupt("return",n);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),za={components:{WebpageCore:br},props:{params:{type:Object,required:!0}},data:function(){return this.od=window.od,{event:{acceptor:new Mi,trigger:new Mi},view:{width:360,height:695},page:{},template:null,fontConf:{list:[],subset:{}},layoutIndex:0}},computed:{renderEditor:function(){return this.template&&this.fontConf.list.length},isFlow:function(){var t,e=this.template;return"flow"===(null===e||void 0===e||null===(t=e.global)||void 0===t?void 0:t.mode)},innerClass:function(){return this.isFlow?["audit-view__inner","audit-view__flow"]:["audit-view__inner"]},pagingLength:function(){return this.template?this.template.layouts.length:0},pagingInfo:function(){var t=this.layoutIndex,e=this.pagingLength;return e?"".concat(t+1,"/").concat(e):""},auditInfo:function(){var t=this.page.audit||{},e=t.audit_message,n=void 0===e?[]:e,i=t.audit_status,r=void 0===i?0:i,a=n.map((function(t){return $a[t]})),o=a.length?"作品涉及「".concat(a.join("、"),"」"):"暂无审核信息。";return"机审结果：".concat(Pa[r],"，").concat(o)}},created:function(){this.auditPage=new Ua(this.params),this.initResource(),this.event.acceptor.$on("active-page",this.activeLayoutIndex)},mounted:function(){this.hideLoading()},methods:{hideLoading:function(){var t=document.getElementById("loadingSpinner");t&&t.remove()},initResource:function(){var t=this;return Promise.all([this.auditPage.load(),Aa(),window.od.ready()]).then(function(){var e=Object(wt["a"])(Object(yt["a"])().mark((function e(n){var i,a,o;return Object(yt["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=Object(r["a"])(n,2),a=i[0],o=i[1],document.title=a.title||"页面预览",t.page=a,e.next=5,window.od.hydrateTemplateData(a.content);case 5:t.template=a.content,t.fontConf.list=o,t.fontConf.subset=zr({from:"gaoding"});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){var n,i=(null===e||void 0===e||null===(n=e.error)||void 0===n?void 0:n.message)||"页面初始出错";t.$tip({title:i,timeout:2500,type:"warning"})}))},switchLayout:function(t){this.event.trigger.$emit("switch-page",t)},activeLayoutIndex:function(t){this.layoutIndex=t}}},Da=za,Ba=(n("8763"),Object(Le["a"])(Da,ga,pa,!1,null,null,null)),Na=Ba.exports,Fa={inspect:ma,audit:Na},Ha={data:function(){return{params:{}}},computed:{isAuditView:function(){return"audit"===this.params.view},viewComponent:function(){return this.isAuditView?Fa.audit:Fa.inspect}},created:function(){this.initParams()},methods:{initParams:function(){var t=Object(a["a"])(new URLSearchParams(window.location.search)).reduce((function(t,e){var n=Object(r["a"])(e,2),i=n[0],a=n[1];return t[i]=a,t}),{});t.from=t.from||"gaoding",this.params=t}}},Va=Ha,Ga=(n("2f4d"),Object(Le["a"])(Va,Si,ji,!1,null,null,null)),Wa=Ga.exports;o["default"].config.productionTip=!1;var Ya=Object(a["a"])(new URLSearchParams(window.location.search)).reduce((function(t,e){var n=Object(r["a"])(e,2),i=n[0],a=n[1];return t[i]=a,t}),{});Oi({plugins:[],attachAnimation:!Ya.disable_effect},{app:Wa})},7713:function(t,e,n){"use strict";var i=n("d4ec"),r=n("bee2"),a=n("ade3"),o=n("5530"),s=(n("d3b7"),n("b0c0"),n("13d5"),n("7db0"),n("6a19")),c=n.n(s),l={template:c.a,props:["options","global","layouts","currentLayout"],computed:{editor:function(){return this.$parent}}},u=n("6cec"),d=n.n(u),h={template:d.a,props:["options","global","layouts","currentLayout"],computed:{editor:function(){return this.$parent},supportTypes:function(){return this.editor&&this.editor.supportTypes||[]}},mounted:function(){},methods:{isGroup:function(t){return this.editor.isGroup(t)}}},f=(n("159b"),n("4a6f")),m=n.n(f),g={template:m.a,props:["options","global","layouts","currentLayout"],computed:{editor:function(){return this.$parent},flowStyle:function(){if(!this.editor)return{};var t=this.editor,e=t.width,n=t.height;return{overflow:this.options.canvasOverflowHidden?"hidden":"visible",width:e*this.global.zoom+"px",height:n*this.global.zoom+"px"}}},methods:{setLayoutTop:function(){this.layouts.reduce((function(t,e){return e.top=t,t+e.height}),0)}},watch:{"editor.height":function(){this.setLayoutTop()},layouts:function(){this.setLayoutTop()}},created:function(){this.setLayoutTop()},beforeDestroy:function(){this.layouts.forEach((function(t){t.top=0}))}},p=(n("caad"),n("2532"),n("6f62")),v=n.n(p),b=n("f7f8"),y=n("9b02"),w=n.n(y),_=n("c7cc"),x={name:"editor-layout",template:v.a,props:["options","global","editor","layout"],data:function(){return{showMosaic:!1}},computed:{layoutModel:function(){if(this.layout instanceof b["b"])return this.layout;var t=Object(o["a"])({},this.layout);return delete t.elements,t=new b["b"](t),t.elements=this.layout.elements,t},layoutStyle:function(){var t=this.layout,e=this.global;return{height:Math.max(1,t.height*e.zoom)+"px",width:Math.max(1,t.width*e.zoom)+"px",transformOrigin:"top left"}},isCurrentLayout:function(){return this.editor.currentLayout===this.layout},supportImageTransformTypes:function(){return this.curElem&&this.options.cropperOptions.imageTransformTypes.includes(this.curElem.type)},curElem:function(){var t=this.editor;return t.currentSubElement||t.currentElement},backgroundMaskElements:function(){var t=[];return this.editor.walkTemplet((function(e){e.maskEnable&&!e.hidden&&t.push(e)}),!0,[this.layout]),t},watermarkEnable:function(){return this.global.showWatermark||!!w()(this.global,"layout.watermarkEnable")||this.layout.watermarkEnable},elements:function(){var t=this.layout.elements||[];return Object(_["c"])(t)}},methods:{setCurrentLayout:function(t){this.editor&&this.editor.toggleLayout(t)},isGroup:function(t){return this.editor.isGroup(t)}},mounted:function(){var t=this;this.showMosaic=!1,setTimeout((function(){t.showMosaic=!0}),2e3)}},k=n("3835"),E=(n("ac1f"),n("5319"),n("f4d5")),O=n("2ef0"),S=n("61e5"),j=n("b9fd"),I=n("2909"),A=n("c7eb"),T=n("1da1"),C=(n("99af"),n("b64b"),n("3ca3"),n("ddb0"),n("d81d"),n("d9e2"),n("e9c4"),n("00b4"),n("a434"),n("4de4"),n("fb6a"),n("4e82"),n("f684")),P=n.n(C),$=n("61d3"),M=n("49bc"),R=n("5b44"),L=n("04e1"),U=n("af9f"),z=n("0f57"),D=n("257e"),B=n("262e"),N=n("2caf"),F=n("01f8"),H=function(t){Object(B["a"])(n,t);var e=Object(N["a"])(n);function n(t){var r;if(Object(i["a"])(this,n),r=e.call(this,t),r.strokeWidth="mosaicBrush"!==t.type?0:r.strokeWidth||0,r.$paths=Object(F["c"])(Object(F["a"])(r.$paths)),!r.left&&!r.top&&(r.transform.position.x||r.transform.position.y)){r.resize=1,r.left=r.transform.position.x,r.top=r.transform.position.y,r.transform.position.x=0,r.transform.position.y=0;var a=r.left,o=r.top,s=Object(L["a"])(Object(D["a"])(r),!0);r.left=a+s.left,r.top=o+s.top}return r.$guider={show:!1,marginShow:!1,resizeShow:!1},r}return Object(r["a"])(n,[{key:"$paths",get:function(){return Object(F["e"])(this.path)},set:function(t){this.path=Object(F["d"])(t)}}]),n}($["a"]),V=H,G=n("1c39"),W=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.deleteLinkId;Array.isArray(e)||(e=[e]),e.forEach((function(e){delete e.uuid,i&&delete e.linkId,Array.isArray(e.elements)&&t(e.elements)}))},Y=W,q=n("38ac"),X={none:0,fade:6e3,diffusion:6001,musselOpen:6002,musselClose:6003,sweepUp:6004,sweepDown:6005,sweepLeft:6006,sweepRight:6007,colorBlack:6011,colorWhite:6010,zoomOut:6012,zoomIn:6013},Z={200:X.fade,201:X.diffusion,202:X.musselOpen,203:X.musselClose,212:X.sweepUp,213:X.sweepLeft,214:X.sweepDown,215:X.sweepRight,216:X.zoomIn,217:X.zoomOut,5e3:X.colorBlack,5002:X.colorWhite},K={0:"none",6e3:"fade",6001:"diffusion",6002:"musselOpen",6003:"musselClose",6004:"sweepUp",6005:"sweepDown",6006:"sweepLeft",6007:"sweepRight",6011:"colorBlack",6010:"colorWhite",6012:"zoomOut",6013:"zoomIn"};function J(t){return+t>=X.fade&&+t<=X.sweepRight}function Q(t){var e=Z[t];return e||t}function tt(t){return K[t]||"none"}function et(t){return X[t]||0}function nt(t){var e=et(t),n=[X.zoomOut,X.zoomIn].includes(e);return J(e)?{type:e,inOffset:0,inDuration:1e3,outOffset:-1e3,outDuration:1e3,elementInDelay:-1e3,elementInDuration:0,elementOutDelay:0,elementOutDuration:0,isOverlayer:!0}:e?{type:e,inOffset:0,inDuration:n?300:500,outOffset:n?-300:-500,outDuration:n?300:500,elementInDelay:0,elementInDuration:0,elementOutDelay:0,elementOutDuration:0,isOverlayer:!1}:{type:0,inOffset:0,inDuration:0,outOffset:0,outDuration:0,elementInDelay:0,elementInDuration:0,elementOutDelay:0,elementOutDuration:0,isOverlayer:!1}}function it(t){if(t.transitionOut)return t.transitionOut;if(t.animation&&t.animation.leaveTransition){var e=Q(t.animation.leaveTransition),n=tt(e),i=nt(n),r=at(t),a=r.duration;return{option:n,delay:a+i.outOffset,duration:i.outDuration}}return{option:"none",delay:0,duration:0}}function rt(t,e){var n=nt(t),i=at(e),r=i.duration;e.transitionOut="none"!==t?{option:t,delay:r+n.outOffset,duration:n.outDuration}:null,e.animation||(e.animation={animationEffects:[]});var a=et(t);e.animation.leaveTransition=a}function at(t){if(t.timeRange)return t.timeRange;if(t.animation&&t.animation.animationEffects[0]&&t.animation.animationEffects[0].options){var e=t.animation.animationEffects[0].options,n=e.delay,i=e.duration;return{delay:n,duration:i}}return{delay:0,duration:0}}function ot(t,e,n){n.timeRange={delay:t,duration:e};var i=it(n);"none"!==i.option&&rt(i.option,n),n.animation&&n.animation.animationEffects[0]?n.animation.animationEffects[0].options={delay:t,duration:e}:n.animation={animationEffects:[{options:{delay:t,duration:e}}]}}var st=n("8e5e");function ct(t){if(!t&&!t.length)return{width:0,height:0,left:0,top:0};var e=[1/0,1/0],n=[-1/0,-1/0];return t.map((function(t){var i=t.left,r=t.top,a=t.width,o=t.height,s=i,c=r,l=i+a,u=r+o;return e=[Math.min(e[0],s),Math.min(e[1],c)],n=[Math.max(n[0],l),Math.max(n[1],u)],[[s,c],[l,u]]})),{width:n[0]-e[0],height:n[1]-e[1],left:e[0],top:e[1]}}function lt(t,e){var n=t.getComponentById(e.$id);if(!n)return{width:0,height:0,left:0,top:0};var i=ut(n.$el,t);return i}function ut(t,e){var n=t.querySelector(".element-main"),i=t.querySelectorAll(".element-main span"),r=Object(I["a"])(i).map((function(t){return t.offsetWidth})),a=r.reduce((function(t,e){return e+t})),o=n.style.width,s=n.style.height;n.style.width="auto",n.style.height="auto";var c=t.style.transform;t.style.transform="";var l={width:n.offsetWidth,height:n.offsetHeight,top:n.offsetTop,left:n.offsetLeft};if(a>n.offsetWidth){var u=Object(I["a"])(i).map((function(t){return t.getBoundingClientRect()})),d=ct(u),h=d.width,f=d.height;l.width=h/e.global.zoom,l.height=f/e.global.zoom}return n.style.width=o,n.style.height=s,t.style.transform=c,l}n("e25e");function dt(t,e){if(t&&e)while(e.elements.find((function(e){return e.$id!==t.$id&&parseInt(e.left)===parseInt(t.left)&&parseInt(e.top)===parseInt(t.top)})))t.left+=20,t.top+=20}var ht=function(t,e,n){return{_getOperateModeElements:function(t){if(t=t||this.currentLayout,!t)return[];var e="mosaic"===this.operateMode;return e?t.mosaic.paths:t.elements},createAsyncComponent:function(n){var i=this;return Object(T["a"])(Object(A["a"])().mark((function r(){var a,o,s,c,l,u;return Object(A["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=n.type,r.next=3,i.getAsyncPackage(a);case 3:if(o=r.sent,o){r.next=6;break}return r.abrupt("return");case 6:return s=o.methods,c=o.model,l=o.layoutComponent,u=o.editComponent,u&&(["image","video","mask"].includes(a)?t.component("mask-editor",hr(t,u)):t.component(a+"-editor",hr(t,u))),e[a]=c,i.supportTypesMap[a]||(i.supportTypes=i.supportTypes.concat(a)),s&&Object.keys(s).forEach((function(t){s[t]=s[t].bind(i)})),Object.assign(i,s),r.abrupt("return",t.component(a+"-element",hr(t,l)));case 13:case"end":return r.stop()}}),r)})))()},getAsyncPackage:function(t){if(!this.supportTypes.includes(t)&&n[t]){var e=Object(O["isFunction"])(n[t])?n[t]():n[t];return e.then((function(t){return t.default}))}return null},autoImportElementByTemplet:function(t){var e=this;return P.a.try((function(){var e=t.layouts,n={text:!0,group:!0,image:!0,svg:!0,flex:!0,mask:!0,ninePatch:!0};return U["a"].walkTemplet((function(t){t.type&&(n[t.type]=!0)}),!0,e),Object.keys(n)})).then((function(t){return P.a.map(t,(function(t){return e.createAsyncComponent({type:t})}))}))},createElement:function(t,n){var i=this,r=t&&t.type;if(!r)throw new Error("No type to create element:"+JSON.stringify(t));"tag"===r&&t.elements&&t.elements.length&&(r="group",t.type="group"),"image"===t.type&&t.url&&(t.url.includes("data:image/gif")||/\.gif/i.test(t.url))&&(t.resourceType="gif"),this.isGroup(t)&&(t.elements=(t.elements||t.elems||[]).map((function(t){return t=i.createElement(Object.assign({},t),n),t.disableEditable(),t})),delete t.elems),"watermark"===t.type&&(t.template=t.templateV2||t.template,delete t.templateV2,t.template=this.createElement(Object.assign({},t.template)));var a=e[t.type]||$["a"];t.type.includes("mosaic")&&(a=V);var o=new a(t,this.options);o.version&&"text"===o.type&&!Object(q["a"])(o.version,st["a"])||(o.version=M["a"].version),n||(n=this.currentLayout);var s=t.type.includes("mosaic");if(!s&&n&&Object(O["isUndefined"])(t.left)&&(o.left=Math.max(0,(n.width-o.width)/2)),!s&&n&&Object(O["isUndefined"])(t.top)&&(o.top=Math.max(0,(n.height-o.height)/2)),"table"===r||/text/i.test(r)){var c=this.options,l=c.fontsMap,u=c.fontList,d=c.defaultFont,h=function(t){void 0===t.fontFamily||l[t.fontFamily]||(t.fontFamily=d&&l[d]?d:u[0].name)};h(o),o.contents&&o.contents.forEach(h)}return this.isGroup(o)&&o.elements.forEach((function(t){t.$parentId=o.$id})),"watermark"===r&&(o.template.$parentId=o.$id),o},addElement:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=t;t&&t.$id&&t.uuid||(r=this.createElement(t,e)),e||(e=this.currentLayout);var a=r.type.includes("mosaic")?this._getOperateModeElements(e):e.elements;return e&&a&&("number"===typeof i&&i>-1?a.splice(i,0,r):a.push(r),n&&this.makeSnapshot("add_element",e)),this.isGroup(e)&&(r.$parentId=e.$id),this.isGroup(r)&&r.elements.forEach((function(t){t.$parentId=r.$id})),r},removeElement:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e||(e=this.currentLayout),e){var r=this.currentElement;if(t?Array.isArray(t)||(t=[t]):t=this.getSelectedElements(!0),t.length){var a=this._getOperateModeElements(e);t=t.filter((function(t){var e=a.indexOf(t);if(e>-1&&a.splice(e,1),n.removeDataBinding(t),t.linkId){var i=n.getLinkedElements(t);i.length<=1&&i.forEach((function(t){t.linkId=""}))}return e>-1})),this.lazyUpdatePicker(),t.indexOf(r)>-1&&this.focusElement(null);var o=!i;return this.$events.$emit("element.remove",t,o),i&&this.makeSnapshot("remove_element"),t}}},replaceElement:function(t,e,n){t=this.getElement(t),e=this.createElement(e),n||(n=this.currentLayout);var i=n.elements.includes(t)?n:this.getParentGroups(t).pop();if(!i)return null;var r=i.elements.indexOf(t);i.elements.splice(r,1,e),e.$id=t.$id,e.$parentId=t.$parentId,e.elements&&e.elements.forEach((function(t){t.$parentId=e.$id})),t.$tempGroupId&&(e.$cacheParentId=t.$cacheParentId,e.$tempGroupId=t.$tempGroupId);var a=this.getLinkedElements(t);return a.length<=1&&a.forEach((function(t){t.linkId=""})),this.makeSnapshot("replace_element"),e},changeElement:function(t,e){var n=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e=e?[].concat(e):[this.currentElement],null!==e[0]&&(e.forEach((function(e){var i=null,r=e.type;if(/text/i.test(r)){var a={};i={},Object.keys(t).forEach((function(e){R["d"][e]?a[e]=t[e]:i[e]=t[e],"listStyle"===e&&(a[e]=t[e])}));var o=Object.keys(a).length>0;o&&("text"===r||"effectText"===r?n.changeTextContents(a,e,!1):"styledText"===r?n.changeStyledTextContents(a,e,!1):n.changeThreeTextContents(a,e,!1))}else"watermark"===r&&n.changeWatermark(t,e,!1);Object(O["mergeWith"])(e,i||t,(function(t,e){if(Object(O["isArray"])(t)){var n=t.slice();return Object(O["merge"])(n,e)}})),"image"!==r&&"mask"!==r||void 0===t.url||(Object(O["set"])(e,"metaInfo.thirdParty",null),z["a"].keepElementMaterialMeta(e,[z["a"].IMAGE_EFFECT,z["a"].FILTER,z["a"].ANIMATION],"type"),e.linkId&&n.$events.$emit("element.change",e,"url"))})),i&&this.makeSnapshot("change_element"))},copyElement:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t=t?[].concat(t):this.getSelectedElements(!0),t=t.filter((function(t){return 0!==t.type.indexOf("$")})),t.length&&(t=t.map((function(t){var n=Object(o["a"])({},t);return e.createElement(n)})),this.options.clipboard.set(t),n&&(this.clipboard=t)),t},cutElement:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t=t?[].concat(t):this.getSelectedElements(!0),t.length&&(this.removeElement(t,null,!0),t=t.filter((function(t){return 0!==t.type.indexOf("$")})),this.copyElement(t,e)),t},pasteElement:function(t,e,n){var i=this;t=t||this.clipboard,e=e||this.currentLayout;var r=n||{},a=r.noOffset,o=r.getArguments,s=void 0===o?[]:o,c=this.options.clipboard,l=c.get.apply(c,Object(I["a"])(s));if(l&&(t=l.map(this.createElement)),Y(t),t=t.filter((function(t){return!(!t||!t.type)&&(!("table"===t.type&&!Array.isArray(t.gridData))&&!("mosaic"!==i.operateMode&&t.type.includes("mosaic")))})),t.length){this.clearSelectedElements();var u={};return t=t.map((function(t){t.$selected=!1,t=i.createElement(t.clone()),a||dt(t,e),t.lock=!1;var n=i.addElement(t,e),r=n.linkId;return r&&(u[r]||(u[r]=[]),u[r].push(n)),n})),Object.keys(u).forEach((function(t){var n=u[t];if(i.getLinkedElements(n[0],e).length<=n.length){var r=n.length>1?U["a"].uuid():"";n.forEach((function(t){t.linkId=r}))}})),this.focusElement(1===t.length?t[0]:null),this.$events.$emit("base.paste",t),this.makeSnapshot("paste_element",null,!0),t}},cloneElement:function(t){return t=t?[].concat(t):this.getSelectedElements(!0),t=t.filter((function(t){return 0!==t.type.indexOf("$")})),t=this.copyElement(t,!1),this.pasteElement(t)},lockElement:function(t){this.changeElement({lock:!0},t)},unlockElement:function(t){this.changeElement({lock:!1},t)},getElementsByPoint:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.currentLayout,i=[],r=this.options,a=this._getOperateModeElements(n),o=a.filter((function(t){return!t.hidden&&!t.frozen}));return o&&o.length?(t-=n.left||0,e-=n.top||0,r.canvasOverflowHidden&&(t<0||e<0||t>n.width||e>n.height)||Object(O["forEachRight"])(o,(function(n){var r=null,a=U["a"].getElementRect(r||n,1);U["a"].pointInRect(t,e,a)&&i.push(n)})),i):i},getElementByPoint:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.currentLayout,i=this.getElementsByPoint(t,e,n);return i[0]||null},elementFromPoint:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.currentLayout,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this.getElementsByPoint(t,e,n);return i?r:r[0]||null},seek:function(t,e){e=this.getElement(e),e&&"number"===typeof e.$currentTime&&(e.$currentTime=t)},setTimeRange:function(t,e,n){n=this.getElement(n),n&&ot(t,e,n)},getTimeRange:function(t){return t=this.getElement(t),at(t)},focusElement:function(t){if(t=this.getElement(t,{queryCurrntElement:!1}),t&&t.type.includes("$"))this.currentElement=t;else{var e=this.getParentGroups(t)[0];if(this.isGroup(e))return this.currentElement=e,void(this.currentSubElement=t);t!==this.currentElement&&(this.currentElement=t)}},focusElementByPoint:function(t,e,n){var i,r=this;if(!this.currentLayout)return null;if(this.currentLayout.$loaded&&"design"===this.mode){var a=this.$picker.pick(t,e);if(!a)return;i=a.$element}else i=this.elementFromPoint(t,e,n);if(!i||i.frozen)return null;if(i!==this.currentElement&&(this.currentElement=i),this.isGroup(i)){"flow"===this.mode&&(n=n||this.currentLayout,t-=n.left||0,e-=n.top||0);var s=Object(O["cloneDeep"])(i),c=[];this.walkTemplet((function(t,e){r.isGroup(t)&&c.push((function(){e.elements.splice(e.elements.indexOf(t),0,Object(o["a"])(Object(o["a"])({},t),{},{type:"cloneGroup"}))}))}),!0,[s]),c.forEach((function(t){return t()}));var l=this.collapseGroup(s,!0),u=this.getElementByPoint(t,e,Object(o["a"])(Object(o["a"])({},n),{},{left:0,top:0,elements:l}));u=u&&this.getElement(u.$id,{deep:!0}),this.currentSubElement=u}return i},getElement:function(t,e){if(e=Object(O["defaults"])(e,{queryCurrntElement:!0,deep:!1}),void 0===t&&e.queryCurrntElement)return this.currentElement;if(!t)return null;if(t&&t.$id)return t;var n=null,i=[].concat(e.layouts||e.layout||this.currentLayout);return this.walkTemplet((function(e){if(e.$id===t)return n=e,!1}),e.deep,i),n},getSelectedElements:function(t){var e=this.currentLayout,n=this._getOperateModeElements(e);n=n.filter((function(t){return t.$selected}));var i=this.currentElement;return i&&t&&n.indexOf(i)<0&&n.push(i),n},clearSelectedElements:function(){var t=this.selectedElements;t.length&&t.forEach((function(t){t.$selected=!1}))},selectElement:function(t){t=this.getElement(t),t&&(this.selector.add(t),this.selector.showSelector())},selectElements:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e=[].concat(e),e&&(e.forEach((function(e){t.selector.add(e)})),this.selector.showSelector())},unselectElement:function(t){t=this.getElement(t),t&&(this.selector.remove(t),this.selector.showSelector())},alignmentElements:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selectedElements;U["a"].alignment(t,e),this.selector.showSelector(),this.makeSnapshot("apply_alignment")},goElementIndex:function(t,e){var n=this.currentLayout;if(n){var i=n&&n.elements||[];t=t?[].concat(t):this.getSelectedElements(!0);var r=null;t=t.filter((function(t){return!!(t&&t.type.indexOf("$")<0&&(r=i.indexOf(t),r>=0&&r<=i.length-1))&&(i.splice(r,1),r+=e,r=Math.max(0,r),r=Math.min(r,i.length),!0)})),i.splice.apply(i,[r,0].concat(Object(I["a"])(t))),this.makeSnapshot("apply_alignment")}},setElementToTop:function(t){this.goElementIndex(t,this.currentLayout.elements.length)},setElementToBottom:function(t){this.goElementIndex(t,-this.currentLayout.elements.length)},forwardElement:function(t){this.goElementIndex(t,1)},backwardElement:function(t){this.goElementIndex(t,-1)},getPointsByElement:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t=t||this.currentElement,U["a"].getPointsByElement(t,e||this.zoom)},flipElement:function(t,e){if(e=this.getElement(e),e){var n={},i="x"===t?"scaleX":"scaleY";n[i]=-e[i],this.changeElement(n,e)}},getOverlapElements:function(t){t||(t=this.currentElement);var e=[];return this.currentLayout.elements.forEach((function(n){U["a"].getRectIntersection(t,n)&&e.push(n)})),e},showElementBlink:function(t){t=this.getElement(t),t&&(t.$blinking=!0)},hideElementBlink:function(t){t=this.getElement(t),t&&(t.$blinking=!1)},showElementEditor:function(t){if(t=this.getElement(t),t){var e=t.type;["text","styledText","threeText","effectText"].includes(e)&&t.editable&&!t.lock?this.showTextEditor(t):"image"===e?this.showImageCroper(t):"video"===e?this.showVideoCroper(t):"mask"===e&&this.showMaskEditor(t)}},resizeElements:function(t,e,n){return t=t?[].concat(t):this.getSelectedElements(!0),Object(L["c"])(t,e,n)},getUsedFontList:function(t){var e=this;t=t||this.layouts;var n={},i=[];return this.walkTemplet((function(t){t.fontFamily&&i.push(t)}),!0,t),i.forEach((function(t){var i=t.contents,r=t.fontFamily,a=[{fontFamily:r,content:"1"}];(i||a).forEach((function(t){var i=e.options.fontsMap[t.fontFamily]||e.options.fontsMap[r]||e.options.defaultFont,a=/<br>|\r|\n/g;if(i&&(!t.content||t.content.replace(a,""))){var o=i.name||i.family;n[o]||(n[o]=Object(O["cloneDeep"])(i))}}))})),Object.keys(n).map((function(t){return n[t]}))},replaceElementsFont:function(t,e,n){var i=this.options.defaultFont,r=this.options.fontsMap[i];e=e||r&&i||this.options.fontList[0].name,n=n||this.layouts;var a=function(e){return e.fontFamily===t};this.walkTemplet((function(t){if(t.fontFamily){var n=t.contents;a(t)&&(t.fontFamily=e),n&&n.forEach((function(t){a(t)&&(t.fontFamily=e)}))}}),!0,n)},getLinkElementsType:function(t){if(t=t?[].concat(t):this.getSelectedElements(),t.length<2)return null;var e=t[0],n=this.options.supportLinkElements.find((function(t){return t.types.includes(e.type)}));return!n||t.some((function(t){return!n.types.includes(t.type)}))?null:n},linkElements:function(t){var e=this;t=t?[].concat(t):this.getSelectedElements();var n=this.getLinkElementsType(t);if(n){var i=t.sort((function(t,e){return t.$weight-e.$weight})),r=i[0],a=r.linkId||U["a"].uuid();r.linkId=a,i.forEach((function(t){t!==r&&(e.getLinkedElements(t).forEach((function(t){t.linkId=a})),t.linkId=a)})),this.$events.$emit("element.change",r,n.propName),this.makeSnapshot("link_element")}},unlinkElements:function(t){t=t?[].concat(t):this.getSelectedElements(!0);var e={};t.forEach((function(t){var n=t.linkId;t.linkId="",n&&!e[n]&&(e[n]={selected:!1,list:[]})})),this.walkTemplet((function(t){var n=e[t.linkId];n&&(n.selected=n.selected||t.$selected,n.list.push(t))}),!0),Object.keys(e).forEach((function(t){var n=e[t];n.list.length<=1&&n.list.forEach((function(t){t.linkId=""}))})),this.makeSnapshot("unlink_element")},getLinkedElements:function(t,e){e=e?[].concat(e):this.layouts,t=t||this.currentSubElement||this.currentElement;var n=t.linkId;if(!n)return[];var i=[];return this.walkTemplet((function(t){t.linkId===n&&i.push(t)}),!0,e),i},getParentGroups:function(t,e){var n=[];t=this.getElement(t,{deep:!0,layout:e});while(t&&t.$parentId)t=this.getElement(t.$parentId,{deep:!0,layout:e}),t&&n.push(t);return n.reverse()},isGroup:function(t){return Object(G["d"])(t)},resetBrushBounding:function(t){var e=this.getElement(t);["brush","mosaicBrush"].includes(e.type)&&Object(L["a"])(e,!0)},getVisualRect:function(t){var e=this,n={width:0,height:0,left:0,top:0};if(!t)return n;if(Object(G["d"])(t)){var i=[];return this.walkTemplet((function(t){var n=e.getVisualRect(t);i.push(n)}),!1,[t]),n=ct(i),n.left=n.left+t.left,n.top=n.top+t.top,n}return"text"===t.type?(n=lt(this,t),n.left=n.left+t.left,n.top=n.top+t.top,n):(n.width=t.width,n.height=t.height,n.left=t.left,n.top=t.top,n)}}},ft=n("53ca");function mt(t,e){if("object"===Object(ft["a"])(t)&&null===e)return t}var gt={_resetLayoutTop:function(){"flow"===this.mode&&this.layouts.reduce((function(t,e){return e.top=t,t+e.height}),0)},copyLayout:function(t){var e=this,n=Object(O["cloneDeep"])(t);return delete n.$id,delete n.uuid,Y(n.elements,{deleteLinkId:!0}),n.elements=n.elements.map((function(t){return t&&"function"===typeof t.clone?e.createElement(t.clone()):e.createElement(t)})),this.makeSnapshot("copy_layout",t,!0,"templet"),n},getLayout:function(t){if(Object(O["isNumber"])(t)){var e=t%this.layouts.length;t=this.layouts[e]}return Object(O["isString"])(t)&&(t=this.layouts.find((function(e){return e.$id===t}))),t||this.currentLayout},createLayout:function(t){return new b["b"](t,this)},addLayout:function(t,e){return t=this.createLayout(t),Object(O["isNumber"])(e)?this.layouts.splice(e,0,t):this.layouts.push(t),this._resetLayoutTop(),this.makeSnapshot("add_layout",t,!1,"templet"),this.currentLayout||(this.currentLayout=t),t},removeLayout:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t=this.getLayout(t),t){this.clearLayout(t);var n=this.layouts.indexOf(t);n>-1&&this.layouts.splice(n,1),t===this.currentLayout&&(this.currentLayout=this.layouts[e]||null),this._resetLayoutTop(),this.makeSnapshot("remove_layout",t,!0,"templet")}},replaceLayout:function(t,e){var n=this.getLayout(t),i=this.layouts.indexOf(n);return n&&(this.clearLayout(n),i>-1&&this.layouts.splice(i,1)),e=this.addLayout(e,i),this.makeSnapshot("replace_layout",e,!1,"templet"),e},clearLayout:function(t){t=this.getLayout(t),t&&(t.elements=[],t===this.currentLayout&&(this.currentElement=null),this.makeSnapshot("clear_layout"))},changeLayout:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e=[].concat(e||this.currentLayout),e.forEach((function(e){t=Object(b["a"])(t,e.background),Object(O["get"])(t,"background.image.url")!==Object(O["get"])(e,"background.image.url")&&z["a"].keepElementMaterialMeta(e,[].concat(Object(I["a"])(z["a"].POSTERS),Object(I["a"])(z["a"].FILTER),[z["a"].BORDER,z["a"].MOSAIC])),Object(O["assign"])(e,t),Object(b["c"])(e)})),this._resetLayoutTop(),i&&this.makeSnapshot("change_layout",null,n,"templet")},changeLayoutBorder:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=[].concat(e||this.currentLayout),t||(t=Object(O["cloneDeep"])(M["a"].border)),e.forEach((function(e){e.border=Object(O["assignWith"])(e.border,t,mt)})),this.makeSnapshot("change_layout_border",null,n,"templet")},toggleLayout:function(t){if(Object(O["isNumber"])(t)){var e=t%this.layouts.length;t=this.layouts[e]}t&&t!==this.currentLayout&&((this.currentCropElement||this.currentEditMask||this.currentEditWatermark)&&this.$events.$emit("element.editApply",this.currentElement),this.currentLayout.$backgroundSelected=!1,this.currentLayout.$backgroundEditing=!1,this.clearSelectedElements(),this.currentElement=null,this.currentLayout=t)},getLayoutByPoint:function(t,e){var n=t.y,i=null,r=(e||this.layouts).find((function(t){return i=t,n<t.top+t.height}));return r||i},getLayoutByElement:function(t){var e=this,n=this.layouts;return t=t||this.currentElement,n.find((function(n){var i;return e.walkTemplet((function(e){if(t===e)return i=!0,!1}),!0,[n]),i}))},setLayoutByElement:function(t){var e=this.getLayoutByElement(t);e&&this.toggleLayout(e)},setLayoutByLayoutId:function(t){this.currentLayout=this.layouts.find((function(e){return e.$id===t}))},switchLayout:function(t,e){var n=this.layouts,i=null,r=null;Object(O["isNumber"])(t)?(i=t%n.length,t=n[i]):i=n.indexOf(t),Object(O["isNumber"])(e)?(r=e%n.length,e=n[r]):r=n.indexOf(e),n.splice(i,1,e),n.splice(r,1,t),this.makeSnapshot("switch_layout")},focusLayoutBackground:function(t){t=this.getLayout(t),t.$backgroundImageInfo&&this.editable&&(this.clearSelectedElements(),this.currentElement=null,this.currentLayout=t,t.$backgroundSelected=!0)},showBackgrounCroper:function(t){t=this.getLayout(t),t.$backgroundImageInfo&&this.editable&&(this.focusLayoutBackground(t),t.$backgroundEditing=!0)},hideBackgrounCroper:function(t){t=this.getLayout(t),t.$backgroundEditing=!1}},pt=(n("25f0"),n("66cb")),vt=n.n(pt),bt=(n("07ac"),function(){return"#"+Math.random().toString(16).substr(-6)}),yt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=100,n=0;while(1){var i=bt();if(n++,!t[i]&&"#ffffff"!==i)return i;if(n>e)throw new Error("Could not generate new hit test color.")}},wt=function(t,e,n,i,r,a,o,s,c){var l=r.naturalWidth||r.width,u=r.naturalHeight||r.height;if(n.width=o,n.height=s,i.shadowBlur=2,i.shadowColor="black",i.drawImage(r,0,0,l,u,0,0,o,s),c){for(var d=i.getImageData(0,0,o,s),h=0;h<d.data.length;h+=4)d.data[h+3]=0!==d.data[h+3]?255:0;i.putImageData(d,0,0)}t.width=o,t.height=s,e.save(),e.drawImage(n,0,0,o,s),e.globalCompositeOperation="source-in",e.fillStyle=a,e.fillRect(0,0,o,s),e.restore()},_t=function(t,e,n,i,r,a){if(e){var o=e.a,s=e.b,c=e.c,l=e.d,u=e.tx,d=e.ty,h=n+r/2,f=i+a/2;t.save(),t.translate(h,f),t.transform(o,s,c,l,u,d),t.translate(-h,-f)}},xt=function(t,e){var n,i=0;for(n=0;n<t.length;n++)i+=(t[n]-e[n])*(t[n]-e[n]);return Math.sqrt(i)},kt=function(){function t(e){Object(i["a"])(this,t),this.options=Object.assign({defaultSize:1500},e),this.hitCanvas=document.createElement("canvas"),this.hitCtx=this.hitCanvas.getContext("2d"),this.clipCanvas=document.createElement("canvas"),this.clipCtx=this.clipCanvas.getContext("2d"),this.imgCanvas=document.createElement("canvas"),this.imgCtx=this.imgCanvas.getContext("2d"),this.colorMap={},this.zoom=1,this.translucentToOpaque=!0}return Object(r["a"])(t,[{key:"drawDefault",value:function(t,e){var n=t.transform,i=t.x,r=t.y,a=t.width,o=t.height,s=this.hitCtx;return _t(s,n,i,r,a,o),s.fillStyle=e,s.fillRect(i,r,a,o),s.restore(),Promise.resolve()}},{key:"drawSvg",value:function(t,e){var n=this,i=t.transform,r=t.x,a=t.y,o=t.width,s=t.height,c=this.hitCtx,l=this.clipCanvas,u=this.clipCtx,d=this.imgCanvas,h=this.imgCtx,f=this.translucentToOpaque,m=(new XMLSerializer).serializeToString(t.$el),g=new Image;return new Promise((function(t,n){g.onload=function(){_t(c,i,r,a,o,s),wt(l,u,d,h,g,e,o,s,f),c.drawImage(l,r,a),c.restore(),t()},g.onerror=function(){n(new Error("svg 加载失败，可能包含非法 image"))};var p="data:image/svg+xml; charset=utf8, ";g.src=p+encodeURIComponent(m)})).catch((function(){return n.drawDefault(t,e)}))}},{key:"drawImage",value:function(t,e){var n=t.transform,i=t.x,r=t.y,a=t.width,o=t.height,s=this.hitCtx,c=this.clipCanvas,l=this.clipCtx,u=this.imgCanvas,d=this.imgCtx,h=this.translucentToOpaque;return _t(s,n,i||0,r||0,a,o),wt(c,l,u,d,t.$el,e,a,o,h),s.drawImage(c,i,r),s.restore(),Promise.resolve()}},{key:"update",value:function(t,e,n){var i=this,r=this.options.defaultSize,a=Math.min(r/e,r/n,1);return this.hitCanvas.width=e*a,this.hitCanvas.height=n*a,this.colorMap={},this.zoom=a,t.reduce((function(t,e){return t.then((function(){var t=e,n=t.type,r=t.x,o=t.y,s=t.width,c=t.height;if(!(!s||!c||s<1||c<1)){e=Object.assign({},e,{x:r*a,y:o*a,width:Math.max(1,s*a),height:Math.max(1,c*a)});var l=yt(i.colorMap);return i.colorMap[l]=e,"default"===n?i.drawDefault(e,l):"image"===n?i.drawImage(e,l):"svg"===n?i.drawSvg(e,l):void 0}}))}),Promise.resolve())}},{key:"pick",value:function(t,e){var n=this.zoom,i=this.hitCtx.getImageData(t*n,e*n,1,1).data,r=vt()("rgba(".concat(i.toString())).toHexString();if(!i||0===i[3])return null;if(this.colorMap[r])return this.colorMap[r];var a={},o=Object.keys(this.colorMap).map((function(t){var e=Object.values(vt()(t).toRgb()),n=xt(e,i);return a[n]=t,n}));return r=a[Math.min.apply(Math,Object(I["a"])(o))],this.colorMap[r]||null}}]),t}(),Et=n("e002"),Ot=n("4281"),St=function(t){return{_checkTempletLoaded:function(){var t=this,e=this.options,n=this.global,i=this.layouts.filter((function(t){return!t.$loaded}));if(i.length||!n.$loaded){var r=0;if(i.forEach((function(e){var n=!1;t.walkTemplet((function(t){if(!t.$loaded)return n=!0,!1}),!0,[e]),n||Object(O["get"])(e,"background.image")&&!e.$backgroundLoaded||e.border.enable&&!e.border.$loaded||(e.$loaded=!0,r+=1,t.supportTypes.includes("text")&&t.updateCurrentSelection(),t.$emit("layoutLoaded",e))})),!this.$watermarkLoadPromsie){var a=this.layouts.some((function(t){return t.watermarkEnable||Object(O["get"])(t,"background.watermarkEnable")})),o=n.showWatermark||!!Object(O["get"])(n,"layout.watermarkEnable")||a;this.$watermarkLoadPromsie=o?P.a.map([e.watermarkImages.layoutRepeat,e.watermarkImages.layoutNoRepeat],(function(t){return t&&U["a"].loadImage(t)})):P.a.resolve()}r>=i.length&&(!Object(O["get"])(n,"layout.backgroundImage")||n.$backgroundLoaded)&&this.$watermarkLoadPromsie.finally((function(){n.$loaded=!0,n.$rendered=!0,t.$emit("templetLoaded")}))}},checkTempletLoaded:function(){this.checkTempletLoadedLazy||(this.checkTempletLoadedLazy=Object(O["debounce"])(this._checkTempletLoaded,96)),this.checkTempletLoadedLazy()},resetTemplet:function(){this.resetSnapshot(),this.resetDataSource(),this.currentLayout=null,this.currentElement=null,this.layouts=[]},setTemplet:function(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return P.a.try((function(){if(!e)throw new Error("No templet give");return n.resetTemplet(),n.autoImportElementByTemplet(e)})).then(Object(T["a"])(Object(A["a"])().mark((function i(){var r;return Object(A["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n.global=Object(O["merge"])(n.global,e.global),r=Object.keys(t),i.next=4,P.a.all(r.map((function(e){if(!n.supportTypes.includes(e)&&!Object(O["isFunction"])(t[e]))return n.createAsyncComponent({type:e})})));case 4:return n.global.zoom=1,n.global.$loaded=!1,n.type=e.type||n.global.type||"poster",i.abrupt("return",null);case 8:case"end":return i.stop()}}),i)})))).then((function(){var t=e.layouts||[];return t.length||t.push({}),n.loadFontSubset(t),t.forEach((function(t){n.addLayout(t)})),n.currentLayout=n.layouts[i],null})).then((function(){return n.resetSnapshot(),n.$nextTick()})).then((function(){return n.$picker=new kt({defaultSize:n.options.layerPickerDefaultSize}),n.$emit("templetCreated"),n.checkTempletLoaded(),n.walkTemplet((function(t){t.imageUrl&&Object(Ot["d"])(t,t.imageUrl)}),!0,n.layouts),null}))},exportTemplet:function(t,e){var n=this;if(e=Object(O["defaults"])(e,{keepPrivateProps:[],clean:!1}),t=t||this.layouts,e.clean&&Object(O["get"])(this,"options.resource.upload"))return Object(Ot["a"])(this,t,e).then(JSON.stringify);var i=function(t){var e=n.$refs.tempGroup,i=e&&n.$refs.tempGroup.currentTempGroupId;i&&(t.layouts=t.layouts.map((function(t){return Object(o["a"])({},t)})),t.layouts.forEach((function(t){var n=-1,r=[];if(t.elements=t.elements.filter((function(t,e){return t.$tempGroupId===i?(n=-1===n?e:n,r.push(t),!1):t})),r.length){var a=e.cachesToGroup(i);t.elements.splice(-1===n?t.elements.length-1:n,0,a)}})))},r={version:this.version,type:this.type,global:this.global,layouts:t||[]};return i(r),this.deserializeModel(r,e)},exportTempletData:function(t,e){t=t||this.layouts;var n=this.exportTemplet(t,e).then((function(t){return JSON.parse(t)}));return n},_exportResourceBlobs:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.layouts,n=arguments.length>1?arguments[1]:void 0,i=Object(Ot["b"])(this);n=Object(O["defaults"])(n,i);var r=this.walkTemplet((function(e){var i=t.supportTypesMap[e.type];return i&&Object(Ot["e"])(e,n).then((function(t){return t&&(t.element=e),t}))}),!0,e).then((function(t){return t.filter((function(t){return t&&Object.keys(t).length>1}))})),a=P.a.map(e,(function(t){var e=n.layout;return e&&Object(Ot["e"])(t,n).then((function(e){return e&&(e.layout=t),e}))})).then((function(t){return t.filter((function(t){return t&&Object.keys(t).length>1}))}));return P.a.all([r,a]).then((function(t){var e=Object(k["a"])(t,2),n=e[0],i=e[1];return[].concat(n,i)}))},exportResourceBlobs:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.layouts,e=arguments.length>1?arguments[1]:void 0;return this._exportResourceBlobs(t,e).then((function(t){return t.filter((function(t){return!t.imageUrl||t.imageUrl instanceof Blob||delete t.imageUrl,Object.keys(t).length>1}))}))},walkTemplet:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.layouts;return U["a"].walkTemplet(t,e,n)},exportElement:function(t,e){return this.deserializeModel(t,e)},deserializeModel:function(t,e){var n=this;e=Object(O["defaults"])(e,{keepPrivateProps:[],clean:!1});var i=P.a.bind(this);return i.then((function(){var i={};e.keepPrivateProps.forEach((function(t){i[t]=!0}));var r=function(t){if(t&&"string"===typeof t){var e=vt()(t);return e.isValid()?e.toString("hex8"):t}return t};return JSON.stringify(t,(function(t,e){if("$"!==t[0]||i[t]){if(("color"===t||"backgroundColor"===t||"stroke"===t||"fill"===t)&&"string"===typeof e)return r(e);if("colors"===t||"aggregatedColors"===t){if(e instanceof Array)return e.map((function(t){return r(t)}));var a={};for(var o in e)a[o]=r(e[o]);return a}if("fontFamily"===t){var s=n.options,c=s.fontsMap,l=s.defaultFont,u=c[e]||l;return u.name||u.family||e}if(e&&"object"===Object(ft["a"])(e)&&"text"===e.type&&e.contents instanceof Array&&e.contents.length){var d=U["b"].mergeChild(e.contents);1===d.length&&(e=JSON.parse(JSON.stringify(e)),e.content=d[0].content,Object.keys(d[0]).forEach((function(t){Object.prototype.hasOwnProperty.call(e,t)&&R["d"][t]&&(e[t]=d[0][t])})),e.contents=null)}return e&&e.parseTransform&&"object"===Object(ft["a"])(e)&&["image","mask"].includes(e.type)&&e.$id&&(e=Object.assign({},e,{imageTransform:Object(Et["b"])(e)})),e&&e.exportData?e.exportData():e}}))}))}}},jt=(n("c740"),n("b494")),It={resetSnapshot:function(){this.$snapshots.reset(),this.makeSnapshot("init",null,!0,"templet")},makeSnapshot:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"layout";if(this.innerProps.snapshotable){n||(n=this.currentLayout);var a=this.layouts.findIndex((function(t){return t===n}));"templet"===r&&(a=-1);var o={tag:t,scope:r,elementId:this.currentElement?this.currentElement.$id:null,layoutId:n?n.$id:null,layouts:this.layouts,global:{unit:this.global.unit,dpi:this.global.dpi,layout:this.global.layout,metaInfo:this.global.metaInfo,cover:this.global.cover}},s=function(){e.snapshotSize=c.length;var t=[c.hasRedo,c.hasUndo];e.hasRedo=t[0],e.hasUndo=t[1]},c=this.$snapshots;i&&!this.options.snapshotDisableSync?(c.pushSync(o,a),s()):c.push(o,a).then(s)}},makeSnapshotByElement:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!t||"$"===t.type.charAt(0)&&"$selector"!==t.type||this.makeSnapshot("change_element",null,e)},applySnapshot:function(t,e){var n=this,i=this.currentLayout&&this.currentLayout.$id,r=null;this.innerProps.snapshotable=!1,this.snapshotSize=this.$snapshots.length;var a=[this.$snapshots.hasRedo,this.$snapshots.hasUndo];this.hasRedo=a[0],this.hasUndo=a[1],t.global&&Object.assign(this.global,t.global);var s=function(e,a){e.elements=[],a.background&&!a.$backgroundLoaded&&(e.background={}),a.border&&!a.border.$loaded&&(e.border=null),n.$nextTick((function(){var s=[],c=function(e){var i=n.createElement(e);return i.reset(),i.elements&&n.walkTemplet((function(t){t.reset()}),!0,[i]),i.$id===t.elementId&&(r=i),i.$tempGroupId&&s.push(i),i};e.elements=a.elements.map(c),Object.keys(a).forEach((function(t){"elements"!==t&&("background"===t&&a.background?(e.background=Object(o["a"])({},a.background),e.background.image&&(e.background.image.transform=Object(jt["b"])(a.background.image.transform),e.background.image.imageTransform=Object(jt["b"])(a.background.image.imageTransform))):e[t]=a[t])})),e.mosaic.paths=a.mosaic.paths.map(c),n.currentElement=r,r&&(r.type.includes("mosaic")&&"mosaic"!==n.operateMode||!r.type.includes("mosaic")&&"mosaic"===n.operateMode)&&(n.currentElement=null),i!==t.layoutId&&(n.currentElement=null),n.$refs.tempGroup&&n.$refs.tempGroup.syncRect(s)}))},c=this.layouts.find((function(e){return e.$id===t.layoutId})),l=this.layouts.find((function(t){return t.$id===e.layoutId})),u=function(t){return"templet"===t.scope&&"init"!==t.tag},d=!u(t)&&!u(e);if((c||l)&&d){var h=t.layouts.find((function(e){return e.$id===t.layoutId})),f=e&&t.layouts.find((function(t){return t.$id===e.layoutId}));c&&h&&s(c,h),l&&c!==l&&f&&s(l,f)}else{this.layouts.length>t.layouts.length&&(this.layouts=this.layouts.splice(0,t.layouts.length));for(var m=function(e){var i=n.layouts[e],r=t.layouts[e];!i&&r?(r.elements=r.elements.map((function(t){return n.createElement(t,r)})),n.addLayout(r,void 0,!1)):i&&!r?n.removeLayout(i,!1):s(i,r)},g=0;g<Math.max(this.layouts.length,t.layouts.length);g++)m(g)}this.innerProps.snapshotable=!0,this.$nextTick((function(){n.currentLayout=n.layouts.find((function(t){return t.$id===i}))||n.layouts[0]}))},toggleSnapshot:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.innerProps.snapshotable=t},undo:function(){var t=this.currentElement;if(!t||"$croper"!==t.type&&"$masker"!==t.type&&"$watermarker"!==t.type){var e=this.$snapshots.get(),n=this.$snapshots.undo().get();this.applySnapshot(n,e),this.$events.$emit("base.undo")}else this.$events.$emit("element.editCancel",t)},redo:function(){var t=this.$snapshots.get(),e=this.$snapshots.redo().get();this.applySnapshot(e,t),this.$events.$emit("base.redo")}},At=(n("2b3d"),n("9861"),n("a15b"),n("f4dd"),n("b680"),n("1276"),navigator.userAgent.toLowerCase().indexOf("firefox")>0),Tt=Object(r["a"])((function t(){var e=this;Object(i["a"])(this,t),Object(a["a"])(this,"_scope","all"),Object(a["a"])(this,"_context",null),Object(a["a"])(this,"_keyMap",{backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,minus:109,plus:107,",":188,".":190,"/":191,"`":192,"-":At?173:189,"=":At?61:187,";":At?59:186,"'":222,"[":219,"]":221,"\\":220}),Object(a["a"])(this,"_modifier",{"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":At?224:91,command:At?224:91}),Object(a["a"])(this,"_isclearModifier",!1),Object(a["a"])(this,"_downKeys",[]),Object(a["a"])(this,"modifierMap",{16:"shiftKey",18:"altKey",17:"ctrlKey"}),Object(a["a"])(this,"_hotkeys",[]),Object(a["a"])(this,"_mods",{16:!1,18:!1,17:!1}),Object(a["a"])(this,"_handlers",{}),Object(a["a"])(this,"code",(function(t){return e._keyMap[t]||t.toUpperCase().charCodeAt(0)})),Object(a["a"])(this,"setScope",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";e._scope=t})),Object(a["a"])(this,"getScope",(function(){return e._scope})),Object(a["a"])(this,"addEvent",(function(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,(function(){n(window.event)}))})),Object(a["a"])(this,"isPressed",(function(t){return"string"===typeof t&&(t=e.code(t)),-1!==e._downKeys.indexOf(t)})),Object(a["a"])(this,"getPressedKeyCodes",(function(){return e._downKeys.slice(0)})),Object(a["a"])(this,"dispatch",(function(t){var n=!0,i=t.keyCode,r=e._handlers["*"],a=e._downKeys,o=e._mods,s=e._modifier,c=e._handlers,l=e._isclearModifier,u=e._hotkeys,d=e.getScope,h=e.modifierMap,f=e.addEvent,m=e.eventHandler,g=e.clearModifier;if(-1===a.indexOf(i)&&a.push(i),93!==i&&224!==i||(i=91),i in o){for(var p in o[i]=!0,s)s[p]===i&&(u[p]=!0);if(!r)return}for(var v in o)o[v]=t[h[v]];if(e.filter(t)){var b=d();if(r)for(var y=0;y<r.length;y++)if(r[y].scope===b){var w=m(t,r[y],b);n&&(n=w)}if(i in c){for(var _=0;_<c[i].length;_++){var x=m(t,c[i][_],b);n&&(n=x)}return l||(f(document,"keyup",(function(t){g(t)})),e._isclearModifier=!0),n}}})),Object(a["a"])(this,"fire",(function(t){return e.dispatch(t)})),Object(a["a"])(this,"eventHandler",(function(t,n,i){var r,a=e._context,o=e._mods;if(!n.scope)return!1;if(n.scope===i||"all"===n.scope){for(var s in r=n.mods.length>0,o)(!o[s]&&n.mods.indexOf(+s)>-1||o[s]&&-1===n.mods.indexOf(+s))&&(r=!1);if(0===n.mods.length&&!o[16]&&!o[18]&&!o[17]&&!o[91]||r||"*"===n.shortcut)return n.method.call(a,t,n)}return!0})),Object(a["a"])(this,"unbind",(function(t,n){for(var i,r=e.code,a=e.getScope,o=e.getKeys,s=e.getMods,c=e.compareArray,l=e._handlers,u=o(t),d=[],h=[],f=0;f<u.length;f++){if(d=u[f].split("+"),d.length>1&&(h=s(d)),t=d[d.length-1],t=r(t),void 0===n&&(n=a()),!l[t])return;for(var m=0;m<l[t].length;m++)i=l[t][m],i.scope===n&&c(i.mods,h)&&(l[t][m]={})}})),Object(a["a"])(this,"deleteScope",(function(t){var n,i,r;for(n in e._handlers)for(i=e._handlers[n],r=0;r<i.length;)i[r].scope===t?i.splice(r,1):r++})),Object(a["a"])(this,"compareArray",(function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0})),Object(a["a"])(this,"filter",(function(t){var e=(t.target||t.srcElement).tagName;return!("INPUT"===e||"SELECT"===e||"TEXTAREA"===e)})),Object(a["a"])(this,"getMods",(function(t){for(var n=t.slice(0,t.length-1),i=0;i<n.length;i++)n[i]=e._modifier[n[i]];return n})),Object(a["a"])(this,"getKeys",(function(t){t=t.replace(/\s/g,"");var e=t.split(",");return""===e[e.length-1]&&(e[e.length-2]+=","),e})),Object(a["a"])(this,"clearModifier",(function(t){var n=e._downKeys,i=e._mods,r=e._hotkeys,a=e._modifier,o=t.keyCode,s=n.indexOf(o);if(s>=0&&n.splice(s,1),93!==o&&224!==o||(o=91),o in i)for(var c in i[o]=!1,a)a[c]===o&&(r[c]=!1)})),Object(a["a"])(this,"hotkeys",(function(t,n,i){var r=e.getKeys,a=e.getMods,o=e.code,s=e._handlers,c=r(t),l=[],u=0;for(void 0===i&&(i=n,n="all");u<c.length;u++)t=c[u].split("+"),l=[],t.length>1&&(l=a(t),t=[t[t.length-1]]),t=t[0],t="*"===t?"*":o(t),t in s||(s[t]=[]),s[t].push({shortcut:c[u],scope:n,method:i,key:c[u],mods:l})})),Object(a["a"])(this,"setContext",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e._context=t})),Object(a["a"])(this,"init",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var i in e._context=n,t)e.hotkeys(i,t[i])}));for(var n=1;n<20;n++)this._keyMap["f"+n]=111+n;this.modifierMap[At?224:91]="metaKey",this._mods[At?224:91]=!1}));function Ct(t){var e=t.nodeName,n=t.contentEditable+"",i=/(?:input|textarea)/i;return!("true"!==n&&!i.test(e))}var Pt={"delete, backspace":function(){return!this.currentElement||"mask"===this.currentElement.type&&this.currentElement.url?this.currentElement&&this.changeElement({url:"",imageUrl:"",resourceType:"image",naturalDuration:0},this.currentElement):this.removeElement(null,null,!0),!1},"left, right, up, down, shift+left, shift+right, shift+up, shift+down":function(t){var e=this,n=this.getSelectedElements(!0);if(n.length&&!Ct(t.target)){t.preventDefault();var i=t.keyCode,r=i<=38?-1:1,a=1===Math.abs(i-38)?"left":"top";return t.shiftKey&&(r*=10),n.forEach((function(t){var n={};n[a]=t[a]+r,e.changeElement(n,t),t.$draging=!0,e.$nextTick((function(){t.$draging=!1}))})),!1}},esc:function(){var t=this.contextmenu;if(t&&t.isShow)return t.hide(),!1;var e=this.currentElement;return!!e&&("$croper"===e.type||"$masker"===e.type?(this.$events.$emit("element.editCancel",e),!1):(this.currentElement=null,!1))},enter:function(){var t=this.currentElement;if(t){switch(t.type){case"image":case"mask":case"text":this.showElementEditor(t);break;case"$croper":case"$masker":case"$watermarker":this.$events.$emit("element.editApply",t);break;case"$selector":this.addGroupByElements();break;case"group":this.flatGroup();break}return!1}},"ctrl+a, command+a":function(){var t=this,e=this._getOperateModeElements(this.currentLayout);return e.forEach((function(e){e.frozen||e.lock||!e.dragable||t.selectElement(e)})),this.selectElements(e),!1},"ctrl+shift+a, command+shift+a":function(){return this.currentElement=null,!1},"ctrl+c, command+c":function(){this.container&&this.container.focus(),this.copyElement()},"ctrl+x, command+x":function(){this.container&&this.container.focus(),this.cutElement()},"ctrl+v, command+v":function(){},"ctrl+g, command+g":function(){return!this.global.$tempGroup&&this.addGroupByElements(),!1},"ctrl+shift+g, command+shift+g":function(){return!this.global.$tempGroup&&this.flatGroup(),!1},"ctrl+z, command+z":function(){return this.hasUndo&&this.undo(),!1},"ctrl+shift+z, command+shift+z, ctrl+y, command+y":function(){return this.hasRedo&&this.redo(),!1},"ctrl+j, command+j, ctrl+d, command+d":function(){return this.cloneElement(),!1},"ctrl+0, command+0":function(){return this.fitZoom(),!1},"ctrl+1, command+1":function(){return this.zoomTo(1),!1},"ctrl+2, command+2":function(){return this.zoomTo(2),!1},"ctrl+-, command+-, ctrl+minus, command+minus":function(){var t=this.zoom-.2;return this.zoomTo(Math.max(.2,t)),!1},"ctrl+=, command+=, ctrl+plus, command+plus":function(){var t=this.zoom+.2;return this.zoomTo(Math.min(4,t)),!1},"ctrl+[, command+[, ctrl+down, command+down":function(){return this.backwardElement(),!1},"ctrl+], command+], ctrl+up, command+up":function(){return this.forwardElement(),!1},"ctrl+shift+[, command+shift+[, ctrl+shift+down, command+shift+down":function(){return this.setElementToBottom(),!1},"ctrl+shift+], command+shift+], ctrl+shift+up, command+shift+up":function(){return this.setElementToTop(),!1},"ctrl+l, command+l":function(t){t.preventDefault();var e=this.getSelectedElements(!0);return e.length&&e[0].lock?this.unlockElement(e):this.lockElement(e),!1},"ctrl+shift+/, command+shift+/":function(){var t=this.getSelectedElements(!0);return this.unlockElement(t),!1},"ctrl+\\, command+\\":function(){return this.mode="flow"===this.mode?"editor":"flow",!1},space:function(){var t=this.currentSubElement||this.currentElement;t&&"video"===t.type&&(t.$playing=!t.$playing)}},$t=Tt,Mt=Array.prototype.slice,Rt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.multiple,n=void 0!==e&&e,i=t.accept,r=void 0===i?"*/*":i,a=document,o=a.body||a.documentElement;return new P.a((function(t){var e=a.createElement("input"),i=function t(){o.removeEventListener("mousedown",t,!1),o.removeChild(e),e.onchange=null};n&&e.setAttribute("multiple",n),e.setAttribute("type","file"),e.setAttribute("accept",r),e.style.cssText="position:absolute;top:-199px;height:0;opacity:0",e.onchange=function(){var i=Mt.call(e.files);i[0]&&t(n?i:i[0])},o.appendChild(e),e.click(),o.addEventListener("mousedown",i,!1)}))},Lt=Rt,Ut=n("cd8b"),zt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t||(t={}),t.accept||(t.accept=Ut["a"].isAndorid()?"image/*":"image/png,image/jpeg,image/gif"),Lt(t)},Dt=zt,Bt=n("f49e"),Nt=n("51ac"),Ft=n.n(Nt);n("466d");function Ht(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=new Image;return n.crossOrigin="Anonymous",n.onload=function(){e(n)},n.src=t,n}function Vt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2?arguments[2]:void 0;if(t.type.match(/image\/(jpeg|gif|png)/))if("blobUrl"===n)Ht(URL.createObjectURL(t),e);else{var i=new FileReader;i.onload=function(t){Ht(t.target.result,e)},i.readAsDataURL(t)}}function Gt(t,e,n){var i=function(n){(e.dragover||function(){}).call(t,n)},r=function(t){if(t.preventDefault(),"Files"===t.dataTransfer.types[0]){var i=t.dataTransfer.files;return P.a.try((function(){return e.beforeDrop(i)})).then((function(t){for(var i=0,r=t.length;i<r;i++)Vt(t[i],e.drop||function(){},n)}))}};this.destory=function(){t=this.elem,t.removeEventListener("dragover",i),t.removeEventListener("drop",r)},this.init=function(t,e){this.elem=t,this.events=e,t.addEventListener("dragover",i,!1),t.addEventListener("drop",r,!1)},this.init(t)}var Wt=Gt;n("a630");function Yt(t,e,n){function i(t,e){var n=new Image;return n.crossOrigin="Anonymous",n.onload=function(){e(this)},n.src=t,n}function r(t){if(!n.editor||["design","flow"].includes(n.editor.mode)){var e=window.getSelection&&window.getSelection().anchorNode;(!e&&!document.activeElement||!n.container||n.container===e||n.container===document.activeElement||E["a"].contains(n.container,document.activeElement)||E["a"].contains(n.container,e))&&(U["a"].isEditable(t.target)||(t.clipboardData.setData("text/plain",""),t.preventDefault()))}}function a(t){return r(t)}function o(r){if(!U["a"].isEditable(r.target)){var a=[];if(r.clipboardData){var o=r.clipboardData.items,s=!1;o&&(a=Array.from(o).map((function(t){if(t&&-1!==t.type.indexOf("image"))return t.getAsFile()})).filter((function(t){return!!t})),n&&n.beforeHook&&a.length&&(s=!1===n.beforeHook(a)),s||a.forEach((function(e){if("blobUrl"===n.editor.options.resource.localType)i(URL.createObjectURL(e),t);else{var a=new FileReader;a.onload=function(e){i(e.target.result,t)},a.readAsDataURL(e)}r.preventDefault()}))),a.length||e(r)}}}this.destroy=function(){document.removeEventListener("copy",r,!1),document.removeEventListener("cut",a,!1),document.removeEventListener("paste",o,!1)},this.init=function(){document.addEventListener("copy",r,!1),document.addEventListener("cut",a,!1),document.addEventListener("paste",o,!1)},this.init()}var qt=Yt;n("ace4");function Xt(t,e,n){for(var i="",r=e;r<e+n;r++)i+=String.fromCharCode(t.getUint8(r));return i}function Zt(t){var e=new DataView(t);if(65496!==e.getUint16(0))return!1;var n=2,i=t.byteLength,r=null;while(n<i){if(255!==e.getUint8(n))return!1;if(r=e.getUint16(n),65505===r)return Kt(e,n+4,e.getUint16(n+2)-2);n+=2+e.getUint16(n+2)}}function Kt(t,e){if("Exif"!==Xt(t,e,4))return console.log("Not valid EXIF data! "+Xt(t,e,4)),!1;var n=null,i=e+6;if(18761===t.getUint16(i))n=!1;else{if(19789!==t.getUint16(i))return console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!==t.getUint16(i+2,!n))return console.log("Not valid TIFF data! (no 0x002A)"),!1;var r=t.getUint32(i+4,!n);if(r<8)return console.log("Not valid TIFF data! (First offset less than 8)",t.getUint32(i+4,!n)),!1;var a=Jt(t,i,i+r,n);return a}function Jt(t,e,n,i){for(var r=t.getUint16(n,!i),a={},o=0;o<r;o++){var s=n+12*o+2;if(274===t.getUint16(s,!i)){var c="Orientation";a[c]={value:t.getUint16(s+8,!i),offset:s+8,bigEnd:i}}}return a}function Qt(t,e){var n=e.offset,i=e.bigEnd,r=new DataView(t);return r.setUint16(n,1,!i),r.buffer}function te(t){return new Promise((function(e){var n=new FileReader;n.onload=Object(T["a"])(Object(A["a"])().mark((function i(){var r,a;return Object(A["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:r=n.result,a=Zt(r),a&&a.Orientation&&1!==a.Orientation.value&&(r=Qt(r,a.Orientation)),e({orientation:a&&a.Orientation?a.Orientation.value:1,file:new Blob([r],{type:t.type})});case 4:case"end":return i.stop()}}),i)}))),n.readAsArrayBuffer(t)}))}function ee(t){return new P.a((function(e,n){var i=new Image;i.onload=function(){e(i)},i.onerror=function(){var e="Image load error: "+t;n(new Error(e))},i.src=t}))}function ne(t){return ie.apply(this,arguments)}function ie(){return ie=Object(T["a"])(Object(A["a"])().mark((function t(e){var n,i=arguments;return Object(A["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},t.abrupt("return",P.a.try(Object(T["a"])(Object(A["a"])().mark((function t(){var i,r,a,o,s,c,l,u,d,h,f,m,g,p;return Object(A["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e&&e.type.includes("image")){t.next=2;break}return t.abrupt("return",e);case 2:return t.next=4,te(e);case 4:if(i=t.sent,r=i.orientation,a=i.file,o=e.type,s=[3,6,8],s.includes(r)){t.next=11;break}return t.abrupt("return",e);case 11:return a.name=e.name,e=a,c=document.createElement("canvas"),l=c.getContext("2d"),u=URL.createObjectURL(e),t.next=18,ee(u);case 18:d=t.sent,URL.revokeObjectURL(u),h=d.width,f=d.height,m=n.maxSize,m&&m>0&&(g=h*f,p=Math.sqrt(Math.min(1,m/g)),f=Math.round(f*p),h=Math.round(h*p)),t.t0=r,t.next=6===t.t0?26:3===t.t0?31:8===t.t0?36:41;break;case 26:return c.width=f,c.height=h,l.rotate(Math.PI/2),l.drawImage(d,0,-f,h,f),t.abrupt("break",41);case 31:return c.width=h,c.height=f,l.rotate(Math.PI),l.drawImage(d,-h,-f,h,f),t.abrupt("break",41);case 36:return c.width=f,c.height=h,l.rotate(3*Math.PI/2),l.drawImage(d,-h,0,h,f),t.abrupt("break",41);case 41:return t.abrupt("return",new P.a((function(t){return c.toBlob(t,o)})).then((function(t){return e.name&&(t.name=e.name),t})));case 42:case"end":return t.stop()}}),t)})))).catch((function(){return e})));case 2:case"end":return t.stop()}}),t)}))),ie.apply(this,arguments)}var re=n("33ec");function ae(t,e){t.forEach((function(t){var n,i,r,a=t.animations;a.forEach((function(t){"show"===t.stage?i=t:"leave"===t.stage?r=t:"enter"===t.stage&&(n=t)}));var o=e,s=Math.min(1,o/a.reduce((function(t,e){return t+e.unitDuration}),0));if(n&&(n.duration=n.unitDuration),i){var c,l,u=(null===(c=n)||void 0===c?void 0:c.unitDuration)||0,d=(null===(l=r)||void 0===l?void 0:l.unitDuration)||0;i.duration=Math.max(o-u-d,i.unitDuration)}r&&(r.duration=r.unitDuration);var h=[n,i,r].filter((function(t){return t})),f=0;h.forEach((function(t){t.duration*=s,t.delay=f,f+=t.duration,t.unitDuration=Math.min(t.duration,t.unitDuration)})),t.animations=h}))}var oe=n("9178"),se={pickImage:function(t,e){var n=this;return Dt().then((function(t){return ne(t)})).then((function(t){return e&&e(t),"blobUrl"===n.options.resource.localType?URL.createObjectURL(t):Bt["a"].readFile(t,"DataURL")})).then((function(t){return Bt["a"].loadImage(t)})).then((function(e){return t.call(n,e,e.src),e})).catch((function(t){console.error("Image file load error:",t.stack)}))},pickVideo:function(t,e){var n=this;return Lt({accept:"video/mp4"}).then((function(t){return e&&e(t),URL.createObjectURL(t)})).then((function(t){return Bt["a"].loadVideo(t)})).then((function(e){return t.call(n,e,e.src),e})).catch((function(t){throw console.error("Image file load error:",t.stack),t}))},zoomTo:function(t,e){var n=this,i=this.zoom;this.zoom=t;var r={width:this.width*(this.zoom-i),height:this.height*(this.zoom-i)},a=this.containerRect,o=this.shellRect;e||(e={x:a.width/2,y:a.height/2}),e._perX=e.x/a.width,e._perY=e.y/a.height;var s=r.width*(1-e._perX)+(o.width+2*a.paddingLeftRight-(a.width+a.scrollLeft)),c=r.height*(1-e._perY)+(o.height+a.paddingTopBottom-(a.height+a.scrollTop)),l=a.scrollLeft,u=a.scrollTop;this.$events.$emit("base.beforeZoom"),this.$nextTick((function(){n.container.scrollLeft(l+r.width*e._perX-(s<0?s:0)).scrollTop(u+r.height*e._perY-(c<0?c:0)),n.$events.$emit("base.zoom",t)}))},calcFitZoom:function(){var t=this.currentLayout,e=t.width,n=t.height,i=this.containerRect,r=i.width-i.paddingLeftRight,a=i.height-i.paddingTopBottom;if(e<=0||n<=0||r<=0||a<=0)return 1;var o=n/a,s=e/r,c=s;return o>c&&(c=o),Math.min(1,1/c)},fitZoom:function(){var t=this.currentLayout;if(t&&"mirror"!==this.mode){var e=this.calcFitZoom();if("flow"===this.mode){var n=this.width,i=this.containerRect,r=this.options,a=Object(k["a"])(r.padding,1),o=a[0];e=(i.width-2*o)/n/2}this.zoomTo(e)}},changeEffectColor:function(t,e,n){var i=n||this.currentElement;if(i&&["text","effectText","mask","image"].includes(i.type)){var r=i.aggregatedColors;if(null!==i.mainColor&&void 0===e){var a="text"===i.type||"effectText"===i.type?i.textEffects:i.imageEffects,o=vt()(i.mainColor).toHsl(),s=vt()(t).toHsl();i.$hslDiff||(i.$hslDiff=i.aggregatedColors.map((function(t){var e=vt()(t).toHsl();return{h:e.h-o.h,s:e.s-o.s,l:e.l-o.l}})));var c=function(t){return Math.max(0,Math.min(1,t))},l=function(t){return(360+t%360)%360},u=function(t){if(void 0!==t){var e=i.$hslDiff,n={h:l(s.h+e[t].h),s:c(s.s+e[t].s),l:c(s.l+e[t].l)};return vt()(n).toHex8String()}};if(a.forEach((function(t){["stroke","shadow","filling"].forEach((function(e){t[e]&&void 0!==t[e].$linkIndex&&(t[e].color=u(t[e].$linkIndex))}))})),i.mainColor=vt()(s).toHex8String(),void 0!==i.$linkIndex){var d=u(i.$linkIndex);i.color=d,this.changeTextContents({color:d},i)}return i.aggregatedColors=r.map((function(t,e){return u(e)})),void this.makeSnapshot("change_effect_color")}var h="text"===i.type||"effectText"===i.type?i.textEffects:i.imageEffects;h.forEach((function(n){["stroke","shadow","filling"].forEach((function(i){n[i]&&n[i].$linkIndex===e&&(n[i].color=t)}))})),i.$linkIndex===e&&(i.color=t,this.changeTextContents({color:t},i)),i.$backgroundColorLinkIndex===e&&(i.backgroundColor=t),this.$set(i.aggregatedColors,e,t),this.makeSnapshot("change_effect_color")}},resetAggregatedColors:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t=this.getElement(t),t&&["text","effectText","mask","image"].includes(t.type)&&(t.aggregatedColors=[],Object(Et["f"])(t.type,t),e&&this.makeSnapshot("reset_aggregated_colors"))},addImageEffect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e=this.getElement(e),e&&["image","mask"].includes(e.type)){var i;if(n)i=M["a"].textEffect;else{var r=["enable","excludeScale"];i=Object(O["pick"])(M["a"].textEffect,r.concat(Object.keys(t)))}var a=Object(O["merge"])({},i,t);e.imageEffects.push(a),this.makeSnapshot("change_image_effect")}},removeImageEffect:function(t,e){if(e=this.getElement(e),t&&e&&["image","mask"].includes(e.type)){var n=e.imageEffects.indexOf(t);-1!==n&&(e.imageEffects.splice(n,1),this.makeSnapshot("change_image_effect"))}},changeImageEffect:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(n=this.getElement(n),t&&n&&["image","mask"].includes(n.type)){var a=n.imageEffects.findIndex((function(e){return e===t}));if(-1!==a){var o;if(r)o=M["a"].textEffect;else{var s=["enable","excludeScale"];o=Object(O["pick"])(M["a"].textEffect,s.concat(Object.keys(e)))}var c=Object(O["merge"])({},o,e);n.imageEffects.splice(a,1,c),i&&this.makeSnapshot("change_image_effect")}}},changeEffectScale:function(t,e){var n=e||this.currentElement;if(n&&["text","effectText","mask","image"].includes(n.type)){var i=t/n.effectScale,r="text"===n.type||"effectText"===n.type?n.textEffects:n.imageEffects;r.forEach((function(t){var e=t.offset,n=t.stroke,r=t.shadow;e&&!t.excludeScale.includes("offset")&&(e.x*=i,e.y*=i),n&&!t.excludeScale.includes("stroke")&&(n.width*=i),r&&!t.excludeScale.includes("shadow")&&(r.offsetX*=i,r.offsetY*=i)})),n.effectScale=t,this.makeSnapshot("change_effect_scale")}},initRect:function(){var t=this;this.updateRectThrottle=Object(O["throttle"])((function(){t.options.autoFitZoom&&t.updateContainerRect()}),100),this.$watch("zoom",this.updateRectThrottle),this.$watch("width",this.updateRectThrottle),this.$watch("height",this.updateRectThrottle),this.$events.$on("base.resize",this.updateRectThrottle),this.$events.$on("base.scroll",this.updateRectThrottle),this.updateRectThrottle()},updateContainerRect:function(){var t=this.mode,e=this.container,n=e[0].getBoundingClientRect(),i=this.height*this.zoom,r=this.containerRect,a=this.options.padding;r.padding=a,r.paddingTopBottom=a[0]+a[2],r.paddingLeftRight=a[1]+a[3],r.paddingCss=a.map((function(t){return t+"px"})).join(" "),r.scrollLeft=e.prop("scrollLeft"),r.scrollTop=e.prop("scrollTop"),r.scrollWidth=e[0].scrollWidth,r.scrollHeight=e[0].scrollHeight,r.height=n.height,r.width=n.width,r.left=n.left,r.top=n.top;var o=0;"mirror"!==t&&(o=n.height-i-r.paddingTopBottom,o=Math.max(0,o)),r.topOffset=o/2,this.$nextTick(this.updateShellRect)},updateShellRect:function(){var t=this.shellRect,e=this.containerRect,n=Object(E["a"])(".editor-shell",this.$el);if(n.length){var i=n[0].getBoundingClientRect();Object(O["assign"])(t,{height:i.height,width:i.width,top:i.top-e.top,left:i.left-e.left})}return t},scrollContainerRect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t.dx,i=void 0===n?0:n,r=t.dy,a=void 0===r?0:r,o=this.$el,s=this.$el,c=s.scrollLeft,l=s.scrollTop;o.scrollLeft=c-i*e,o.scrollTop=l-a*e},pointFromEvent:function(t){var e=this.zoom,n=this.shellRect,i=this.containerRect,r=i.left+n.left,a=i.top+n.top,o=Object(oe["a"])(t),s=o.pageX,c=o.pageY;return{x:(s-r)/e,y:(c-a)/e}},handleClick:function(t){if(!U["a"].isEditable(t.target)){var e;t.preventDefault();var n=this.pointFromEvent(t),i=navigator.platform.indexOf("Mac")>-1;if(t.shiftKey||(i?t.metaKey:t.ctrlKey)){if(e=this.getElementByPoint(n.x,n.y),e){var r=this.currentElement;if(r&&r.lock&&(r=null),e===r)return this.unselectElement(e),void(this.selectedElements.length||(this.currentElement=null));this.selectElement(r),e.$selected?this.unselectElement(e):!e.lock&&this.selectElement(e)}}else this.walkTemplet((function(t){t.$selected=!1}),!0,[this.currentLayout]),e=this.focusElementByPoint(n.x,n.y),e||(this.currentElement=null);e||this.$events.$emit("base.clickOut",t)}},initDomEvents:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.useNativeContextmenuEvent,i=Object(E["a"])(document),r=this.container;this.hotkeys=new $t,this.handleMap=Pt;var a=this.innerProps.options.bindHotkey,o="design"===this.mode||"flow"===this.mode;if(!0===a||null===a&&o){this.enableHotkey();var s=function(){if(!t.hotkeys||!t.hotkeys._disabled){var e=window.navigator.userAgent.toLowerCase(),n=e.includes("windows")&&!e.includes("firefox")?500:200;return function(e){if(e.ctrlKey||e.metaKey){e.preventDefault(),e.stopPropagation();var i=e.deltaY||(e.detail>0?40:-40),r=i/n,a=t.zoom*(1-r/2*.4);t.zoomTo(Math.min(t.options.mousewheelMaxZoom,Math.max(t.options.mousewheelMinZoom,a))),t.$nextTick((function(){t.updateContainerRect()}))}}}};r[0].addEventListener("mousewheel",s(),{passive:!1}),r[0].addEventListener("DOMMouseScroll",s(),{passive:!1})}this.options.touchEnable&&this._initDomTouchEvent(),i.on("keydown.base",(function(e){var n=["shift+down","shift+left","shift+right","shift+up","down","left","right","up","mod+c","delete","backspace","mod+x","1","2","3","4","5","6","7","8","9","0","mod+g","mod+shift+g","mod+]","mod+[","mod+shift+]","mod+shift+["];t.currentElement&&t.currentElement.lock&&Ft()(n,e)||(t.$events.$emit("base.keyDown",e),e.isDefaultPrevented()||U["a"].isEditable(e.target)||t.editable&&t.hotkeys&&!t.hotkeys._disabled&&!1===t.hotkeys.fire(e)&&e.preventDefault())}));var c=function(e){var n=t.currentLayout;if(n){var i=Math.max(e.width/n.width*2,e.height/n.height*2,1),r=t.addImage(e.src,{width:e.width/i,height:e.height/i});t.focusElement(r)}},l=function(e){if(e){var n=e.clipboardData.getData("text");if(n&&n.replace(/\r|\n/g,"")){n=n.replace(/(\r|\n)+$/g,"");var i=t.addText(n,{opacity:0});return setTimeout(Object(T["a"])(Object(A["a"])().mark((function e(){var n,r;return Object(A["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.currentLayout,r=Math.min(.6*n.width/i.width,.6*n.height/i.height),e.next=4,t.resizeElements(i,r);case 4:i.left=(n.width-i.width)/2,i.top=(n.height-i.height)/2,dt(i,n),t.$refs.tempGroup&&t.$refs.tempGroup.addSubElement(i,!0),t.options.onPasteText&&t.options.onPasteText(i),i.opacity=1,t.focusElement(i);case 11:case"end":return e.stop()}}),e)}))),50),!0}}};new qt(c.bind(this),(function(e){!l(e)&&t.pasteElement()}),{beforeHook:function(e){return t.options.onPasteFile.call(t,e)},container:this.$el,editor:this}),new Wt(document.body,{dragover:function(t){return t.preventDefault()},beforeDrop:function(e){return t.options.onDropFile.call(t,e)},drop:c.bind(this)},this.options.resource.localType);var u=function(e){var n=e.target,i=e.type,a="click"===i?"base.click":"base.mouseDown";(n===r[0]||E["a"].contains(r[0],n))&&(t.$events.$emit(a,e),e.isDefaultPrevented()||"click"!==i||t.handleClick(e))};i.on("mousedown.base click.base",u),n||Object(E["a"])(this.$el).on("contextmenu",(function(e){e.preventDefault(),U["a"].isEditable(e.target)||t.$events.$emit("base.contextMenu",e)})),Object(E["a"])(this.$el).on("dragstart",(function(t){if("IMG"===t.target.tagName||"CANVAS"===t.target.tagName)return!1})),Object(E["a"])(this.$el).on("mousemove.base",Object(O["throttle"])((function(e){t.editable&&t.$events.$emit("base.mousemove",e)}),100)),Object(E["a"])(this.$el).on("mouseleave.base",(function(e){t.$events.$emit("base.mouseleave",e)})),this.$on("destroy",(function(){i.off(".base",u),i=null}))},_initDomTouchEvent:function(){var t=this,e=function(){var e=t,n=null,i=[],r=t.options||{},a=r.mousewheelMaxZoom,o=void 0===a?4:a,s=r.mousewheelMinZoom,c=void 0===s?.15:s;function l(t,e){var n=e.pageX-t.pageX,i=e.pageY-t.pageY;return Math.sqrt(n*n+i*i)}function u(t){var e=Object.values(t);return e.map((function(t){return{pageX:t.pageX,pageY:t.pageY}}))}function d(t){var e=Math.acos(t)/(Math.PI/180);return e=Math.round(e),e}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=null,i=Object(k["a"])(t,2),r=i[0],a=i[1],o=Object(k["a"])(e,2),s=o[0],c=o[1],u={pageX:a.pageX-(c.pageX-s.pageX),pageY:a.pageY-(c.pageY-s.pageY)},h=l(r,s),f=l(a,c),m=l(r,u),g=d((h*h+f*f-m*m)/(2*h*f));return n=g<=90||!g?"drag":"zoom",n}function f(t,i){n||(n=e.zoom);var r=200,a=l(i[0],i[1])-l(t[0],t[1]),s=a,u=s/r,d=e.zoom*(1-u/2*.8);e.zoomTo(Math.min(o,Math.max(c,d))),e.$nextTick((function(){e.updateContainerRect()}))}function m(t){t.preventDefault();var n=t.touches,r=u(n);i.length>1||e.scrollContainerRect({dx:r[0].pageX-i[0].pageX,dy:r[0].pageY-i[0].pageY}),i=r}var g=Object(O["throttle"])((function(t){var n=t.touches,r=u(n),a=h(r,i);"drag"===a?e.scrollContainerRect({dx:r[0].pageX-i[0].pageX,dy:r[0].pageY-i[0].pageY}):"zoom"===a&&f(r,i),i=r}),20);return{touchStart:function(t){e.containerTouchEnable&&(i=u(t.touches))},touchMove:function(t){e.containerTouchEnable&&(t.preventDefault(),t.stopPropagation(),2===t.touches.length?g(t):1===t.touches.length&&m(t))},touchEnd:function(){e.containerTouchEnable&&(n=e.zoom)}}},n=e(),i=this.container;this.enableContainerTouch(),i[0].addEventListener("touchstart",n.touchStart,{passive:!1}),i[0].addEventListener("touchmove",n.touchMove,{passive:!1,capture:!0}),i[0].addEventListener("touchend",n.touchEnd,{passive:!1})},setMode:function(t){this.mode=t},setOptions:function(t){var e=Object(O["cloneDeep"])(M["a"].options);t=Object(O["assign"])({},e,this.options,t),Array.isArray(t.padding)||(t.padding=[t.padding,t.padding,t.padding,t.padding]),t.subsetSuffix="-subset"+this._uid,t.fontSubsetsMap=this.$fontSubsetsMap,t.fontList&&t.fontList.length||(t.fontList=M["a"].options.fontList),t.fontList=t.fontList.filter((function(t){return t&&(t.name||t.family)})),t.fontsMap=t.fontList.reduceRight((function(t,e){return t[e.name]=e,e.family&&(t[e.family]=e),t}),{}),t.defaultFont||(t.defaultFont=t.fontsMap["SourceHanSansSC-Regular"]||t.fontList[0]),this.innerProps.options=t},checkVersion:function(t){var e=U["c"].parse(this.version),n=U["c"].parse(t);return e.major>=n.major},enableHotkey:function(){this.hotkeys._disabled=!1,this.hotkeys._inited||(this.hotkeys._inited=!0,this.hotkeys.init(this.handleMap),this.hotkeys.setContext(this))},disableHotkey:function(){this.hotkeys._disabled=!0},enableContainerTouch:function(){this.containerTouchEnable=!0},disableContainerTouch:function(){this.containerTouchEnable=!1},dispatchError:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={data:"ValidationError",load:"LoadError"},n=t.type,i=t.code,r=t.message;if(!e[n])throw new Error("Not support ".concat(n," error"));delete t.message;var a=r instanceof Error?r:new Error(r);try{a.name=e[n]}catch(o){a=new Error(a.message),a.name=e[n]}a.type=n,a.code=i,this.$emit("error",a)},isCrossLayoutDrag:function(t){return this.options.crossLayoutDrag&&"flow"===this.mode&&(t.type.indexOf("$")<0||"$selector"===t.type)},getComponentById:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=e&&"editor-layout"===e.$options.name&&e.layout&&e.layout.$id===t;if(e.model&&e.model.$id===t&&e.$options.name&&e.$options.name.includes("-element")||n)return e;if(!e.$children.length)return null;for(var i=0;i<e.$children.length;i++){var r=this.getComponentById(t,e.$children[i]);if(r)return r}return null},checkElementOver:function(t){var e=this.layouts,n=this.currentLayout,i=U["a"].getBBoxByElement(t),r={fromLayoutId:this.currentLayout.$id,toLayoutId:null},a=r.relateLayout=function(){var t={};return i.top>n.height?t.bottom=!0:i.top<-i.height&&(t.top=!0),i.left>n.width?t.right=!0:i.left<-i.width&&(t.left=!0),t}();!a.top&&!a.bottom||a.left||a.right||e.some((function(t){if(t!==n){var e=i.top+n.top>t.top,a=i.top+n.top<t.top+t.height;if(e&&a)return r.toLayoutId=t.$id,!0;var o=i.top+n.top+i.height>t.top,s=i.top+n.top+i.height<t.top+t.height;if(o&&s)return r.toLayoutId=t.$id,!0}return!1})),t._dragRelateive&&t._dragRelateive.toLayoutId!==r.toLayoutId&&e.forEach((function(t){t.$id===r.toLayoutId?t.$dragOver=!0:t.$dragOver=!1})),t._dragRelateive=r},_restoreTempGroup:function(t){var e=t.elements.slice(),n=this.$refs.tempGroup,i=n&&this.$refs.tempGroup.currentTempGroupId;if(i&&t.elements&&!t.type){var r=-1,a=[];if(e=t.elements.filter((function(t,e){return t.$tempGroupId===i?(r=-1===r?e:r,a.push(t),!1):t})),a.length){var o=n.cachesToGroup(i);e.splice(-1===r?e.length-1:r,0,o)}}return e},getMaxDuration:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.layouts;t=[].concat(t);var e=0,n=0,i=!1,r=[];return t.forEach((function(t){t&&!t.hasFilters&&(t.isGif||t.isApng)&&(e=Math.max(e,Object(O["get"])(t,"background.image.naturalDuration")))})),this.walkTemplet((function(t){var a;"video"===t.type?e=Math.max(e,t.endTime-t.startTime):(t.isGif||t.isApng)&&(e=Math.max(e,t.naturalDuration)),null!==(a=t.animations)&&void 0!==a&&a.length&&(t.$parentId||(i=!1),i||(n=Math.max(n,t.animations.reduce((function(t,e){return t+e.unitDuration}),0)),i=!0,r.push(t)))}),!0,t),e=e||n,ae(r,e),e.toFixed(1)-0},changeGlobal:function(t){var e=Object(O["assign"])({},this.global.layout,t.layout);t.layout=e,this.global=Object(O["assign"])({},this.global,t),this.makeSnapshot("global_change")},loadFontSubset:function(t){this.$fontSubsetsMap={},this.options.fontSubsetsMap=this.$fontSubsetsMap,this.options.fontSubset.initialEnable&&Object(re["b"])(t||this.layouts,this.options)}},ce=n("b85c"),le=(n("4ec9"),n("6062"),n("c906"),[]),ue=!1;function de(){ue=!1;var t=le.slice(0);le.length=0;for(var e=0;e<t.length;e++)t[e]()}var he=Promise.resolve(),fe=function(){he.then(de)};function me(t,e){var n;if(le.push((function(){if(t)try{t.call(e)}catch(i){console.error(i)}else n&&n(e)})),ue||(ue=!0,fe()),!t&&"undefined"!==typeof Promise)return new Promise((function(t){n=t}))}var ge=[],pe=[],ve={},be=!1,ye=!1,we=0;function _e(){we=ge.length=pe.length=0,ve={},be=ye=!1}var xe=function(){return Date.now},ke=window.performance;function Ee(){var t,e;for(xe(),ye=!0,ge.sort((function(t,e){return t.id-e.id})),we=0;we<ge.length;we++)t=ge[we],t.before&&t.before(),e=t.id,ve[e]=null,t.run();_e()}function Oe(t){var e=t.id;if(null==ve[e]){if(ve[e]=!0,ye){var n=ge.length-1;while(n>we&&ge[n].id>t.id)n--;ge.splice(n+1,0,t)}else ge.push(t);be||(be=!0,me(Ee))}}ke&&"function"===typeof ke.now&&xe()>document.createEvent("Event").timeStamp&&(xe=function(){return ke.now()});n("4d63"),n("c607"),n("2c3e");function Se(t,e,n,i){Object.defineProperty(t,e,{value:n,enumerable:!!i,writable:!0,configurable:!0})}var je=Object.prototype.hasOwnProperty;function Ie(t,e){return je.call(t,e)}function Ae(t){return null!==t&&"object"===Object(ft["a"])(t)}var Te=Object.prototype.toString;function Ce(t){return"[object Object]"===Te.call(t)}function Pe(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}var $e=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/,Me=new RegExp("[^".concat($e.source,".$_\\d]"));function Re(t,e){if(!Me.test(t)){var n=t.split(".");return function(t){for(var i=0;i<n.length;i++){if(null==t)return;var r=n[i];t=r in t?t[r]:void 0;var a=e&&e[r];null==t&&a&&a in t&&(t=t[e[r]])}return t}}}function Le(){}var Ue=0,ze=function(){function t(){Object(i["a"])(this,t),this.id=Ue++,this.subs=[]}return Object(r["a"])(t,[{key:"addSub",value:function(t){this.subs.push(t)}},{key:"removeSub",value:function(t){Pe(this.subs,t)}},{key:"depend",value:function(){t.target&&t.target.addDep(this)}},{key:"notify",value:function(){var t=this.subs.slice();for(var e=0,n=t.length;e<n;e++)t[e].update()}}]),t}();Object(a["a"])(ze,"target",void 0),ze.target=null;var De=[];function Be(t){De.push(t),ze.target=t}function Ne(){De.pop(),ze.target=De[De.length-1]}var Fe=0,He=function(){function t(e,n,r,a){Object(i["a"])(this,t),this.vm=e,e._watchers.push(this),a?(this.deep=!!a.deep,this.user=!!a.user,this.lazy=!!a.lazy,this.sync=!!a.sync):this.deep=this.user=this.lazy=this.sync=!1,this.cb=r,this.id=++Fe,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new Set,this.newDepIds=new Set,this.expression="","function"===typeof n?this.getter=n:(this.getter=Re(n),this.getter||(this.getter=function(){})),this.value=this.lazy?void 0:this.get()}return Object(r["a"])(t,[{key:"get",value:function(){var t;Be(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(n){if(!this.user)throw n;console.error(n,e,'getter for watcher "'.concat(this.expression,'"'))}finally{this.deep&&Ge(t),Ne(),this.cleanupDeps()}return t}},{key:"addDep",value:function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))}},{key:"cleanupDeps",value:function(){var t=this.deps.length;while(t--){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0}},{key:"update",value:function(){this.lazy?this.dirty=!0:this.sync?this.run():Oe(this)}},{key:"run",value:function(){if(this.active){var t=this.get();if(t!==this.value||Ae(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(n){console.error(n,this.vm,'callback for watcher "'.concat(this.expression,'"'))}else this.cb.call(this.vm,t,e)}}}},{key:"evaluate",value:function(){this.value=this.get(),this.dirty=!1}},{key:"depend",value:function(){var t=this.deps.length;while(t--)this.deps[t].depend()}},{key:"teardown",value:function(){if(this.active){Pe(this.vm._watchers,this);var t=this.deps.length;while(t--)this.deps[t].removeSub(this);this.active=!1}}}]),t}(),Ve=new Set;function Ge(t){Ve.clear(),We(t,Ve)}function We(t,e){var n,i,r=Array.isArray(t);if((r||Ae(t))&&Object.isExtensible(t)){if(t.__ob__){var a=t.__ob__.dep.id;if(e.has(a))return;e.add(a)}if(r){n=t.length;while(n--)We(t[n],e)}else{i=Object.keys(t),n=i.length;while(n--)We(t[i[n]],e)}}}n("e439");var Ye=!0;var qe=function(){function t(e){Object(i["a"])(this,t),this.value=e,this.dep=new ze,Se(e,"__ob__",this),Array.isArray(e)?this.observeArray(e):this.walk(e)}return Object(r["a"])(t,[{key:"walk",value:function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)Ze(t,e[n])}},{key:"observeArray",value:function(t){for(var e=0,n=t.length;e<n;e++)Xe(t[e])}}]),t}();function Xe(t){var e;if(Ae(t))return Ie(t,"__ob__")&&t.__ob__ instanceof qe?e=t.__ob__:Ye&&(Array.isArray(t)||Ce(t))&&Object.isExtensible(t)&&(e=new qe(t)),e}function Ze(t,e,n,i){var r=new ze,a=Object.getOwnPropertyDescriptor(t,e);if(!a||!1!==a.configurable){var o=a&&a.get,s=a&&a.set;o&&!s||2!==arguments.length||(n=t[e]);var c=!i&&Xe(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=o?o.call(t):n;return ze.target&&(r.depend(),c&&(c.dep.depend(),Array.isArray(e)&&Ke(e))),e},set:function(e){var a=o?o.call(t):n;e===a||e!==e&&a!==a||o&&!s||(s?s.call(t,e):n=e,c=!i&&Xe(e),r.notify())}})}}function Ke(t){for(var e,n=0,i=t.length;n<i;n++)e=t[n],e&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&Ke(e)}function Je(t,e,n){if(e in t&&!(e in Object.prototype))return t[e]=n,n;var i=t.__ob__;return i?(Ze(i.value,e,n),i.dep.notify(),n):(t[e]=n,n)}var Qe=function(){function t(){Object(i["a"])(this,t)}return Object(r["a"])(t,[{key:"match",value:function(t){return Ie(t,"openapi")}},{key:"fetch",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){var e=this.generate(t),n=new Request(e.url,{method:e.method});return fetch(n).then((function(t){if(200===t.status)return t.json();throw new Error("Something went wrong on api server!")}))}))},{key:"generate",value:function(t){var e=Object.keys(t.paths);if(!e.length)return console.warn("Incorrect API Defination."),null;var n=e[0],i=t.servers[0].url;return{url:"".concat(i).concat(n),method:"GET"}}},{key:"parse",value:function(t,e){var n=Object.keys(t.paths),i=n[0],r={};t.alias&&e&&(r[t.alias]=e);var a=Object(O["get"])(t,"paths[".concat(i,"].get.responses['200'].content['application/json'].schema"));return a&&(a.$ref&&(a=Object(O["get"])(t,a.$ref.replace("#/","").replace(/\//gi,"."))),"object"===a.type&&Object.keys(a.properties).forEach((function(t){var e=a.properties[t];e.alias&&(r[e.alias]=t)}))),{alias:r}}}]),t}(),tn=[new Qe],en=[];function nn(t){return en.slice().concat(tn).filter((function(e){return e.match(t)}))[0]}function rn(t){-1===en.indexOf(t)&&en.push(t)}n("498a");var an=/[\w).+\-_$\]]/;function on(t){var e,n,i,r,a,o=!1,s=!1,c=!1,l=!1,u=0,d=0,h=0,f=0;for(i=0;i<t.length;i++)if(n=e,e=t.charCodeAt(i),o)39===e&&92!==n&&(o=!1);else if(s)34===e&&92!==n&&(s=!1);else if(c)96===e&&92!==n&&(c=!1);else if(l)47===e&&92!==n&&(l=!1);else if(124!==e||124===t.charCodeAt(i+1)||124===t.charCodeAt(i-1)||u||d||h){switch(e){case 34:s=!0;break;case 39:o=!0;break;case 96:c=!0;break;case 40:h++;break;case 41:h--;break;case 91:d++;break;case 93:d--;break;case 123:u++;break;case 125:u--;break}if(47===e){for(var m=i-1,g=void 0;m>=0;m--)if(g=t.charAt(m)," "!==g)break;g&&an.test(g)||(l=!0)}}else void 0===r?(f=i+1,r=t.slice(0,i).trim()):p();function p(){(a||(a=[])).push(t.slice(f,i).trim()),f=i+1}if(void 0===r?r=t.slice(0,i).trim():0!==f&&p(),r=r.replace("+"," + ").replace("-"," - ").replace("*"," * ").replace("/"," / ").replace("%"," % ").replace("^"," ^ ").split(/\s+/).map((function(t){var e=t.trim();return/[+\-*/%^]/.test(e)||/\d+/.test(e)||/^"[^"]+"$|^'[^']+'$/.test(e)?e:'_d("'.concat(e,'")')})).join(" "),a)for(i=0;i<a.length;i++)r=sn(r,a[i]);return r}function sn(t,e){var n=e.indexOf("(");if(n<0)return'_f("'.concat(e,'")(').concat(t,")");var i=e.slice(0,n),r=e.slice(n+1);return'_f("'.concat(i,'")(').concat(t).concat(")"!==r?","+r:r)}var cn=/\{\{((?:.|\r?\n)+?)\}\}/g,ln=/[-.*+?^${}()|[\]\/\\]/g,un=function(t){var e=t[0].replace(ln,"\\$&"),n=t[1].replace(ln,"\\$&");return new RegExp(e+"((?:.|\\n)+?)"+n,"g")};function dn(t,e){var n=e?un(e):cn;if(n.test(t)){var i,r,a,o=[],s=[],c=n.lastIndex=0;while(i=n.exec(t)){r=i.index,r>c&&(s.push(a=t.slice(c,r)),o.push(JSON.stringify(a)));var l=on(i[1].trim());o.push("_s(".concat(l,")")),s.push({"@binding":l}),c=r+i[0].length}return c<t.length&&(s.push(a=t.slice(c)),o.push(JSON.stringify(a))),{expression:o.join("+"),tokens:s}}}var hn=/[^{{]*{{[^}]*}}.*$/m,fn=bn,mn=function(t){return void 0===t?"":t.toString()};function gn(t,e,n){if(t){var i;i=hn.test(t)?dn(t).expression:on(t);var r=function(t){var i=Re(t,e._alias),r=i(e);return void 0===r?i(n):r},a=new Function("_f","_s","_d","return ".concat(i));return a.call(e,fn,mn,r)}}var pn={};function vn(t,e){pn[t]=e}function bn(t){return pn[t]}var yn={enumerable:!0,configurable:!0,get:Le,set:Le},wn=Object.create(null),_n=Object.create(null),xn=new Map,kn=new Map;function En(t){Object.defineProperties(t,{_computedWatchers:{enumerable:!1,value:Object.create(null)},_watchers:{enumerable:!1,value:[]},_alias:{enumerable:!1,writable:!0,value:Object.create(null)}})}function On(t,e,n,i){e=e||wn;var r=xn.get(e);function a(){if(e!==wn){r._watchers.forEach((function(t){t.teardown()})),r._watchers.length=0;var n={};Object.keys(i).forEach((function(e){n[e]={handler:function(n){var i=kn.get(r);if("content"===e){var a={content:n,contents:[{content:n}]};"text"===i.type?t.changeTextContents(a,i):"styledText"===i.type?t.changeStyledTextContents(a,i):t.changeThreeTextContents(a,i)}else i[e]=n},deep:!0,immediate:!0}})),Mn(r,n)}}if(r||(r={},xn.set(e,r),kn.set(r,e),e===wn&&(_n=r)),En(r),n)if(Object(O["isFunction"])(n)){var s=n();s.then&&Object(O["isFunction"])(s.then)?(Sn(r,{}),s.then((function(t){Object.keys(t).forEach((function(e){jn(r,e,t[e])})),i&&(Tn(r,i),a())}))):Sn(r,s)}else{var c=nn(n);if(c)Sn(r,{}),r._alias=c.parse(n).alias,c.fetch(n).then((function(t){Object.keys(t).forEach((function(e){jn(r,e,t[e])})),i&&Tn(r,i)})).catch(console.error);else{var l={};Object.keys(n).forEach((function(t){var e=n[t],i=nn(e);if(i){var a=i.parse(e,t).alias;r._alias=Object(o["a"])(Object(o["a"])({},r._alias),a),l[t]=null,i.fetch(e).then((function(e){jn(r,t,e)})).catch(console.error)}else l[t]=Object(O["cloneDeep"])(n[t])})),Sn(r,l)}}else Sn(r,{});i&&(An(r,i),a())}function Sn(t,e){Object.keys(e).forEach((function(n){Object.defineProperty(t,n,{get:function(){return e[n]},set:function(t){e[n]=t}})})),Xe(e),Object.defineProperty(t,"$data",{value:e})}function jn(t,e,n){Ie(t,e)||Object.defineProperty(t,e,{get:function(){return t.$data[e]},set:function(n){t.$data[e]=n}}),Je(t.$data,e,n)}var In={lazy:!1};function An(t,e){for(var n in e)Cn(t,n,e[n])}function Tn(t,e){Un(t),An(t,e)}function Cn(t,e,n){var i=function(){return gn(n,this,_n)},r=t._computedWatchers;if(r[e]=new He(t,i||Le,Le,In),e in t.$data)console.warn('The computed property "'.concat(e,'" is already defined in data.'),t);else{var a=!0;yn.get=a?Pn(e):$n(i),yn.set=Le,Object.defineProperty(t,e,yn)}}function Pn(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),ze.target&&e.depend(),e.value}}function $n(t){return function(){return t.call(this,this)}}function Mn(t,e){for(var n in e){var i=e[n];if(Array.isArray(i))for(var r=0;r<i.length;r++)Rn(t,n,i[r]);else Rn(t,n,i)}}function Rn(t,e,n,i){Ce(n)&&(i=n,n=n.handler),i=i||{},i.user=!0;var r=new He(t,e,n,i);if(i.immediate)try{n.call(t,r.value)}catch(a){console.error(a,t,'callback for immediate watcher "'.concat(r.expression,'"'))}return function(){r.teardown()}}function Ln(t){var e;e=t?xn.get(t):xn.get(wn),e&&(e._computedWatchers&&Object.keys(e._computedWatchers).forEach((function(t){var n=e._computedWatchers[t];n.teardown(),delete e._computedWatchers[t]})),e._watchers&&(e._watchers.forEach((function(t){t.teardown()})),e._watchers.length=0),kn.delete(e),xn.delete(t))}function Un(t){t._computedWatchers&&Object.keys(t._computedWatchers).forEach((function(e){var n=t._computedWatchers[e];n.teardown(),delete t._computedWatchers[e],delete t[e]}))}function zn(){var t,e=Object(ce["a"])(kn);try{for(e.s();!(t=e.n()).done;){var n=Object(k["a"])(t.value,1),i=n[0];Un(i),i._watchers&&(i._watchers.forEach((function(t){t.teardown()})),i._watchers.length=0)}}catch(r){e.e(r)}finally{e.f()}kn.clear(),xn.clear(),_n={}}function Dn(t,e){var n=xn.get(e)||_n;t.data&&(Object.keys(t.data).forEach((function(i){var r=t.data[i];if(Ie(n,i)){if(n[i]!==t.data[i]){var a=nn(r);a?a.fetch(r).then((function(t){jn(n,i,t),e&&Tn(n,e.computed)})).catch(console.error):jn(n,i,Object(O["cloneDeep"])(r))}}else jn(n,i,Object(O["cloneDeep"])(r))})),Object.keys(n.$data).forEach((function(e){Ie(t.data,e)||(delete n.$data[e],delete n[e])}))),e&&t.computed&&(Object.keys(t.computed).forEach((function(e){n._computedWatchers[e]&&(n._computedWatchers[e].teardown(),delete n[e]),Cn(n,e,t.computed[e])})),Object.keys(n._computedWatchers).forEach((function(e){if(!Ie(t.computed,e)){var i=n._computedWatchers[e];i.teardown(),delete n._computedWatchers[e],delete n[e]}}))),n.$data.__ob__.dep.notify()}function Bn(t){return xn.get(t||wn)}var Nn={resetDataSource:function(){zn()},setDataSource:function(t){var e=this;if(t.bindings){if(t.bindings.global){var n=t.bindings.global.data;n&&On(this,void 0,n,void 0)}this.walkTemplet((function(n){var i=n.dataBinding,r=t.bindings[i];i&&!r&&console.warn("Can not find specified binding"),r&&On(e,n,r.data,r.computed)}),!0)}},addDataBinding:function(t,e){if(e){var n=e.$id;if(e.dataBinding)throw new Error("Model is bound！");e.dataBinding=n}On(this,e,t.data,t.computed)},getDataBinding:function(t){return Bn(t)},changeDataBinding:function(t,e){Dn(t,e)},removeDataBinding:function(t){delete t.dataBinding,Ln(t)},installFilter:function(t,e){vn(t,e)},installDataAdaptor:function(t){rn(t)}},Fn=n("e156"),Hn=n("b354"),Vn=n("8541"),Gn=n("e0b4"),Wn=n("e4b7");function Yn(t){var e=navigator.userAgent.includes("Mac OS"),n=t.meta_data||{},i=n.ascent,r=n.descent,a=n.emSize,o=n.winAscent,s=n.winDescent,c=e?i:o,l=e?r:s;if(void 0!==c&&void 0!==l&&a){var u=c/a,d=l/a;return{ascent:Math.abs(u),descent:Math.abs(d)}}return console.warn(new Error("没有找到".concat(t.name,"的字体信息,这会导致文字还原不准确"))),{ascent:.8,descent:.2}}var qn=function(t,e,n){var i=Object.assign({fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",fontSize:12},t),r=i.fontStyle,a=i.fontVariant,o=i.fontWeight,s=i.fontSize,c=n.subsetSuffix,l='"'.concat(e.name+c,'", "').concat(e.family+c,'", "').concat(e.name,'", "').concat(e.family,'", "Arial", "SimSun", "Sans-Serif"'),u="".concat("null"!==r&&r?r:"normal"," ").concat(a," ").concat(o||"normal"," ").concat(s,"px ").concat(l);return u};function Xn(t){return t/180*Math.PI}var Zn=function(){function t(e){var n=e.hooks,r=e.model,a=e.words,o=e.sizeOffset;Object(i["a"])(this,t),this.words=a,this.sizeOffset=o,this.hooks=n,this.nomarlCanvas=n.getNomarlCanvas(),this.outputCanvas=Object(Fn["b"])(),this.outputCtx=this.outputCanvas.getContext("2d"),this.offCanvas=Object(Fn["b"])(),this.effectCanvas=Object(Fn["b"])(),this.temCanvas=Object(Fn["b"])(),this.model=r,this.offCtx=this.offCanvas.getContext("2d"),this.effectCtx=this.effectCanvas.getContext("2d"),this.temCtx=this.temCanvas.getContext("2d")}return Object(r["a"])(t,[{key:"effectedTextEffects",get:function(){return Object(Et["c"])(this.model)}},{key:"init",value:function(){this.width=this.nomarlCanvas.width,this.height=this.nomarlCanvas.height,this.outputCanvas.width=this.temCanvas.width=this.offCanvas.width=this.effectCanvas.width=this.width,this.outputCanvas.height=this.temCanvas.height=this.offCanvas.height=this.effectCanvas.height=this.height}},{key:"load",value:function(){var t=this,e=[];return this._imgsMap={},this.effectedTextEffects.forEach((function(t){var n=t.filling&&t.filling.enable&&1===t.filling.type&&t.filling.imageContent.image;n&&e.push(n)})),P.a.map(e,U["a"].loadImage).then((function(n){n.forEach((function(n,i){t._imgsMap[e[i]]=n}))}))}},{key:"draw",value:function(){var t=Object(T["a"])(Object(A["a"])().mark((function t(){var e,n=this;return Object(A["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=["shadow","filling","stroke"],t.next=3,this.load();case 3:return this.init(),this.effectedTextEffects.forEach((function(t){!1!==t.enable&&e.forEach((function(e){var i=t[e];i&&i.enable&&n[e]&&(n[e](i),n.offCtx.drawImage(n.effectCanvas,0,0),n._clearRect(n.effectCtx)),"filling"!==e||i&&i.enable||n.offCtx.drawImage(n.nomarlCanvas,0,0)})),n.transform(t),n._clearRect(n.offCtx)})),t.abrupt("return",this.outputCtx);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"transform",value:function(t){var e=this.outputCtx,n=t.skew,i=void 0===n?{x:0,y:0}:n,r=t.offset,a=void 0===r?{x:0,y:0}:r;e.save(),e.translate(this.sizeOffset.offsetX,this.sizeOffset.offsetY),e.transform(1,Math.tan(Xn(i.y)),Math.tan(Xn(i.x)),1,a.x,a.y),e.translate(-this.sizeOffset.offsetX,-this.sizeOffset.offsetY),e.drawImage(this.offCanvas,0,0),e.restore()}},{key:"stroke",value:function(t){var e=t.width,n=t.color,i=this.words,r=this.sizeOffset,a=this.temCtx;this._clearRect(a),a.save(),a.strokeStyle=n,a.miterLimit=4,a.lineWidth=e,this.hooks.drawWordsBefore(a,r),i.forEach((function(t){a.font=t.fontStyle,a.strokeText(t.content,t.left+r.offsetX,t.top+t.ascentHeight+r.offsetY)})),a.restore(),this.effectCtx.drawImage(this.temCanvas,0,0)}},{key:"shadow",value:function(t){var e=this.hooks.getNomarlCanvas("shadow"),n=this.temCtx;this._clearRect(n),n.save(),n.filter?n.filter="drop-shadow(".concat(t.offsetX+1e4,"px ").concat(t.offsetY,"px ").concat(t.blur,"px ").concat(t.color,")"):(n.shadowColor=t.color,n.shadowBlur=t.blur,n.shadowOffsetX=t.offsetX+1e4,n.shadowOffsetY=t.offsetY),n.drawImage(e,-1e4,0),n.restore(),this.effectCtx.drawImage(this.temCanvas,0,0)}},{key:"filling",value:function(t){var e=this.hooks.getNomarlCanvas("filling"),n=this.temCtx;this._clearRect(n),n.drawImage(e,0,0),n.save(),n.globalCompositeOperation="source-in",0===t.type&&this.fillingColor(n,t),1===t.type&&this.fillingImage(n,t),2===t.type&&this.fillingGradient(n,t),n.restore(),this.effectCtx.drawImage(this.temCanvas,0,0)}},{key:"fillingColor",value:function(t,e){t.fillStyle=e.color,this._fillRect(t)}},{key:"fillingGradient",value:function(t,e){var n=e.gradient,i=n.angle,r=n.stops,a=this.model.width,o=this.model.height,s=(90-i)*(Math.PI/180),c=Math.abs(a*Math.sin(s))+Math.abs(o*Math.cos(s)),l={x:a/2,y:o/2},u=Math.sin(s-Math.PI/2)*c/2,d=Math.cos(s-Math.PI/2)*c/2,h=l.x-d,f=l.y-u,m=l.x+d,g=l.y+u,p=t.createLinearGradient(h,f,m,g);r.forEach((function(t){p.addColorStop(t.offset,t.color)})),t.fillStyle=p,t.translate(this.sizeOffset.offsetX,this.sizeOffset.offsetY),this._fillRect(t)}},{key:"fillingImage",value:function(t,e){if(!e.imageContent.image)return P.a.resolve();var n=t.createPattern(this._imgsMap[e.imageContent.image],"repeat");t.fillStyle=n;var i=e.imageContent,r=i.scaleX,a=i.scaleY;t.translate(this.sizeOffset.offsetX,this.sizeOffset.offsetY),t.scale(r,a),this._fillRect(t,r,a)}},{key:"_fillRect",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t.fillRect(0,0,t.canvas.width/e,t.canvas.height/n)}},{key:"_clearRect",value:function(t){t.clearRect(0,0,t.canvas.width,t.canvas.height)}}]),t}(),Kn=n("5342"),Jn=U["a"].isFox(),Qn=Jn||window.safari,ti=Math.round,ei=function(){function t(e,n,r){Object(i["a"])(this,t),this.node=r,this.model=e,this.editor=n,this.options=n.options,this.canvas=Object(Fn["b"])()}return Object(r["a"])(t,[{key:"isVisible",get:function(){return 0!==this.model.autoAdaptive}},{key:"effectedTextEffects",get:function(){return Object(Et["c"])(this.model)}},{key:"fontSizeScale",get:function(){var t=Qn?1:this.model.$miniFontSize;return Math.min(1,this.model.fontSize/t)}},{key:"transformOrigin",get:function(){var t={x:0,y:0},e=this.model.verticalAlign;return t.y={top:0,middle:.5,bottom:1}[e],t}},{key:"getSizeOffset",value:function(){var t=Object(Kn["c"])(this.model);return Object(o["a"])(Object(o["a"])({},t),{},{offsetX:-1*t.left,offsetY:-1*t.top})}},{key:"getWords",value:function(){var t=this.options,e=Object(Wn["a"])(this.node,this.node.parentNode),n=Object(Wn["b"])(e,this.model);return n.forEach((function(e){e.fontSize=Math.max(12,e.fontSize);var n=t.fontsMap[e.fontFamily],i=Yn(n),r=i.ascent,a=ti(r*e.fontSize);e.fontStyle=qn(e,n,t),e.ascentHeight=a})),n}},{key:"drawWordsBefore",value:function(t,e){var n=this.fontSizeScale,i=this.transformOrigin,r=this.model;if(!(n>=1)){var a=r.width*i.x+e.offsetX,o=r.height*i.y+e.offsetY;t.translate(a,o),t.scale(n,n),t.translate(-a,-o)}}},{key:"drawNormal",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{color:null,newCanvas:null},e=this.canvas,n=this.getWords(),i=this.getSizeOffset(n);e=t.newCanvas||e,e.width=i.width,e.height=i.height;var r=e.getContext("2d");return this.drawWordsBefore(r,i),n.forEach((function(e){r.font=e.fontStyle,r.fillStyle=t.color||e.color,r.fillText(e.content,e.left+i.offsetX,e.top+e.ascentHeight+i.offsetY)})),{ctx:r,words:n,canvas:e,sizeOffset:i}}},{key:"drawEffects",value:function(t){var e,n=this,i=new Zn({model:this.model,words:t.words,sizeOffset:t.sizeOffset,hooks:{drawWordsBefore:this.drawWordsBefore.bind(this),getNomarlCanvas:function(i){return"shadow"!==i&&"filling"!==i?t.ctx.canvas:(e=e||n.drawNormal({color:"#000",newCanvas:Object(Fn["b"])()}),e.ctx.canvas)}}});return i.draw()}},{key:"drawText",value:function(){var t=Object(T["a"])(Object(A["a"])().mark((function t(){var e,n;return Object(A["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e=this.drawNormal(),!this.effectedTextEffects.length){t.next=7;break}return t.next=5,this.drawEffects(e);case 5:return n=t.sent,t.abrupt("return",{offsetX:e.sizeOffset.offsetX,offsetY:e.sizeOffset.offsetY,canvas:n.canvas});case 7:return t.abrupt("return",{offsetX:e.sizeOffset.offsetX,offsetY:e.sizeOffset.offsetY,canvas:e.canvas});case 10:return t.prev=10,t.t0=t["catch"](0),console.warn(t.t0),this.canvas.width=this.model.width,this.canvas.height=this.model.height,t.abrupt("return",{canvas:this.canvas,offsetX:0,offsetY:0});case 16:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),ni=n("fb7f"),ii=n.n(ni),ri=n("925e"),ai=(n("38cf"),n("eb3b")),oi=n("fbba"),si="svg-export__";function ci(t){return t.$loaded?P.a.delay(10):P.a.delay(100).then((function(){return ci(t)}))}function li(t){var e=[];return t.replace(/background-image:\s*url\(([^"\\)]+)\)/g,(function(t,n){n&&!e.includes(n)&&e.push(n)})),P.a.map(e.filter((function(t){var e=t&&t.includes(";base64");return!e})),(function(t){return Bt["a"].loadImage(t).then((function(e){var n=Object(Fn["b"])(e.width,e.height);n.getContext("2d").drawImage(e,0,0);var i=t.split(".").pop();return i=["jpg","jpeg","gif"].includes(i)?i:"png",n.toDataURL("image/".concat(i))}))})).then((function(n){return n.forEach((function(n,i){t=t.replace(new RegExp(e[i],"g"),n)})),t}))}var ui=new Map;function di(t){if(!1!==Object(O["get"])(t,"filling.enable")&&1===Object(O["get"])(t,"filling.type")&&Object(O["get"])(t,"filling.imageContent.image")){var e=t.filling.imageContent.image;if(e&&e.length<200&&!ui.get(e)){var n=Math.random().toString().replace(".",""),i="backgroundImage_".concat(n);ui.set(e,{url:e,className:i,styleStr:".".concat(i,"{background-image: url(").concat(e,");}")})}}}function hi(){return"<style>"+["\n        .".concat(si,"element {will-change: transform;position: absolute; left: 0; top: 0;transform-origin: 50% 50%;}\n        .").concat(si,"element-position {width: 100%;height: 100%;position: absolute;top: 0;left: 0; }\n        .").concat(si,"element-content {box-sizing: border-box; width: 100%;height: 100%;font-size: 0;white-space: nowrap;}\n        .").concat(si,"element-before { display: inline-block;vertical-align: middle;}\n        .").concat(si,"element-main {word-wrap: break-word;white-space: normal;display: inline-block;outline: 0;position: relative;}\n\n        .").concat(si,"element-main p, \n        .").concat(si,"element-main div, \n        .").concat(si,"element-main ol, \n        .").concat(si,"element-main ul, \n        .").concat(si,"element-main li {padding: 0;margin: 0;}\n        .middle-v {writing-mode: vertical-rl}\n        "),".is-list .".concat(si,"element-main>ol>li,.is-list .").concat(si,"element-main>ul>li,.is-list .").concat(si,"element-main>div,.is-list .").concat(si,"element-main>p,.is-list .").concat(si,"element-main>span{display:list-item;list-style:none}.is-list .").concat(si,"element-main>ol>li::before,.is-list .").concat(si,"element-main>ul>li::before,.is-list .").concat(si,"element-main>div::before,.is-list .").concat(si,"element-main>p::before,.is-list .").concat(si,"element-main>span::before{letter-spacing:0;box-sizing:border-box;position:absolute;left:0;margin:0;white-space:nowrap;padding-left:.2em}.middle-v.is-list .").concat(si,"element-main>ol>li,.middle-v.is-list .").concat(si,"element-main>ul>li,.middle-v.is-list .").concat(si,"element-main>div,.middle-v.is-list .").concat(si,"element-main>p,.middle-v.is-list .").concat(si,"element-main>span{margin-left:0!important}.middle-v.is-list .").concat(si,"element-main>ol>li::before,.middle-v.is-list .").concat(si,"element-main>ul>li::before,.middle-v.is-list .").concat(si,"element-main>div::before,.middle-v.is-list .").concat(si,"element-main>p::before,.middle-v.is-list .").concat(si,"element-main>span::before{margin-left:0;padding-left:0;padding-top:.2em;width:auto;top:0;left:auto}.middle-v.is-list.is-fox .").concat(si,"element-main>ol>li,.middle-v.is-list.is-fox .").concat(si,"element-main>ul>li,.middle-v.is-list.is-fox .").concat(si,"element-main>div,.middle-v.is-list.is-fox .").concat(si,"element-main>p,.middle-v.is-list.is-fox .").concat(si,"element-main>span{position:relative}.middle-v.is-list.is-fox .").concat(si,"element-main>ol>li::before,.middle-v.is-list.is-fox .").concat(si,"element-main>ul>li::before,.middle-v.is-list.is-fox .").concat(si,"element-main>div::before,.middle-v.is-list.is-fox .").concat(si,"element-main>p::before,.middle-v.is-list.is-fox .").concat(si,"element-main>span::before{right:0;transform:translateY(-100%)}.is-list--disc .").concat(si,"element-main>ol>li::before,.is-list--disc .").concat(si,"element-main>ul>li::before,.is-list--disc .").concat(si,"element-main>div::before,.is-list--disc .").concat(si,"element-main>p::before,.is-list--disc .").concat(si,"element-main>span::before{padding-left:.5em}.middle-v.is-list.is-list--disc .").concat(si,"element-main>ol>li::before,.middle-v.is-list.is-list--disc .").concat(si,"element-main>ul>li::before,.middle-v.is-list.is-list--disc .").concat(si,"element-main>div::before,.middle-v.is-list.is-list--disc .").concat(si,"element-main>p::before,.middle-v.is-list.is-list--disc .").concat(si,"element-main>span::before{padding-top:.5em}.is-list--disc .").concat(si,"element-main{counter-reset:list-count}.is-list--disc .").concat(si,"element-main>ol>li,.is-list--disc .").concat(si,"element-main>ul>li,.is-list--disc .").concat(si,"element-main>div,.is-list--disc .").concat(si,"element-main>p,.is-list--disc .").concat(si,"element-main>span{margin-left:1.3em}.is-list--disc .").concat(si,"element-main>ol>li::before,.is-list--disc .").concat(si,"element-main>ul>li::before,.is-list--disc .").concat(si,"element-main>div::before,.is-list--disc .").concat(si,"element-main>p::before,.is-list--disc .").concat(si,"element-main>span::before{counter-increment:list-count;content:counter(list-count,disc) '';width:1.3em}.middle-v.is-list--disc .").concat(si,"element-main>ol>li,.middle-v.is-list--disc .").concat(si,"element-main>ul>li,.middle-v.is-list--disc .").concat(si,"element-main>div,.middle-v.is-list--disc .").concat(si,"element-main>p,.middle-v.is-list--disc .").concat(si,"element-main>span{margin-top:1.3em}.middle-v.is-list--disc .").concat(si,"element-main>ol>li::before,.middle-v.is-list--disc .").concat(si,"element-main>ul>li::before,.middle-v.is-list--disc .").concat(si,"element-main>div::before,.middle-v.is-list--disc .").concat(si,"element-main>p::before,.middle-v.is-list--disc .").concat(si,"element-main>span::before{height:1.3em}.is-list--digit-2.is-list--disc .").concat(si,"element-main>ol>li,.is-list--digit-2.is-list--disc .").concat(si,"element-main>ul>li,.is-list--digit-2.is-list--disc .").concat(si,"element-main>div,.is-list--digit-2.is-list--disc .").concat(si,"element-main>p,.is-list--digit-2.is-list--disc .").concat(si,"element-main>span{margin-left:1.3em}.is-list--digit-2.is-list--disc .").concat(si,"element-main>ol>li::before,.is-list--digit-2.is-list--disc .").concat(si,"element-main>ul>li::before,.is-list--digit-2.is-list--disc .").concat(si,"element-main>div::before,.is-list--digit-2.is-list--disc .").concat(si,"element-main>p::before,.is-list--digit-2.is-list--disc .").concat(si,"element-main>span::before{width:1.3em}.middle-v.is-list--digit-2.is-list--disc .").concat(si,"element-main>ol>li,.middle-v.is-list--digit-2.is-list--disc .").concat(si,"element-main>ul>li,.middle-v.is-list--digit-2.is-list--disc .").concat(si,"element-main>div,.middle-v.is-list--digit-2.is-list--disc .").concat(si,"\nelement-main>p,.middle-v.is-list--digit-2.is-list--disc .").concat(si,"element-main>span{margin-top:1.3em}.middle-v.is-list--digit-2.is-list--disc .").concat(si,"element-main>ol>li::before,.middle-v.is-list--digit-2.is-list--disc .").concat(si,"element-main>ul>li::before,.middle-v.is-list--digit-2.is-list--disc .").concat(si,"element-main>div::before,.middle-v.is-list--digit-2.is-list--disc .").concat(si,"element-main>p::before,.middle-v.is-list--digit-2.is-list--disc .").concat(si,"element-main>span::before{height:1.3em}.is-list--decimal .").concat(si,"element-main{counter-reset:list-count}.is-list--decimal .").concat(si,"element-main>ol>li,.is-list--decimal .").concat(si,"element-main>ul>li,.is-list--decimal .").concat(si,"element-main>div,.is-list--decimal .").concat(si,"element-main>p,.is-list--decimal .").concat(si,"element-main>span{margin-left:1.3em}.is-list--decimal .").concat(si,"element-main>ol>li::before,.is-list--decimal .").concat(si,"element-main>ul>li::before,.is-list--decimal .").concat(si,"element-main>div::before,.is-list--decimal .").concat(si,"element-main>p::before,.is-list--decimal .").concat(si,"element-main>span::before{counter-increment:list-count;content:counter(list-count,decimal) '.';width:1.3em}.middle-v.is-list--decimal .").concat(si,"element-main>ol>li,.middle-v.is-list--decimal .").concat(si,"element-main>ul>li,.middle-v.is-list--decimal .").concat(si,"element-main>div,.middle-v.is-list--decimal .").concat(si,"element-main>p,.middle-v.is-list--decimal .").concat(si,"element-main>span{margin-top:1.3em}.middle-v.is-list--decimal .").concat(si,"element-main>ol>li::before,.middle-v.is-list--decimal .").concat(si,"element-main>ul>li::before,.middle-v.is-list--decimal .").concat(si,"element-main>div::before,.middle-v.is-list--decimal .").concat(si,"element-main>p::before,.middle-v.is-list--decimal .").concat(si,"element-main>span::before{height:1.3em}.is-list--digit-2.is-list--decimal .").concat(si,"element-main>ol>li,.is-list--digit-2.is-list--decimal .").concat(si,"element-main>ul>li,.is-list--digit-2.is-list--decimal .").concat(si,"element-main>div,.is-list--digit-2.is-list--decimal .").concat(si,"element-main>p,.is-list--digit-2.is-list--decimal .").concat(si,"element-main>span{margin-left:1.8em}.is-list--digit-2.is-list--decimal .").concat(si,"element-main>ol>li::before,.is-list--digit-2.is-list--decimal .").concat(si,"element-main>ul>li::before,.is-list--digit-2.is-list--decimal .").concat(si,"element-main>div::before,.is-list--digit-2.is-list--decimal .").concat(si,"element-main>p::before,.is-list--digit-2.is-list--decimal .").concat(si,"element-main>span::before{width:1.8em}.middle-v.is-list--digit-2.is-list--decimal .").concat(si,"element-main>ol>li,.middle-v.is-list--digit-2.is-list--decimal .").concat(si,"element-main>ul>li,.middle-v.is-list--digit-2.is-list--decimal .").concat(si,"element-main>div,.middle-v.is-list--digit-2.is-list--decimal .").concat(si,"element-main>p,.middle-v.is-list--digit-2.is-list--decimal .").concat(si,"element-main>span{margin-top:1.8em}.middle-v.is-list--digit-2.is-list--decimal .").concat(si,"element-main>ol>li::before,.middle-v.is-list--digit-2.is-list--decimal .").concat(si,"element-main>ul>li::before,.middle-v.is-list--digit-2.is-list--decimal .").concat(si,"element-main>div::before,.middle-v.is-list--digit-2.is-list--decimal .").concat(si,"element-main>p::before,.middle-v.is-list--digit-2.is-list--decimal .").concat(si,"element-main>span::before{height:1.8em}.is-list--decimal-leading-zero .").concat(si,"element-main{counter-reset:list-count}.is-list--decimal-leading-zero .").concat(si,"element-main>ol>li,.is-list--decimal-leading-zero .").concat(si,"element-main>ul>li,.is-list--decimal-leading-zero .").concat(si,"element-main>div,.is-list--decimal-leading-zero .").concat(si,"element-main>p,.is-list--decimal-leading-zero .").concat(si,"element-main>span{margin-left:1.8em}.is-list--decimal-leading-zero .").concat(si,"element-main>ol>li::before,.is-list--decimal-leading-zero .").concat(si,"element-main>ul>li::before,.is-list--decimal-leading-zero .").concat(si,"element-main>div::before,.is-list--decimal-leading-zero .").concat(si,"element-main>p::before,.is-list--decimal-leading-zero .").concat(si,"element-main>span::before{counter-increment:list-count;content:counter(list-count,decimal-leading-zero) '.';width:1.8em}.middle-v.is-list--decimal-leading-zero .").concat(si,"element-main>ol>li,.middle-v.is-list--decimal-leading-zero .").concat(si,"element-main>ul>li,.middle-v.is-list--decimal-leading-zero .").concat(si,"element-main>div,.middle-v.is-list--decimal-leading-zero .").concat(si,"element-main>p,.middle-v.is-list--decimal-leading-zero .").concat(si,"element-main>span{margin-top:1.8em}.middle-v.is-list--decimal-leading-zero .").concat(si,"element-main>ol>li::before,.middle-v.is-list--decimal-leading-zero .").concat(si,"\nelement-main>ul>li::before,.middle-v.is-list--decimal-leading-zero .").concat(si,"element-main>div::before,.middle-v.is-list--decimal-leading-zero .").concat(si,"element-main>p::before,.middle-v.is-list--decimal-leading-zero .").concat(si,"element-main>span::before{height:1.8em}.is-list--digit-2.is-list--decimal-leading-zero .").concat(si,"element-main>ol>li,.is-list--digit-2.is-list--decimal-leading-zero .").concat(si,"element-main>ul>li,.is-list--digit-2.is-list--decimal-leading-zero .").concat(si,"element-main>div,.is-list--digit-2.is-list--decimal-leading-zero .").concat(si,"element-main>p,.is-list--digit-2.is-list--decimal-leading-zero .").concat(si,"element-main>span{margin-left:1.8em}.is-list--digit-2.is-list--decimal-leading-zero .").concat(si,"element-main>ol>li::before,.is-list--digit-2.is-list--decimal-leading-zero .").concat(si,"element-main>ul>li::before,.is-list--digit-2.is-list--decimal-leading-zero .").concat(si,"element-main>div::before,.is-list--digit-2.is-list--decimal-leading-zero .").concat(si,"element-main>p::before,.is-list--digit-2.is-list--decimal-leading-zero .").concat(si,"element-main>span::before{width:1.8em}.middle-v.is-list--digit-2.is-list--decimal-leading-zero .").concat(si,"element-main>ol>li,.middle-v.is-list--digit-2.is-list--decimal-leading-zero .").concat(si,"element-main>ul>li,.middle-v.is-list--digit-2.is-list--decimal-leading-zero .").concat(si,"element-main>div,.middle-v.is-list--digit-2.is-list--decimal-leading-zero .").concat(si,"element-main>p,.middle-v.is-list--digit-2.is-list--decimal-leading-zero .").concat(si,"element-main>span{margin-top:1.8em}.middle-v.is-list--digit-2.is-list--decimal-leading-zero .").concat(si,"element-main>ol>li::before,.middle-v.is-list--digit-2.is-list--decimal-leading-zero .").concat(si,"element-main>ul>li::before,.middle-v.is-list--digit-2.is-list--decimal-leading-zero .").concat(si,"element-main>div::before,.middle-v.is-list--digit-2.is-list--decimal-leading-zero .").concat(si,"element-main>p::before,.middle-v.is-list--digit-2.is-list--decimal-leading-zero .").concat(si,"element-main>span::before{height:1.8em}.is-list--lower-alpha .").concat(si,"element-main{counter-reset:list-count}.is-list--lower-alpha .").concat(si,"element-main>ol>li,.is-list--lower-alpha .").concat(si,"element-main>ul>li,.is-list--lower-alpha .").concat(si,"element-main>div,.is-list--lower-alpha .").concat(si,"element-main>p,.is-list--lower-alpha .").concat(si,"element-main>span{margin-left:1.3em}.is-list--lower-alpha .").concat(si,"element-main>ol>li::before,.is-list--lower-alpha .").concat(si,"element-main>ul>li::before,.is-list--lower-alpha .").concat(si,"element-main>div::before,.is-list--lower-alpha .").concat(si,"element-main>p::before,.is-list--lower-alpha .").concat(si,"element-main>span::before{counter-increment:list-count;content:counter(list-count,lower-alpha) '.';width:1.3em}.middle-v.is-list--lower-alpha .").concat(si,"element-main>ol>li,.middle-v.is-list--lower-alpha .").concat(si,"element-main>ul>li,.middle-v.is-list--lower-alpha .").concat(si,"element-main>div,.middle-v.is-list--lower-alpha .").concat(si,"element-main>p,.middle-v.is-list--lower-alpha .").concat(si,"element-main>span{margin-top:1.3em}.middle-v.is-list--lower-alpha .").concat(si,"element-main>ol>li::before,.middle-v.is-list--lower-alpha .").concat(si,"element-main>ul>li::before,.middle-v.is-list--lower-alpha .").concat(si,"element-main>div::before,.middle-v.is-list--lower-alpha .").concat(si,"element-main>p::before,.middle-v.is-list--lower-alpha .").concat(si,"element-main>span::before{height:1.3em}.is-list--digit-2.is-list--lower-alpha .").concat(si,"element-main>ol>li,.is-list--digit-2.is-list--lower-alpha .").concat(si,"element-main>ul>li,.is-list--digit-2.is-list--lower-alpha .").concat(si,"element-main>div,.is-list--digit-2.is-list--lower-alpha .").concat(si,"element-main>p,.is-list--digit-2.is-list--lower-alpha .").concat(si,"element-main>span{margin-left:1.8em}.is-list--digit-2.is-list--lower-alpha .").concat(si,"element-main>ol>li::before,.is-list--digit-2.is-list--lower-alpha .").concat(si,"element-main>ul>li::before,.is-list--digit-2.is-list--lower-alpha .").concat(si,"element-main>div::before,.is-list--digit-2.is-list--lower-alpha .").concat(si,"element-main>p::before,.is-list--digit-2.is-list--lower-alpha .").concat(si,"element-main>span::before{width:1.8em}.middle-v.is-list--digit-2.is-list--lower-alpha .").concat(si,"element-main>ol>li,.middle-v.is-list--digit-2.is-list--lower-alpha .").concat(si,"element-main>ul>li,.middle-v.is-list--digit-2.is-list--lower-alpha .").concat(si,"element-main>div,.middle-v.is-list--digit-2.is-list--lower-alpha .").concat(si,"element-main>p,.middle-v.is-list--digit-2.is-list--lower-alpha .").concat(si,"element-main>span{margin-top:1.8em}.middle-v.is-list--digit-2.is-list--lower-alpha .").concat(si,"element-main>ol>li::before,.middle-v.is-list--digit-2.is-list--lower-alpha .").concat(si,"\nelement-main>ul>li::before,.middle-v.is-list--digit-2.is-list--lower-alpha .").concat(si,"element-main>div::before,.middle-v.is-list--digit-2.is-list--lower-alpha .").concat(si,"element-main>p::before,.middle-v.is-list--digit-2.is-list--lower-alpha .").concat(si,"element-main>span::before{height:1.8em}.is-list--upper-alpha .").concat(si,"element-main{counter-reset:list-count}.is-list--upper-alpha .").concat(si,"element-main>ol>li,.is-list--upper-alpha .").concat(si,"element-main>ul>li,.is-list--upper-alpha .").concat(si,"element-main>div,.is-list--upper-alpha .").concat(si,"element-main>p,.is-list--upper-alpha .").concat(si,"element-main>span{margin-left:1.3em}.is-list--upper-alpha .").concat(si,"element-main>ol>li::before,.is-list--upper-alpha .").concat(si,"element-main>ul>li::before,.is-list--upper-alpha .").concat(si,"element-main>div::before,.is-list--upper-alpha .").concat(si,"element-main>p::before,.is-list--upper-alpha .").concat(si,"element-main>span::before{counter-increment:list-count;content:counter(list-count,upper-alpha) '.';width:1.3em}.middle-v.is-list--upper-alpha .").concat(si,"element-main>ol>li,.middle-v.is-list--upper-alpha .").concat(si,"element-main>ul>li,.middle-v.is-list--upper-alpha .").concat(si,"element-main>div,.middle-v.is-list--upper-alpha .").concat(si,"element-main>p,.middle-v.is-list--upper-alpha .").concat(si,"element-main>span{margin-top:1.3em}.middle-v.is-list--upper-alpha .").concat(si,"element-main>ol>li::before,.middle-v.is-list--upper-alpha .").concat(si,"element-main>ul>li::before,.middle-v.is-list--upper-alpha .").concat(si,"element-main>div::before,.middle-v.is-list--upper-alpha .").concat(si,"element-main>p::before,.middle-v.is-list--upper-alpha .").concat(si,"element-main>span::before{height:1.3em}.is-list--digit-2.is-list--upper-alpha .").concat(si,"element-main>ol>li,.is-list--digit-2.is-list--upper-alpha .").concat(si,"element-main>ul>li,.is-list--digit-2.is-list--upper-alpha .").concat(si,"element-main>div,.is-list--digit-2.is-list--upper-alpha .").concat(si,"element-main>p,.is-list--digit-2.is-list--upper-alpha .").concat(si,"element-main>span{margin-left:1.8em}.is-list--digit-2.is-list--upper-alpha .").concat(si,"element-main>ol>li::before,.is-list--digit-2.is-list--upper-alpha .").concat(si,"element-main>ul>li::before,.is-list--digit-2.is-list--upper-alpha .").concat(si,"element-main>div::before,.is-list--digit-2.is-list--upper-alpha .").concat(si,"element-main>p::before,.is-list--digit-2.is-list--upper-alpha .").concat(si,"element-main>span::before{width:1.8em}.middle-v.is-list--digit-2.is-list--upper-alpha .").concat(si,"element-main>ol>li,.middle-v.is-list--digit-2.is-list--upper-alpha .").concat(si,"element-main>ul>li,.middle-v.is-list--digit-2.is-list--upper-alpha .").concat(si,"element-main>div,.middle-v.is-list--digit-2.is-list--upper-alpha .").concat(si,"element-main>p,.middle-v.is-list--digit-2.is-list--upper-alpha .").concat(si,"element-main>span{margin-top:1.8em}.middle-v.is-list--digit-2.is-list--upper-alpha .").concat(si,"element-main>ol>li::before,.middle-v.is-list--digit-2.is-list--upper-alpha .").concat(si,"element-main>ul>li::before,.middle-v.is-list--digit-2.is-list--upper-alpha .").concat(si,"element-main>div::before,.middle-v.is-list--digit-2.is-list--upper-alpha .").concat(si,"element-main>p::before,.middle-v.is-list--digit-2.is-list--upper-alpha .").concat(si,"element-main>span::before{height:1.8em}.is-list--cjk-ideographic .").concat(si,"element-main{counter-reset:list-count}.is-list--cjk-ideographic .").concat(si,"element-main>ol>li,.is-list--cjk-ideographic .").concat(si,"element-main>ul>li,.is-list--cjk-ideographic .").concat(si,"element-main>div,.is-list--cjk-ideographic .").concat(si,"element-main>p,.is-list--cjk-ideographic .").concat(si,"element-main>span{margin-left:1.8em}.is-list--cjk-ideographic .").concat(si,"element-main>ol>li::before,.is-list--cjk-ideographic .").concat(si,"element-main>ul>li::before,.is-list--cjk-ideographic .").concat(si,"element-main>div::before,.is-list--cjk-ideographic .").concat(si,"element-main>p::before,.is-list--cjk-ideographic .").concat(si,"element-main>span::before{counter-increment:list-count;content:counter(list-count,cjk-ideographic) '、';width:1.8em}.middle-v.is-list--cjk-ideographic .").concat(si,"element-main>ol>li,.middle-v.is-list--cjk-ideographic .").concat(si,"element-main>ul>li,.middle-v.is-list--cjk-ideographic .").concat(si,"element-main>div,.middle-v.is-list--cjk-ideographic .").concat(si,"element-main>p,.middle-v.is-list--cjk-ideographic .").concat(si,"element-main>span{margin-top:1.8em}.middle-v.is-list--cjk-ideographic .").concat(si,"element-main>ol>li::before,.middle-v.is-list--cjk-ideographic .").concat(si,"element-main>ul>li::before,.middle-v.is-list--cjk-ideographic .").concat(si,"element-main>div::before,.middle-v.is-list--cjk-ideographic .").concat(si,"\nelement-main>p::before,.middle-v.is-list--cjk-ideographic .").concat(si,"element-main>span::before{height:1.8em}.is-list--digit-2.is-list--cjk-ideographic .").concat(si,"element-main>ol>li,.is-list--digit-2.is-list--cjk-ideographic .").concat(si,"element-main>ul>li,.is-list--digit-2.is-list--cjk-ideographic .").concat(si,"element-main>div,.is-list--digit-2.is-list--cjk-ideographic .").concat(si,"element-main>p,.is-list--digit-2.is-list--cjk-ideographic .").concat(si,"element-main>span{margin-left:3em}.is-list--digit-2.is-list--cjk-ideographic .").concat(si,"element-main>ol>li::before,.is-list--digit-2.is-list--cjk-ideographic .").concat(si,"element-main>ul>li::before,.is-list--digit-2.is-list--cjk-ideographic .").concat(si,"element-main>div::before,.is-list--digit-2.is-list--cjk-ideographic .").concat(si,"element-main>p::before,.is-list--digit-2.is-list--cjk-ideographic .").concat(si,"element-main>span::before{width:3em}.middle-v.is-list--digit-2.is-list--cjk-ideographic .").concat(si,"element-main>ol>li,.middle-v.is-list--digit-2.is-list--cjk-ideographic .").concat(si,"element-main>ul>li,.middle-v.is-list--digit-2.is-list--cjk-ideographic .").concat(si,"element-main>div,.middle-v.is-list--digit-2.is-list--cjk-ideographic .").concat(si,"element-main>p,.middle-v.is-list--digit-2.is-list--cjk-ideographic .").concat(si,"element-main>span{margin-top:3em}.middle-v.is-list--digit-2.is-list--cjk-ideographic .").concat(si,"element-main>ol>li::before,.middle-v.is-list--digit-2.is-list--cjk-ideographic .").concat(si,"element-main>ul>li::before,.middle-v.is-list--digit-2.is-list--cjk-ideographic .").concat(si,"element-main>div::before,.middle-v.is-list--digit-2.is-list--cjk-ideographic .").concat(si,"element-main>p::before,.middle-v.is-list--digit-2.is-list--cjk-ideographic .").concat(si,"element-main>span::before{height:3em}")].join("")+"</style>"}function fi(){var t='<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><foreignObject></foreignObject></svg>',e="data:image/svg+xml;charset=utf8,"+encodeURIComponent(t),n=Object(Fn["b"])(1,1);return Object(oi["c"])(e).then((function(t){var e=n.getContext("2d");return e.drawImage(t,0,0),e.getImageData(0,0,1,1),!0})).catch((function(t){return console.log(t),!1}))}var mi=n("91e8"),gi=Math.max,pi=Math.min,vi=Ut["a"].isFox();function bi(t){return t.replace(/\B([A-Z])/g,"-$1").toLowerCase()}var yi,wi=function(){function t(e,n){Object(i["a"])(this,t),this.model=e,this.editor=n,this.options=n.options,this.minFontSize=window.safari?1:e.$miniFontSize,this.fallbackFonts="Arial,SimSun,Sans-Serif"}return Object(r["a"])(t,[{key:"color",get:function(){return this.model.color&&vt()(this.model.color).toString("rgb")}},{key:"fontFamily",get:function(){var t=this.lastFont;t&&!this.model.$loaded||(t=this.getCloseFont());var e=["'".concat(t.name+this.options.subsetSuffix,"'"),"'".concat(t.family+this.options.subsetSuffix,"'"),"'".concat(t.name,"'"),"'".concat(t.family,"'"),this.fallbackFonts];return e.join(",")}},{key:"isVertical",get:function(){var t=this.model,e=t.writingMode;return e&&e.indexOf("vertical")>-1}},{key:"widthAutoScale",get:function(){var t=this.model;return[this.isVertical?1:2,3].includes(t.autoAdaptive)}},{key:"contentsHTML",get:function(){var t=this,e=this.model,n=this.options,i=ai["a"].fromHTML(e.contents.map((function(i){var r=i.fontFamily||e.fontFamily,a=n.fontsMap[r]||n.defaultFont,s=t.options.fontSubset.getUrl,c=t.options.subsetSuffix,l=(s?['"'.concat(a.name+c,'"'),'"'.concat(a.family+c,'"')]:[]).concat(['"'.concat(a.name,'"'),'"'.concat(a.family,'"'),t.fallbackFonts]);return Object(o["a"])(Object(o["a"])({},i),{},{fontFamily:l.join(","),textDecoration:i.textDecoration||e.textDecoration,fontStyle:i.fontStyle||e.fontStyle,fontWeight:i.fontWeight||e.fontWeight})})),{listStyle:e.listStyle});return i.replace(/<br>/g,"<br/>").replace(/&nbsp;/g,"&#160;")}},{key:"fontSizeScale",get:function(){var t=this.model;return Math.min(1,t.fontSize/this.minFontSize)}},{key:"letterSpacingScale",get:function(){var t=this.model;return this.fontSizeScale<1?this.minFontSize/t.fontSize:1}},{key:"transformOrigin",get:function(){var t=this.model,e=[0,0],n=t.verticalAlign;return this.isVertical?(e[0]={top:"100%",middle:"50%",bottom:0}[n],e[1]=0):(e[0]=0,e[1]={top:0,middle:"50%",bottom:"100%"}[n]),e.join(" ")}},{key:"mainTransform",get:function(){var t=this.fontSizeScale;return t<1?"scale("+t+")":null}},{key:"mainMinHeight",get:function(){var t=this.model;return this.isVertical?"initial":t.fontSize*t.lineHeight*this.fontSizeScale+"px"}},{key:"mainMinWidth",get:function(){var t=this.model;return this.isVertical?t.fontSize*t.lineHeight*this.fontSizeScale+"px":"initial"}},{key:"mainWidth",get:function(){var t=this.fontSizeScale,e=100/t;return this.isVertical||this.widthAutoScale?"auto":"calc(".concat(e,"% + ").concat(this.model.letterSpacing,"px)")}},{key:"mainHeight",get:function(){var t=this.fontSizeScale,e=100/t;return this.isVertical?this.widthAutoScale?"auto":"calc(".concat(e,"% + ").concat(this.model.letterSpacing,"px)"):"auto"}},{key:"cssStyle",get:function(){var t=this.model;return["height: ".concat(t.height,"px"),"width: ".concat(t.width,"px"),"overflow: ".concat(0===t.autoAdaptive?"hidden":"visible",";")].join(";")}},{key:"innerStyle",get:function(){var t=this.model;return["padding: ".concat(t.padding.join("px ")+"px"),"text-align: ".concat(t.textAlign),"line-height: ".concat(t.lineHeight)].join(";")}},{key:"textStyle",get:function(){var t=this.model;return["font-family:".concat(this.fontFamily),"font-size: ".concat(Math.max(this.minFontSize,t.fontSize),"px"),"letter-spacing: ".concat(t.letterSpacing,"px"),"vertical-align: ".concat(t.verticalAlign),"transform: ".concat(this.mainTransform||"none"),"transform-origin: ".concat(this.transformOrigin),"min-width: ".concat(this.mainMinWidth),"min-height: ".concat(this.mainMinHeight),"width: ".concat(this.mainWidth),"height: ".concat(this.mainHeight),"color: ".concat(this.color),"white-space: ".concat(this.widthAutoScale?"nowrap":"")].join(";")}},{key:"beforeStyle",get:function(){return"".concat(this.isVertical?"width: 100%; height: 0":"height: 100%; width: 0;")}},{key:"hasEffects",get:function(){var t=this.model;return t.textEffects&&this.effectedTextEffects.length}},{key:"effectedTextEffects",get:function(){var t=this.model;return Object(Et["c"])(t)}},{key:"getCloseFont",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.options,n=e.fontsMap,i=e.defaultFont,r=e.fontList;return t||(t=this.model.fontFamily),n[t]||n[i]||r[0]}},{key:"getEffectStyle",value:function(t,e){var n={};if(t.offset&&(t.offset.x&&(n.left=t.offset.x+"px"),t.offset.y&&(n.top=t.offset.y+"px")),t.stroke&&!1!==t.stroke.enable&&"outer"!==t.stroke.type&&e&&t.stroke&&t.stroke.width&&(n.webkitTextStroke=n.textStroke="".concat(t.stroke.width,"px ").concat(t.stroke.color)),t.shadow&&t.shadow.enable&&e){var i=this.isVertical,r=t.shadow,a=r.offsetX,o=r.offsetY,s=r.color,c=r.blur;if(window.safari&&!i)o*=-1;else if(window.safari&&i){var l=o;o=a,a=l}n.textShadow="".concat(a,"px ").concat(o,"px ").concat(c,"px ").concat(s)}if(t.skew&&!1!==t.skew.enable&&(t.skew.x||t.skew.y)&&(n.transform="skew(".concat(t.skew.x,"deg, ").concat(t.skew.y,"deg)")),t.filling&&t.filling.enable&&e){var u=t.filling;if(0===u.type&&(n.webkitTextFillColor=u.color),1===u.type&&u.imageContent&&u.imageContent.image){var d=u.imageContent,h={width:d.width,height:d.height},f={width:this.model.width,height:this.model.height},m=d.type,g=h.width&&h.height&&f.width&&f.height;if(n.webkitBackgroundClip="text",n.webkitTextFillColor="transparent",n.backgroundImage="url(".concat(d.image,")"),n.backgroundRepeat="no-repeat",n.backgroundPosition="center",g&&"fill"===m){var p=Object(mi["a"])(h,f);n.backgroundSize="".concat(h.width*p,"px ").concat(h.height*p,"px")}else if(g&&"fit"===m){var v=Object(mi["b"])(h,f);n.backgroundSize="".concat(h.width*v,"px ").concat(h.height*v,"px")}else if(g&&"crop"===m)n.backgroundSize="100% 100%";else if(!g||"tiled"!==m&&m){d.repeat&&(n.backgroundRepeat=d.repeat);var b=d.width,y=d.height,w=d.scaleX,_=d.scaleY;b&&y&&(n.backgroundSize="".concat(b*w,"px ").concat(y*_,"px"))}else n.backgroundPosition="0 0",n.backgroundRepeat="repeat",n.backgroundSize="".concat(h.width*d.scaleX,"px ").concat(h.height*d.scaleY,"px")}if(2===u.type){n.webkitBackgroundClip="text",n.webkitTextFillColor="transparent";var x=[],k=u.gradient;x.push(90-k.angle+"deg"),k.stops.forEach((function(t){x.push("".concat(t.color," ").concat(100*t.offset,"%"))}));var E=x.join(",");n.backgroundImage="linear-gradient(".concat(E,")")}}var O=Object.keys(n).reduce((function(t,e){var i=bi(e);return i=(0===i.indexOf("webkit")?"-":"")+i,t.push(i+":"+n[e]),t}),[]);return O.join(";")}},{key:"getEffectsExpand",value:function(){var t=this,e={offset:{x:[0],y:[0]},shadow:{xblur:[0],yblur:[0]},stroke:[0]};this.effectedTextEffects.forEach((function(n){var i=n.offset,r=n.shadow,a=n.stroke;if(i&&i.enable&&(e.offset.x.push(i.x),e.offset.y.push(i.y)),r&&r.enable){var o=r.blur+0,s=r.offsetY,c=r.offsetX;if(window.safari&&!t.isVertical)s*=-1;else if(window.safari&&t.isVertical){var l=s;s=c,c=l}e.shadow.xblur.push(c+o),e.shadow.xblur.push(c-o),e.shadow.yblur.push(s+o),e.shadow.yblur.push(s-o)}a&&a.enable&&e.stroke.push(a.width+10)}));var n={offset:{downX:gi.apply(void 0,Object(I["a"])(e.offset.x)),downY:gi.apply(void 0,Object(I["a"])(e.offset.y)),upX:pi.apply(void 0,Object(I["a"])(e.offset.x)),upY:pi.apply(void 0,Object(I["a"])(e.offset.y))},shadow:{downXBlur:gi.apply(void 0,Object(I["a"])(e.shadow.xblur)),downYBlur:gi.apply(void 0,Object(I["a"])(e.shadow.yblur)),upXBlur:pi.apply(void 0,Object(I["a"])(e.shadow.xblur)),upYBlur:pi.apply(void 0,Object(I["a"])(e.shadow.yblur))},stroke:gi.apply(void 0,Object(I["a"])(e.stroke))};return{upX:n.offset.upX+pi(n.shadow.upXBlur,-n.stroke),upY:n.offset.upY+pi(n.shadow.upYBlur,-n.stroke),downX:n.offset.downX+gi(n.shadow.downXBlur,n.stroke),downY:n.offset.downY+gi(n.shadow.downYBlur,n.stroke)}}},{key:"getHTML",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=0,r=this.hasEffects,a=this.textStyle,o=this.contentsHTML,s=this.beforeStyle,c=this.effectedTextEffects,l=this.innerStyle,u=this.cssStyle,d=this.model,h=c.map((function(e){di(e);var i=t.getEffectStyle(e,n);return a+";"+i})),f=c.map((function(t){if(!1===Object(O["get"])(t,"filling.enable")||1!==Object(O["get"])(t,"filling.type")||!Object(O["get"])(t,"filling.imageContent.image"))return"";var e=ui.get(Object(O["get"])(t,"filling.imageContent.image"));return e?e.className:""})),m=d.listStyle,g=d.contents.filter((function(t){return"li"===t.beginParentTag})),p={decimal:10,"upper-alpha":27,"lower-alpha":27,"cjk-ideographic":11},v=p[m]?1+Math.min(1,Math.floor(g.length/p[m])):1,b=[];m&&"none"!==m&&b.push("is-list is-list--"+m),vi&&b.push("is-fox"),v&&b.push("is-list--digit-"+v);var y=b.join(" "),w=d.writingMode.includes("vertical")?"middle-v":"",_=r?c.reduce((function(t){return t+='\n                <div class="'.concat(si,"element-position ").concat(w,'">\n                    <div class="').concat(si,"element-content ").concat(y," ").concat(w,'" style="').concat(l,'">\n                        <span class="').concat(si,'element-before" style="').concat(s,'"></span>\n                        <div class="').concat(si,"element-main ").concat(f[i],'" style="').concat(h[i],'">').concat(o,"</div>\n                    </div>\n                </div>"),i++,t}),""):'\n        <div class="'.concat(si,"element-position ").concat(w,'">\n            <div class="').concat(si,"element-content ").concat(y," ").concat(w,'" style="').concat(l,'">\n                <span class="').concat(si,'element-before" style="').concat(s,'"></span>\n                <div class="').concat(si,'element-main" style="').concat(a,'">').concat(o,"</div>\n            </div>\n        </div>");return'<div class="'.concat(si,'element" style="').concat(u+e,'">').concat(_,"</div>")}}]),t}(),_i=window.navigator.userAgent.indexOf("Edge")>-1,xi=!1,ki=Math.max,Ei=Math.min,Oi=Math.abs,Si=Math.ceil,ji=function(t){var e=[];return ri["a"].walkTemplet((function(t){"text"===t.type&&t.width>=1&&t.height>=1&&["width","height"].every((function(e){return t[e]<13e3}))&&e.push(t)}),(function(t){return"watermark"!==t.type}),[{elements:t}]),e},Ii=function(){function t(e,n){Object(i["a"])(this,t),e=ji(e.elements||e),this.editor=n,this.canvas=Object(Fn["b"])(),this.fonts=[],this.spriteInfo={},e.length&&this.init(e)}return Object(r["a"])(t,[{key:"getUsedFonts",value:function(){var t={},e=this.editor.options,n=e.fontSubset;this.models.forEach((function(n){n.contents.forEach((function(i){var r=i.fontFamily||n.fontFamily,a=e.fontsMap[r]||e.defaultFont;t[a.name+a.family]=a}))}));var i=Object.values(t),r=n.getUrl&&n.supportTypes&&n.supportTypes.includes("text")&&n.exportEnableCallback,a=r&&r(this.editor);if(i.length>10&&!a)throw new Error("字体最多为10个");return i}},{key:"getSpriteRects",value:function(){var t=this,e=[],n=Object(Ut["b"])(),i=this.models,r=this.textModels,a=Object(E["a"])('<div style="position: absolute; top: 0; left: -10000px;">'.concat(hi(),"</div>"));return r.forEach((function(t){return a.append(t.getHTML("",!1))})),a.appendTo(document.body),a.find(".".concat(si,"element")).each((function(r,a){var o=a.getBoundingClientRect(),s=[o];Object(E["a"])(a).find(".".concat(si,"element-main span")).each((function(t,e){return s.push(e.getBoundingClientRect())}));var c=ki(0,100*o.height/n-o.height),l={left:Ei.apply(void 0,Object(I["a"])(s.map((function(t){return t.left})))),top:Ei.apply(void 0,Object(I["a"])(s.map((function(t){return t.top})))),right:ki.apply(void 0,Object(I["a"])(s.map((function(t){return t.right})))),bottom:ki.apply(void 0,Object(I["a"])(s.map((function(t){return t.bottom}))))+c};l.width=l.right-l.left,l.height=l.bottom-l.top;var u=i[r],d=t.getExpand(u.textEffects),h=-1*Ei(0,u.letterSpacing),f=Si(u.fontSize/2)+h;d.upX=Ei(-1*f,d.upX),d.upY=Ei(-1*f,d.upY),d.downX=ki(f,d.downX),d.downY=ki(f,d.downY),e.push({id:u.$id,width:l.width+Oi(d.upX)+d.downX,height:l.height+Oi(d.upY)+d.downY,offsetX:o.left-l.left-d.upX,offsetY:o.top-l.top-d.upY})})),a.remove(),e=ii()(e),e.itemsMap=e.items.reduce((function(t,e){return t[e.item.id]=e,t}),{}),e}},{key:"getExpand",value:function(t){var e={offset:{x:[0],y:[0]},shadow:{xblur:[0],yblur:[0]},stroke:[0]};t.forEach((function(t){var n=t.enable,i=t.offset,r=t.shadow,a=t.stroke;if(n){if(i&&i.enable&&(e.offset.x.push(i.x),e.offset.y.push(i.y)),r&&r.enable){var o=r.blur+0;e.shadow.xblur.push(r.offsetX+o),e.shadow.xblur.push(r.offsetX-o),e.shadow.yblur.push(r.offsetY+o),e.shadow.yblur.push(r.offsetY-o)}a&&a.enable&&e.stroke.push(("outer"===a.type?2*a.width:a.width)+10)}}));var n={offset:{downX:ki.apply(void 0,Object(I["a"])(e.offset.x)),downY:ki.apply(void 0,Object(I["a"])(e.offset.y)),upX:Ei.apply(void 0,Object(I["a"])(e.offset.x)),upY:Ei.apply(void 0,Object(I["a"])(e.offset.y))},shadow:{downXBlur:ki.apply(void 0,Object(I["a"])(e.shadow.xblur)),downYBlur:ki.apply(void 0,Object(I["a"])(e.shadow.yblur)),upXBlur:Ei.apply(void 0,Object(I["a"])(e.shadow.xblur)),upYBlur:Ei.apply(void 0,Object(I["a"])(e.shadow.yblur))},stroke:ki.apply(void 0,Object(I["a"])(e.stroke))};return{upX:n.offset.upX+Ei(n.shadow.upXBlur,-n.stroke),upY:n.offset.upY+Ei(n.shadow.upYBlur,-n.stroke),downX:n.offset.downX+ki(n.shadow.downXBlur,n.stroke),downY:n.offset.downY+ki(n.shadow.downYBlur,n.stroke)}}},{key:"init",value:function(t){var e=this;t=t.map((function(t){return e.editor.getElement(t.$id,{queryCurrntElement:!1,deep:!0})||t})),this.models=t,this.textModels=t.map((function(t){return new wi(t,e.editor)})),this._initPromise=P.a.map(this.models,ci).then((function(){return e.getSpriteRects()})).then((function(t){if(t.width>16e3||t.height>16e3)throw new Error("精灵图尺寸超出 canvas 最大限制");return e.spriteInfo=t,e.fonts=e.getUsedFonts(),e.fonts}))}},{key:"createSvg",value:function(t){var e=this.spriteInfo,n=e.width,i=e.height,r=e.itemsMap,a=this.textModels,o=a.map((function(t){var e=r[t.model.$id];return t.getHTML("left: ".concat(e.x+e.item.offsetX,"px; top: ").concat(e.y+e.item.offsetY,"px"))})).join(""),s="";return ui.forEach((function(t){s+=t.styleStr})),P.a.all([li(s),li(o)]).then((function(e){var r=Object(k["a"])(e,2),a=r[0],o=r[1],s=a;t.forEach((function(t){t.dataURL&&(s+='@font-face {font-family: "'.concat(t.name,'";src: url(').concat(t.dataURL,") format('woff');font-display: swap;font-weight: ").concat(t.weight,"}"))}));var c,l='<svg viewBox="0 0 '.concat(n," ").concat(i,'" width="').concat(n,'" height="').concat(i,'" xmlns="http://www.w3.org/2000/svg">').concat(hi(),"<style>").concat(s,'</style><foreignObject x="0" y="0" width="').concat(n,'" height="').concat(i,'"><div xmlns="http://www.w3.org/1999/xhtml" style="width:').concat(n,"px; height:").concat(i,'px; position: relative">').concat(o,"</div></foreignObject></svg>");if(_i){var u=new Blob([l],{type:"image/svg+xml"});c=URL.createObjectURL(u)}else c="data:image/svg+xml;charset=utf8,"+encodeURIComponent(l);return xi&&Object(E["a"])(l).appendTo(document.body),Object(oi["c"])(c).delay(window.safari?3e3:500)})).then((function(t){return xi&&Object(E["a"])(t).appendTo(document.body),t}))}},{key:"createCanvas",value:function(t){return this.createSvg(t).then((function(t){var e=t.width,n=t.height,i=Object(Fn["b"])(e+10,n+10),r=i.getContext("2d");return r.drawImage(t,0,0,e,n),i}))}},{key:"drawTexts",value:function(){var t=this;return this._initPromise?(console.time("svg export"),yi||(yi=fi()),yi.then((function(e){if(!e)throw new Error("不支持svg导出");return t._initPromise})).then((function(e){return console.time("loadFonts"),Object(oi["b"])(e,t.editor)})).then((function(e){return console.timeEnd("loadFonts"),console.time("svg export createSvg"),t.createCanvas(e).then((function(n){var i=window.safari&&t.textModels.some((function(t){return t.hasImageFilling}));return i?t.createCanvas(e):n}))})).then((function(e){xi&&Object(E["a"])(e).appendTo(document.body),console.timeEnd("svg export createSvg");var n=t.spriteInfo.itemsMap;return P.a.map(t.models,(function(t){var i=n[t.$id],r=Object(Fn["b"])(Math.max(1,i.width),Math.max(1,i.height));return r.getContext("2d").drawImage(e,Math.round(i.x),Math.round(i.y),Math.round(i.width),Math.round(i.height),0,0,Math.round(i.width),Math.round(i.height)),xi&&Object(E["a"])(r).appendTo(document.body),{modelId:t.$id,offsetX:i.item.offsetX,offsetY:i.item.offsetY,canvas:r}}))})).then((function(t){return console.timeEnd("svg export"),t}))):P.a.resolve([])}}]),t}(),Ai=n("660d"),Ti=n("aaf7"),Ci=n("d10d"),Pi=function(t){Object(B["a"])(n,t);var e=Object(N["a"])(n);function n(t){var r,a=t.editor,o=t.layout,s=t.canvas;Object(i["a"])(this,n);var c=o;return s=s||Object(Fn["b"])(Math.round(o.width),Math.round(o.height)),o=Object.assign({},a.global.layout,{width:a.width,height:a.height}),r=e.call(this,{canvas:s,editor:a,layout:o}),r.currentLayout=c,r}return Object(r["a"])(n,[{key:"_clearCtx",value:function(t){t.clearRect(0,0,t.canvas.width,t.canvas.height)}},{key:"renderImage",value:function(){var t=Object(T["a"])(Object(A["a"])().mark((function t(e){var n,i,r,a,o,s,c,l,u,d;return Object(A["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.load();case 2:return n=t.sent,i=this.model,r=this.currentLayout,a=this.effectImage,o=a.repeat,s=a.imageTransform,c=!o||"none"===o||"no-repeat"===o,l=i.width/2,u=i.height/2,e.save(),c||(d=Object(Fn["b"])(i.$imageWidth,i.$imageHeight).getContext("2d"),d.drawImage(n,0,0,i.$imageWidth,i.$imageHeight),e.fillStyle=e.createPattern(d.canvas,o)),e.translate(0,-r.top),e.translate(l,u),e.scale(s.scale.x<0?-1:1,s.scale.y<0?-1:1),e.rotate(s.rotation),e.translate(-l,-u),c?e.drawImage(n,i.$imageLeft,i.$imageTop,i.$imageWidth,i.$imageHeight):e.fillRect(0,0,Math.max(i.width,i.$imageWidth),Math.max(i.height,i.$imageHeight)),e.restore(),t.abrupt("return",e.canvas);case 17:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),n}(Ci["a"]),$i=n("6c62"),Mi=n("7b93"),Ri=n("ac5f");function Li(t){return Ui.apply(this,arguments)}function Ui(){return Ui=Object(T["a"])(Object(A["a"])().mark((function t(e){var n,i,r,a,o,s,c,l;return Object(A["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.layout,r=e.ctx,a=e.options,o=e.editor,s=e.element,!s){t.next=5;break}return t.next=4,new Ci["a"]({element:s,editor:o,canvas:r.canvas}).render();case 4:return t.abrupt("return");case 5:if(i.mosaic||null!==(n=i.background)&&void 0!==n&&n.image){t.next=7;break}return t.abrupt("return",Promise.resolve());case 7:return a=a||o.options,t.next=10,new Ci["a"]({layout:i,editor:o,canvas:r.canvas}).render();case 10:return t.next=12,new $i["a"]({layout:i,editor:o}).export();case 12:c=t.sent,c&&r.drawImage(c,0,0,i.width,i.height),w()(i,"background.watermarkEnable")&&Object(Ri["c"])(i,r,a),l=Object(Mi["a"])({editor:o,layout:i}),l&&r.drawImage(l,0,0);case 17:case"end":return t.stop()}}),t)}))),Ui.apply(this,arguments)}function zi(t){return Di.apply(this,arguments)}function Di(){return Di=Object(T["a"])(Object(A["a"])().mark((function t(e){var n,i,r,a,o,s,c,l,u;return Object(A["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.layout,i=e.ctx,r=e.editor,a=r.global.layout||{},o=a.backgroundImage,s=void 0===o?"":o,c=a.backgroundColor,l=void 0===c?"":c,u=s||l&&vt()(l).getAlpha(),u){t.next=5;break}return t.abrupt("return");case 5:return t.abrupt("return",new Pi({layout:n,editor:r,canvas:i.canvas}).render());case 6:case"end":return t.stop()}}),t)}))),Di.apply(this,arguments)}var Bi=n("01b8"),Ni=["left","top","right","bottom"];function Fi(t,e){return Hi.apply(this,arguments)}function Hi(){return Hi=Object(T["a"])(Object(A["a"])().mark((function t(e,n){var i,r,a,o,s,c,l,u,d,h,f,m,g,p,v;return Object(A["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.border,r=e.width,a=e.height,!i||!i.enable){t.next=30;break}if(o=i.type,s=i.imageRepeat,c=i.imageSlice,l=i.width,u=i.direction,d=i.opacity,h=i.image,"image"!==o){t.next=18;break}return f=h,m=Math.max.apply(this,Ni.map((function(t){return c[t]}))),g=l/m,p={left:c.left*g,top:c.top*g,right:c.right*g,bottom:c.bottom*g},t.next=10,Object(Bi["a"])(f,{targetWidth:r,targetHeight:a,imageSlice:c,targetImageSlice:p,repeat:s});case 10:return v=t.sent,n.save(),n.globalAlpha=d,n.drawImage(v,0,0),n.restore(),t.abrupt("return");case 18:if("color"!==o){t.next=28;break}return n.save(),n.globalAlpha=d,n.fillStyle=i.color,n.stroke(),u&&[function(){return n.fillRect(0,0,r,l)},function(){return n.fillRect(r-l,0,l,a)},function(){return n.fillRect(0,a-l,r,l)},function(){return n.fillRect(0,0,l,a)}].forEach((function(t,e){u[e]&&t()})),n.restore(),t.abrupt("return");case 28:if("gradient"!==o){t.next=30;break}return t.abrupt("return",Promise.resolve());case 30:return t.abrupt("return",Promise.resolve());case 31:case"end":return t.stop()}}),t,this)}))),Hi.apply(this,arguments)}n("2ca0");function Vi(t){return t&&t.startsWith("blend")?t.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()})).replace("blend-",""):t}function Gi(t){var e=t.background,n=new $["a"](Object(o["a"])(Object(o["a"])({},e.image),{},{type:"image",isApng:t.isApng,isGif:t.isGif}));return n}var Wi={_checkIsRenderWatermark:function(t,e){return this.options.watermarkImages.exportEnable&&(void 0===t?this.global.showWatermark||!!Object(O["get"])(this.global,"layout.watermarkEnable")||e.watermarkEnable:t)},_isSupportSvgExport:function(t,e){var n=this;e=Object.assign({isCheckStroke:!1},e);var i=!0,r=U["a"].isWebkit(),a=function(t){var e=n.getLayoutByElement(t),i=!1;return n.walkTemplet((function(t){if(t.isGif)return i=!0,!1}),!0,[e]),i};return this.walkTemplet((function(t){if("svg"===t.type&&t.$content&&t.$content.indexOf("<image")>-1&&(i=!1),r&&e.isCheckStroke&&"text"===t.type&&t.contents.find((function(e){return(e.fontSize||t.fontSize)>180}))&&(t.textEffects||[]).find((function(t){return t.stroke&&t.stroke.enable&&t.stroke.width>5}))){var n=a(t);if(!n)return i=!1,!1}}),!0,t?[{elements:t}]:this.layouts),i},_isSupportCanvasExport:function(t){var e=this,n=function(t){return!(t.listStyle&&"none"!==t.listStyle&&"nomarl"!==t.listStyle)},i=function(t){return t.contents&&t.contents.length?!t.contents.some((function(t){return t.textDecoration&&"none"!==t.textDecoration})):!(t.textDecoration&&"none"!==t.textDecoration)},r=function(t){return!(t.writingMode&&t.writingMode.includes("vertical")||!n(t)||!i(t))},a=function(){if(navigator.userAgent.includes("Mac OS"))return!0;var n=e.getUsedFontList([{elements:t}])||[];return!n.some((function(t){var e=t.meta_data||{},n=e.ascent,i=e.descent,r=e.winAscent,a=e.winDescent;return n!==r||i!==-a}))},o=a();return this.walkTemplet((function(t){if(!r(t))return o=!1,!1}),!0,[{elements:t}]),o},_setSvgTexts:function(t){var e=this,n=new Ii(t,this);return n.drawTexts().then((function(t){e.$svgTexts||(e.$svgTexts={}),t.forEach((function(t){e.$svgTexts[t.modelId]=t}))})).catch((function(t){throw new Error("_setSvgTexts -> "+t)}))},_needFlatten:function(t){var e=!0;return this.walkTemplet((function(t){if(Object(O["get"])(t,"maskInfo.enable")||Object(G["d"])(t)&&1!==t.opacity)return e=!1,!1}),!0,[t]),e},_resetElements:function(t){var e=this,n=this._restoreTempGroup(t).filter((function(t){return!t.hidden}));return n=this._needFlatten({elements:n})?Object(O["flatten"])(n.map((function(t){return Object(G["d"])(t)?e.collapseGroup(t,!0,!0):t}))):Object(_["c"])(n,{left:0,top:0,width:t.width,height:t.height,type:"group"}),n.filter((function(t){return!t.hidden&&t.width>.5&&t.height>.5}))},renderGifLayouts:function(){var t=arguments,e=this;return Object(T["a"])(Object(A["a"])().mark((function n(){var i,r,a,s,c,l,u,d,h,f,m,g,p,v,b,y,w,_,x,E,S,j,I,C,$,M,R,L,z,D,B,N,F,H;return Object(A["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=t.length>0&&void 0!==t[0]?t[0]:e.currentLayout,r=t.length>1&&void 0!==t[1]?t[1]:{},a=t.length>2&&void 0!==t[2]?t[2]:1e4,s=t.length>3?t[3]:void 0,c=t.length>4&&void 0!==t[4]&&t[4],s=e._checkIsRenderWatermark(s,i),l=!Object(G["d"])(i),u="gif 解析失败, 图片可能存在问题",d=Object(O["omit"])(i,"elements"),h=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){var n={width:d.width,height:d.height};return n.elements=t,n}var i=Object(O["cloneDeep"])(d);return i.elements=t,(d.isGif||d.isApng)&&i.background&&(i.background.image=null),i},f=function(t,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=!e._isSupportCanvasExport(t.elements);return e.exportImage(t,r,a,l&&n,o,l&&i)},m=function(t){var n,i=e._resetElements(t);if(null!==t&&void 0!==t&&null!==(n=t.background)&&void 0!==n&&n.image&&(t.isGif||t.isApng)){var r=Gi(t);i.unshift(r)}return i},g=function(t){var n=!1;return Object(G["d"])(t)?e.walkTemplet((function(t){if(Object(G["b"])(t))return n=!0,!1}),!0,[t]):n=Object(G["b"])(t),n},p=[],v=m(i),!l||e._isSupportCanvasExport(v)){n.next=18;break}return n.next=18,e._setSvgTexts(v);case 18:if(b=Object(O["findIndex"])(v,g),y=Object(O["findLastIndex"])(v,g),-1!==b&&-1!==y?(w=h(v.slice(0,b)),_=h(v.slice(b,y+1),!0),x=h(v.slice(y+1,v.length),!0),p.push(w,_,x)):p.push(i),1!==p.length){n.next=23;break}return n.abrupt("return",f(p[0],s).then((function(t){return[{delay:100,canvas:t}]})));case 23:return E=l?Object(o["a"])(Object(o["a"])({},i),{},{left:0,top:0}):Object(Kn["b"])(i),S=Math.round(E.width),j=Math.round(E.height),n.next=28,P.a.all([f(p[0],!1),f(p[2],!1,!1)]).then((function(t){var e=Object(k["a"])(t,2),n=e[0],i=e[1];return n.offsetX=n.offsetX||0,n.offsetY=n.offsetY||0,i.offsetX=i.offsetX||0,i.offsetY=i.offsetY||0,[n,i]}));case 28:return I=n.sent,C=Object(k["a"])(I,2),$=C[0],M=C[1],R=p[1],L=R.elements,z={},n.next=37,P.a.mapSeries(L,(function(t){return Object(O["get"])(t,"maskInfo.enable")&&!Object(O["get"])(t,"maskInfo.showSelf")?null:Object(G["b"])(t)?Object(Ti["d"])(t,{canvasWidth:S,canvasHeight:j,decode:function(){var e=Object(T["a"])(Object(A["a"])().mark((function e(){return Object(A["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!z[t.url]){e.next=2;break}return e.abrupt("return",z[t.url]);case 2:return e.abrupt("return",Object(Ti["c"])(t,{needBuffer:!0}).then((function(e){return z[t.url]=e,e})));case 3:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}(),lazy:c}).catch((function(){throw new Error(u)})):Object(G["d"])(t)?e.renderGifLayouts(t,r,a,s,c):e.elementToCanvas(t)}));case 37:return D=n.sent,z=null,B=Object(Ti["b"])(D,{canvasWidth:S,canvasHeight:j}).map((function(t){return Array.isArray(t)?t:[{canvas:t,delay:30}]})),n.next=42,U["a"].loadImage(e.options.watermarkImages.element);case 42:if(N=n.sent,"maskInfoGroup"!==i.$exportType){n.next=48;break}return F=i.$maskElement,n.next=47,e.elementToCanvas(F,r);case 47:H=n.sent;case 48:return n.abrupt("return",P.a.mapSeries(B,function(){var t=Object(T["a"])(Object(A["a"])().mark((function t(n){var r;return Object(A["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var t=Object(T["a"])(Object(A["a"])().mark((function t(){var r,a;return Object(A["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=Object(Fn["b"])(S,j),a=r.getContext("2d"),a.translate(-E.left,-E.top),a.drawImage($,-$.offsetX,-$.offsetY),t.next=6,P.a.mapSeries(n,(function(t,n){var i=L[n];return e.applyElementPropsToCanvas(i,t,r,N)}));case 6:if(a.drawImage(M,-M.offsetX,-M.offsetY),!F){t.next=12;break}return a.globalCompositeOperation="destination-in",t.next=11,e.applyElementPropsToCanvas(F,H,r);case 11:a.globalCompositeOperation="source-over";case 12:if(!s||!l){t.next=16;break}return t.abrupt("return",Object(Ri["c"])(i,a,e.options).then((function(){return r})));case 16:return t.abrupt("return",r);case 17:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),c){t.next=5;break}return t.next=4,r();case 4:r=t.sent;case 5:return t.abrupt("return",{offsetX:-E.left,offsetY:-E.top,delay:n[0].delay,canvas:r});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 49:case"end":return n.stop()}}),n)})))()},applyElementPropsToCanvas:function(t,e,n,i){var r=this;return Object(T["a"])(Object(A["a"])().mark((function a(){var o,s,c,l,u,d,h,f,m,g,p,v,b,y,w,_,x,k,E,S,j,T,C,P,$;return Object(A["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=n.getContext("2d"),s=e.canvas||e,!Object(O["isFunction"])(s)){a.next=8;break}return a.next=5,s();case 5:a.t0=a.sent,a.next=9;break;case 8:a.t0=s;case 9:if(s=a.t0,!(!s.width||!s.height||s.width<1||s.height<1)){a.next=12;break}return a.abrupt("return");case 12:if(c=t.left,l=t.top,u=t.transform,d=t.width,h=t.height,f=t.opacity,m=t.border,g=t.backgroundColor,p=t.backgroundEffect,v=t.watermarkEnable,b=t.blendMode,y=Math.ceil(Object(O["get"])(e,"offsetX",0)),w=Math.ceil(Object(O["get"])(e,"offsetY",0)),_={x:Math.ceil(Object(O["get"])(e,"pivot.x",c+d/2)),y:Math.ceil(Object(O["get"])(e,"pivot.y",l+h/2))},x=function(t){o.drawImage(t,Math.round(c),Math.round(l),Math.round(d),Math.round(h))},o.save(),o.globalAlpha=f,u&&(o.translate(_.x,_.y),o.transform.apply(o,Object(I["a"])(u.toArray().slice(0,4)).concat([0,0])),o.translate(-_.x,-_.y)),k=Object(O["get"])(e,"elementRealWidth",s.width),E=Object(O["get"])(e,"elementRealHeight",s.height),!(p&&p.enable||g)){a.next=27;break}return a.next=25,new Ci["a"]({editor:r,element:t}).render();case 25:S=a.sent,x(S);case 27:if(!m||!m.enable){a.next=32;break}return j=Object(Fn["b"])(d,h),a.next=31,Fi(t,j.getContext("2d"));case 31:x(j);case 32:o.save(),T=Vi(b),T&&"normal"!==T&&(o.globalCompositeOperation=T),o.drawImage(s,Math.round(c-y),Math.round(l-w),Math.round(k),Math.round(E)),o.restore(),i&&v&&r.options.watermarkImages.exportEnable&&(C=t.width,P=t.height,$=Object(Fn["d"])(i,{width:t.width,height:t.height,ratio:2}),o.drawImage($,Math.round(c),Math.round(l),Math.round(C),Math.round(P))),o.restore();case 39:case"end":return a.stop()}}),a)})))()},elementFullStatusToCanvas:function(t){var e=arguments,n=this;return Object(T["a"])(Object(A["a"])().mark((function i(){var r,a,s,c,l,u,d,h,f,m,g;return Object(A["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r=e.length>1&&void 0!==e[1]?e[1]:{},n._isSupportCanvasExport([t])){i.next=4;break}return i.next=4,n._setSvgTexts([t]);case 4:return a=function(){var t=Object(T["a"])(Object(A["a"])().mark((function t(e){var i,r;return Object(A["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=new Vn["a"]({model:e,editor:n,emitEventEnable:!1}),i.render(),t.next=4,i.export();case 4:return r=t.sent,t.abrupt("return",Object(Kn["d"])(e,r));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i.next=7,n.elementToCanvas(t,Object(o["a"])({image:a,mask:a},r));case 7:return s=i.sent,c=s.canvas||s,l=Object(O["get"])(s,"offsetX",0),u=Object(O["get"])(s,"offsetY",0),d=Object(O["get"])(s,"elementRealWidth",c.width),h=Object(O["get"])(s,"elementRealHeight",c.height),f={width:d,height:h,left:t.left-l,top:t.top-u},m=Object(Fn["b"])(Math.round(f.width),Math.round(f.height)),g=m.getContext("2d"),g.translate(-f.left,-f.top),i.next=19,n.applyElementPropsToCanvas(Object(o["a"])(Object(o["a"])({},t),{},{transform:null}),s,m);case 19:return i.abrupt("return",{canvas:m,effectedResult:{width:m.width,height:m.height,left:f.left-t.left,top:f.top-t.top}});case 20:case"end":return i.stop()}}),i)})))()},elementToCanvas:function(t,e){var n=this,i=this,r=t.type,a=t.$id,s=t.hidden;if(s){var c=Object(Fn["b"])(t.width,t.height);return P.a.resolve(c)}var l=this.getElement(a,{deep:!0,layouts:this.layouts}),u=function(){var t=Object(T["a"])(Object(A["a"])().mark((function t(e,i){return Object(A["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!l.$loaded&&!Object(O["get"])(i,"model.$loaded")){t.next=2;break}return t.abrupt("return",n.$nextTick());case 2:return t.abrupt("return",P.a.delay(50).then((function(){return u(e,i)})));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),d=function(){var t=Object(T["a"])(Object(A["a"])().mark((function t(e){return Object(A["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!(e instanceof HTMLImageElement)){t.next=5;break}return t.next=4,U["a"].loadImage(e.src);case 4:e=t.sent;case 5:return t.abrupt("return",e);case 8:return t.prev=8,t.t0=t["catch"](0),t.abrupt("return",e);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),h=function(t,e){return u(t,e).then((function(){var t=e.$el,n=t.querySelector("svg");if(n)return n.querySelector("title")&&n.removeChild(n.querySelector("title")),Object(Gn["a"])(n)}))},f=Object.assign({},{group:function(t){return i.elementsToCanvas(t,e,t.watermarkEnable)},flex:function(t){return i.elementsToCanvas(t,e,t.watermarkEnable)},text:function(t,e){if(i.$svgTexts&&i.$svgTexts[t.$id]){var n=i.$svgTexts[t.$id];return delete i.$svgTexts[t.$id],n}return u(t,e).then((function(){var n=e.$el,r=n.querySelector(".element-main"),a=new ei(t,i,r),o=a.drawText(i.global.zoom);return o}))},image:function(t,e){var n=e.$el;return u(t,e).then(Object(T["a"])(Object(A["a"])().mark((function e(){var i,r,a,o,s;return Object(A["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=n.querySelector("img, canvas"),e.next=3,d(i);case 3:if(i=e.sent,r=t.imageUrl,a=t.hasEffects,o=t.hasFilters,s="canvas"===i.nodeName.toLowerCase(),!r||!a&&!o){e.next=8;break}return e.abrupt("return",i);case 8:return e.abrupt("return",P.a.try((function(){return s?i:(t.mask="",Object(Ti["a"])(t,i))})));case 9:case"end":return e.stop()}}),e)})))).then((function(e){return Object(Kn["d"])(t,e)}))},mask:function(t,e){return u(t,e).then((function(){var n=e.$el,i=n.querySelector("img, canvas"),r=i instanceof HTMLImageElement;return r&&(t.isGif||t.isApng)?U["a"].loadImage(t.url).then((function(e){return Object(Ti["a"])(t,e)})):r?U["a"].loadImage(t.imageUrl):i})).then((function(e){return Object(Kn["d"])(t,e)}))},video:function(t){var e=new Hn["a"]({model:t,editor:i});return e.render(),e.export()},threeText:function(t,e){return u(t,e).then(Object(T["a"])(Object(A["a"])().mark((function n(){var r,a;return Object(A["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.$refs.img,!r){n.next=6;break}return n.next=4,d(r);case 4:return r=n.sent,n.abrupt("return",Object(Fn["g"])(r,t.width,t.height,i.options.picaResizeOptions,!1));case 6:if(!e.isRendering){n.next=11;break}return n.next=9,P.a.delay(10);case 9:n.next=6;break;case 11:return n.next=13,i.getThreeTextCanvas(t);case 13:return a=n.sent,n.abrupt("return",a);case 15:case"end":return n.stop()}}),n)}))))},effectText:function(t,e){return u(t,e).then(Object(T["a"])(Object(A["a"])().mark((function n(){var r,a,o,s;return Object(A["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=e.$refs,a=r.img,o=r.canvas;case 1:if(!e.isRendering){n.next=6;break}return n.next=4,P.a.delay(10);case 4:n.next=1;break;case 6:return s=a||o,n.next=9,d(s);case 9:return s=n.sent,n.abrupt("return",Object(Fn["g"])(s,t.width,t.height,i.options.picaResizeOptions,!1));case 11:case"end":return n.stop()}}),n)}))))},styledText:function(t,e){return u(t,e).then((function(){return new P.a((function(t){var n=document.createElement("img");n.setAttribute("crossorigin","anonymous"),n.onload=function(){t(n)},n.src=e.model.image.url}))})).then((function(n){var i=document.createElement("canvas");i.width=t.width,i.height=t.height;var r=i.getContext("2d"),a=Math.abs(e.model.image.offset.x),o=Math.abs(e.model.image.offset.y),s=i.width,c=i.height;return r.drawImage(n,a,o,s,c,0,0,i.width,i.height),i}))},ninePatch:function(t,e){return u(t,e).then(Object(T["a"])(Object(A["a"])().mark((function e(){return Object(A["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",U["a"].loadImage(t.url).then((function(e){var n=t.width,i=t.height,r=t.imageSlice,a=t.effectScale;return Object(Bi["a"])(e,{targetWidth:Math.round(n),targetHeight:Math.round(i),imageSlice:r,targetImageSlice:{left:r.left*a,top:r.top*a,right:r.right*a,bottom:r.bottom*a}})})));case 1:case"end":return e.stop()}}),e)}))))},table:function(t,e){var n=e&&e.$el.cloneNode(!0),r=new Ai["a"](t,n.outerHTML,i);return r.renderImage()},chart:function(t,e){return P.a.delay(400).then((function(){return u(t,e).then((function(){return e&&e.$chartRender?e.getCanvas():null}))}))},watermark:function(t,n){var r=this;return u(t).then((function(){if(0===t.waterType)return i.elementToCanvas(t.template,e);var a=t.imageUrl;return n.renderInCanvas?t.renderFullScreen(r):U["a"].loadImage(a)}))},arrow:function(){var t=Object(T["a"])(Object(A["a"])().mark((function t(e,n){var i,r,a;return Object(A["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u(e);case 2:return i=[{svg:n.$refs.trunk,data:Object(o["a"])(Object(o["a"])({},e.trunk),{},{width:e.$trunkWidth})},{svg:n.$refs.tail,data:e.tail},{svg:n.$refs.head,data:Object(o["a"])(Object(o["a"])({},e.head),{},{left:e.$headLeft})}].filter((function(t){return t.svg})),r=Object(Fn["b"])(e.width,e.height),a=r.getContext("2d"),t.abrupt("return",P.a.map(i,(function(t){var n=t.data,i=t.svg;return Object(Gn["a"])(i).then((function(t){var i=e.$minScale*e.$originalScale;a.drawImage(t,n.left*i,n.top*i,n.width*i,n.height*i)}))})).then((function(){return r})));case 6:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),svg:h,line:h,rect:h,ellipse:h,brush:h,common:function(t){return u(t).then((function(){return U["a"].loadImage(t.imageUrl).then((function(e){return e.width=t.width,e.height=t.height,e})).catch((function(){return null}))}))}},e),m=!this.supportTypesMap[t.type],g=function(t){var e=n.getComponentById(t);if(!e){var i=document.querySelector('.editor-element[data-id="'.concat(t,'"]'));e=i&&i.__vue__}return e};return P.a.try((function(){return f[m?"common":r](t,g(a))}))},elementsToCanvas:function(){var t=arguments,e=this;return Object(T["a"])(Object(A["a"])().mark((function n(){var i,r,s,c,l,u,d,h,f,m,g,p,v,b,y,w;return Object(A["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=t.length>0&&void 0!==t[0]?t[0]:e.currentLayout,r=t.length>1?t[1]:void 0,s=t.length>2?t[2]:void 0,c=t.length>3&&void 0!==t[3]&&t[3],s=e._checkIsRenderWatermark(s,i),l=e._resetElements(i),u=!Object(G["d"])(i),d=u?Object(o["a"])(Object(o["a"])({},i),{},{left:0,top:0}):Object(Kn["b"])(i),h=d.left,f=d.top,m=d.width,g=d.height,h*=-1,f*=-1,Array.isArray(l)){n.next=12;break}throw Error("elements must be array");case 12:if(p=document.createElement("canvas"),v=p.getContext("2d"),p.width=Math.round(m),p.height=Math.round(g),!u){n.next=24;break}if(!c){n.next=20;break}return n.next=20,zi({editor:e,layout:i,ctx:v,options:e.options});case 20:return n.next=22,Li((b={editor:e},Object(a["a"])(b,u?"layout":"element",i),Object(a["a"])(b,"ctx",v),Object(a["a"])(b,"options",e.options),b));case 22:return n.next=24,Fi(i,v,e.options);case 24:return n.next=26,U["a"].loadImage(e.options.watermarkImages.element);case 26:return y=n.sent,n.next=29,P.a.map(l,(function(t){return e.elementToCanvas(t,r)}));case 29:return w=n.sent,!u&&p.getContext("2d").translate(h,f),n.next=33,P.a.mapSeries(w,function(){var t=Object(T["a"])(Object(A["a"])().mark((function t(n,i){var r,a,o,s,c;return Object(A["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:if(r=l[i],"maskInfoGroup"!==r.$exportType){t.next=12;break}return a=w[r.$maskElementIndex],o=l[r.$maskElementIndex],s=n.canvas||n,c=s.getContext("2d"),c.globalCompositeOperation="destination-in",t.next=11,e.applyElementPropsToCanvas(o,a,s);case 11:c.globalCompositeOperation="source-over";case 12:if(!Object(O["get"])(r,"maskInfo.enable")||Object(O["get"])(r,"maskInfo.showSelf")){t.next=14;break}return t.abrupt("return",null);case 14:return t.abrupt("return",e.applyElementPropsToCanvas(r,n,p,y).catch(console.error));case 15:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());case 33:if(!s||!u){n.next=36;break}return n.next=36,Object(Ri["c"])(i,v,e.options);case 36:return p.offsetX=h,p.offsetY=f,n.abrupt("return",p);case 39:case"end":return n.stop()}}),n)})))()},exportImage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentLayout,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(r=this._checkIsRenderWatermark(r,e),!this.options.exportable)return P.a.resolve(null);if(!e)throw new Error("需要传入 layout");var s=e.elements||[];return P.a.try((function(){if(a){if(!t._isSupportSvgExport(s))throw new Error("svg 非法含有图片");return t._setSvgTexts(s).then((function(){return t.elementsToCanvas(e,n,r,o)}))}if(!t._isSupportCanvasExport(s))throw new Error("不支持前端出图");return t.elementsToCanvas(e,n,r,o)})).timeout(i,"加载超时 "+i).catch((function(t){throw new Error("exportImage -> "+t)}))},exportGif:function(){var t=arguments,e=this;return Object(T["a"])(Object(A["a"])().mark((function i(){var r,a,o,s,c,l,u,d,h,f,m,g,p,v,b,y,w,_,x;return Object(A["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=t.length>0&&void 0!==t[0]?t[0]:[],a=t.length>1&&void 0!==t[1]?t[1]:{},o=a.layout||e.currentLayout,s=a.width,c=void 0===s?o.width:s,l=a.height,u=void 0===l?o.height:l,d=a.quality,h=void 0===d?1:d,f=a.timeout,m=void 0===f?1e5:f,g=a.ratio,p=void 0===g?1:g,v=a.needCleanupCanvasMemory,b=void 0!==v&&v,y=Math.round(p*c),w=Math.round(p*u),i.next=8,n.e("editor-utils-export").then(n.bind(null,"b157"));case 8:return _=i.sent,x=_.exportGif,i.abrupt("return",P.a.try((function(){var t=vt()(o.background.color).getAlpha()>.5,e=r.map((function(t){return t.delay}));return r=r.map((function(t){return t.canvas})),x({quality:h,frames:r,delays:e,width:y,height:w,disabledTransparent:t,needCleanupCanvasMemory:b})})).timeout(m,"合成超时").catch((function(t){throw console.log("导出 gif 图片失败",t),new Error("exportGif -> "+t)})));case 11:case"end":return i.stop()}}),i)})))()}},Yi=n("a8a6"),qi=n.n(Yi),Xi=[{match:function(t){var e=t.scope;return"templet"===e||"layout"===e},toRecord:function(t){return{chunks:[Object(o["a"])(Object(o["a"])({},t),{},{layouts:void 0})],children:t.layouts}},fromRecord:function(t){var e=t.chunks,n=t.children;return Object(o["a"])(Object(o["a"])({},e[0]),{},{layouts:n})}},{match:function(t){return!!t.elements},toRecord:function(t){return{chunks:[Object(o["a"])(Object(o["a"])({},t),{},{elements:void 0})],children:t.elements}},fromRecord:function(t){var e=t.chunks,n=t.children;return Object(o["a"])(Object(o["a"])({},e[0]),{},{elements:n})}},{match:function(t){return"image"===t.type},toRecord:function(t){return{chunks:[Object(o["a"])(Object(o["a"])({},t),{},{url:void 0,imageUrl:void 0}),t.url,t.imageUrl],children:null}},fromRecord:function(t){var e=t.chunks;return Object(o["a"])(Object(o["a"])({},e[0]),{},{url:e[1],imageUrl:e[2]})}},{match:function(t){return"mask"===t.type},toRecord:function(t){return{chunks:[Object(o["a"])(Object(o["a"])({},t),{},{url:void 0,mask:void 0}),t.url,t.mask],children:null}},fromRecord:function(t){var e=t.chunks;return Object(o["a"])(Object(o["a"])({},e[0]),{},{url:e[1],mask:e[2]})}},{match:function(t){return"text"===t.type},toRecord:function(t){return{chunks:[Object(o["a"])(Object(o["a"])({},t),{},{$editing:!1})],children:null}},fromRecord:function(t){var e=t.chunks;return Object(o["a"])(Object(o["a"])({},e[0]),{},{$editing:!1})}}],Zi=(n("cb29"),n("4057"),function(t,e){var n=t.width,i=t.height,r=t.naturalWidth,a=t.naturalHeight,o=t.imageTransform,s=Object(Fn["b"])(n,i);return Object(Fn["f"])({canvas:s,image:e,width:n,height:i,naturalWidth:r,naturalHeight:a,imageTransformArray:o.toArray(),blendMode:"source-out"})}),Ki=function(t){var e=Object(Fn["b"])(t.width,t.height),n=e.getContext("2d"),i="mosaicBrush"===t.type;n.lineJoin="round",n.lineCap="round",n.lineWidth=t.strokeWidth||0;var r=new Path2D(t.path);return i?n.stroke(r):n.fill(r),e},Ji=function(t){var e=t.currentLayout,n=void 0===e?{}:e,i=t.getComponentById,r=t.supportTypesMap,a=n.width,s=n.height,c=n.elements,l=n.mosaic;c="mosaic"===t.operateMode&&l?l.paths:c;var u=c.filter((function(t){return!t.frozen})).map((function(e){var n=e.type,a=e.width,s=e.height,c=e.left,l=e.top,u=e.transform,d=e.strokeWidth,h=e.$id,f=e.$imageLeft,m=e.$imageTop,g=e.$imageWidth,p=e.$imageHeight,v=i(h),b={width:a,height:s,x:c,y:l,transform:u.localTransform,$component:v,$element:e};if(!r[e.type])return Object(o["a"])({type:"default"},b);if("image"===n&&v&&v.$refs.img&&(0!==Math.round(f)||0!==Math.round(m)||Math.round(g)!==Math.round(a)||Math.round(p)!==Math.round(s))){var y=Zi(e,v.$refs.img);return Object(o["a"])({type:"image",$el:y},b)}if(("mask"===n||"image"===n)&&v&&(v.$refs.img||v.$refs.canvas))return Object(o["a"])({type:"image",$el:v.$refs.img||v.$refs.canvas},b);if("threeText"===n&&v&&(v.$refs.glCanvas||v.$refs.img)){var w=t.global.zoom,_=v.$refs,x=_.glCanvas,k=_.img;if(k)return Object(o["a"])({type:"image",$el:k},b);var E=v.devicePixelRatio,O=void 0===E?1:E,S=w*O,j=x.width/S,I=x.height/S,A={width:j,height:I,x:e.left+e.width/2-(x.width-v.diviateX)/S/2,y:e.top+e.height/2-(x.height-v.diviateY)/S/2};return Object.assign(b,A),Object(o["a"])({type:"image",$el:x},b)}if(["rect","ellipse","line","brush","svg"].includes(n)&&(d>=1||"svg"===n)&&v&&v.$el&&v.$el.querySelector("svg")){var T=v.$el,C=T.querySelector("svg");return Object(o["a"])({type:"svg",$el:C},b)}if("watermark"===n&&v&&(v.model.$fullScreenCanvas||v.$refs.img))return Object(o["a"])({type:"image",$el:v.model.$fullScreenCanvas||v.$refs.img},b);if("effectText"===n&&v&&(v.$refs.canvas||v.$refs.img)){var P,$=v.$refs,M=$.img,R=$.canvas,L=$.clickAreaCanvas;if(M)P=M;else{var U=e.textEffects.some((function(t){var e=t.offset,n=void 0===e?{x:0,y:0}:e,i=t.skew,r=void 0===i?{}:i,a=t.enable;return a&&(Math.hypot(n.x,n.y)||r.enable)}));P=U?R:L}return Object(o["a"])({type:"image",$el:P},b)}return n.includes("mosaic")?Object(o["a"])({type:"image",$el:Ki(e)},b):Object(o["a"])({type:"default"},b)}));return[u,a,s]},Qi=function(){function t(e){Object(i["a"])(this,t),this.editor=e,this.renderers={}}return Object(r["a"])(t,[{key:"get",value:function(t){return this.renderers[t]&&clearTimeout(this.renderers[t].timer),this.renderers[t]?this.renderers[t].instance:null}},{key:"count",value:function(t){this.renderers[t]&&(this.renderers[t].count+=1)}},{key:"create",value:function(t,e){return this.renderers[t]={instance:e,count:1},clearTimeout(this.renderers[t].timer),this.renderers[t].instance}},{key:"destory",value:function(t){var e=this;this.renderers[t]&&(this.renderers[t].count--,this.renderers[t].count<1&&(clearTimeout(this.renderers[t].timer),this.renderers[t].timer=setTimeout((function(){e.renderers[t].instance.destory&&e.renderers[t].instance.destory(),delete e.renderers[t]}),100)))}}]),t}(),tr=3,er={data:function(){return{referenceLineIsLock:!1,referenceLineIsHide:!1,hasReferenceLine:!1}},methods:{checkReferenceLines:function(){this.global.referenceLines||(this.global.referenceLines=[])},addReferenceLine:function(t){this.checkReferenceLines();var e=this.currentLayout,n=e.width,i=e.height;this.global.referenceLines.push({type:t,id:(new Date).getTime(),top:i/2-tr,left:n/2-tr})},deleteReferenceLine:function(t){this.global.referenceLines=this.global.referenceLines.filter((function(e){return e.id!==t}))},clearReferenceLine:function(){this.global.referenceLines=[]},hideReferenceLine:function(t){this.referenceLineIsHide=t},lockReferenceLine:function(t){this.referenceLineIsLock=t}},watch:{"global.referenceLines":function(t){this.hasReferenceLine=!(!t||!t.length)}},mounted:function(){var t=this;this.$events.$on("templet.created",(function(){t.hasReferenceLine=Object(O["get"])(t,"global.referenceLines.length")>0}))}},nr=Object(E["a"])(window),ir=function(t){return Array.isArray(t)?t[t.length-1].name:"function"===typeof t?t.options.name:t.name||""},rr=function(t,e,n,i){return{props:["editorOptions"],template:qi.a,mixins:[er],data:function(){return{version:M["a"].version,type:"poster",supportTypes:["common"],layouts:[],innerProps:{options:Object(O["cloneDeep"])(M["a"].options),global:Object(O["merge"])({},M["a"].global,M["a"].globalExts),currentLayout:null,currentElement:null,currentSubElement:null,selector:null,snapshotSize:0,snapshotable:!0},clipboard:[],snapshotSize:0,hasRedo:!1,hasUndo:!1,containerRect:{topOffset:0,scrollLeft:0,scrollTop:0,scrollWidth:0,scrollHeight:0,padding:0,paddingTopBottom:0,paddingLeftRight:0,paddingCss:"",height:0,width:0,left:0,top:0},shellRect:{height:0,width:0,left:0,top:0},currentCropElement:null,currentHoverElement:null,currentEditMask:null,currentRichText:null,currentTextSelection:null,currentEditWatermark:null,currentMattingElement:null}},computed:{options:{get:function(){return this.innerProps.options},set:function(t){var e=this;Object(O["forEach"])(t,(function(t,n){e.innerProps.options[n]=t}))}},global:{get:function(){return this.innerProps.global},set:function(t){t=Object(O["defaultsDeep"])(t,M["a"].global,M["a"].globalExts),t.$draging=!1,this.innerProps.global=t}},currentLayout:{get:function(){return this.innerProps.currentLayout},set:function(t){this.innerProps.currentLayout=t}},currentElement:{get:function(){return this.innerProps.currentElement},set:function(t){var e=this.innerProps;t!==e.currentElement&&(e.currentElement=t,this.currentSubElement=null)}},currentSubElement:{get:function(){return this.innerProps.currentSubElement},set:function(t){var e=this.innerProps,n=e.currentSubElement;n&&(n.$selected=!1),t&&(t.$selected=!0,t.$weight=j["a"].get()),e.currentSubElement=t}},currentSelection:function(){return this.currentTextSelection},mode:{get:function(){return this.options.mode},set:function(t){var e=["design","preview","mirror","flow"];-1===e.indexOf(t)&&(t="design"),this.options.mode=t}},operateMode:{get:function(){return this.options.operateMode},set:function(t){var e=["mosaic"];-1===e.indexOf(t)&&(t=""),this.options.operateMode=t}},zoom:{get:function(){return this.global.zoom||1},set:function(t){this.global.zoom=t}},height:{get:function(){if("flow"===this.mode)return this.layouts.reduce((function(t,e){return t+e.height}),0);var t=this.currentLayout;return t?t.height:0},set:function(t){var e=this.currentLayout;e&&(e.height=t,this.makeSnapshot("resize_layout"))}},width:{get:function(){var t=this.currentLayout;return t?t.width:0},set:function(t){var e=this.currentLayout;e&&(e.width=t,this.makeSnapshot("resize_layout"))}},editable:function(){return"design"===this.mode||"flow"===this.mode},selector:{get:function(){return this.innerProps.selector},set:function(t){this.innerProps.selector=t}},selectedElements:function(){return this.getSelectedElements()},supportTypesMap:function(){var t=this.supportTypes||[];return t.reduce((function(t,e){return t[e]=!0,t}),{})}},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])({},ht(t,e,i)),gt),St(i)),It),Nn),se),n),Wi),events:{"templet.created":function(){var t=this,e=this.width,n=this.containerRect;if("flow"===this.mode){var i=n.width/2,r=Math.min(i/e,1);this.zoomTo(r),this.$el.scrollTop=0}else this.options.autoFitZoom&&this.fitZoom();this.$nextTick((function(){t.updateContainerRect()}))},"base.resize":function(){clearTimeout(this.resizeFitZoomTimer),this.options.autoFitZoom&&(this.resizeFitZoomTimer=setTimeout(this.fitZoom,120))},"element.transformResize":function(t,e){e.$guider.resizeActive||L["d"].call(this,e,t,this.options)},"element.transformRotate":function(t,e){e.rotate=t.rotate},"element.transformStart":function(t,e){var n=e.action;"resize"===n&&(this.global.$draging=!0)},"element.transformEnd":function(t,e,n){var i=this,r=n.action;"resize"===r&&(this.global.$draging=!1),this.$nextTick((function(){i.makeSnapshotByElement(t,"resize"!==r)}))},"element.imageTransformEnd":function(t){var e=this;this.$nextTick((function(){e.makeSnapshotByElement(t)}))},"picker.show":function(t){var e=this.options.hookImagePicker;return e&&(t(),this.$events.$emit("imagePicker.show")),e},"imagePicker.show":function(){this.$emit("pickerShow")},"videoPicker.show":function(){this.$emit("videoPickerShow")},"richText.update":function(t){this.currentRichText=t},"element.loadError":function(t,e){this.checkTempletLoaded(),this.dispatchError({type:"load",code:"element.".concat(e.type,".load.error"),message:t})},"element.loaded":function(){this.checkTempletLoaded()},"element.dragStart":function(t){this.setLayoutByElement(t),t!==this.currentElement&&this.focusElement(t),this.global.$draging=!0,"image"===t.type&&(this.$currentDraggedImage=t)},"element.dragEnd":function(t){var e=this;if(this.global.$draging=!1,this.focusElement(t),this.isCrossLayoutDrag(t)){var n=t._dragRelateive;if(delete t._dragRelateive,!n||!n.toLayoutId)return!1;var i=null,r=null;this.layouts.forEach((function(t){t.$id===n.fromLayoutId?i=t:t.$id===n.toLayoutId&&(r=t)})),"$selector"===t.type&&(t=this.getSelectedElements(!1));var a=this.cutElement(t,!1);a.forEach((function(t){t._preTop=t.top,t._preLeft=t.left})),this.toggleLayout(r),a=this.pasteElement(a,r),a.forEach((function(t){t.top=i.top-r.top+t._preTop,t.left=t._preLeft,delete t._preLeft,delete t._preTop})),this.layouts.forEach((function(t){t.$dragOver=!1}))}if(this.$imageReadyToDrop&&this.$lastHoveredMask)this.$events.$emit("element.applyImageDrop",this.$lastHoveredMask,this.$imageReadyToDrop);else{this.$events.$emit("element.resetReadyForDrop",this.$lastHoveredMask);var o="flow"!==this.mode;this.$nextTick((function(){e.makeSnapshotByElement(t,o)}))}this.$events.$emit("element.resetReadyToDrop"),this.$currentDraggedImage=null,this.$imageReadyToDrop=null,this.$lastHoveredMask=null,clearTimeout(this.$dragMoveTimer)},"element.dragMove":function(t,e,n){var i=this;if(this.isCrossLayoutDrag(e)&&this.checkElementOver(e),"image"===e.type){var r=Date.now();this.$dragMoveTimestamp=r,clearTimeout(this.$dragMoveTimer);var a,s=this.pointFromEvent(n),c=this.getElementsByPoint(s.x,s.y);c.forEach((function(t){if(!a)if("mask"===t.type)a=t;else if(i.isGroup(t)){var e=i.collapseGroup(Object(O["cloneDeep"])(t),!0);c=i.getElementsByPoint(s.x,s.y,Object(o["a"])(Object(o["a"])({},i.currentLayout),{},{elements:e}));var n=c.find((function(t){return"mask"===t.type}));n&&(a=i.getElement(n.$id,{deep:!0}))}})),a?(this.$events.$emit("element.readyToDrop",e),a!==this.$lastHoveredMask&&this.$events.$emit("element.resetReadyForDrop",this.$lastHoveredMask),this.$events.$emit("element.readyForDrop",a,e,s),this.$lastHoveredMask=a,this.$imageReadyToDrop=e):!a&&this.$lastHoveredMask&&(this.$events.$emit("element.resetReadyToDrop",e),this.$events.$emit("element.resetReadyForDrop",this.$lastHoveredMask),this.$imageReadyToDrop=null)}},"element.editApply":function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.$nextTick((function(){e.makeSnapshotByElement(t,n)}))},"element.rectUpdate":function(t){t.$editing&&this.lazyUpdatePicker()},"background.loaded":function(){this.checkTempletLoaded()},"globalBackground.loaded":function(){this.checkTempletLoaded()},"watermark.loaded":function(){this.global.$watermarkLoaded=!0,this.checkTempletLoaded()},"border.loaded":function(){this.checkTempletLoaded()},"imageRenderer.renderAfter":function(){this.lazyUpdatePicker()}},watch:{editorOptions:function(t){t&&this.setOptions(this.editorOptions)},mode:function(){var t=this.currentElement;t&&"$"===t.type.charAt(0)&&this.clearSelectedElements()},operateMode:function(){var t=this.currentElement;t&&"$"===t.type.charAt(0)&&this.clearSelectedElements()}},created:function(){var t=this,e=this.$createEventBus();this.$once("destroy",(function(){e.$destroy()})),this.eventBus=e,this.$picker=new kt({defaultSize:this.options.layerPickerDefaultSize}),this.$renderers=new Qi(this),this.$snapshots=new S["History"]({delay:this.options.snapshotDisableSync?500:250,rules:Xi,onChange:function(e){t.$emit("anyChange",e),t.currentLayout&&t.currentLayout.$loaded&&"design"===t.mode&&t.lazyUpdatePicker(),("design"!==t.mode?t.global.$loaded:t.currentLayout&&t.currentLayout.$loaded)&&t.$emit("change",e)}}),this.$renderers=new Qi(this),this.setOptions(this.editorOptions||{}),this.$on("templetLoaded",(function(){if("design"===t.mode){var e=Ji(t),n=Object(k["a"])(e,3),i=n[0],r=n[1],a=n[2];t.$picker.update(i,r,a)}}))},mounted:function(){var t=this,e=this.container=Object(E["a"])(this.$refs.container||this.$el);this.selector=this.$refs.selector,this.initRect(),this.initDomEvents({useNativeContextmenuEvent:!!this.editorOptions.useNativeContextmenuEvent});var n=function e(n){var i=n.type;clearTimeout(e["timer_"+i]),e["timer_"+i]=setTimeout((function(){t.$events.$emit("base."+i,n)}),64)};e.on("scroll.base",n),nr.on("resize.base",n),this.$on("destroy",(function(){nr.off("resize.base",n),e.off("scroll.base",n),t.container=null}));var i=this.$options.events;for(var r in i)this.$on(r,i[r]);this.$on("templetCreated",(function(){t.$events.$emit("templet.created")})),this.lazyUpdatePicker=Object(O["debounce"])((function(){if("design"===t.mode){var e=Ji(t),n=Object(k["a"])(e,3),i=n[0],r=n[1],a=n[2];t.$picker.update(i,r,a)}}),100);var a=Object(O["debounce"])((function(){if("design"===t.mode){var e=Ji(t),n=Object(k["a"])(e,3),i=n[0],r=n[1],a=n[2];t.$picker.update(i,r,a)}}),500);this.$events.$on("element.loaded",this.lazyUpdatePicker),this.$watch((function(){return[t.currentLayout,t.options.mode,t.options.operateMode]}),(function(e){var n=Object(k["a"])(e,1),i=n[0];i&&!i.elements.length?t.lazyUpdatePicker():i&&a()})),Object({NODE_ENV:"production",VUE_APP_ENV:"prod",VUE_APP_GAODINGX_URL:"https://www.gaoding.com",VUE_APP_OSS_HOST:"st-gdx.dancf.com",VUE_APP_UMS_URL:"https://ums.gaoding.com",VUE_APP_GAODINGX_WAP_URL:"https://m.gaoding.com",VUE_APP_SEARCH_API_URL:"https://search.hlgdata.com",VUE_APP_SEARCH_V2_API_URL:"https://search-v2.hlgdata.com",VUE_APP_SEARCH_INNER_API_URL:"http://search.inner.hlgdata.com",VUE_APP_DIANSHANG_URL:"https://dianshang.gaoding.com",VUE_APP_SEARHC_PIC_URL:"https://ai-temp-retrieval.dancf.com",VUE_APP_TEAM_API:"https://www.gaoding.com/api/team-service",VUE_APP_RAM_API:"https://www.gaoding.com/api/team-ram",VUE_APP_LOGROCKET_ENV:"master",VUE_APP_TRACKER_ENV:"prod",VUE_APP_SENTRY_ENV:"production",VUE_APP_DESIGN_CATEGORY_ENV:"prod",VUE_APP_PAY_ENV:"production",VUE_APP_FONTER_API:"https://fonter.dancf.com",VUE_APP_OAUTH2_ENV:"prod",VUE_APP_DESIGN_AB_TEST_APP_NAME:"gd_web",VUE_APP_DESIGN_AB_TEST_APP_KEY:"ABTEST_f6519045-8bfd-4f0d-b690-8ab5b019bf8c",VUE_APP_PAY_QRCODE_URL:"https://m.gaoding.com",VUE_APP_PAY_QRCODE_V2_URL:"https://m.gaoding.com/me/pay",VUE_APP_UXMS_ORIGIN:"https://uxms.gaoding.com",VUE_APP_INPAINT_URL:"http://172.16.2.30/inpaint/v10",VUE_APP_SAAS_BASE_URL:"https://api.my.gaoding.com",VUE_APP_SAAS_SSO_URL:"https://sso.my.gaoding.com",VUE_APP_SAAS_EXTRANET_URL:"https://qiye.gaoding.com",VUE_APP_DOMAIN_URL:"qiye.gaoding.com",VUE_APP_SAAS_OAUTH2_CLIENT_ID:"saas",VUE_APP_QIYE_OAUTH2_CLIENT_ID:"qiye",VUE_APP_GAODING_CHANNEL_ID:"8",VUE_APP_CMS_ORGIN:"https://odyssey-cms.gaoding.com",VUE_APP_TEMPLATE_FILTER_ID:"4812582",VUE_APP_CHANNEL_CATEGORY_ID:"513",VUE_APP_UXMS_USER_ID:"353976720",VUE_APP_ODYSSEY_ABTEST_ACTIVITIES:"odyssey_private_config",VUE_APP_ODYSSEY_ABTEST_NAME:"gd_web",VUE_APP_ODYSSEY_ABTEST_KEY:"ABTEST_f6519045-8bfd-4f0d-b690-8ab5b019bf8c",VUE_APP_CMC_CD_ORG_ID:"8012556623856798766",VUE_APP_CMC_CD_ORG_CODE:"mcm79j",VUE_APP_ANALYTICS_ORGIN:"https://odyssey-analytics.gaoding.com/",VUE_APP_LEADERBOARD_ORGIN:"https://odyssey-game.gaoding.com/",VUE_APP_LEADERBOARD_INSTANCE_URL:"https://leaderboard-code.my.gd-share.cn/",VUE_APP_GD_ADVERT_ORIGIN:"https://www.gaoding.com",VUE_APP_QINGZHAN_ORGIN:"https://www.qingzhan.com",VUE_APP_PROJECT_NAME:"design",VUE_APP_FETCH_CHANNEL_ID:"8",VUE_APP_CHANNEL_ID:"8",VUE_APP_GD_DOMAIN_PUBLISH_URLS:"g.h5gdsvip.com|g.gd-share.cn|g.h5gd.com|g.h5gdvip.com|g1.h5gdvip.com",VUE_APP_MEDIA_SVIP_ID:"125",VUE_APP_OSS_ORGIN:"https://dancf-st-gdx.oss-cn-hangzhou.aliyuncs.com",VUE_APP_GAODING_ADVERT:"GAODING-ADVERT",VUE_APP_DATA_TRACKER:"https://data-think-tank.gaoding.com",VUE_APP_GDEESIGN_DAM_URL:"http://gdesign-dam-gateway.api.prod",BASE_URL:"//cdn.dancf.com/odyssey-editor/"}).__DEV__&&(window.editor=this)},updated:function(){this.selector=this.$refs.selector},beforeDestroy:function(){this.$events.$off("base.resize",this.updateRectThrottle),this.$events.$off("base.scroll",this.updateRectThrottle),this.handleMap=null,this.hotkeys=null,this.$emit("destroy")}}},ar=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0,r={};return e.forEach((function(t){var e=ir(t.layoutComponent).replace("-element","");n[e]=t.model,Object.assign(r,t.methods||{})})),rr(t,n,r,i)},or=n("c9b4"),sr=n("5eea"),cr=n("00b0"),lr=n.n(cr),ur=Object(or["a"])(sr["a"],{name:"common-element",props:["global","model","editor"],template:lr.a,data:function(){return{visible:!1}},computed:{iconStyle:function(){var t=this.global.zoom,e=this.model.width,n=e*t;return n<160?{width:"22px",height:"16px",backgroundSize:"22px",marginBottom:this.errorText?"12px":"0px"}:{marginBottom:this.errorText?"12px":"0px"}},errorText:function(){var t=this.global.zoom,e=this.model.width,n=e*t;return n>250?"不支持该元素":""},cssStyle:function(){var t=this.rect,e=t.padding;return{height:t.height+e[0]+e[2]+"px",width:t.width+e[1]+e[3]+"px",transform:this.transform.toString(),left:t.left+"px",top:t.top+"px",opacity:this.opacity,background:this.model.imageUrl?"":"#F8FAFC"}},imageStyle:function(){var t=this.rect;return{height:t.height+"px",width:t.width+"px",display:"block"}},effectedImageRect:function(){var t=this.model,e=this.global;return Object(O["get"])(t,"effectedResult.width")?{width:t.effectedResult.width*e.zoom+"px",height:t.effectedResult.height*e.zoom+"px",left:t.effectedResult.left*e.zoom+"px",top:t.effectedResult.top*e.zoom+"px",position:"absolute"}:this.imageStyle}},created:function(){var t=this;this.editor.createAsyncComponent(this.model).then((function(e){e||(t.visible=!0)})).catch((function(){t.visible=!0}))}}),dr=n("3c8c");function hr(t,e){Array.isArray(e)||(e=[e]);var n=Object(dr["a"])(t,e);return e.some((function(t){return"group-element"===t.name||"flex-element"===t.name}))&&(n=n.extend({components:{"common-element":hr(t,ur)}})),n}var fr=function(t,e,n,i,r){x.components=e.reduce((function(e,n){return Object(o["a"])(Object(o["a"])({},e),{},Object(a["a"])({},ir(n.layoutComponent),hr(t,n.layoutComponent)))}),{watermark:hr(t,n.find((function(t){return"watermark"===ir(t)}))),background:hr(t,n.find((function(t){return"background"===ir(t)}))),"global-background":hr(t,n.find((function(t){return"global-background"===ir(t)}))),"background-mask":hr(t,n.find((function(t){return"background-mask"===ir(t)}))),"background-mosaic":hr(t,n.find((function(t){return"background-mosaic"===ir(t)}))),"background-mosaic-path-element":hr(t,n.find((function(t){return"background-mosaic-path-element"===ir(t)}))),border:hr(t,n.find((function(t){return"border"===ir(t)}))),"mask-wrap":hr(t,n.find((function(t){return"mask-wrap"===ir(t)})))});var s={"editor-layout":hr(t,x)};l.components=s,g.components=s,h.components=s;var c={"editor-canvas":hr(t,l),"editor-mirror":hr(t,h),"editor-flow":hr(t,g)},u=ar(t,e,i,r);return u.components=Object(o["a"])(Object(o["a"])({},c),n.reduce((function(e,n){return Object(o["a"])(Object(o["a"])({},e),{},Object(a["a"])({},ir(n),hr(t,n)))}),{})),hr(t,u)},mr=function(t){Object(B["a"])(n,t);var e=Object(N["a"])(n);function n(t){return Object(i["a"])(this,n),e.call(this,t)}return Object(r["a"])(n)}($["a"]),gr=mr,pr={model:gr,layoutComponent:ur},vr=n("bf7d"),br=n("07e2"),yr=n("93d6"),wr=n("0e29"),_r=n("aef4"),xr=n("032a"),kr=n("b6aa"),Er=function(t){return Array.isArray(t)?t[t.length-1].name:t.name||""},Or=[pr],Sr=function(t){return x.components=Or.reduce((function(e,n){return Object(o["a"])(Object(o["a"])({},e),{},Object(a["a"])({},Er(n.layoutComponent),hr(t,n.layoutComponent)))}),{watermark:hr(t,vr["a"]),background:hr(t,br["a"]),"global-background":hr(t,kr["a"]),"background-mask":hr(t,yr["a"]),"background-mosaic":hr(t,wr["a"]),"background-mosaic-path-element":hr(t,_r["a"]),border:hr(t,xr["a"])}),hr(t,x)},jr=Sr,Ir=(n("4fad"),n("9452")),Ar=n.n(Ir);Object.assign(M["a"].element,{suspension:{enable:!1,top:null,left:null,right:null,bottom:null}});var Tr=function(t,e,n){var i=t.layouts,r=t.zoom,a=t.editorOptions.wrapBoxOffset,o=void 0===a?{}:a,s=e.suspension;if(Ar()(s.top))n={top:"".concat(s.top,"px"),left:null===s.left?n.left:s.left};else if(Ar()(s.bottom))n={bottom:"".concat(s.bottom,"px"),left:null===s.left?n.left:s.left};else{var c=0;i.some((function(t){return!!t.elements.includes(e)||(c+=t.height,!1)})),n.top+=c*r}return Object.entries(n).forEach((function(t){var e=Object(k["a"])(t,2),i=e[0],r=e[1];Ar()(r)&&(n[i]="".concat(r+(o[i]||0),"px"))})),n.position="fixed",n.zIndex=1e3,n},Cr={computed:{baseStyle:function(){var t=this.rect,e=t.width,n=t.height,i=t.left,r=t.top,a=this.opacity,s=this.editor,c=this.model,l=c.suspension,u=c.canDownload,d={left:"".concat(i,"px"),top:"".concat(r,"px")},h="preview"===s.mode&&l&&l.enable&&!c.$parentId;return h&&(d=Tr(s,c,{left:i,top:r})),Object(o["a"])(Object(o["a"])({height:"".concat(n,"px"),width:"".concat(e,"px"),transform:this.transform?this.transform.toString():"",opacity:a},d),{},{"--after-show":u?"none":"block","--pointer-events":u?"auto":"none","--user-select":u?"auto":"none"})}}};sr["a"].push(Cr);var Pr=n("11b5"),$r=n("3de7"),Mr=n.n($r),Rr=n("b87d"),Lr=n.n(Rr),Ur={data:function(){return{asyncElementTypes:[]}},methods:{updateAsyncElementTypes:function(t){this.asyncElementTypes=t}}};function zr(t){return Dr.apply(this,arguments)}function Dr(){return Dr=Object(T["a"])(Object(A["a"])().mark((function t(e){var n,i,r,a,o;return Object(A["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e||{},i=n.animations,r=void 0===i?[]:i,a=0;case 2:if(!(a<r.length)){t.next=9;break}return o=r[a],t.next=6,Promise.all(o.map((function(t){return t.start()})));case 6:a+=1,t.next=2;break;case 9:case"end":return t.stop()}}),t)}))),Dr.apply(this,arguments)}var Br=function(t,e){var n=e.models,i=e.staticComponents,r=e.elementDefinitions,a=e.asyncElementsMap,o=fr(t,r,i,n,a);return hr(t,Object(or["a"])(o,{mixins:[Ur],data:function(){return this.widgetClickQueue=[],this.widgetClickTimer=null,{}},template:Mr.a,created:function(){this.updateAsyncElementTypes(Object.keys(a))}}))},Nr=function(t,e){var n=e.models,i=e.staticComponents,r=e.elementDefinitions,a=e.asyncElementsMap,o=fr(t,r,i,n,a);return hr(t,Object(or["a"])(o,{mixins:[Ur],template:Lr.a,data:function(){return{editorGlobalBackgroundLoaded:!1}},computed:{editor:function(){return this},transition:function(){var t=this.global,e=t.pageTransition,n=t.pageDirection,i=void 0===n?"v":n;return e?"".concat(e.value,"-").concat(i):"default"}},created:function(){this.updateAsyncElementTypes(Object.keys(a))},methods:{initElementsAnimation:function(){var t=this;this.layouts.forEach((function(e){e.animations=Object(Pr["b"])(t,e)||[]}))},resetElementsAnimation:function(){var t=Array.from(document.querySelectorAll(".editor-element-ghost"));t.length&&t.forEach((function(t){t.__observer&&t.__observer.unobserve(t),t.remove()})),this.initElementsAnimation&&this.initElementsAnimation(),"design"===this.global.mode&&zr(this.currentLayout)}}}))};function Fr(t,e,n){var i=n||{},r=i.webpage,a=void 0!==r&&r;return a?Nr(t,e):Br(t,e)}var Hr=[pr],Vr=function(){function t(){Object(i["a"])(this,t),Object(a["a"])(this,"editor",null),Object(a["a"])(this,"elementDefinitions",Hr),Object(a["a"])(this,"staticComponents",[]),Object(a["a"])(this,"asyncElementsMap",{}),Object(a["a"])(this,"models",{}),Object(a["a"])(this,"customElements",[])}return Object(r["a"])(t,[{key:"createEditor",value:function(t,e){return Fr(t,this,e)}},{key:"addAsyncDefinition",value:function(t,e){this.customElements.push(t),this.asyncElementsMap[t]=e}},{key:"addDefinition",value:function(t){this.elementDefinitions.push(t)}},{key:"createLayout",value:function(t){return jr(t)}},{key:"createComponent",value:function(t,e){return hr(t,e)}}]),t}(),Gr=new Vr;e["a"]=Gr},"787a":function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var i=n("c7eb"),r=n("1da1"),a=n("d4ec"),o=n("bee2"),s=(n("d3b7"),n("d81d"),n("4de4"),n("b0c0"),n("3ca3"),n("ddb0"),n("99af"),n("ac1f"),n("5319"),n("2ca0"),n("8a79"),n("159b"),n("a026")),c=n("ac98"),l=function(t){return t.then((function(t){return t.default}))},u={button:function(){return l(n.e("chunk-cb515602").then(n.bind(null,"b586")))},"canvas-video":function(){return l(n.e("chunk-3cf6f475").then(n.bind(null,"4fee")))},fixshare:function(){return l(n.e("chunk-7e8e0eb4").then(n.bind(null,"2afa")))},form:function(){return l(n.e("chunk-1270e39a").then(n.bind(null,"7b7f")))},map:function(){return l(n.e("chunk-10969c2a").then(n.bind(null,"21c6")))},private:function(){return l(n.e("chunk-263b13d7").then(n.bind(null,"c9d9")))},"like-counter":function(){return l(n.e("chunk-07de3333").then(n.bind(null,"75b5")))},"linked-video":function(){return l(n.e("chunk-74b05d36").then(n.bind(null,"c7ad")))},qrcode:function(){return l(n.e("chunk-c23fb882").then(n.bind(null,"21b3")))},question:function(){return l(n.e("chunk-7a0ee5e2").then(n.bind(null,"9b53")))},visits:function(){return l(n.e("chunk-1120166d").then(n.bind(null,"c40b")))},"wx-avatar":function(){return l(n.e("chunk-2f4a72eb").then(n.bind(null,"a480")))},"wx-nickname":function(){return l(n.e("chunk-48c1e67e").then(n.bind(null,"8447")))}};function d(t){var e=t.replace(/@(od2|odyssey)\//,""),n=u[e];return n?n():Promise.resolve(null)}n("caad"),n("2532"),n("1276"),n("e9c4");function h(t){return{type:"game",width:750,height:1035,left:0,top:300,borderWidth:[0,0,0,0],padding:[0,0,0,0],fontSize:32,borderRadiusX:0,borderRadiusY:0,color:"white",resize:7,pluginVersions:"".concat(t.pkgName,"@latest"),auth:!0,resources:JSON.parse(JSON.stringify(t.resources)),headerStyle:{type:0,colors:["#33383E","#33383E"]},endStyle:{type:0,colors:["#33383E","#636C78","#2254F4","#FFFFFF"]}}}function f(t){var e=t.width,n=t.height,i=document.createElement("canvas");i.width=e,i.height=n;var r=i.getContext("2d");return r.fillStyle="#fff",r.fillRect(0,0,e,n),Promise.resolve(i)}function m(t){var e="game";t.registerPlugin({elements:[{type:e,component:function(){return Promise.all([n.e("chunk-765abe2c"),n.e("chunk-2d0d3340")]).then(n.bind(null,"5c84"))}},{type:"game-header",component:function(){return n.e("chunk-eb20344c").then(n.bind(null,"13f9"))}},{type:"game-result",component:function(){return n.e("chunk-7bfdecab").then(n.bind(null,"219f"))}}],components:[{name:"游戏",icon:{name:"Game-Outline"},handler:function(t){t.$emit("changePanel","game")},group:"互动",priority:7}],renderStrategy:f,interactiveEvent:{triggerOpions:[{name:"游戏结束",value:"gameEnd"}],eventOptions:["page"]}},"slot:game")}function g(t){return{components:[{name:t.name,icon:{name:t.icon},handler:function(e){var n=e.editor.addElement(h(t));e.editor.focusElement(n)},group:"游戏"}]}}var p=function(){function t(e){Object(a["a"])(this,t),this.od=e}return Object(o["a"])(t,[{key:"registerParcel",value:function(){var t=Object(r["a"])(Object(i["a"])().mark((function t(e,n){var r,a,o,s,c=this;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=n.schema,this.editor&&null!==(r=this.editor.supportTypes)&&void 0!==r&&r.includes("game")||m(this.od),n.activate=function(){c.od.registerPlugin(g(a),a.pkgName)},o=e.split("/"),s=o[o.length-1],this.od.editor.supportTypes=this.od.editor.supportTypes.concat(s),this.od.registerParcel(e,n);case 7:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()}]),t}(),v=function(){function t(e){Object(a["a"])(this,t),this.loaded={},this.od=e,this.gameLoader=new p(this.od)}return Object(o["a"])(t,[{key:"load",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e.length)return Promise.resolve;var n=e.filter((function(e){return!t.loaded[e.name]})).map((function(e){var n=e.name,i=t.loadJSEntry(n);return Promise.race([i,Object(c["b"])(3e4,"30s 超时")]).catch((function(t){var e="[odyssey-runtime] Failed to load ".concat(n," plugin: ").concat(t.message);s["default"].prototype.$toast&&s["default"].prototype.$toast("加载插件超时",5e3,{type:"error"}),console.error(e)}))}));return Promise.all(n)}},{key:"loadJSEntry",value:function(){var t=Object(r["a"])(Object(i["a"])().mark((function t(e){var n,r;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.replace("@odyssey/wx-avatar","@od2/wx-avatar"),t.next=3,d(n);case 3:if(r=t.sent,!r){t.next=12;break}if(!n.startsWith("@od2/")||!n.endsWith("game")){t.next=8;break}return this.gameLoader.registerParcel(n,r),t.abrupt("return");case 8:if(!n.startsWith("@od2/")){t.next=11;break}return this.od.registerParcel(n,r),t.abrupt("return");case 11:n.startsWith("@odyssey/")&&(this.od.pluginToAdd=r);case 12:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"lazyLoad",value:function(t){var e=this;t.length&&t.filter((function(t){return!e.loaded[t.name]})).forEach((function(t){e.od.when(t.when).then((function(){e.load([t])}))}))}},{key:"store",value:function(t,e){this.loaded[e]=t}}]),t}()},"78b3":function(t,e,n){"use strict";var i=n("3835"),r=(n("bf19"),n("99af"),n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("a15b"),n("af9f")),a=n("c9b4"),o=n("1c39"),s=n("fc5f"),c=n("59da"),l=n.n(c);e["a"]=Object(a["a"])(s["a"],{props:["isBackground"],name:"image-element",template:l.a,data:function(){return{readyToDrop:!1,imageInsideDropArea:!1,usePlaceholder:!1,video:null}},computed:{showOriginImage:function(){return!this.hasEffects&&!this.hasFilters||!this.effectedImageUrl||this.model.$editing},originUrl:function(){var t=this.model,e=this.options;return r["a"].getComputedUrl(t.url,e.fitCrossOrigin)},effectedImageUrl:function(){var t=!this.hasEffects||this.model.effectedResult.width&&this.model.effectedResult.height;return this.isBackground||t?this.model.imageUrl:""},cssStyle:function(){var t=this.rect,e=this.readyToDrop,n=t.padding,i=1;return"number"===typeof this.opacity&&(i=this.opacity),i=e?1:i,{height:t.height+n[0]+n[2]+"px",width:t.width+n[1]+n[3]+"px",opacity:i}},imageWrapStyle:function(){var t=this.model,e=t.naturalWidth,n=t.naturalHeight,i=t.width,r=t.height;return{position:"absolute",left:-(e-i)/2*this.zoom+"px",top:-(n-r)/2*this.zoom+"px"}},imageStyle:function(){var t=this.model,e=t.imageTransform,n=t.naturalWidth,i=t.naturalHeight,r=e.toJSON(),a=r.a,o=r.b,s=r.c,c=r.d,l=r.tx,u=r.ty;return{position:"absolute",width:Math.max(1,n*this.zoom)+"px",height:Math.max(1,i*this.zoom)+"px",transform:"matrix(".concat(a,",").concat(o,",").concat(s,",").concat(c,",").concat(l*this.zoom,",").concat(u*this.zoom,")")}},visible:function(){var t=this.model,e=this.imageUrl,n=this.hasEffects,i=this.canvasRendered,r=!t.$imageDraging&&(t.$editing||e||n&&i);return r&&!this.isGif?"visible":"hidden"},isVideoResource:function(){return Object(o["e"])(this.model)}},methods:{load:function(){var t=this;this.usePlaceholder=!1;var e=this.originUrl,n=this.effectedImageUrl,a=this.hasEffects,o=this.hasFilters,s=this.options,c=null;return e||(this.usePlaceholder=!0,c=Promise.resolve()),n||!a&&!o?(this.isFirstRendered=!0,c=Promise.all([this.isPreviewMode&&n?null:r["a"].loadImage(e,this.options.fitCrossOrigin),n?r["a"].loadImage(n,s.fitCrossOrigin):null]).then((function(e){var n=Object(i["a"])(e,1),r=n[0];r&&t.initDataByImg(r)}))):c=r["a"].loadImage(e,s.fitCrossOrigin).then(this.baseLoad),c.then(this.loadGifOrApng).catch((function(e){throw t.usePlaceholder=!0,e}))}},events:{"element.readyToDrop":function(t){t===this.model&&t.editable&&this.editor.options.dragImageToMaskEnable&&(this.model.$guider.show=!1,this.model.$guider.marginShow=!1,this.readyToDrop=!0)},"element.resetReadyToDrop":function(t){t&&t!==this.model||(this.model.$guider.show=!0,this.model.$guider.marginShow=!0,this.readyToDrop=!1)},"element.imageInsideDropArea":function(t){t===this.model&&this.readyToDrop&&(this.imageInsideDropArea=!0)},"element.imageOutsideDropArea":function(t){t===this.model&&this.readyToDrop&&(this.imageInsideDropArea=!1)}},watch:{"model.$currentTime":function(t){if(this.isVideoResource&&this.video){var e=this.model.naturalDuration;this.video.currentTime=t%e/1e3||0}}},mounted:function(){var t=this;if(this.$watch((function(){var e=t.model,n=e.url,i=e.width,r=e.height,a=e.$imageWidth,o=e.$imageHeight,s=e.$imageLeft,c=e.$imageTop,l=e.imageTransform,u=[i,r,a,o,s,c].map((function(t){return Math.round(t)}));return u.push(l.rotation,n),u.join(" ")}),(function(){t.isDesignMode&&(t.editor.global.$draging||t.model.$imageDraging||(t.lazyRender(),t.isNeedRenderAnimatioFrame&&t.renderAnimationImage()))})),this.isVideoResource){this.video=this.$refs.video;var e=this.model,n=e.$currentTime,i=e.naturalDuration;this.video.currentTime=n%i/1e3}}})},"78d9":function(t,e,n){},"7a72":function(t,e,n){},"7ab3":function(t,e,n){t.exports=n.p+"img/message_advert_space.13c95306.jpeg"},"7aca":function(t,e,n){"use strict";var i=n("2909"),r=n("b85c"),a=(n("d3b7"),n("159b"),n("d81d"),n("99af"),n("07ac"),n("2ef0")),o=n("2032"),s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.x=t,this.y=e};s.prototype={getMagnitude:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},subtract:function(t){var e=new s;return e.x=this.x-t.x,e.y=this.y-t.y,e},dotProduct:function(t){return this.x*t.x+this.y*t.y},edge:function(t){return this.subtract(t)},perpendicular:function(){var t=new s;return t.x=this.y,t.y=0-this.x,t},normalize:function(){var t=new s(0,0),e=this.getMagnitude();return 0!==e&&(t.x=this.x/e,t.y=this.y/e),t},normal:function(){var t=this.perpendicular();return t.normalize()}};var c=function(t,e){this.min=t,this.max=e};c.prototype={overlaps:function(t){return this.max>t.min&&t.max>this.min}},e["a"]={getBBox:function(t,e){var n=o["a"].intLimit(t.rotate||0,360),i=t.height,r=t.width,a=n>90&&n<180||n>270&&n<360?180-n:n,s=o["a"].degToRad(a),c=Math.abs(Math.sin(s)*r+Math.cos(s)*i),l=Math.abs(Math.sin(s)*i+Math.cos(s)*r),u=t.left+r/2,d=t.top+i/2,h=u-l/2,f=d-c/2;return e=e||1,{rotate:a,height:c*e,width:l*e,left:h*e,top:f*e,right:h*e+l*e,bottom:f*e+c*e}},getElementRect:function(t,e){e||(e=1);var n={padding:[0,0,0,0],height:Math.max(e*t.height,1),width:Math.max(e*t.width,1),left:e*t.left,top:e*t.top,clip:{bottom:0,right:0,left:0,top:0}};return t.padding&&Object(a["forEach"])(t.padding,(function(t,i){n.padding[i]=e*t})),t.clip&&Object(a["forEach"])(t.clip,(function(t,i){n.clip[i]=e*t})),n.rotate=t.rotate||0,n.skewX=t.skewX||0,n.skewY=t.skewY||0,n},getBBoxByElement:function(t,e){var n=this.getElementRect(t,e);return this.getBBox(n)},getBBoxByBBoxs:function(t){var e=1/0,n=1/0,i=-1/0,r=-1/0;return t.forEach((function(t){t.top<e&&(e=t.top),t.left<n&&(n=t.left),t.left+t.width>i&&(i=t.left+t.width),t.top+t.height>r&&(r=t.top+t.height)})),{rotate:0,height:r-e,width:i-n,left:n,top:e}},getBBoxByElements:function(t,e){var n=this,i=t.map((function(t){return n.getBBoxByElement(t,e)}));return this.getBBoxByBBoxs(i)},getRectIntersection:function(t,e){var n=this,i=this.getRectPoints(t),a=this.getRectPoints(e);if((0===e.rotate||360===e.rotate)&&0===e.skewX&&0===e.skewY)return t.left<e.left+e.width&&t.left+t.width>e.left&&t.top<e.top+e.height&&t.height+t.top>e.top;var o=function(t,e){var i,a,o,s=n.getAxes(t).concat(n.getAxes(e)),c=Object(r["a"])(s);try{for(c.s();!(o=c.n()).done;){var l=o.value;if(i=n.project(l,t),a=n.project(l,e),!i.overlaps(a))return!1}}catch(u){c.e(u)}finally{c.f()}return!0};return o(i,a)},project:function(t,e){var n=[],i=new s;return e=Object(a["values"])(e),e.forEach((function(e){i.x=e.x,i.y=e.y,n.push(i.dotProduct(t))})),new c(Math.min.apply(Math,n),Math.max.apply(Math,n))},getAxes:function(t){var e=new s,n=new s,i=[];t=Object(a["values"])(t);for(var r=0,o=t.length-1;r<o;r++)e.x=t[r].x,e.y=t[r].y,n.x=t[r+1].x,n.y=t[r+1].y,i.push(e.edge(n).normal());return e.x=t[t.length-1].x,e.y=t[t.length-1].y,n.x=t[0].x,n.y=t[0].y,i.push(e.edge(n).normal()),i},getPointPosition:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,l=[].concat(t),u=-n/180*Math.PI,d=e.x,h=e.y;return 1===s&&1===c||(l=l.map((function(t){return t=o["a"].getScalePoint({x:t.x,y:t.y},{x:d,y:h},s,c),t}))),0===i&&0===r||(l=l.map((function(t){return t=o["a"].getSkewPoint({x:t.x,y:t.y},{x:d,y:h},i,r),t}))),l=l.map((function(t){var e=t.x-d,n=-(t.y-h);return t=o["a"].getRotationPoint({x:e,y:n},u),{x:d+t.x,y:h-t.y}})),Object(a["isArray"])(t)?l:l[0]},getRectPoints:function(t,e){var n=t.left,i=t.top,r=t.width,a=t.height,o=t.rotate,s=t.skewX,c=void 0===s?0:s,l=t.skewY,u=void 0===l?0:l;return this.newGetRectPoints({left:n,top:i,width:r,height:a,rotate:o,skewX:c,skewY:u},e)},newGetRectPoints:function(t,e){var n=t.left,i=t.top,r=t.width,a=t.height,o=t.rotate,s=t.skewX,c=void 0===s?0:s,l=t.skewY,u=void 0===l?0:l,d=t.scaleX,h=void 0===d?1:d,f=t.scaleY,m=void 0===f?1:f;e=e||{x:n+r/2,y:i+a/2};var g=[{x:n,y:i},{x:n+r,y:i},{x:n+r,y:i+a},{x:n,y:i+a}];return g=this.getPointPosition(g,e,o,c,u,h,m),{nw:g[0],ne:g[1],se:g[2],sw:g[3]}},getRectByPoints:function(t){t=Object(a["isArray"])(t)?t:Object.values(t);var e=t.map((function(t){return t.x})),n=t.map((function(t){return t.y})),r=Math.min.apply(Math,Object(i["a"])(e)),o=Math.min.apply(Math,Object(i["a"])(n)),s=Math.max.apply(Math,Object(i["a"])(e)),c=Math.max.apply(Math,Object(i["a"])(n));return{width:s-r,height:c-o,left:r,top:o,right:s,bottom:c}},getPointsByElement:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.getElementRect(t,e);return this.getRectPoints(n)},pointInRect:function(t,e,n){var i={height:1,width:1,top:e,left:t,padding:[0,0,0,0],rotate:0,skewX:0,skewY:0,clip:{bottom:0,right:0,left:0,top:0}};return this.getRectIntersection(i,n)},getRectCover:function(t,e){var n=Math.max(e.width/t.width,e.height/t.height),i=t.width*n,r=t.height*n,a=(Math.round(e.width)-Math.round(i))/2,o=(Math.round(e.height)-Math.round(r))/2;return{width:i,height:r,left:a,top:o,right:a,bottom:o}},getRectContain:function(t,e){var n=Math.min(e.width/t.width,e.height/t.height),i=t.width*n,r=t.height*n,a=(Math.round(e.width)-Math.round(i))/2,o=(Math.round(e.height)-Math.round(r))/2;return{width:i,height:r,left:a,top:o}},checkRectCollide:function(t,e,n){var i=t.right>=e.right?t.right:e.right,r=t.bottom>=e.bottom?t.bottom:e.bottom,a=t.left<=e.left?t.left:e.left,o=t.top<=e.top?t.top:e.top;return"y"===n&&i-a<=t.width+e.width&&!(r-o<=t.height+e.height)||"y"!==n&&("x"===n&&!(i-a<=t.width+e.width)&&r-o<=t.height+e.height)},checkRectAllCollide:function(t,e){var n=t.right>=e.right?t.right:e.right,i=t.bottom>=e.bottom?t.bottom:e.bottom,r=t.left<=e.left?t.left:e.left,a=t.top<=e.top?t.top:e.top;return n-r<=t.width+e.width&&i-a<=t.height+e.height},getMinDistanceByPoint:function(t,e){var n={max:{x:e.right,y:e.bottom},min:{x:e.left,y:e.top}},i=Math.max(n.min.x-t.x,0,t.x-n.max.x),r=Math.max(n.min.y-t.y,0,t.y-n.max.y);return Math.sqrt(i*i+r*r)}}},"7b93":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));n("d3b7"),n("159b"),n("13d5"),n("99af"),n("cb29");var i=n("af9f"),r=n("e156"),a=n("66cb"),o=n.n(a),s=function(t,e,n,i,r){return n<2*r&&(r=n/2),i<2*r&&(r=i/2),this.beginPath(),this.moveTo(t+r,e),this.arcTo(t+n,e,t+n,e+i,r),this.arcTo(t+n,e+i,t,e+i,r),this.arcTo(t,e+i,t,e,r),this.arcTo(t,e,t+n,e,r),this.closePath(),this},c=function(t,e,n,i){var r=.5522848,a=n*r,o=i*r;this.beginPath(),this.moveTo(t-n,e),this.bezierCurveTo(t-n,e-o,t-a,e-i,t,e-i),this.bezierCurveTo(t+a,e-i,t+n,e-o,t+n,e),this.bezierCurveTo(t+n,e+o,t+a,e+i,t,e+i),this.bezierCurveTo(t-a,e+i,t-n,e+o,t-n,e),this.closePath()};function l(t){var e=t.editor,n=t.layout,a=t.canvas,l=t.filterElements,u=t.customizeOpacity,d=n.backgroundMask,h=Math.round(n.width),f=Math.round(n.height);if(l||(l=[],i["a"].walkTemplet((function(t){t.maskEnable&&l.push(t)}),!0,[n])),!l.length)return null;var m=a||Object(r["b"])(h,f),g=m.getContext("2d");return u||(g.clearRect(0,0,h,f),g.save(),g.globalAlpha=d.opacity,g.fillStyle=o()(d.color).toRgbString(),g.fillRect(0,0,h,f)),g.globalAlpha=1,g.globalCompositeOperation="destination-out",g.fillStyle="#ff0000",l.forEach((function(t){var n=e.getParentGroups(t);t=n.length?n.concat(t).reduce((function(t,e){var n=i["a"].mergeTransform(t,e);return Object.assign({},e,n)})):t;var r={x:t.left+t.width/2,y:t.top+t.height/2};g.save(),g.translate(r.x,r.y),g.rotate(t.transform.rotation),g.translate(-r.x,-r.y);try{"rect"===t.type?s.call(g,Math.round(t.left+t.strokeWidth/2),Math.round(t.top+t.strokeWidth/2),Math.round(t.width-t.strokeWidth),Math.round(t.height-t.strokeWidth),Math.round(t.radius)):"ellipse"===t.type&&c.call(g,Math.round(t.left+t.width/2),Math.round(t.top+t.height/2),Math.round(t.width/2-t.strokeWidth/2),Math.round(t.height/2-t.strokeWidth/2))}catch(a){}g.fill(),g.restore()})),g.restore(),m}},"7d76":function(t,e){t.exports='<div\n    class="editor-element"\n    :class="[\n        \'editor-element-\' + model.type,\n        model.lock ? \'editor-element-lock\' : \'\',\n        model.hidden ? \'editor-element-hidden\' : \'\',\n        model.frozen ? \'editor-element-frozen\' : \'\',\n        model.$loaded ? \'\' : \'editor-element-loading\',\n        model.$selected ? \'editor-element-selected\' : \'\',\n        model.$editing ? \'editor-element-editing\' : \'\'\n    ]"\n    :style="baseStyle"\n>\n    <div :style="scaleStyle">\n        <template v-for="(element, index) in elements">\n            \x3c!-- elements --\x3e\n            <component\n                ref="elements"\n                v-if="editor.supportTypesMap[element.type]"\n                :data-id="element.$id"\n                :key="element.$id"\n                :is="element.type + \'-element\'"\n                :options="options"\n                :global="global"\n                :model="element"\n                :editor="editor"\n                :class="element.$className"\n            />\n            <template v-else-if="element.$maskElement">\n                <mask-wrap\n                    v-if="element.$maskElement.maskInfo.enable && element.elements.length"\n                    :elements="element.elements"\n                    :maskInfoElement="element.$maskElement"\n                    :key="`mask-wrap-${element.$maskElement.id}`"\n                    :model="element"\n                    :global="global"\n                    :options="options"\n                    :editor="editor"\n                />\n            </template>\n            <common-element\n                v-else\n                :key="element.$id"\n                :model="element"\n                :global="global"\n                :options="options"\n                :editor="editor"\n            />\n        </template>\n    </div>\n\n    <ElementCommon\n        :element="model"\n        :options="options"\n        :global="global"\n        :editor="editor"\n        :layout="editor.currentLayout"\n        :hideBlink="hideBlink"\n        :isShowBlink="isShowBlink"\n        :bgNinePatch="bgNinePatch"\n    />\n</div>\n'},"7e251":function(t,e,n){"use strict";n("8ba9")},8541:function(t,e,n){"use strict";n.d(e,"a",(function(){return it}));var i=n("3835"),r=n("c7eb"),a=n("1da1"),o=n("d4ec"),s=n("bee2"),c=n("262e"),l=n("2caf"),u=(n("d81d"),n("a15b"),n("4de4"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("2ef0")),d=n("f684"),h=n.n(d),f=n("e156"),m=n("5530"),g=n("b85c"),p=(n("159b"),n("13d5"),n("7db0"),n("25f0"),n("af9f"));function v(t,e,n,i,r){t.beginPath();var a=[(e-r[0]+r[1])/2,(n-r[2]+r[3])/2];t.translate(a[0],a[1]);var o=Math.min(e-r[0]-r[1],n-r[2]-r[3])/2,s=null;switch(i.type){case"custom":s=w(e/2,n/2,i.radius);break;case"circle":s=b(o);break;case"star":s=i.star?y(o,o*i.star.ratio,i.star.number,i.star.angle,i.star.rounded):y(o,o/2);break;case"diamond":s=y(o,o,2,0);break;case"rectRounded":s=w(o,o);break;case"rectRoundedTopLeftAndRightBottom":s=w(o,o,o/2,!1);break;case"heart":s=_(o);break;case"parallelogram":s=x(o);break}s&&t.clip(s),t.translate(-a[0],-a[1])}function b(t){var e=new Path2D;return e.arc(0,0,t,0,2*Math.PI,!0),e}function y(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=-Math.PI/2+i*Math.PI/180,o=new Path2D;if(r){o.moveTo(t*Math.cos(a),t*Math.sin(a));for(var s=r/2,c=1;c<=2*n;c++){var l=c*Math.PI/n+a,u=c%2?t:e,d=c%2?e:t,h=[u*Math.cos(l-Math.PI/n),u*Math.sin(l-Math.PI/n)],f=[d*Math.cos(l),d*Math.sin(l)],m=[u*Math.cos(l+Math.PI/n),u*Math.sin(l+Math.PI/n)];o.lineTo((h[0]-f[0])*s+f[0],(h[1]-f[1])*s+f[1]),o.quadraticCurveTo(f[0],f[1],(m[0]-f[0])*s+f[0],(m[1]-f[1])*s+f[1])}}else{o.moveTo(t*Math.cos(a),t*Math.sin(a));for(var g=1;g<=2*n;g++){var p=g*Math.PI/n+a,v=g%2?e:t;o.lineTo(v*Math.cos(p),v*Math.sin(p))}}return o}function w(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t/2,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=new Path2D;return r.moveTo(t,-e+n),r.arcTo(t,e,-t+n,e,n),i?r.arcTo(-t,e,-t,-e,n):(r.lineTo(-t,e),r.lineTo(-t,-e+n)),r.arcTo(-t,-e,-t+n,-e,n),i?r.arcTo(t,-e,t,-e+n,n):(r.lineTo(t,-e),r.lineTo(t,-e+n)),r}function _(t){var e=new Path2D,n=null==t?1:t/60;return e.moveTo(0,-30*n),e.bezierCurveTo(0,-33*n,-10*n,-45*n,-25*n,-45*n),e.bezierCurveTo(-55*n,-45*n,-55*n,-15*n,-55*n,-15*n),e.bezierCurveTo(-55*n,10*n,-35*n,32*n,0,50*n),e.bezierCurveTo(35*n,32*n,55*n,10*n,55*n,-15*n),e.bezierCurveTo(55*n,-15*n,55*n,-45*n,25*n,-45*n),e.bezierCurveTo(10*n,-45*n,0,-33*n,0,-30*n),e}function x(t){var e=new Path2D;return e.moveTo(t/2,t),e.lineTo(-t,t),e.lineTo(-t/2,-t),e.lineTo(t,-t),e.lineTo(t/2,t),e}var k=v,E=n("66cb"),O=n.n(E),S=n("91e8");function j(t,e){return I.apply(this,arguments)}function I(){return I=Object(a["a"])(Object(r["a"])().mark((function t(e,n){var i,a,o,s,c;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.image instanceof HTMLCanvasElement)){t.next=4;break}i=e.image,t.next=7;break;case 4:return t.next=6,p["a"].loadImage(e.image);case 6:i=t.sent;case 7:return a=Object(S["c"])(e.type,{width:i.width,height:i.height},n,{scaleX:e.scaleX,scaleY:e.scaleY}),t.next=10,Object(f["g"])(i,i.width*a[0],i.height*a[3],{alpha:!0});case 10:return o=t.sent,s=document.createElement("canvas"),s.width=n.width,s.height=n.height,c=s.getContext("2d"),"tiled"!==e.type&&e.type?c.drawImage(o,a[4],a[5]):(c.fillStyle=c.createPattern(o,"repeat"),c.fillRect(0,0,s.width,s.height)),t.abrupt("return",s);case 17:case"end":return t.stop()}}),t)}))),I.apply(this,arguments)}var A=n("5342");function T(t,e,n){var i=n.blur,r=n.color,a=n.offsetX,o=n.offsetY,s=Object(f["b"])(e.width+2*i,e.height+2*i),c=s.getContext("2d");c.drawImage(e,i+a,i+o,e.width,e.height),c.globalCompositeOperation="xor",c.fillRect(0,0,s.width,s.height),t.drawImage(n.bottomImg||e,0,0),t.save(),t.shadowBlur=i,t.shadowColor=r,t.shadowOffsetX=a,t.shadowOffsetY=o,t.drawImage(s,-i-a,-i-o),t.restore(),t.globalCompositeOperation="destination-in",t.drawImage(e,0,0),t.globalCompositeOperation="source-over"}function C(t,e,n){t.save(),t.shadowColor=n.color,t.shadowBlur=n.blur,t.shadowOffsetX=1e5+n.offsetX,t.shadowOffsetY=n.offsetY,t.drawImage(e,-1e5,0),t.restore()}var P=function(){function t(){Object(o["a"])(this,t),this.canvas=document.createElement("canvas"),this.offscreenCanvas1=null,this.offscreenCanvas2=null}return Object(s["a"])(t,[{key:"applyEffects",value:function(){var t=Object(a["a"])(Object(r["a"])().mark((function t(e,n){var i,a,o,s,c,l=this,u=arguments;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=!(u.length>2&&void 0!==u[2])||u[2],this.options=n,a=n.effects,a&&a.length){t.next=5;break}return t.abrupt("return",Promise.resolve({canvas:e,effectModel:{imageUrl:null,effectedResult:{width:0,height:0,left:0,top:0}}}));case 5:if(o=[],s=Object(A["a"])(a),this.originalImg=e,this.sizePlus=[s.right,s.left,s.bottom,s.top],a.forEach((function(t){o.unshift((function(){return M.call(l,t).then((function(){l.ctx.drawImage(l.offscreenCanvas1,0,0),l.ctx1.clearRect(0,0,l.width,l.height),l.ctx1.drawImage(l.originalImg,l.sizePlus[1],l.sizePlus[3])}))}))})),$.call(this),!this._lastPromise){t.next=14;break}return t.next=14,this._lastPromise;case 14:return this._lastPromise=o.reduce((function(t,e){return t.then(e)}),Promise.resolve()),t.next=17,this._lastPromise;case 17:return c={effectedResult:{width:this.canvas.width,height:this.canvas.height,left:-this.sizePlus[1],top:-this.sizePlus[3]}},i&&(c.imageUrl=this.canvas.toDataURL("image/png")),t.abrupt("return",{canvas:this.canvas,effectModel:c});case 20:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()}]),t}();function $(){this.top=this.sizePlus[3],this.left=this.sizePlus[1],this.width=this.originalImg.width+this.sizePlus[0]+this.sizePlus[1],this.height=this.originalImg.height+this.sizePlus[2]+this.sizePlus[3],this.canvas.width=this.width,this.canvas.height=this.height,this.offscreenCanvas1?(this.offscreenCanvas1.width=this.width,this.offscreenCanvas1.height=this.height,this.offscreenCanvas2.width=this.width,this.offscreenCanvas2.height=this.height,this.ctx1.clearRect(0,0,this.width,this.height),this.ctx2.clearRect(0,0,this.width,this.height)):(this.offscreenCanvas1=Object(f["b"])(this.width,this.height,!0),this.offscreenCanvas2=Object(f["b"])(this.width,this.height,!0)),this.ctx=this.canvas.getContext("2d"),this.ctx1=this.offscreenCanvas1.getContext("2d"),this.ctx2=this.offscreenCanvas2.getContext("2d"),this.ctx.imageSmoothingEnabled=!1,this.ctx1.imageSmoothingEnabled=!1,this.ctx2.imageSmoothingEnabled=!1,this.ctx2.save(),this.ctx1.drawImage(this.originalImg,this.sizePlus[1],this.sizePlus[3])}function M(t){var e=this,n=[],i=function(){if(e.options.effects.find((function(t){return t.shadow&&t.shadow.enable}))){e.cacheOriginalImg||(e.shadowSouceCtx=Object(f["b"])(0,0,!0).getContext("2d"));var t=e.shadowSouceCtx.canvas;t.width=e.width,t.height=e.height,e.shadowSouceCtx.clearRect(0,0,t.width,t.height),e.shadowSouceCtx.drawImage(e.offscreenCanvas1,0,0)}else e.shadowSouceCtx=null};return i(),n.push(Object(a["a"])(Object(r["a"])().mark((function n(){return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.mask||!t.mask.enable){n.next=4;break}return n.next=3,B.call(e,t.mask);case 3:i();case 4:case"end":return n.stop()}}),n)})))),n.push(Object(a["a"])(Object(r["a"])().mark((function n(){return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.filling||!t.filling.enable){n.next=4;break}return n.next=3,L.call(e,t.filling);case 3:i();case 4:case"end":return n.stop()}}),n)})))),n.push(Object(a["a"])(Object(r["a"])().mark((function n(){return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.stroke||!t.stroke.enable){n.next=3;break}return n.next=3,D.call(e,t.stroke.color,t.stroke.width);case 3:case"end":return n.stop()}}),n)})))),n.push(Object(a["a"])(Object(r["a"])().mark((function n(){return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.shadow||!t.shadow.enable){n.next=3;break}return n.next=3,N.call(e,t.shadow);case 3:case"end":return n.stop()}}),n)})))),n.push(Object(a["a"])(Object(r["a"])().mark((function n(){return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.offset){n.next=3;break}return n.next=3,R.call(e,t.offset);case 3:case"end":return n.stop()}}),n)})))),n.reduce((function(t,e){return t.then(e)}),Promise.resolve())}function R(t){this.ctx2.drawImage(this.offscreenCanvas1,t.x,t.y),F.call(this)}function L(t){if(this.ctx2.drawImage(this.offscreenCanvas1,0,0),this.ctx2.globalCompositeOperation="source-in","color"===t.type||0===t.type)return this.ctx2.fillStyle=O()(t.color).toString("rgb"),z.call(this),F.call(this),Promise.resolve();if("gradient"===t.type||2===t.type){var e,n=this.offscreenCanvas2.width/2,i=this.offscreenCanvas2.height/2,r=t.gradient.angle,a=Math.abs(Math.cos(r))*n+Math.abs(Math.sin(r))*i,o=this.ctx2.createLinearGradient(n-a*Math.cos(r),i-a*Math.sin(r),n+a*Math.cos(r),i+a*Math.sin(r)),s=Object(g["a"])(t.gradient.stops);try{for(s.s();!(e=s.n()).done;){var c=e.value;c.color=O()(c.color).toString("rgb"),o.addColorStop(c.offset,c.color)}}catch(u){s.e(u)}finally{s.f()}return this.ctx2.fillStyle=o,z.call(this),F.call(this),Promise.resolve()}if("image"===t.type||1===t.type){var l=t.imageContent;return l.image?U.call(this,l):(console.error("图片特效填充类型为图片，但没有imageUrl"),Promise.resolve())}return"base"===t.type?U.call(this,Object(m["a"])(Object(m["a"])({},t.imageContent),{},{image:this.options.fillRefCanvas})):void 0}function U(t){var e=this;return j(t,{width:this.offscreenCanvas2.width,height:this.offscreenCanvas2.height}).then((function(t){e.ctx2.fillStyle="rgba(255,255,255,1)",z.call(e),e.ctx2.drawImage(t,e.left,e.top),F.call(e)}))}function z(){this.ctx2.fillRect(0,0,this.offscreenCanvas2.width,this.offscreenCanvas2.height)}function D(t,e){t=O()(t).toString("rgb");for(var n=0;n<360;n++){var i=n*Math.PI/180;this.ctx2.drawImage(this.offscreenCanvas1,e*Math.cos(i),e*Math.sin(i))}this.ctx2.globalCompositeOperation="source-in",this.ctx2.fillStyle=t,z.call(this),this.ctx2.globalCompositeOperation="source-over",this.ctx2.drawImage(this.offscreenCanvas1,0,0),F.call(this)}function B(t){var e=this;return"image"===t.type?t.image?p["a"].loadImage(t.image).then((function(t){var n=e.offscreenCanvas1;if(e.ctx2.drawImage(n,0,0),e.ctx2.globalCompositeOperation="destination-in",n.height*t.width>n.width*t.height){var i=n.width,r=t.height*n.width/t.width;e.ctx2.drawImage(t,0,(n.height-r)/2,i,r)}else{var a=t.width*n.height/t.height,o=n.height;e.ctx2.drawImage(t,(n.width-a)/2,0,a,o)}F.call(e)})):Promise.resolve():(k(this.ctx2,this.width,this.height,t,this.sizePlus),this.ctx2.drawImage(this.offscreenCanvas1,0,0),F.call(this),Promise.resolve())}function N(t){var e=Object(u["get"])(this,"shadowSouceCtx.canvas",this.offscreenCanvas1);t.color=O()(t.color).toString("rgb"),t.inset?T(this.ctx2,e,Object(m["a"])(Object(m["a"])({},t),{},{bottomImg:this.offscreenCanvas1})):(C(this.ctx2,e,t),this.ctx2.drawImage(this.offscreenCanvas1,0,0)),F.call(this)}function F(){this.ctx1.clearRect(0,0,this.offscreenCanvas1.width,this.offscreenCanvas1.height),this.ctx1.drawImage(this.offscreenCanvas2,0,0),this.ctx2.clearRect(0,0,this.offscreenCanvas2.width,this.offscreenCanvas2.height),this.ctx2.restore(),this.ctx2.save()}var H=n("f0ab"),V=n.n(H),G=n("0485"),W=(n("b64b"),n("99af"),n("d9e2"),n("63ea")),Y=n.n(W),q=n("49bc"),X=n("f49e");function Z(t){return t?"number"===typeof t.intensity?t.intensity:t.strong||0:.8}var K=n("1d86"),J={497035:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-224613-38ab.zip",id:"48163989"},497036:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-224627-5bde.zip",id:"48163990"},497037:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-224644-ffc7.zip",id:"48163991"},497038:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-224658-c991.zip",id:"48163992"},497039:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-224715-72db.zip",id:"48163995"},497040:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-224729-497b.zip",id:"48164009"},497041:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-225925-f86d.zip",id:"48164086"},497042:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-230527-4eff.zip",id:"48164730"},497043:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-230538-bb1f.zip",id:"48164731"},497044:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-225938-1ed8.zip",id:"48164101"},497045:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-230549-09a3.zip",id:"48164732"},497047:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-230609-50a4.zip",id:"48164742"},497048:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210323-140405-deb3.zip",id:"48164746"},497049:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-225729-767c.zip",id:"48164052"},497050:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-225750-05de.zip",id:"48164061"},497052:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-225815-81bd.zip",id:"48164063"},497054:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-225953-4708.zip",id:"48164294"},497055:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-225839-240b.zip",id:"48164067"},497056:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-230016-2823.zip",id:"48164316"},497057:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-233019-8873.zip",id:"48164751"},497058:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-232951-ec8d.zip",id:"48164754"},497059:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210323-120325-5988.zip",id:"48164753"},497061:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210323-120243-5639.zip",id:"48164760"},497063:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210323-120225-e86f.zip",id:"48164762"},497065:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210323-120134-efab.zip",id:"48164763"},497066:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210323-120150-4cac.zip",id:"48164764"},497070:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-230322-1a79.zip",id:"48164405"},497071:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-230333-8493.zip",id:"48164406"},497072:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-230348-ebf7.zip",id:"48164407"},497073:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-230401-3741.zip",id:"48164408"},497074:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-230418-906d.zip",id:"48164409"},497075:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-230434-6d35.zip",id:"48164410"},497076:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-230452-2e96.zip",id:"48164411"},497077:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-230503-5406.zip",id:"48164412"},497078:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-230139-4321.zip",id:"48164366"},497080:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-230206-ceab.zip",id:"48164370"},497081:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-230218-d126.zip",id:"48164371"},497082:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-230230-92c7.zip",id:"48164383"},497083:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-230241-8e16.zip",id:"48164387"},497084:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-230110-de58.zip",id:"48164357"},497085:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-224334-742f.zip",id:"48164012"},497086:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-225850-e3dd.zip",id:"48164071"},497087:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-225859-50d9.zip",id:"48164082"},497088:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-225911-3d62.zip",id:"48164083"},497089:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-230250-a948.zip",id:"48164388"},497090:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-230258-00ff.zip",id:"48164400"},497091:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-230309-432b.zip",id:"48164401"},497092:{url:"https://st-gdx.dancf.com/gaodingx/0/illusion/20210403-230516-c741.zip",id:"48164413"}};function Q(t){return J[t]}var tt=function(){function t(e){var n=e.model,i=e.editor,r=e.canvas;Object(o["a"])(this,t),this.lastCacheCanvas=null,this.lastFilterInfo=null,this.model=n,this.editor=i,this.options=i.options,this.canvas=r}return Object(s["a"])(t,[{key:"hasBaseFilters",get:function(){return this.model.hasBaseFilters}},{key:"hasComplexFilters",get:function(){return this.model.hasComplexFilters}},{key:"hasFilters",get:function(){return this.hasBaseFilters||this.hasComplexFilters}},{key:"defaultFilter",get:function(){return q["a"].element.filter}},{key:"filter",get:function(){return this.model.filter}},{key:"filterInfo",get:function(){return this.model.filterInfo}},{key:"filterImage",get:function(){var t=this.model,e=t.url,n=t.naturalWidth,i=t.naturalHeight;return{url:e,width:n,height:i}}},{key:"applyBaseFilters",value:function(t){var e=this;return h.a.all([K["a"].getRender(),K["a"].loadBaseFilters()]).then(function(){var n=Object(a["a"])(Object(r["a"])().mark((function n(o){var s,c;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=Object(i["a"])(o,1),c=s[0],n.abrupt("return",c.engine.synchronize(Object(a["a"])(Object(r["a"])().mark((function n(){var i,a,o,s;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,i=e.filterImage,a=e.filter,t){n.next=6;break}return n.next=5,X["a"].loadImage(i.url);case 5:t=n.sent;case 6:return n.next=8,K["a"].createFilterLayer(t);case 8:return n.next=10,c.addEffect(K["a"].baseFilters);case 10:return o=Object.keys(a),n.next=13,h.a.map(o,(function(t){var e=a[t];return K["a"].updateFilterParam(t,e)}));case 13:return n.next=15,c.render();case 15:return s=n.sent,n.abrupt("return",s);case 19:throw n.prev=19,n.t0=n["catch"](0),n.t0;case 22:case"end":return n.stop()}}),n,null,[[0,19]])})))).promise);case 2:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())}},{key:"applyComplexFilters",value:function(){var t=this;return h.a.resolve().then((function(){return K["a"].getRender()})).then(function(){var e=Object(a["a"])(Object(r["a"])().mark((function e(n){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",n.engine.synchronize(Object(a["a"])(Object(r["a"])().mark((function e(){var i,a,o,s,c,l,u,d,h;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.filterInfo,a=t.filterImage,o=Q(i.id),o&&(i.url=o.url,i.id=o.id,delete i.prunedZipUrl),s=a.url,c=i.url,l=Z(i),e.next=8,X["a"].loadImage(s);case 8:return u=e.sent,e.prev=9,d="".concat(s.substring(s.length-40),"_").concat(c),e.next=13,n.renderMaterial(u,c,l,d);case 13:if(h=e.sent,s!==t.filterImage.url||!t.filterInfo||c!==t.filterInfo.url){e.next=18;break}return e.abrupt("return",h);case 18:throw new Error("image or filterInfo changed, render canceled");case 19:e.next=24;break;case 21:throw e.prev=21,e.t0=e["catch"](9),e.t0;case 24:case"end":return e.stop()}}),e,null,[[9,21]])})))).promise);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"applyFilters",value:function(){var t=this;this._filterImageUrl!==this.model.url&&this.clearFilterCache(),this._filterImageUrl=this.model.url;var e=this.hasBaseFilters,n=this.hasComplexFilters;if(!this.renderingPromise){var i=this.filterInfo;Y()(i,this.lastFilterInfo)||(this.lastCacheCanvas=null,this.lastFilterInfo=Object.assign({},i));var o=h.a.resolve(this.lastCacheCanvas);return n&&!this.lastCacheCanvas&&(o=o.then((function(){return t.applyComplexFilters()})).then(function(){var e=Object(a["a"])(Object(r["a"])().mark((function e(n){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.lastCacheCanvas=n,e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),e&&(o=o.then((function(e){return t.applyBaseFilters(e)}))),o.finally((function(){t.renderingPromise=null})),this.renderingPromise=o,o}var s=new h.a((function(e){t.renderingPromise.finally((function(){e(t.applyFilters())}))}));return s}},{key:"getImageData",value:function(t){var e=t.getContext("2d");return e.getImageData(0,0,t.width,t.height)}},{key:"clearFilterCache",value:function(){this.lastCacheCanvas=null,this.lastFilterInfo=null}}]),t}(),et=n("31c5"),nt={resizeByPica:!0,renderFilter:!0,renderEffect:!0,force:!1,img:null,imgWidth:null,imgHeight:null},it=function(t){Object(c["a"])(n,t);var e=Object(l["a"])(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.model,a=i.editor,s=i.canvas,c=i.byNaturalSize,l=i.hooks,d=i.emitEventEnable,h=void 0===d||d;return Object(o["a"])(this,n),t=e.call(this,{renderProvide:null,renderDiffKeys:["url","checkProps","filter","filterInfo","imageEffects"]}),t.renderProvide={url:function(){return t.model.url+t.model.mask},checkProps:function(){var e=t.model,n=e.width,i=e.height,r=e.$imageWidth,a=e.$imageHeight,o=e.$imageLeft,s=e.$imageTop,c=e.imageTransform,l=c.rotation,u=[r,a,o,s,n,i].map((function(t){return Math.round(t)}));return u.push(l),u.join(" ")},filter:function(){return Object.assign({},t.model.filter)},filterInfo:function(){return Object.assign({},t.model.filterInfo)},imageEffects:function(){return Object(u["cloneDeep"])(t.model.imageEffects)}},t.model=r,t.editor=a,t.options=a.options,t.hooks=l||{},t.emitEventEnable=!1!==h,t.byNaturalSize=c,t.canvas=s||Object(f["b"])(),t.offCanvas=Object(f["b"])(),t.filterRenderer=new tt({model:r,editor:a,canvas:s}),t}return Object(s["a"])(n,[{key:"promise",get:function(){return this._promise}},{key:"hasEffects",get:function(){return this.model.hasEffects}},{key:"hasFilters",get:function(){return this.model.hasFilters}},{key:"updateModel",value:function(t){this.model=t,this.filterRenderer.model=t}},{key:"load",value:function(){var t=this.model,e=this.options;return h.a.all([t.url?p["a"].loadImage(t.url,e.fitCrossOrigin,!0):null,t.mask?p["a"].loadImage(t.mask,e.fitCrossOrigin):null])}},{key:"usePica",value:function(){var t=this.model,e=t.naturalWidth,n=t.naturalHeight,i=t.width,r=t.height,a=this.canvas;return this.editor.options.picaResizeEnable&&Math.max(e/i,n/r)>3?Object(f["g"])(a,Math.round(i),Math.round(r),this.editor.options.picaResizeOptions):h.a.resolve(a)}},{key:"render",value:function(){var t=Object(a["a"])(Object(r["a"])().mark((function t(){var e,n=this,i=arguments;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=i.length>0&&void 0!==i[0]?i[0]:{},e.img||this.model.url){t.next=3;break}return t.abrupt("return","mask"===this.model.type&&this.renderBackground());case 3:if(e=Object(u["defaults"])(e,nt),e.force||this.isNeedRender()){t.next=6;break}return t.abrupt("return",this._promise);case 6:return this.hooks.renderBefore&&this.hooks.renderBefore(e),this.emitEventEnable&&this.editor.$events.$emit("imageRenderer.renderBefore",this.model,e),this.setPreData(),this._taskId=Object(et["c"])(),this._promise=h.a.try((function(){return n.byNaturalSize?n._renderNatural(e):n._render(e)})),t.abrupt("return",this._promise.catch((function(t){throw console.error(t),t})).finally((function(){n.hooks.renderAfter&&n.hooks.renderAfter(e),n.emitEventEnable&&n.editor.$events.$emit("imageRenderer.renderAfter",n.model,e)})));case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_renderNatural",value:function(){var t=Object(a["a"])(Object(r["a"])().mark((function t(){var e,n,a,o,s,c,l,u,d,f,m,g,v,b,y,w,_=this,x=arguments;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=x.length>0&&void 0!==x[0]?x[0]:{},n=this._taskId,a=function(){return n!==_._taskId},o=this.model,s=this.offCanvas,c=this.options,l=s.getContext("2d"),t.next=7,this.load();case 7:if(u=t.sent,d=Object(i["a"])(u,1),f=d[0],!e.img||"string"!==typeof e.img){t.next=16;break}return t.next=13,p["a"].loadImage(e.img,c.fitCrossOrigin,!0);case 13:f=t.sent,t.next=17;break;case 16:e.img&&(f=e.img);case 17:if(f&&!a()){t.next=19;break}return t.abrupt("return",h.a.resolve());case 19:return m=o.naturalWidth,g=o.naturalHeight,v=1,b=1,y=Math.max(1,Math.round(m*v)),w=Math.max(1,Math.round(g*b)),s.width=y,s.height=w,l.clearRect(0,0,y,w),l.scale(v,b),t.abrupt("return",h.a.try((function(){if(!a())return _.hasFilters&&e.renderFilter?_.filterRenderer.applyFilters().then((function(t){return _.editor.$events.$emit("imageRenderer.renderFilterAfter",t),t})).catch((function(){return f})):f})).then((function(t){if(!a()){_.canvas.width=t.width,_.canvas.height=t.height;var e=_.canvas.getContext("2d");e.clearRect(0,0,t.width,t.height),e.drawImage(t,0,0)}})));case 29:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_render",value:function(){var t=Object(a["a"])(Object(r["a"])().mark((function t(){var e,n,a,o,s,c,l,u,d,m,g,v,b,y,w,_,x,k,E,O,S,j,I,A=this,T=arguments;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=T.length>0&&void 0!==T[0]?T[0]:{},n=this._taskId,a=function(){return n!==A._taskId},o=this.model,s=this.offCanvas,c=this.options,l=s.getContext("2d"),t.next=7,this.load();case 7:if(u=t.sent,d=Object(i["a"])(u,2),m=d[0],g=d[1],!e.img||"string"!==typeof e.img){t.next=17;break}return t.next=14,p["a"].loadImage(e.img,c.fitCrossOrigin,!0);case 14:m=t.sent,t.next=18;break;case 17:e.img&&(m=e.img);case 18:if(m&&!a()){t.next=20;break}return t.abrupt("return",h.a.resolve());case 20:return v=o.imageTransform,b=o.naturalWidth,y=o.naturalHeight,w=o.width,_=o.height,x=v.toArray(),e.imgWidth&&e.imgHeight&&(k=e.imgWidth,E=e.imgHeight,"number"===typeof k&&"number"===typeof E&&(b=k,y=E,x=[1,0,0,1,0,0])),O=1,S=1,j=Math.max(1,Math.round(w*O)),I=Math.max(1,Math.round(_*S)),s.width=j,s.height=I,l.clearRect(0,0,j,I),g&&l.drawImage(g,0,0,j,I),l.scale(O,S),l.globalCompositeOperation="source-over",t.abrupt("return",h.a.try((function(){if(!a())return A.hasFilters&&e.renderFilter?A.filterRenderer.applyFilters().catch((function(){return m})):m})).then((function(t){if(!a()){if(Object(f["f"])({canvas:s,width:w,height:_,naturalWidth:b,naturalHeight:y,imageTransformArray:x,blendMode:g?"source-in":"source-over",image:t}),A.hasEffects&&e.renderEffect){var i=document.createElement("canvas");return i.width=j,i.height=I,Object(f["f"])({canvas:i,width:w,height:_,naturalWidth:b,naturalHeight:y,imageTransformArray:x,blendMode:"source-over",image:t}),A.emitEventEnable&&A.editor.$events.$emit("imageRenderer.renderEffectBefore",A.model,i),A.renderEffect(s,n,i)}return s}})).then((function(t){if(!a()){A.canvas.width=t.width,A.canvas.height=t.height;var e=A.canvas.getContext("2d");e.clearRect(0,0,t.width,t.height),e.drawImage(t,0,0)}})));case 34:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"renderEffect",value:function(){var t=Object(a["a"])(Object(r["a"])().mark((function t(e,n,i){var a,o,s,c,l,u,d=this;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=function(){return n!==d._taskId},o=this.model,s=new P,t.next=5,s.applyEffects(e,{effects:o.imageEffects.filter((function(t){return t.enable})),width:o.width,height:o.height,fillRefCanvas:i},!1);case 5:if(c=t.sent,l=c.canvas,u=c.effectModel,!a()){t.next=10;break}return t.abrupt("return",l);case 10:return this.hooks.renderEffectAfter&&this.hooks.renderEffectAfter(o,u),this.emitEventEnable&&this.editor.$events.$emit("imageRenderer.renderEffectAfter",this.model,u),t.abrupt("return",l);case 13:case"end":return t.stop()}}),t,this)})));function e(e,n,i){return t.apply(this,arguments)}return e}()},{key:"renderBackground",value:function(){var t=Object(a["a"])(Object(r["a"])().mark((function t(){var e,n,i,a,o,s,c,l,u,d,h,m,g=arguments;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=g.length>0&&void 0!==g[0]?g[0]:{},e.force||this.isNeedRender()){t.next=3;break}return t.abrupt("return",this._promise);case 3:return this.setPreData(),n=this.options.fitCrossOrigin,t.next=7,p["a"].loadImage(V.a,n);case 7:for(i=t.sent,a=this.model.width,o=this.model.height,s=0,c=0,l=1,u=i.naturalWidth/i.naturalHeight,i.height=o,i.width=o*u,a<i.width?s=(a-i.width)/2:l=Math.ceil(a/i.width),d=Object(f["b"])(a,o),h=d.getContext("2d"),h.clearRect(0,0,d.width,d.height),m=0;m<l;m++)h.drawImage(i,0,0,i.naturalWidth,i.naturalHeight,i.width*m+s,c,i.width,i.height);return t.abrupt("return",this.render({img:d,imgWidth:a,imgHeight:o,resizeByPica:!1,force:!0,renderFilter:!1,renderEffect:!1}).catch(console.error));case 22:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"export",value:function(){var t=Object(a["a"])(Object(r["a"])().mark((function t(e){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(!this._promise||e&&e.force)){t.next=3;break}return t.next=3,this.render(e);case 3:return t.next=5,this._promise;case 5:return t.abrupt("return",this.canvas);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"exportBlob",value:function(){var t=Object(a["a"])(Object(r["a"])().mark((function t(){var e,n,i,a,o=arguments;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:{},n=this.canvas,t.next=4,this.export(e);case 4:if(!e.resizeByPica){t.next=7;break}return t.next=7,this.usePica(!0);case 7:return i=e.exportType,i||(a=Object(f["e"])(n),i=a?"image/png":"image/jpeg"),t.abrupt("return",new h.a((function(t){n.toBlob(t,i)})));case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"exportImage",value:function(){var t=Object(a["a"])(Object(r["a"])().mark((function t(e){var n;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=this.exportBlob(e),t.abrupt("return",URL.createObjectURL(n));case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"lazyExportImage",value:function(t){var e=this;this._lazyExportImage||(this._lazyExportImage=Object(u["debounce"])((function(t){e.exportImage(t)}),1e3)),this._lazyExportImage(t)}},{key:"lazyRender",value:function(t){var e=this;this._lazyRender||(this._lazyRender=Object(u["throttle"])((function(t){e.render(t)}),100)),this._lazyRender(t)}},{key:"lazyRenderCancel",value:function(){this._lazyRender&&this._lazyRender.cancel()}}]),n}(G["a"])},8763:function(t,e,n){"use strict";n("3e6e")},"89eb":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("d4ec"),r=n("bee2"),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(i["a"])(this,t),this.x=e,this.y=n}return Object(r["a"])(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"copy",value:function(t){this.set(t.x,t.y)}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y}},{key:"set",value:function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)}}]),t}()},"8ba9":function(t,e,n){},"8e5e":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i="7.1.62"},"8f2d":function(t,e,n){"use strict";n("113e")},9178:function(t,e,n){"use strict";function i(t){return t.touches?"touchend"===t.type?t.changedTouches[0]:t.touches[0]:t}n.d(e,"a",(function(){return i}))},"91e8":function(t,e,n){"use strict";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.width,i=t.height,r=e.width,a=e.height,o=1;return o=n>i?r/n:a/i,o}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.width,i=t.height,r=e.width,a=e.height,o=1;return n>r&&i>a||n<r&&i<a?o=Math.max(r/n,a/i):n<r?o=r/n:i<a&&(o=a/i),o}function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if("fill"===t||"fit"===t){var o="fill"===t?r(e,n):i(e,n),s=(n.width-e.width*o)/2,c=(n.height-e.height*o)/2;return[o,0,0,o,s,c]}return"crop"===t?[n.width/e.width,0,0,n.height/e.height,0,0]:[a.scaleX||1,0,0,a.scaleY||1,0,0]}n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return a}))},"925e":function(t,e,n){"use strict";n.d(e,"b",(function(){return o}));var i=n("2909"),r=(n("d3b7"),n("99af"),n("caad"),n("d9e2"),n("159b"),n("3ca3"),n("ddb0"),n("1c39")),a=n("2ef0");function o(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,a=[],o="function"===typeof e?e:null,s=function n(s,c,l){s.some((function(s,u){var d=t(s,c,u,l);return!1===d||(a.push(d),o&&!o(s)?null:(e&&(Object(r["d"])(s)||"collage"===s.type)&&n(s.elements,s,[].concat(Object(i["a"])(l),[s])),e&&["watermark"].includes(s.type)&&n([s.$groupModel||s.template],s,[].concat(Object(i["a"])(l),[s])),!1))}))};if(!n)throw Error("layouts为空");return n.forEach((function(t){t&&t.elements&&s(t.elements,t,[])})),Promise.all(a)}function s(t){t=[].concat(t);var e=!1;return o((function(t){if("video"===t.type)return e=!0,!1}),!0,t),e}function c(t){t=[].concat(t);var e=!1;return o((function(t){var n;if(null!==(n=t.animations)&&void 0!==n&&n.length)return e=!0,!1}),!0,t),e}function l(t){t=[].concat(t);var e=!1;return e=t.some((function(t){return"gif"===Object(a["get"])(t,"background.image.resourceType")||"apng"===Object(a["get"])(t,"background.image.resourceType")})),!e&&o((function(t){if(Object(r["c"])(t)||"apng"===t.resourceType)return e=!0,!1}),!0,t),e}function u(t){var e=["web_page","h5_bargraph"],n=["movie","video"],i=["image","plog"],r=["clipper"],a=["doc"];return e.includes(t)?"odyssey":n.includes(t)?"video":r.includes(t)?"clipper":i.includes(t)?"image":a.includes(t)?"doc":"design"}e["a"]={walkTemplet:o,isVideoTemplet:s,isAnimationTemplet:c,isGifTemplet:l,checkEditorType:u}},"92d6":function(t,e,n){var i=n("7037").default;n("a9e3"),n("b680"),n("d9e2"),n("a15b"),n("d81d"),n("d3b7"),n("4de4"),n("fb6a"),n("4e82"),n("ac1f"),n("1276"),n("acd8"),n("a434"),n("159b"),function(){"use strict";if("object"===("undefined"===typeof window?"undefined":i(window)))if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var t=function(t){var e=t,n=a(e);while(n)e=n.ownerDocument,n=a(e);return e}(window.document),e=[],n=null,r=null;s.prototype.THROTTLE_TIMEOUT=100,s.prototype.POLL_INTERVAL=null,s.prototype.USE_MUTATION_OBSERVER=!0,s._setupCrossOriginUpdater=function(){return n||(n=function(t,n){r=t&&n?p(t,n):m(),e.forEach((function(t){t._checkForIntersections()}))}),n},s._resetCrossOriginUpdater=function(){n=null,r=null},s.prototype.observe=function(t){var e=this._observationTargets.some((function(e){return e.element==t}));if(!e){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(t.ownerDocument),this._checkForIntersections()}},s.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter((function(e){return e.element!=t})),this._unmonitorIntersections(t.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},s.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},s.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},s.prototype._initThresholds=function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter((function(t,e,n){if("number"!==typeof t||isNaN(t)||t<0||t>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==n[e-1]}))},s.prototype._parseRootMargin=function(t){var e=t||"0px",n=e.split(/\s+/).map((function(t){var e=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}}));return n[1]=n[1]||n[0],n[2]=n[2]||n[0],n[3]=n[3]||n[1],n},s.prototype._monitorIntersections=function(e){var n=e.defaultView;if(n&&-1==this._monitoringDocuments.indexOf(e)){var i=this._checkForIntersections,r=null,o=null;if(this.POLL_INTERVAL?r=n.setInterval(i,this.POLL_INTERVAL):(u(n,"resize",i,!0),u(e,"scroll",i,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in n&&(o=new n.MutationObserver(i),o.observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))),this._monitoringDocuments.push(e),this._monitoringUnsubscribes.push((function(){var t=e.defaultView;t&&(r&&t.clearInterval(r),d(t,"resize",i,!0)),d(e,"scroll",i,!0),o&&o.disconnect()})),e!=(this.root&&this.root.ownerDocument||t)){var s=a(e);s&&this._monitorIntersections(s.ownerDocument)}}},s.prototype._unmonitorIntersections=function(e){var n=this._monitoringDocuments.indexOf(e);if(-1!=n){var i=this.root&&this.root.ownerDocument||t,r=this._observationTargets.some((function(t){var n=t.element.ownerDocument;if(n==e)return!0;while(n&&n!=i){var r=a(n);if(n=r&&r.ownerDocument,n==e)return!0}return!1}));if(!r){var o=this._monitoringUnsubscribes[n];if(this._monitoringDocuments.splice(n,1),this._monitoringUnsubscribes.splice(n,1),o(),e!=i){var s=a(e);s&&this._unmonitorIntersections(s.ownerDocument)}}}},s.prototype._unmonitorAllIntersections=function(){var t=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var e=0;e<t.length;e++)t[e]()},s.prototype._checkForIntersections=function(){if(this.root||!n||r){var t=this._rootIsInDom(),e=t?this._getRootRect():m();this._observationTargets.forEach((function(i){var r=i.element,a=f(r),s=this._rootContainsTarget(r),l=i.entry,u=t&&s&&this._computeTargetAndRootIntersection(r,a,e),d=i.entry=new o({time:c(),target:r,boundingClientRect:a,rootBounds:n&&!this.root?null:e,intersectionRect:u});l?t&&s?this._hasCrossedThreshold(l,d)&&this._queuedEntries.push(d):l&&l.isIntersecting&&this._queuedEntries.push(d):this._queuedEntries.push(d)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},s.prototype._computeTargetAndRootIntersection=function(e,i,a){if("none"!=window.getComputedStyle(e).display){var o=i,s=b(e),c=!1;while(!c&&s){var l=null,u=1==s.nodeType?window.getComputedStyle(s):{};if("none"==u.display)return null;if(s==this.root||9==s.nodeType)if(c=!0,s==this.root||s==t)n&&!this.root?!r||0==r.width&&0==r.height?(s=null,l=null,o=null):l=r:l=a;else{var d=b(s),m=d&&f(d),g=d&&this._computeTargetAndRootIntersection(d,m,a);m&&g?(s=d,l=p(m,g)):(s=null,o=null)}else{var v=s.ownerDocument;s!=v.body&&s!=v.documentElement&&"visible"!=u.overflow&&(l=f(s))}if(l&&(o=h(l,o)),!o)break;s=s&&b(s)}return o}},s.prototype._getRootRect=function(){var e;if(this.root)e=f(this.root);else{var n=t.documentElement,i=t.body;e={top:0,left:0,right:n.clientWidth||i.clientWidth,width:n.clientWidth||i.clientWidth,bottom:n.clientHeight||i.clientHeight,height:n.clientHeight||i.clientHeight}}return this._expandRectByRootMargin(e)},s.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map((function(e,n){return"px"==e.unit?e.value:e.value*(n%2?t.width:t.height)/100})),n={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},s.prototype._hasCrossedThreshold=function(t,e){var n=t&&t.isIntersecting?t.intersectionRatio||0:-1,i=e.isIntersecting?e.intersectionRatio||0:-1;if(n!==i)for(var r=0;r<this.thresholds.length;r++){var a=this.thresholds[r];if(a==n||a==i||a<n!==a<i)return!0}},s.prototype._rootIsInDom=function(){return!this.root||v(t,this.root)},s.prototype._rootContainsTarget=function(e){return v(this.root||t,e)&&(!this.root||this.root.ownerDocument==e.ownerDocument)},s.prototype._registerInstance=function(){e.indexOf(this)<0&&e.push(this)},s.prototype._unregisterInstance=function(){var t=e.indexOf(this);-1!=t&&e.splice(t,1)},window.IntersectionObserver=s,window.IntersectionObserverEntry=o}function a(t){try{return t.defaultView&&t.defaultView.frameElement||null}catch(e){return null}}function o(t){this.time=t.time,this.target=t.target,this.rootBounds=g(t.rootBounds),this.boundingClientRect=g(t.boundingClientRect),this.intersectionRect=g(t.intersectionRect||m()),this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,n=e.width*e.height,i=this.intersectionRect,r=i.width*i.height;this.intersectionRatio=n?Number((r/n).toFixed(4)):this.isIntersecting?1:0}function s(t,e){var n=e||{};if("function"!==typeof t)throw new Error("callback must be a function");if(n.root&&1!=n.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=l(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(n.rootMargin),this.thresholds=this._initThresholds(n.threshold),this.root=n.root||null,this.rootMargin=this._rootMarginValues.map((function(t){return t.value+t.unit})).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function c(){return window.performance&&performance.now&&performance.now()}function l(t,e){var n=null;return function(){n||(n=setTimeout((function(){t(),n=null}),e))}}function u(t,e,n,i){"function"===typeof t.addEventListener?t.addEventListener(e,n,i||!1):"function"===typeof t.attachEvent&&t.attachEvent("on"+e,n)}function d(t,e,n,i){"function"===typeof t.removeEventListener?t.removeEventListener(e,n,i||!1):"function"===typeof t.detatchEvent&&t.detatchEvent("on"+e,n)}function h(t,e){var n=Math.max(t.top,e.top),i=Math.min(t.bottom,e.bottom),r=Math.max(t.left,e.left),a=Math.min(t.right,e.right),o=a-r,s=i-n;return o>=0&&s>=0&&{top:n,bottom:i,left:r,right:a,width:o,height:s}||null}function f(t){var e;try{e=t.getBoundingClientRect()}catch(n){}return e?(e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e):m()}function m(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function g(t){return!t||"x"in t?t:{top:t.top,y:t.top,bottom:t.bottom,left:t.left,x:t.left,right:t.right,width:t.width,height:t.height}}function p(t,e){var n=e.top-t.top,i=e.left-t.left;return{top:n,left:i,height:e.height,width:e.width,bottom:n+e.height,right:i+e.width}}function v(t,e){var n=e;while(n){if(n==t)return!0;n=b(n)}return!1}function b(e){var n=e.parentNode;return 9==e.nodeType&&e!=t?a(e):(n&&n.assignedSlot&&(n=n.assignedSlot.parentNode),n&&11==n.nodeType&&n.host?n.host:n)}}()},"93d6":function(t,e,n){"use strict";n("13d5"),n("d3b7"),n("99af"),n("25f0"),n("d81d");var i=n("f57e"),r=n.n(i),a=n("66cb"),o=n.n(a),s=n("7b93");e["a"]={props:["editor","global","options","layout","elements"],name:"background-mask",template:r.a,data:function(){return{}},computed:{parents:function(){var t=this;return this.elements.reduce((function(e,n){var i=t.editor.getParentGroups(n);return e.concat(i)}),[])},backgroundOpacity:function(){return this.layout.backgroundMask.opacity},backgroundColor:function(){return o()(this.layout.backgroundMask.color).toString("rgb")},cssStyle:function(){var t=this.layout,e=this.global,n=t.width,i=t.height,r={width:n*e.zoom+"px",height:i*e.zoom+"px"};return r}},methods:{setContext:function(){var t=this.$refs.canvas;t.width=this.layout.width,t.height=this.layout.height,this.canvas=t},render:function(){Object(s["a"])({editor:this.editor,layout:this.layout,canvas:this.canvas,filterElements:this.elements})}},mounted:function(){var t=this;this.setContext(),this.render(),this.$watch((function(){return[t.layout.width,t.layout.height]}),(function(){t.setContext(),t.render()})),this.$watch((function(){var e=t.parents;return e.map((function(t){return[t.left,t.top,t.rotation,t.scaleX,t.scaleY]}))}),(function(){t.render()})),this.$watch((function(){var e=t.elements;return e.map((function(t){return[t.left,t.top,t.width,t.height,t.strokeWidth,t.rotation,t.radius]})).concat([t.backgroundOpacity,t.backgroundColor])}),(function(){t.render()}))}}},"953e":function(t){t.exports=JSON.parse('{"prompt":{"copy":{"title":"复制成功","message":"已复制“{content}”至剪贴板","confirm":"我知道了"},"shareImage":{"title":"提示","message":"图片生成错误，请稍候重试","confirm":"我知道了"}}}')},"98ed":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n("3835"),r=n("5530"),a=(n("d3b7"),n("caad"),n("2532"),n("a9e3"),n("ac1f"),n("841c"),n("5319"),n("3ca3"),n("ddb0"),n("9861"),n("13d5"),n("a630"),n("7db0"),n("466d"),n("b156")),o=function(t){var e=t.copy,n=t.backup,i=t.token,r=t.id,a=void 0===r?"":r,o=t.debug,s=t.user_id,c=t.template_id,l=t.template_type,u=t.third_party,d=t.jwt,h=t.is_replace,f=void 0===h?0:h,m=t.remote_content_url,g=void 0===m?"":m;return{copy:e,backup:n,token:i,readonly:o,userId:s,templateType:l,isReplace:f,from:t.from,templateId:c||a||"",thirdParty:u,thirdPartyToken:d,remoteContentUrl:g}},s=[{scene:{mode:"gdesign",templateId:"",templateFrom:"source",from:"gdesign-dam"},match:function(t){return"gdesign-dam"===t.from},get:function(t){var e=t.endpoint,n=t.region_id,i=t.biz_code,a=t.category_id,s=t.org_code;return Object(r["a"])(Object(r["a"])(Object(r["a"])({},this.scene),o(t)),{},{templateFrom:"mirror",endpoint:e,regionId:n,bizCode:i,orgCode:s,categoryId:a})}},{scene:{mode:"company",templateId:"",templateFrom:"source"},match:function(t){var e=["qiye.gaoding.com","my-stage.gaoding.com","my-fat.gaoding.com","my-dev.gaoding.com","sdk.open"].some((function(t){return window.location.hostname.includes(t)}));return Object({NODE_ENV:"production",VUE_APP_ENV:"prod",VUE_APP_GAODINGX_URL:"https://www.gaoding.com",VUE_APP_OSS_HOST:"st-gdx.dancf.com",VUE_APP_UMS_URL:"https://ums.gaoding.com",VUE_APP_GAODINGX_WAP_URL:"https://m.gaoding.com",VUE_APP_SEARCH_API_URL:"https://search.hlgdata.com",VUE_APP_SEARCH_V2_API_URL:"https://search-v2.hlgdata.com",VUE_APP_SEARCH_INNER_API_URL:"http://search.inner.hlgdata.com",VUE_APP_DIANSHANG_URL:"https://dianshang.gaoding.com",VUE_APP_SEARHC_PIC_URL:"https://ai-temp-retrieval.dancf.com",VUE_APP_TEAM_API:"https://www.gaoding.com/api/team-service",VUE_APP_RAM_API:"https://www.gaoding.com/api/team-ram",VUE_APP_LOGROCKET_ENV:"master",VUE_APP_TRACKER_ENV:"prod",VUE_APP_SENTRY_ENV:"production",VUE_APP_DESIGN_CATEGORY_ENV:"prod",VUE_APP_PAY_ENV:"production",VUE_APP_FONTER_API:"https://fonter.dancf.com",VUE_APP_OAUTH2_ENV:"prod",VUE_APP_DESIGN_AB_TEST_APP_NAME:"gd_web",VUE_APP_DESIGN_AB_TEST_APP_KEY:"ABTEST_f6519045-8bfd-4f0d-b690-8ab5b019bf8c",VUE_APP_PAY_QRCODE_URL:"https://m.gaoding.com",VUE_APP_PAY_QRCODE_V2_URL:"https://m.gaoding.com/me/pay",VUE_APP_UXMS_ORIGIN:"https://uxms.gaoding.com",VUE_APP_INPAINT_URL:"http://172.16.2.30/inpaint/v10",VUE_APP_SAAS_BASE_URL:"https://api.my.gaoding.com",VUE_APP_SAAS_SSO_URL:"https://sso.my.gaoding.com",VUE_APP_SAAS_EXTRANET_URL:"https://qiye.gaoding.com",VUE_APP_DOMAIN_URL:"qiye.gaoding.com",VUE_APP_SAAS_OAUTH2_CLIENT_ID:"saas",VUE_APP_QIYE_OAUTH2_CLIENT_ID:"qiye",VUE_APP_GAODING_CHANNEL_ID:"8",VUE_APP_CMS_ORGIN:"https://odyssey-cms.gaoding.com",VUE_APP_TEMPLATE_FILTER_ID:"4812582",VUE_APP_CHANNEL_CATEGORY_ID:"513",VUE_APP_UXMS_USER_ID:"353976720",VUE_APP_ODYSSEY_ABTEST_ACTIVITIES:"odyssey_private_config",VUE_APP_ODYSSEY_ABTEST_NAME:"gd_web",VUE_APP_ODYSSEY_ABTEST_KEY:"ABTEST_f6519045-8bfd-4f0d-b690-8ab5b019bf8c",VUE_APP_CMC_CD_ORG_ID:"8012556623856798766",VUE_APP_CMC_CD_ORG_CODE:"mcm79j",VUE_APP_ANALYTICS_ORGIN:"https://odyssey-analytics.gaoding.com/",VUE_APP_LEADERBOARD_ORGIN:"https://odyssey-game.gaoding.com/",VUE_APP_LEADERBOARD_INSTANCE_URL:"https://leaderboard-code.my.gd-share.cn/",VUE_APP_GD_ADVERT_ORIGIN:"https://www.gaoding.com",VUE_APP_QINGZHAN_ORGIN:"https://www.qingzhan.com",VUE_APP_PROJECT_NAME:"design",VUE_APP_FETCH_CHANNEL_ID:"8",VUE_APP_CHANNEL_ID:"8",VUE_APP_GD_DOMAIN_PUBLISH_URLS:"g.h5gdsvip.com|g.gd-share.cn|g.h5gd.com|g.h5gdvip.com|g1.h5gdvip.com",VUE_APP_MEDIA_SVIP_ID:"125",VUE_APP_OSS_ORGIN:"https://dancf-st-gdx.oss-cn-hangzhou.aliyuncs.com",VUE_APP_GAODING_ADVERT:"GAODING-ADVERT",VUE_APP_DATA_TRACKER:"https://data-think-tank.gaoding.com",VUE_APP_GDEESIGN_DAM_URL:"http://gdesign-dam-gateway.api.prod",BASE_URL:"//cdn.dancf.com/odyssey-editor/"}).PRIVATE_NAME||e||["company","company_source_templet"].includes(t.mode)||"saas"===t.from||"ka"===t.from||t.thirdPartyUserCode},get:function(t){var e=t.mode,n=t.endpoint,i=t.region_id,s=t.biz_code,c=t.category_id,l=t.org_code;return Object(r["a"])(Object(r["a"])(Object(r["a"])({},this.scene),o(t)),{},{templateFrom:a["IS_MIRROR_PAGE"]?"user":e||"source",endpoint:n,regionId:i,bizCode:s,orgCode:l,categoryId:c})}},{scene:{mode:"uxms",templateId:"",templateFrom:"user"},match:function(t){return"uxms"===t.mode||"edit"===t.mode},get:function(t){var e=t.node_id,n=t.editor_config_id,i=t.template_id,a=t.type,s=t.designer_templet_id;return Object(r["a"])(Object(r["a"])(Object(r["a"])({},this.scene),o(t)),{},{nodeId:e,editorConfigId:n,type:a,templateFrom:Number(i)?"user":"source",designerTempletId:Number(s||0)})}},{scene:{mode:"user",templateId:"",templateFrom:"source"},match:function(){return!0},get:function(t){var e=t.user_id,n=t.from,i=t.endpoint,a=t.region_id,s=t.biz_code,c=t.category_id,l=t.org_code;return Object(r["a"])(Object(r["a"])(Object(r["a"])({},this.scene),o(t)),{},{endpoint:i,regionId:a,bizCode:s,orgCode:l,categoryId:c,token:t.token,templateFrom:t.mode||(e||"dam"===n?"user":"source")})}}];function c(){var t=window.location,e=t.hash,n=t.search,r=n||e.replace(/#(\/\w+)+\?/,""),a=new URLSearchParams(r),o=Array.from(a).reduce((function(t,e){var n=Object(i["a"])(e,2),r=n[0],a=n[1];return t[r]=a,t}),{}),c=s.find((function(t){return t.match(o)}));return c.get(o)}},9911:function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return l}));n("3835");var i=n("ade3"),r=n("4f96"),a=n("5530"),o=n("2909"),s=(n("13d5"),n("d3b7"),n("99af"),n("cb29"),n("159b"),n("a630"),n("3ca3"),n("4de4"),n("498a"),n("d81d"),n("ddb0"),n("ac1f"),n("00b4"),n("b64b"),n("fb6a"),n("5319"),n("b680"),n("a434"),function(t,e){var n=t.el,i=t.keyframes,r=t.options,a=n.querySelector(".elment-inner-content"),s=n.querySelector(".element-main"),c=n.querySelector(".element-clone"),l=Object(o["a"])(i),u=[];c?u.push.apply(u,Object(o["a"])(c.querySelectorAll(".clone-letter"))):(c=e?s.cloneNode(!0):s,c.classList.add("element-clone"),Array.from(c.children).forEach((function(t){Object(o["a"])(t.childNodes).filter((function(t){var e=t.nodeType;return 3===e})).forEach((function(t){var e=document.createDocumentFragment();Object(o["a"])(t.nodeValue).forEach((function(t){var n=document.createElement("span");n.classList.add("clone-letter"),n.style.display="inline-block",n.innerHTML=t.trim()||"&nbsp;",e.appendChild(n),u.push(n)})),t.parentNode.replaceChild(e,t)}))})),a.insertBefore(c,s));var d=u.map((function(t){var e=t.animate(l.shift(),r);return e.cancel(),e})),h={get playState(){return d[0].playState},set currentTime(t){d.forEach((function(e){e.currentTime=t}))},start:function(){return Promise.all(d.map((function(t){return new Promise((function(e){t.play(),t.addEventListener("finish",e)}))})))},play:function(){d.forEach((function(t){return t.play()}))},pause:function(){d.forEach((function(t){return t.pause()}))},cancel:function(){d.forEach((function(t){return t.cancel()}))}};return h}),c=function t(e){if(Array.isArray(e))return e.map((function(e){return t(e)}));var n=Object.keys(e),o=Object(r["a"])(n),s=o[0],c=o.slice(1);return e[s].map((function(t,n){var r=c.map((function(t){return Object(i["a"])({},t,e[t][n])})).reduce((function(t,e){return Object(a["a"])(Object(a["a"])({},t),e)}),{});return Object(a["a"])(Object(i["a"])({},s,t),r)}))},l=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=e.points,r=void 0===i?[]:i,a=e.isClose;Array.isArray(e)&&(r=e,a=!1);var o="",s=function(t){return t.toFixed(4).replace(/0+$/,"").replace(/\.$/,"")},c=r[0];if(!c)return o;var l={x:c.x-t.width/2,y:c.y-t.height/2},u=function(t){var e=t.x,i=t.y,r=t.cp0,a=t.cp1;return e=s((e-l.x)*n),i=s((i-l.y)*n),r={x:s((r.x-l.x)*n),y:s((r.y-l.y)*n)},a={x:s((a.x-l.x)*n),y:s((a.y-l.y)*n)},{x:e,y:i,cp0:r,cp1:a}};if(r.forEach((function(t,e){if(t=u(t),0!==e){var n=u(r[e-1]);o+=" C".concat(n.cp1.x,",").concat(n.cp1.y," ").concat(t.cp0.x,",").concat(t.cp0.y," ").concat(t.x,",").concat(t.y)}else o+="M".concat(t.x,",").concat(t.y)})),a){var d=u(r[0]),h=u(r[r.length-1]);o+=" C".concat(h.cp1.x,",").concat(h.cp1.y," ").concat(d.cp0.x,",").concat(d.cp0.y," ").concat(d.x,",").concat(d.y)}return"path('".concat(o,"')")}},"996d":function(t,e,n){"use strict";var i=n("bee2"),r=n("d4ec"),a=n("262e"),o=n("2caf"),s=n("61d3"),c=function(t){Object(a["a"])(n,t);var e=Object(o["a"])(n);function n(){return Object(r["a"])(this,n),e.apply(this,arguments)}return Object(i["a"])(n)}(s["a"]);e["a"]=c},"9afd":function(t,e){t.exports='<image-element\n    v-if="model"\n    ref="image"\n    :model="model"\n    :editor="editor"\n    :options="options"\n    :global="global"\n    :isBackground="true" />\n'},a00a:function(t,e,n){"use strict";n("4d06")},a45e:function(t,e,n){"use strict";n("7a72")},a615:function(t,e){t.exports="<div\n    class=\"editor-element\"\n    :class=\"[\n        'editor-element-' + model.type,\n        model.lock ? 'editor-element-lock' : '',\n        model.$selected ? 'editor-element-selected' : ''\n    ]\"\n    :style=\"cssStyle\"\n>\n    <i v-show=\"!global.$draging\" class=\"border-before\"></i>\n</div>\n"},a6d9:function(t,e,n){},a8a6:function(t,e){t.exports='<div\n    ref="container"\n    class="editor-container"\n    tabindex="-1"\n    :class="[\n        \'editor-container-\' + mode,\n        global && global.$loaded ? \'editor-loaded\' : null,\n        global && global.$rendered ? \'editor-rendered\' : null,\n        options.scopePointerEventsEnable ? null : \'editor-scope-pointer-events-disable\'\n    ]"\n    :style="{\n        paddingTop: containerRect.topOffset + \'px\'\n    }"\n>\n    \x3c!-- Shell --\x3e\n    <div\n        class="editor-shell-wrap"\n        :style="{\n        padding: containerRect.paddingCss,\n        height: zoom * height + \'px\',\n        width: zoom * width + \'px\'\n    }"\n    >\n        <div\n            v-if="global && currentLayout"\n            class="editor-shell"\n            :class="options.canvasOverflowHidden ? \'\' : \'editor-overflow-mask\'"\n            :style="{\n                height: zoom * height + \'px\',\n                width: zoom * width + \'px\'\n            }"\n        >\n            <reference-line\n                v-if="editable && !options.touchEnable"\n                ref="referenceLine"\n                :isHide="referenceLineIsHide"\n                :isLock="referenceLineIsLock"\n                v-model="global.referenceLines"\n                :deleteFunc="deleteReferenceLine"\n            />\n\n            <editor-canvas\n                ref="canvas"\n                v-if="mode==\'design\' || mode==\'preview\'"\n                :global="global"\n                :options="options"\n                :layouts="layouts"\n                :current-layout="currentLayout"\n            />\n\n            <editor-mirror\n                v-if="mode==\'mirror\'"\n                :global="global"\n                :options="options"\n                :layouts="layouts"\n                :current-layout="currentLayout"\n            />\n\n            <editor-flow\n                v-if="mode==\'flow\'"\n                :global="global"\n                :options="options"\n                :layouts="layouts"\n                :current-layout="currentLayout"\n            >\n            </editor-flow>\n\n            <hover\n                v-if="!options.touchEnable && !global.$referenceLineDraging"\n                ref="hover"\n                :global="global"\n                :options="options"\n                :current-element="currentElement"\n            />\n\n            <transform\n                ref="transform"\n                v-if="!global.$referenceLineDraging && editable && currentElement && !currentElement.frozen"\n                :global="global"\n                :options="options"\n                :current-layout="currentLayout"\n                :model.sync="currentElement"\n                :sub-model.sync="currentSubElement"\n            />\n\n            <toolbar\n                ref="toolbar"\n                v-if="currentElement && (currentLayout.$backgroundEditing || currentEditWatermark || currentCropElement || currentEditMask)"\n                :global="global"\n                :options="options"\n                :current-layout="currentLayout"\n                :model.sync="currentElement"\n                :sub-model.sync="currentSubElement"\n            />\n\n            <guider\n                ref="guider"\n                v-if="editable && options.showGuider"\n                :currentElement="currentElement"\n                :currentSubElement="currentSubElement"\n                :options="options"\n                :layout="currentLayout"\n                :global="global"\n            />\n\n            <resize-guider\n                ref="resize-guider"\n                v-if="editable && options.showResizeGuider && !options.touchEnable"\n                :model="currentElement"\n                :layout="currentLayout"\n                :options="options"\n                :global="global"\n            />\n\n            <mask-editor\n                ref="croper"\n                v-if="editable && currentCropElement"\n                :model.sync="currentCropElement"\n                :current-element="currentElement"\n                :current-layout="currentLayout"\n                :global="global"\n                :options="options"\n            >\n                <watermark\n                    slot="watermark"\n                    v-if="currentCropElement.watermarkEnable"\n                    :global="global"\n                    :options="options"\n                    :model="currentElement"\n                />\n            </mask-editor>\n\n            <mask-editor\n                ref="maskEditor"\n                v-if="editable && currentEditMask"\n                :model.sync="currentEditMask"\n                :current-element="currentElement"\n                :current-layout="currentLayout"\n                :global="global"\n                :options="options"\n            >\n                <watermark\n                    slot="watermark"\n                    v-if="currentEditMask.watermarkEnable"\n                    :global="global"\n                    :options="options"\n                    :model="currentElement"\n                />\n            </mask-editor>\n\n            <background-editor\n                ref="backgroundEditor"\n                v-if="editable && currentLayout && currentLayout.$backgroundEditing && currentLayout.$backgroundImageInfo"\n                :layout="currentLayout"\n                :global="global"\n                :options="options"\n            >\n                <watermark\n                    v-if="currentLayout.background.watermarkEnable"\n                    :global="global"\n                    :options="options"\n                    :layout="currentLayout"\n                />\n            </background-editor>\n\n            <watermark-editor\n                ref="watermarkEditor"\n                v-if="editable && currentEditWatermark"\n                :model.sync="currentEditWatermark"\n                :current-element="currentElement"\n                :global="global"\n                :options="options"\n            />\n            <tips\n                ref="tips"\n                :global="global"\n                :options="options"\n                :current-element="currentElement"\n                v-if="!options.touchEnable"\n            />\n\n            <bleeding-line\n                v-if="options.bleedingLine.show"\n                :layout="currentLayout"\n                :global="global"\n                :options="options"\n            />\n\n            <temp-group\n                ref="tempGroup"\n                :current-element="currentElement"\n                :currentSubElement="currentSubElement"\n                :layout="currentLayout"\n                :global="global"\n                :options="options"\n            />\n\n            <slot name="shell-slot"></slot>\n        </div>\n    </div>\n\n    <selector\n        ref="selector"\n        v-if="!global.$referenceLineDraging && editable && currentLayout && !(currentLayout.$backgroundEditing && currentLayout.$backgroundImageInfo)"\n        :current-element="currentElement"\n        :layout="currentLayout"\n    />\n\n    <contextmenu ref="contextmenu" v-if="options.contextmenu && editable && currentLayout" />\n\n    <highlight :current-layout="currentLayout" />\n\n    <div class="editor-slot">\n        <slot></slot>\n    </div>\n</div>\n'},aaf7:function(t,e,n){"use strict";n.d(e,"a",(function(){return x})),n.d(e,"b",(function(){return E})),n.d(e,"d",(function(){return O})),n.d(e,"c",(function(){return P}));var i=n("c7eb"),r=n("2909"),a=n("1da1"),o=n("5530"),s=(n("d3b7"),n("159b"),n("4de4"),n("d81d"),n("13d5"),n("fb6a"),n("4e82"),n("3ca3"),n("ddb0"),n("ace4"),n("5cc6"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("fa9e"),n("77d9"),n("a434"),n("bf19"),n("f684")),c=n.n(s),l=n("2ef0"),u=n("e156"),d=n("cd8b"),h=(n("99af"),n("31c5"));function f(t,e,n){var i={},r={},a=Object(h["c"])(),o={type:t,data:e,asyncId:a};return n.onmessage=function(t){var e=t.data,n=e.asyncId,a=e.payload;a.framesLength&&n&&(r[n]?r[n].frames=r[n].frames.concat(a.frames):r[n]=a,a=r[n],a.frames.sort((function(t,e){return t.index-e.index}))),!n||!i[n]||a.frames.length!==a.framesLength&&a.framesLength||(i[n][0](a),delete i[n])},n.onerror=function(t){var e=t.message;a&&i[a]&&(i[a][1](e),delete i[a]),console.error(e)},new Promise((function(t,e){i[o.asyncId]=[t,e],n.postMessage(o)}))}var m=n("ecd6"),g=n.n(m);function p(){return g()('(function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="//cdn.dancf.com/odyssey-editor/",r(r.s="57ea")})({"00ee":function(t,e,r){var n=r("b622"),i=n("toStringTag"),a={};a[i]="z",t.exports="[object z]"===String(a)},"0366":function(t,e,r){var n=r("e330"),i=r("59ed"),a=r("40d5"),o=n(n.bind);t.exports=function(t,e){return i(t),void 0===e?t:a?o(t,e):function(){return t.apply(e,arguments)}}},"04d1":function(t,e,r){var n=r("342f"),i=n.match(/firefox\\/(\\d+)/i);t.exports=!!i&&+i[1]},"06cf":function(t,e,r){var n=r("83ab"),i=r("c65b"),a=r("d1e7"),o=r("5c6c"),s=r("fc6a"),f=r("a04b"),u=r("1a2d"),c=r("0cfb"),l=Object.getOwnPropertyDescriptor;e.f=n?l:function(t,e){if(t=s(t),e=f(e),c)try{return l(t,e)}catch(r){}if(u(t,e))return o(!i(a.f,t,e),t[e])}},"07f4":function(t,e,r){"use strict";var n=r("be7f"),i=4,a=0,o=1,s=2;function f(t){var e=t.length;while(--e>=0)t[e]=0}var u=0,c=1,l=2,d=3,h=258,p=29,v=256,b=v+1+p,_=30,g=19,y=2*b+1,w=15,m=16,x=7,k=256,A=16,T=17,S=18,z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],E=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],U=512,R=new Array(2*(b+2));f(R);var B=new Array(2*_);f(B);var M=new Array(U);f(M);var C=new Array(h-d+1);f(C);var j=new Array(p);f(j);var P,L,N,D=new Array(_);function F(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function Z(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function H(t){return t<256?M[t]:M[256+(t>>>7)]}function G(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function q(t,e,r){t.bi_valid>m-r?(t.bi_buf|=e<<t.bi_valid&65535,G(t,t.bi_buf),t.bi_buf=e>>m-t.bi_valid,t.bi_valid+=r-m):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function Y(t,e,r){q(t,r[2*e],r[2*e+1])}function W(t,e){var r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1}function V(t){16===t.bi_valid?(G(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function K(t,e){var r,n,i,a,o,s,f=e.dyn_tree,u=e.max_code,c=e.stat_desc.static_tree,l=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,h=e.stat_desc.extra_base,p=e.stat_desc.max_length,v=0;for(a=0;a<=w;a++)t.bl_count[a]=0;for(f[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<y;r++)n=t.heap[r],a=f[2*f[2*n+1]+1]+1,a>p&&(a=p,v++),f[2*n+1]=a,n>u||(t.bl_count[a]++,o=0,n>=h&&(o=d[n-h]),s=f[2*n],t.opt_len+=s*(a+o),l&&(t.static_len+=s*(c[2*n+1]+o)));if(0!==v){do{a=p-1;while(0===t.bl_count[a])a--;t.bl_count[a]--,t.bl_count[a+1]+=2,t.bl_count[p]--,v-=2}while(v>0);for(a=p;0!==a;a--){n=t.bl_count[a];while(0!==n)i=t.heap[--r],i>u||(f[2*i+1]!==a&&(t.opt_len+=(a-f[2*i+1])*f[2*i],f[2*i+1]=a),n--)}}}function X(t,e,r){var n,i,a=new Array(w+1),o=0;for(n=1;n<=w;n++)a[n]=o=o+r[n-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=W(a[s]++,s))}}function Q(){var t,e,r,n,i,a=new Array(w+1);for(r=0,n=0;n<p-1;n++)for(j[n]=r,t=0;t<1<<z[n];t++)C[r++]=n;for(C[r-1]=n,i=0,n=0;n<16;n++)for(D[n]=i,t=0;t<1<<E[n];t++)M[i++]=n;for(i>>=7;n<_;n++)for(D[n]=i<<7,t=0;t<1<<E[n]-7;t++)M[256+i++]=n;for(e=0;e<=w;e++)a[e]=0;t=0;while(t<=143)R[2*t+1]=8,t++,a[8]++;while(t<=255)R[2*t+1]=9,t++,a[9]++;while(t<=279)R[2*t+1]=7,t++,a[7]++;while(t<=287)R[2*t+1]=8,t++,a[8]++;for(X(R,b+1,a),t=0;t<_;t++)B[2*t+1]=5,B[2*t]=W(t,5);P=new F(R,z,v+1,b,w),L=new F(B,E,0,_,w),N=new F(new Array(0),I,0,g,x)}function $(t){var e;for(e=0;e<b;e++)t.dyn_ltree[2*e]=0;for(e=0;e<_;e++)t.dyn_dtree[2*e]=0;for(e=0;e<g;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*k]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function J(t){t.bi_valid>8?G(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function tt(t,e,r,i){J(t),i&&(G(t,r),G(t,~r)),n.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}function et(t,e,r,n){var i=2*e,a=2*r;return t[i]<t[a]||t[i]===t[a]&&n[e]<=n[r]}function rt(t,e,r){var n=t.heap[r],i=r<<1;while(i<=t.heap_len){if(i<t.heap_len&&et(e,t.heap[i+1],t.heap[i],t.depth)&&i++,et(e,n,t.heap[i],t.depth))break;t.heap[r]=t.heap[i],r=i,i<<=1}t.heap[r]=n}function nt(t,e,r){var n,i,a,o,s=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*s]<<8|t.pending_buf[t.d_buf+2*s+1],i=t.pending_buf[t.l_buf+s],s++,0===n?Y(t,i,e):(a=C[i],Y(t,a+v+1,e),o=z[a],0!==o&&(i-=j[a],q(t,i,o)),n--,a=H(n),Y(t,a,r),o=E[a],0!==o&&(n-=D[a],q(t,n,o)))}while(s<t.last_lit);Y(t,k,e)}function it(t,e){var r,n,i,a=e.dyn_tree,o=e.stat_desc.static_tree,s=e.stat_desc.has_stree,f=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=y,r=0;r<f;r++)0!==a[2*r]?(t.heap[++t.heap_len]=u=r,t.depth[r]=0):a[2*r+1]=0;while(t.heap_len<2)i=t.heap[++t.heap_len]=u<2?++u:0,a[2*i]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=o[2*i+1]);for(e.max_code=u,r=t.heap_len>>1;r>=1;r--)rt(t,a,r);i=f;do{r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],rt(t,a,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,a[2*i]=a[2*r]+a[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,a[2*r+1]=a[2*n+1]=i,t.heap[1]=i++,rt(t,a,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],K(t,e),X(a,u,t.bl_count)}function at(t,e,r){var n,i,a=-1,o=e[1],s=0,f=7,u=4;for(0===o&&(f=138,u=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=o,o=e[2*(n+1)+1],++s<f&&i===o||(s<u?t.bl_tree[2*i]+=s:0!==i?(i!==a&&t.bl_tree[2*i]++,t.bl_tree[2*A]++):s<=10?t.bl_tree[2*T]++:t.bl_tree[2*S]++,s=0,a=i,0===o?(f=138,u=3):i===o?(f=6,u=3):(f=7,u=4))}function ot(t,e,r){var n,i,a=-1,o=e[1],s=0,f=7,u=4;for(0===o&&(f=138,u=3),n=0;n<=r;n++)if(i=o,o=e[2*(n+1)+1],!(++s<f&&i===o)){if(s<u)do{Y(t,i,t.bl_tree)}while(0!==--s);else 0!==i?(i!==a&&(Y(t,i,t.bl_tree),s--),Y(t,A,t.bl_tree),q(t,s-3,2)):s<=10?(Y(t,T,t.bl_tree),q(t,s-3,3)):(Y(t,S,t.bl_tree),q(t,s-11,7));s=0,a=i,0===o?(f=138,u=3):i===o?(f=6,u=3):(f=7,u=4)}}function st(t){var e;for(at(t,t.dyn_ltree,t.l_desc.max_code),at(t,t.dyn_dtree,t.d_desc.max_code),it(t,t.bl_desc),e=g-1;e>=3;e--)if(0!==t.bl_tree[2*O[e]+1])break;return t.opt_len+=3*(e+1)+5+5+4,e}function ft(t,e,r,n){var i;for(q(t,e-257,5),q(t,r-1,5),q(t,n-4,4),i=0;i<n;i++)q(t,t.bl_tree[2*O[i]+1],3);ot(t,t.dyn_ltree,e-1),ot(t,t.dyn_dtree,r-1)}function ut(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return a;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return o;for(e=32;e<v;e++)if(0!==t.dyn_ltree[2*e])return o;return a}f(D);var ct=!1;function lt(t){ct||(Q(),ct=!0),t.l_desc=new Z(t.dyn_ltree,P),t.d_desc=new Z(t.dyn_dtree,L),t.bl_desc=new Z(t.bl_tree,N),t.bi_buf=0,t.bi_valid=0,$(t)}function dt(t,e,r,n){q(t,(u<<1)+(n?1:0),3),tt(t,e,r,!0)}function ht(t){q(t,c<<1,3),Y(t,k,R),V(t)}function pt(t,e,r,n){var a,o,f=0;t.level>0?(t.strm.data_type===s&&(t.strm.data_type=ut(t)),it(t,t.l_desc),it(t,t.d_desc),f=st(t),a=t.opt_len+3+7>>>3,o=t.static_len+3+7>>>3,o<=a&&(a=o)):a=o=r+5,r+4<=a&&-1!==e?dt(t,e,r,n):t.strategy===i||o===a?(q(t,(c<<1)+(n?1:0),3),nt(t,R,B)):(q(t,(l<<1)+(n?1:0),3),ft(t,t.l_desc.max_code+1,t.d_desc.max_code+1,f+1),nt(t,t.dyn_ltree,t.dyn_dtree)),$(t),n&&J(t)}function vt(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(C[r]+v+1)]++,t.dyn_dtree[2*H(e)]++),t.last_lit===t.lit_bufsize-1}e._tr_init=lt,e._tr_stored_block=dt,e._tr_flush_block=pt,e._tr_tally=vt,e._tr_align=ht},"07fa":function(t,e,r){var n=r("50c4");t.exports=function(t){return n(t.length)}},"083a":function(t,e,r){"use strict";var n=r("0d51"),i=TypeError;t.exports=function(t,e){if(!delete t[e])throw i("Cannot delete property "+n(e)+" of "+n(t))}},"0b25":function(t,e,r){var n=r("5926"),i=r("50c4"),a=RangeError;t.exports=function(t){if(void 0===t)return 0;var e=n(t),r=i(e);if(e!==r)throw a("Wrong length or index");return r}},"0b42":function(t,e,r){var n=r("e8b5"),i=r("68ee"),a=r("861d"),o=r("b622"),s=o("species"),f=Array;t.exports=function(t){var e;return n(t)&&(e=t.constructor,i(e)&&(e===f||n(e.prototype))?e=void 0:a(e)&&(e=e[s],null===e&&(e=void 0))),void 0===e?f:e}},"0cfb":function(t,e,r){var n=r("83ab"),i=r("d039"),a=r("cc12");t.exports=!n&&!i((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},"0d51":function(t,e){var r=String;t.exports=function(t){try{return r(t)}catch(e){return"Object"}}},"13d2":function(t,e,r){var n=r("d039"),i=r("1626"),a=r("1a2d"),o=r("83ab"),s=r("5e77").CONFIGURABLE,f=r("8925"),u=r("69f3"),c=u.enforce,l=u.get,d=Object.defineProperty,h=o&&!n((function(){return 8!==d((function(){}),"length",{value:8}).length})),p=String(String).split("String"),v=t.exports=function(t,e,r){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\\(([^)]*)\\)/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!a(t,"name")||s&&t.name!==e)&&(o?d(t,"name",{value:e,configurable:!0}):t.name=e),h&&r&&a(r,"arity")&&t.length!==r.arity&&d(t,"length",{value:r.arity});try{r&&a(r,"constructor")&&r.constructor?o&&d(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(i){}var n=c(t);return a(n,"source")||(n.source=p.join("string"==typeof e?e:"")),t};Function.prototype.toString=v((function(){return i(this)&&l(this).source||f(this)}),"toString")},1448:function(t,e,r){var n=r("dfb9"),i=r("b6b7");t.exports=function(t,e){return n(i(t),e)}},"145e":function(t,e,r){"use strict";var n=r("7b0b"),i=r("23cb"),a=r("07fa"),o=r("083a"),s=Math.min;t.exports=[].copyWithin||function(t,e){var r=n(this),f=a(r),u=i(t,f),c=i(e,f),l=arguments.length>2?arguments[2]:void 0,d=s((void 0===l?f:i(l,f))-c,f-u),h=1;c<u&&u<c+d&&(h=-1,c+=d-1,u+=d-1);while(d-- >0)c in r?r[u]=r[c]:o(r,u),u+=h,c+=h;return r}},1626:function(t,e){t.exports=function(t){return"function"==typeof t}},"170b":function(t,e,r){"use strict";var n=r("ebb5"),i=r("50c4"),a=r("23cb"),o=r("b6b7"),s=n.aTypedArray,f=n.exportTypedArrayMethod;f("subarray",(function(t,e){var r=s(this),n=r.length,f=a(t,n),u=o(r);return new u(r.buffer,r.byteOffset+f*r.BYTES_PER_ELEMENT,i((void 0===e?n:a(e,n))-f))}))},"182d":function(t,e,r){var n=r("f8cd"),i=RangeError;t.exports=function(t,e){var r=n(t);if(r%e)throw i("Wrong offset");return r}},"19aa":function(t,e,r){var n=r("3a9b"),i=TypeError;t.exports=function(t,e){if(n(e,t))return t;throw i("Incorrect invocation")}},"1a2d":function(t,e,r){var n=r("e330"),i=r("7b0b"),a=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return a(i(t),e)}},"1be4":function(t,e,r){var n=r("d066");t.exports=n("document","documentElement")},"1c7e":function(t,e,r){var n=r("b622"),i=n("iterator"),a=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){a=!0}};s[i]=function(){return this},Array.from(s,(function(){throw 2}))}catch(f){}t.exports=function(t,e){if(!e&&!a)return!1;var r=!1;try{var n={};n[i]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(f){}return r}},"1d02":function(t,e,r){"use strict";var n=r("ebb5"),i=r("a258").findLastIndex,a=n.aTypedArray,o=n.exportTypedArrayMethod;o("findLastIndex",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0)}))},"1d80":function(t,e){var r=TypeError;t.exports=function(t){if(void 0==t)throw r("Can\'t call method on "+t);return t}},"1dde":function(t,e,r){var n=r("d039"),i=r("b622"),a=r("2d00"),o=i("species");t.exports=function(t){return a>=51||!n((function(){var e=[],r=e.constructor={};return r[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"219c":function(t,e,r){"use strict";var n=r("da84"),i=r("e330"),a=r("d039"),o=r("59ed"),s=r("addb"),f=r("ebb5"),u=r("04d1"),c=r("d998"),l=r("2d00"),d=r("512c"),h=f.aTypedArray,p=f.exportTypedArrayMethod,v=n.Uint16Array,b=v&&i(v.prototype.sort),_=!!b&&!(a((function(){b(new v(2),null)}))&&a((function(){b(new v(2),{})}))),g=!!b&&!a((function(){if(l)return l<74;if(u)return u<67;if(c)return!0;if(d)return d<602;var t,e,r=new v(516),n=Array(516);for(t=0;t<516;t++)e=t%4,r[t]=515-t,n[t]=t-2*e+3;for(b(r,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(r[t]!==n[t])return!0})),y=function(t){return function(e,r){return void 0!==t?+t(e,r)||0:r!==r?-1:e!==e?1:0===e&&0===r?1/e>0&&1/r<0?1:-1:e>r}};p("sort",(function(t){return void 0!==t&&o(t),g?b(this,t):s(h(this),y(t))}),!g||_)},"23cb":function(t,e,r){var n=r("5926"),i=Math.max,a=Math.min;t.exports=function(t,e){var r=n(t);return r<0?i(r+e,0):a(r,e)}},"23e7":function(t,e,r){var n=r("da84"),i=r("06cf").f,a=r("9112"),o=r("cb2d"),s=r("6374"),f=r("e893"),u=r("94ca");t.exports=function(t,e){var r,c,l,d,h,p,v=t.target,b=t.global,_=t.stat;if(c=b?n:_?n[v]||s(v,{}):(n[v]||{}).prototype,c)for(l in e){if(h=e[l],t.dontCallGetSet?(p=i(c,l),d=p&&p.value):d=c[l],r=u(b?l:v+(_?".":"#")+l,t.forced),!r&&void 0!==d){if(typeof h==typeof d)continue;f(h,d)}(t.sham||d&&d.sham)&&a(h,"sham",!0),o(c,l,h,t)}}},"241c":function(t,e,r){var n=r("ca84"),i=r("7839"),a=i.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,a)}},"25a1":function(t,e,r){"use strict";var n=r("ebb5"),i=r("d58f").right,a=n.aTypedArray,o=n.exportTypedArrayMethod;o("reduceRight",(function(t){var e=arguments.length;return i(a(this),t,e,e>1?arguments[1]:void 0)}))},"25f0":function(t,e,r){"use strict";var n=r("5e77").PROPER,i=r("cb2d"),a=r("825a"),o=r("577e"),s=r("d039"),f=r("90d8"),u="toString",c=RegExp.prototype,l=c[u],d=s((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),h=n&&l.name!=u;(d||h)&&i(RegExp.prototype,u,(function(){var t=a(this),e=o(t.source),r=o(f(t));return"/"+e+"/"+r}),{unsafe:!0})},2626:function(t,e,r){"use strict";var n=r("d066"),i=r("9bf2"),a=r("b622"),o=r("83ab"),s=a("species");t.exports=function(t){var e=n(t),r=i.f;o&&e&&!e[s]&&r(e,s,{configurable:!0,get:function(){return this}})}},2954:function(t,e,r){"use strict";var n=r("ebb5"),i=r("b6b7"),a=r("d039"),o=r("f36a"),s=n.aTypedArray,f=n.exportTypedArrayMethod,u=a((function(){new Int8Array(1).slice()}));f("slice",(function(t,e){var r=o(s(this),t,e),n=i(this),a=0,f=r.length,u=new n(f);while(f>a)u[a]=r[a++];return u}),u)},"2ba4":function(t,e,r){var n=r("40d5"),i=Function.prototype,a=i.apply,o=i.call;t.exports="object"==typeof Reflect&&Reflect.apply||(n?o.bind(a):function(){return o.apply(a,arguments)})},"2ceb":function(t,e,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},"2d00":function(t,e,r){var n,i,a=r("da84"),o=r("342f"),s=a.process,f=a.Deno,u=s&&s.versions||f&&f.version,c=u&&u.v8;c&&(n=c.split("."),i=n[0]>0&&n[0]<4?1:+(n[0]+n[1])),!i&&o&&(n=o.match(/Edge\\/(\\d+)/),(!n||n[1]>=74)&&(n=o.match(/Chrome\\/(\\d+)/),n&&(i=+n[1]))),t.exports=i},3280:function(t,e,r){"use strict";var n=r("ebb5"),i=r("2ba4"),a=r("e58c"),o=n.aTypedArray,s=n.exportTypedArrayMethod;s("lastIndexOf",(function(t){var e=arguments.length;return i(a,o(this),e>1?[t,arguments[1]]:[t])}))},"342f":function(t,e,r){var n=r("d066");t.exports=n("navigator","userAgent")||""},"35a1":function(t,e,r){var n=r("f5df"),i=r("dc4a"),a=r("3f8c"),o=r("b622"),s=o("iterator");t.exports=function(t){if(void 0!=t)return i(t,s)||i(t,"@@iterator")||a[n(t)]}},"37e8":function(t,e,r){var n=r("83ab"),i=r("aed9"),a=r("9bf2"),o=r("825a"),s=r("fc6a"),f=r("df75");e.f=n&&!i?Object.defineProperties:function(t,e){o(t);var r,n=s(e),i=f(e),u=i.length,c=0;while(u>c)a.f(t,r=i[c++],n[r]);return t}},"3a7b":function(t,e,r){"use strict";var n=r("ebb5"),i=r("b727").findIndex,a=n.aTypedArray,o=n.exportTypedArrayMethod;o("findIndex",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0)}))},"3a9b":function(t,e,r){var n=r("e330");t.exports=n({}.isPrototypeOf)},"3bbe":function(t,e,r){var n=r("1626"),i=String,a=TypeError;t.exports=function(t){if("object"==typeof t||n(t))return t;throw a("Can\'t set "+i(t)+" as a prototype")}},"3c5d":function(t,e,r){"use strict";var n=r("da84"),i=r("c65b"),a=r("ebb5"),o=r("07fa"),s=r("182d"),f=r("7b0b"),u=r("d039"),c=n.RangeError,l=n.Int8Array,d=l&&l.prototype,h=d&&d.set,p=a.aTypedArray,v=a.exportTypedArrayMethod,b=!u((function(){var t=new Uint8ClampedArray(2);return i(h,t,{length:1,0:3},1),3!==t[1]})),_=b&&a.NATIVE_ARRAY_BUFFER_VIEWS&&u((function(){var t=new l(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));v("set",(function(t){p(this);var e=s(arguments.length>1?arguments[1]:void 0,1),r=f(t);if(b)return i(h,this,r,e);var n=this.length,a=o(r),u=0;if(a+e>n)throw c("Wrong length");while(u<a)this[e+u]=r[u++]}),!b||_)},"3f8c":function(t,e){t.exports={}},"3fcc":function(t,e,r){"use strict";var n=r("ebb5"),i=r("b727").map,a=r("b6b7"),o=n.aTypedArray,s=n.exportTypedArrayMethod;s("map",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(a(t))(e)}))}))},"40d5":function(t,e,r){var n=r("d039");t.exports=!n((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},4126:function(t,e,r){"use strict";var n=r("a177"),i=r("be7f"),a=r("7b27"),o=r("4dc6"),s=r("8936"),f=Object.prototype.toString,u=0,c=4,l=0,d=1,h=2,p=-1,v=0,b=8;function _(t){if(!(this instanceof _))return new _(t);this.options=i.assign({level:p,method:b,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==l)throw new Error(o[r]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){var u;if(u="string"===typeof e.dictionary?a.string2buf(e.dictionary):"[object ArrayBuffer]"===f.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,r=n.deflateSetDictionary(this.strm,u),r!==l)throw new Error(o[r]);this._dict_set=!0}}function g(t,e){var r=new _(e);if(r.push(t,!0),r.err)throw r.msg||o[r.err];return r.result}function y(t,e){return e=e||{},e.raw=!0,g(t,e)}function w(t,e){return e=e||{},e.gzip=!0,g(t,e)}_.prototype.push=function(t,e){var r,o,s=this.strm,p=this.options.chunkSize;if(this.ended)return!1;o=e===~~e?e:!0===e?c:u,"string"===typeof t?s.input=a.string2buf(t):"[object ArrayBuffer]"===f.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(p),s.next_out=0,s.avail_out=p),r=n.deflate(s,o),r!==d&&r!==l)return this.onEnd(r),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||o!==c&&o!==h)||("string"===this.options.to?this.onData(a.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&r!==d);return o===c?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===l):o!==h||(this.onEnd(l),s.avail_out=0,!0)},_.prototype.onData=function(t){this.chunks.push(t)},_.prototype.onEnd=function(t){t===l&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=_,e.deflate=g,e.deflateRaw=y,e.gzip=w},"44ad":function(t,e,r){var n=r("e330"),i=r("d039"),a=r("c6b6"),o=Object,s=n("".split);t.exports=i((function(){return!o("z").propertyIsEnumerable(0)}))?function(t){return"String"==a(t)?s(t,""):o(t)}:o},"44d2":function(t,e,r){var n=r("b622"),i=r("7c73"),a=r("9bf2").f,o=n("unscopables"),s=Array.prototype;void 0==s[o]&&a(s,o,{configurable:!0,value:i(null)}),t.exports=function(t){s[o][t]=!0}},4840:function(t,e,r){var n=r("825a"),i=r("5087"),a=r("b622"),o=a("species");t.exports=function(t,e){var r,a=n(t).constructor;return void 0===a||void 0==(r=n(a)[o])?e:i(r)}},"485a":function(t,e,r){var n=r("c65b"),i=r("1626"),a=r("861d"),o=TypeError;t.exports=function(t,e){var r,s;if("string"===e&&i(r=t.toString)&&!a(s=n(r,t)))return s;if(i(r=t.valueOf)&&!a(s=n(r,t)))return s;if("string"!==e&&i(r=t.toString)&&!a(s=n(r,t)))return s;throw o("Can\'t convert object to primitive value")}},4930:function(t,e,r){var n=r("2d00"),i=r("d039");t.exports=!!Object.getOwnPropertySymbols&&!i((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},"4d64":function(t,e,r){var n=r("fc6a"),i=r("23cb"),a=r("07fa"),o=function(t){return function(e,r,o){var s,f=n(e),u=a(f),c=i(o,u);if(t&&r!=r){while(u>c)if(s=f[c++],s!=s)return!0}else for(;u>c;c++)if((t||c in f)&&f[c]===r)return t||c||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},"4dae":function(t,e,r){var n=r("23cb"),i=r("07fa"),a=r("8418"),o=Array,s=Math.max;t.exports=function(t,e,r){for(var f=i(t),u=n(e,f),c=n(void 0===r?f:r,f),l=o(s(c-u,0)),d=0;u<c;u++,d++)a(l,d,t[u]);return l.length=d,l}},"4dc6":function(t,e,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},"4de4":function(t,e,r){"use strict";var n=r("23e7"),i=r("b727").filter,a=r("1dde"),o=a("filter");n({target:"Array",proto:!0,forced:!o},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"4e82":function(t,e,r){"use strict";var n=r("23e7"),i=r("e330"),a=r("59ed"),o=r("7b0b"),s=r("07fa"),f=r("083a"),u=r("577e"),c=r("d039"),l=r("addb"),d=r("a640"),h=r("04d1"),p=r("d998"),v=r("2d00"),b=r("512c"),_=[],g=i(_.sort),y=i(_.push),w=c((function(){_.sort(void 0)})),m=c((function(){_.sort(null)})),x=d("sort"),k=!c((function(){if(v)return v<70;if(!(h&&h>3)){if(p)return!0;if(b)return b<603;var t,e,r,n,i="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)_.push({k:e+n,v:r})}for(_.sort((function(t,e){return e.v-t.v})),n=0;n<_.length;n++)e=_[n].k.charAt(0),i.charAt(i.length-1)!==e&&(i+=e);return"DGBEFHACIJK"!==i}})),A=w||!m||!x||!k,T=function(t){return function(e,r){return void 0===r?-1:void 0===e?1:void 0!==t?+t(e,r)||0:u(e)>u(r)?1:-1}};n({target:"Array",proto:!0,forced:A},{sort:function(t){void 0!==t&&a(t);var e=o(this);if(k)return void 0===t?g(e):g(e,t);var r,n,i=[],u=s(e);for(n=0;n<u;n++)n in e&&y(i,e[n]);l(i,T(t)),r=i.length,n=0;while(n<r)e[n]=i[n++];while(n<u)f(e,n++);return e}})},5087:function(t,e,r){var n=r("68ee"),i=r("0d51"),a=TypeError;t.exports=function(t){if(n(t))return t;throw a(i(t)+" is not a constructor")}},"50c4":function(t,e,r){var n=r("5926"),i=Math.min;t.exports=function(t){return t>0?i(n(t),9007199254740991):0}},"512c":function(t,e,r){var n=r("342f"),i=n.match(/AppleWebKit\\/(\\d+)\\./);t.exports=!!i&&+i[1]},5692:function(t,e,r){var n=r("c430"),i=r("c6cd");(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.24.1",mode:n?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.24.1/LICENSE",source:"https://github.com/zloirock/core-js"})},"56ef":function(t,e,r){var n=r("d066"),i=r("e330"),a=r("241c"),o=r("7418"),s=r("825a"),f=i([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=a.f(s(t)),r=o.f;return r?f(e,r(t)):e}},"577e":function(t,e,r){var n=r("f5df"),i=String;t.exports=function(t){if("Symbol"===n(t))throw TypeError("Cannot convert a Symbol value to a string");return i(t)}},"57ea":function(t,e,r){"use strict";r.r(e);r("ace4"),r("d3b7"),r("5cc6"),r("907a"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7"),r("fa9e"),r("77d9"),r("fb6a"),r("fb2c"),r("84c3"),r("4de4"),r("25f0"),r("4e82");var n=r("d7ac"),i=r.n(n),a={toRGBA8:function(t){var e=t.width,r=t.height;if(null==t.tabs.acTL)return[a.toRGBA8.decodeImage(t.data,e,r,t).buffer];var n=[];null==t.frames[0].data&&(t.frames[0].data=t.data);for(var i=e*r*4,o=new Uint8Array(i),s=new Uint8Array(i),f=new Uint8Array(i),u=0;u<t.frames.length;u++){var c=t.frames[u],l=c.rect.x,d=c.rect.y,h=c.rect.width,p=c.rect.height,v=a.toRGBA8.decodeImage(c.data,h,p,t);if(0!=u)for(var b=0;b<i;b++)f[b]=o[b];if(0==c.blend?a._copyTile(v,h,p,o,e,r,l,d,0):1==c.blend&&a._copyTile(v,h,p,o,e,r,l,d,1),n.push(o.buffer.slice(0)),0==c.dispose);else if(1==c.dispose)a._copyTile(s,h,p,o,e,r,l,d,0);else if(2==c.dispose)for(b=0;b<i;b++)o[b]=f[b]}return n}};a.toRGBA8.decodeImage=function(t,e,r,n){var i=e*r,o=a.decode._getBPP(n),s=Math.ceil(e*o/8),f=new Uint8Array(4*i),u=new Uint32Array(f.buffer),c=n.ctype,l=n.depth,d=a._bin.readUshort;Date.now();if(6==c){var h=i<<2;if(8==l)for(var p=0;p<h;p+=4)f[p]=t[p],f[p+1]=t[p+1],f[p+2]=t[p+2],f[p+3]=t[p+3];if(16==l)for(p=0;p<h;p++)f[p]=t[p<<1]}else if(2==c){var v=n.tabs["tRNS"];if(null==v){if(8==l)for(p=0;p<i;p++){var b=3*p;u[p]=255<<24|t[b+2]<<16|t[b+1]<<8|t[b]}if(16==l)for(p=0;p<i;p++){b=6*p;u[p]=255<<24|t[b+4]<<16|t[b+2]<<8|t[b]}}else{var _=v[0],g=v[1],y=v[2];if(8==l)for(p=0;p<i;p++){var w=p<<2;b=3*p;u[p]=255<<24|t[b+2]<<16|t[b+1]<<8|t[b],t[b]==_&&t[b+1]==g&&t[b+2]==y&&(f[w+3]=0)}if(16==l)for(p=0;p<i;p++){w=p<<2,b=6*p;u[p]=255<<24|t[b+4]<<16|t[b+2]<<8|t[b],d(t,b)==_&&d(t,b+2)==g&&d(t,b+4)==y&&(f[w+3]=0)}}}else if(3==c){var m=n.tabs["PLTE"],x=n.tabs["tRNS"],k=x?x.length:0;if(1==l)for(var A=0;A<r;A++){var T=A*s,S=A*e;for(p=0;p<e;p++){w=S+p<<2;var z=t[T+(p>>3)]>>7-((7&p)<<0)&1,E=3*z;f[w]=m[E],f[w+1]=m[E+1],f[w+2]=m[E+2],f[w+3]=z<k?x[z]:255}}if(2==l)for(A=0;A<r;A++)for(T=A*s,S=A*e,p=0;p<e;p++){w=S+p<<2,z=t[T+(p>>2)]>>6-((3&p)<<1)&3,E=3*z;f[w]=m[E],f[w+1]=m[E+1],f[w+2]=m[E+2],f[w+3]=z<k?x[z]:255}if(4==l)for(A=0;A<r;A++)for(T=A*s,S=A*e,p=0;p<e;p++){w=S+p<<2,z=t[T+(p>>1)]>>4-((1&p)<<2)&15,E=3*z;f[w]=m[E],f[w+1]=m[E+1],f[w+2]=m[E+2],f[w+3]=z<k?x[z]:255}if(8==l)for(p=0;p<i;p++){w=p<<2,z=t[p],E=3*z;f[w]=m[E],f[w+1]=m[E+1],f[w+2]=m[E+2],f[w+3]=z<k?x[z]:255}}else if(4==c){if(8==l)for(p=0;p<i;p++){w=p<<2;var I=p<<1,O=t[I];f[w]=O,f[w+1]=O,f[w+2]=O,f[w+3]=t[I+1]}if(16==l)for(p=0;p<i;p++){w=p<<2,I=p<<2,O=t[I];f[w]=O,f[w+1]=O,f[w+2]=O,f[w+3]=t[I+2]}}else if(0==c)for(_=n.tabs["tRNS"]?n.tabs["tRNS"]:-1,A=0;A<r;A++){var U=A*s,R=A*e;if(1==l)for(var B=0;B<e;B++){O=255*(t[U+(B>>>3)]>>>7-(7&B)&1);var M=O==255*_?0:255;u[R+B]=M<<24|O<<16|O<<8|O}else if(2==l)for(B=0;B<e;B++){O=85*(t[U+(B>>>2)]>>>6-((3&B)<<1)&3),M=O==85*_?0:255;u[R+B]=M<<24|O<<16|O<<8|O}else if(4==l)for(B=0;B<e;B++){O=17*(t[U+(B>>>1)]>>>4-((1&B)<<2)&15),M=O==17*_?0:255;u[R+B]=M<<24|O<<16|O<<8|O}else if(8==l)for(B=0;B<e;B++){O=t[U+B],M=O==_?0:255;u[R+B]=M<<24|O<<16|O<<8|O}else if(16==l)for(B=0;B<e;B++){O=t[U+(B<<1)],M=d(t,U+(B<<p))==_?0:255;u[R+B]=M<<24|O<<16|O<<8|O}}return f},a.decode=function(t){for(var e,r=new Uint8Array(t),n=8,i=a._bin,o=i.readUshort,s=i.readUint,f={tabs:{},frames:[]},u=new Uint8Array(r.length),c=0,l=0,d=[137,80,78,71,13,10,26,10],h=0;h<8;h++)if(r[h]!=d[h])throw"The input is not a PNG file!";while(n<r.length){var p=i.readUint(r,n);n+=4;var v=i.readASCII(r,n,4);if(n+=4,"IHDR"==v)a.decode._IHDR(r,n,f);else if("CgBI"==v)f.tabs[v]=r.slice(n,n+4);else if("IDAT"==v){for(h=0;h<p;h++)u[c+h]=r[n+h];c+=p}else if("acTL"==v)f.tabs[v]={num_frames:s(r,n),num_plays:s(r,n+4)},e=new Uint8Array(r.length);else if("fcTL"==v){if(0!=l){var b=f.frames[f.frames.length-1];b.data=a.decode._decompress(f,e.slice(0,l),b.rect.width,b.rect.height),l=0}var _={x:s(r,n+12),y:s(r,n+16),width:s(r,n+4),height:s(r,n+8)},g=o(r,n+22);g=o(r,n+20)/(0==g?100:g);var y={rect:_,delay:Math.round(1e3*g),dispose:r[n+24],blend:r[n+25]};f.frames.push(y)}else if("fdAT"==v){for(h=0;h<p-4;h++)e[l+h]=r[n+h+4];l+=p-4}else if("pHYs"==v)f.tabs[v]=[i.readUint(r,n),i.readUint(r,n+4),r[n+8]];else if("cHRM"==v){f.tabs[v]=[];for(h=0;h<8;h++)f.tabs[v].push(i.readUint(r,n+4*h))}else if("tEXt"==v||"zTXt"==v){null==f.tabs[v]&&(f.tabs[v]={});var w=i.nextZero(r,n),m=i.readASCII(r,n,w-n),x=n+p-w-1;if("tEXt"==v)S=i.readASCII(r,w+1,x);else{var k=a.decode._inflate(r.slice(w+2,w+2+x));S=i.readUTF8(k,0,k.length)}f.tabs[v][m]=S}else if("iTXt"==v){null==f.tabs[v]&&(f.tabs[v]={});w=0;var A=n;w=i.nextZero(r,A);m=i.readASCII(r,A,w-A);A=w+1;var T=r[A];r[A+1];A+=2,w=i.nextZero(r,A);i.readASCII(r,A,w-A);A=w+1,w=i.nextZero(r,A);var S;i.readUTF8(r,A,w-A);A=w+1;x=p-(A-n);if(0==T)S=i.readUTF8(r,A,x);else{k=a.decode._inflate(r.slice(A,A+x));S=i.readUTF8(k,0,k.length)}f.tabs[v][m]=S}else if("PLTE"==v)f.tabs[v]=i.readBytes(r,n,p);else if("hIST"==v){var z=f.tabs["PLTE"].length/3;f.tabs[v]=[];for(h=0;h<z;h++)f.tabs[v].push(o(r,n+2*h))}else if("tRNS"==v)3==f.ctype?f.tabs[v]=i.readBytes(r,n,p):0==f.ctype?f.tabs[v]=o(r,n):2==f.ctype&&(f.tabs[v]=[o(r,n),o(r,n+2),o(r,n+4)]);else if("gAMA"==v)f.tabs[v]=i.readUint(r,n)/1e5;else if("sRGB"==v)f.tabs[v]=r[n];else if("bKGD"==v)0==f.ctype||4==f.ctype?f.tabs[v]=[o(r,n)]:2==f.ctype||6==f.ctype?f.tabs[v]=[o(r,n),o(r,n+2),o(r,n+4)]:3==f.ctype&&(f.tabs[v]=r[n]);else if("IEND"==v)break;n+=p;i.readUint(r,n);n+=4}if(0!=l){b=f.frames[f.frames.length-1];b.data=a.decode._decompress(f,e.slice(0,l),b.rect.width,b.rect.height),l=0}return f.data=a.decode._decompress(f,u,f.width,f.height),delete f.compress,delete f.interlace,delete f.filter,f},a.decode._decompress=function(t,e,r,n){Date.now();var i=a.decode._getBPP(t),o=Math.ceil(r*i/8),s=new Uint8Array((o+1+t.interlace)*n);e=t.tabs["CgBI"]?a.inflateRaw(e,s):a.decode._inflate(e,s);Date.now();return 0==t.interlace?e=a.decode._filterZero(e,t,0,r,n):1==t.interlace&&(e=a.decode._readInterlace(e,t)),e},a.decode._inflate=function(t,e){var r=a["inflateRaw"](new Uint8Array(t.buffer,2,t.length-6),e);return r},a.inflateRaw=function(){var t={H:{}};return t.H.N=function(e,r){var n,i,a=Uint8Array,o=0,s=0,f=0,u=0,c=0,l=0,d=0,h=0,p=0;if(3==e[0]&&0==e[1])return r||new a(0);var v=t.H,b=v.b,_=v.e,g=v.R,y=v.n,w=v.A,m=v.Z,x=v.m,k=null==r;k&&(r=new a(e.length>>>2<<5));while(0==o)if(o=b(e,p,1),s=b(e,p+1,2),p+=3,0!=s){if(k&&(r=t.H.W(r,h+(1<<17))),1==s&&(n=x.J,i=x.h,l=511,d=31),2==s){f=_(e,p,5)+257,u=_(e,p+5,5)+1,c=_(e,p+10,4)+4,p+=14;for(var A=1,T=0;T<38;T+=2)x.Q[T]=0,x.Q[T+1]=0;for(T=0;T<c;T++){var S=_(e,p+3*T,3);x.Q[1+(x.X[T]<<1)]=S,S>A&&(A=S)}p+=3*c,y(x.Q,A),w(x.Q,A,x.u),n=x.w,i=x.d,p=g(x.u,(1<<A)-1,f+u,e,p,x.v);var z=v.V(x.v,0,f,x.C);l=(1<<z)-1;var E=v.V(x.v,f,u,x.D);d=(1<<E)-1,y(x.C,z),w(x.C,z,n),y(x.D,E),w(x.D,E,i)}while(1){var I=n[m(e,p)&l];p+=15&I;var O=I>>>4;if(O>>>8==0)r[h++]=O;else{if(256==O)break;var U=h+O-254;if(O>264){var R=x.q[O-257];U=h+(R>>>3)+_(e,p,7&R),p+=7&R}var B=i[m(e,p)&d];p+=15&B;var M=B>>>4,C=x.c[M],j=(C>>>4)+b(e,p,15&C);p+=15&C;while(h<U)r[h]=r[h++-j],r[h]=r[h++-j],r[h]=r[h++-j],r[h]=r[h++-j];h=U}}}else{0!=(7&p)&&(p+=8-(7&p));var P=4+(p>>>3),L=e[P-4]|e[P-3]<<8;k&&(r=t.H.W(r,h+L)),r.set(new a(e.buffer,e.byteOffset+P,L),h),p=P+L<<3,h+=L}return r.length==h?r:r.slice(0,h)},t.H.W=function(t,e){var r=t.length;if(e<=r)return t;var n=new Uint8Array(r<<1);return n.set(t,0),n},t.H.R=function(e,r,n,i,a,o){var s=t.H.e,f=t.H.Z,u=0;while(u<n){var c=e[f(i,a)&r];a+=15&c;var l=c>>>4;if(l<=15)o[u]=l,u++;else{var d=0,h=0;16==l?(h=3+s(i,a,2),a+=2,d=o[u-1]):17==l?(h=3+s(i,a,3),a+=3):18==l&&(h=11+s(i,a,7),a+=7);var p=u+h;while(u<p)o[u]=d,u++}}return a},t.H.V=function(t,e,r,n){var i=0,a=0,o=n.length>>>1;while(a<r){var s=t[a+e];n[a<<1]=0,n[1+(a<<1)]=s,s>i&&(i=s),a++}while(a<o)n[a<<1]=0,n[1+(a<<1)]=0,a++;return i},t.H.n=function(e,r){for(var n,i,a,o,s=t.H.m,f=e.length,u=s.j,c=0;c<=r;c++)u[c]=0;for(c=1;c<f;c+=2)u[e[c]]++;var l=s.K;for(n=0,u[0]=0,i=1;i<=r;i++)n=n+u[i-1]<<1,l[i]=n;for(a=0;a<f;a+=2)o=e[a+1],0!=o&&(e[a]=l[o],l[o]++)},t.H.A=function(e,r,n){for(var i=e.length,a=t.H.m,o=a.r,s=0;s<i;s+=2)if(0!=e[s+1]){var f=s>>1,u=e[s+1],c=f<<4|u,l=r-u,d=e[s]<<l,h=d+(1<<l);while(d!=h){var p=o[d]>>>15-r;n[p]=c,d++}}},t.H.l=function(e,r){for(var n=t.H.m.r,i=15-r,a=0;a<e.length;a+=2){var o=e[a]<<r-e[a+1];e[a]=n[o]>>>i}},t.H.M=function(t,e,r){r<<=7&e;var n=e>>>3;t[n]|=r,t[n+1]|=r>>>8},t.H.I=function(t,e,r){r<<=7&e;var n=e>>>3;t[n]|=r,t[n+1]|=r>>>8,t[n+2]|=r>>>16},t.H.e=function(t,e,r){return(t[e>>>3]|t[1+(e>>>3)]<<8)>>>(7&e)&(1<<r)-1},t.H.b=function(t,e,r){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)&(1<<r)-1},t.H.Z=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)},t.H.i=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16|t[3+(e>>>3)]<<24)>>>(7&e)},t.H.m=function(){var t=Uint16Array,e=Uint32Array;return{K:new t(16),j:new t(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new t(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new e(32),J:new t(512),_:[],h:new t(32),$:[],w:new t(32768),C:[],v:[],d:new t(32768),D:[],u:new t(512),Q:[],r:new t(32768),s:new e(286),Y:new e(30),a:new e(19),t:new e(15e3),k:new t(65536),g:new t(32768)}}(),function(){for(var e=t.H.m,r=32768,n=0;n<r;n++){var i=n;i=(2863311530&i)>>>1|(1431655765&i)<<1,i=(3435973836&i)>>>2|(858993459&i)<<2,i=(4042322160&i)>>>4|(252645135&i)<<4,i=(4278255360&i)>>>8|(16711935&i)<<8,e.r[n]=(i>>>16|i<<16)>>>17}function a(t,e,r){while(0!=e--)t.push(0,r)}for(n=0;n<32;n++)e.q[n]=e.S[n]<<3|e.T[n],e.c[n]=e.p[n]<<4|e.z[n];a(e._,144,8),a(e._,112,9),a(e._,24,7),a(e._,8,8),t.H.n(e._,9),t.H.A(e._,9,e.J),t.H.l(e._,9),a(e.$,32,5),t.H.n(e.$,5),t.H.A(e.$,5,e.h),t.H.l(e.$,5),a(e.Q,19,0),a(e.C,286,0),a(e.D,30,0),a(e.v,320,0)}(),t.H.N}(),a.decode._readInterlace=function(t,e){var r=e.width,n=e.height,i=a.decode._getBPP(e),o=i>>3,s=Math.ceil(r*i/8),f=new Uint8Array(n*s),u=0,c=[0,0,4,0,2,0,1],l=[0,4,0,2,0,1,0],d=[8,8,8,4,4,2,2],h=[8,8,4,4,2,2,1],p=0;while(p<7){var v=d[p],b=h[p],_=0,g=0,y=c[p];while(y<n)y+=v,g++;var w=l[p];while(w<r)w+=b,_++;var m=Math.ceil(_*i/8);a.decode._filterZero(t,e,u,_,g);var x=0,k=c[p];while(k<n){var A=l[p],T=u+x*m<<3;while(A<r){if(1==i){var S=t[T>>3];S=S>>7-(7&T)&1,f[k*s+(A>>3)]|=S<<7-((7&A)<<0)}if(2==i){S=t[T>>3];S=S>>6-(7&T)&3,f[k*s+(A>>2)]|=S<<6-((3&A)<<1)}if(4==i){S=t[T>>3];S=S>>4-(7&T)&15,f[k*s+(A>>1)]|=S<<4-((1&A)<<2)}if(i>=8)for(var z=k*s+A*o,E=0;E<o;E++)f[z+E]=t[(T>>3)+E];T+=i,A+=b}x++,k+=v}_*g!=0&&(u+=g*(1+m)),p+=1}return f},a.decode._getBPP=function(t){var e=[1,null,3,1,2,null,4][t.ctype];return e*t.depth},a.decode._filterZero=function(t,e,r,n,i){var o=a.decode._getBPP(e),s=Math.ceil(n*o/8),f=a.decode._paeth;o=Math.ceil(o/8);var u=0,c=1,l=t[r],d=0;if(l>1&&(t[r]=[0,0,1][l-2]),3==l)for(d=o;d<s;d++)t[d+1]=t[d+1]+(t[d+1-o]>>>1)&255;for(var h=0;h<i;h++)if(u=r+h*s,c=u+h+1,l=t[c-1],d=0,0==l)for(;d<s;d++)t[u+d]=t[c+d];else if(1==l){for(;d<o;d++)t[u+d]=t[c+d];for(;d<s;d++)t[u+d]=t[c+d]+t[u+d-o]}else if(2==l)for(;d<s;d++)t[u+d]=t[c+d]+t[u+d-s];else if(3==l){for(;d<o;d++)t[u+d]=t[c+d]+(t[u+d-s]>>>1);for(;d<s;d++)t[u+d]=t[c+d]+(t[u+d-s]+t[u+d-o]>>>1)}else{for(;d<o;d++)t[u+d]=t[c+d]+f(0,t[u+d-s],0);for(;d<s;d++)t[u+d]=t[c+d]+f(t[u+d-o],t[u+d-s],t[u+d-o-s])}return t},a.decode._paeth=function(t,e,r){var n=t+e-r,i=n-t,a=n-e,o=n-r;return i*i<=a*a&&i*i<=o*o?t:a*a<=o*o?e:r},a.decode._IHDR=function(t,e,r){var n=a._bin;r.width=n.readUint(t,e),e+=4,r.height=n.readUint(t,e),e+=4,r.depth=t[e],e++,r.ctype=t[e],e++,r.compress=t[e],e++,r.filter=t[e],e++,r.interlace=t[e],e++},a._bin={nextZero:function(t,e){while(0!=t[e])e++;return e},readUshort:function(t,e){return t[e]<<8|t[e+1]},writeUshort:function(t,e,r){t[e]=r>>8&255,t[e+1]=255&r},readUint:function(t,e){return 16777216*t[e]+(t[e+1]<<16|t[e+2]<<8|t[e+3])},writeUint:function(t,e,r){t[e]=r>>24&255,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r},readASCII:function(t,e,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(t[e+i]);return n},writeASCII:function(t,e,r){for(var n=0;n<r.length;n++)t[e+n]=r.charCodeAt(n)},readBytes:function(t,e,r){for(var n=[],i=0;i<r;i++)n.push(t[e+i]);return n},pad:function(t){return t.length<2?"0"+t:t},readUTF8:function(t,e,r){for(var n,i="",o=0;o<r;o++)i+="%"+a._bin.pad(t[e+o].toString(16));try{n=decodeURIComponent(i)}catch(s){return a._bin.readASCII(t,e,r)}return n}},a._copyTile=function(t,e,r,n,i,a,o,s,f){for(var u=Math.min(e,i),c=Math.min(r,a),l=0,d=0,h=0;h<c;h++)for(var p=0;p<u;p++)if(o>=0&&s>=0?(l=h*e+p<<2,d=(s+h)*i+o+p<<2):(l=(-s+h)*e-o+p<<2,d=h*i+p<<2),0==f)n[d]=t[l],n[d+1]=t[l+1],n[d+2]=t[l+2],n[d+3]=t[l+3];else if(1==f){var v=t[l+3]*(1/255),b=t[l]*v,_=t[l+1]*v,g=t[l+2]*v,y=n[d+3]*(1/255),w=n[d]*y,m=n[d+1]*y,x=n[d+2]*y,k=1-v,A=v+y*k,T=0==A?0:1/A;n[d+3]=255*A,n[d+0]=(b+w*k)*T,n[d+1]=(_+m*k)*T,n[d+2]=(g+x*k)*T}else if(2==f){v=t[l+3],b=t[l],_=t[l+1],g=t[l+2],y=n[d+3],w=n[d],m=n[d+1],x=n[d+2];v==y&&b==w&&_==m&&g==x?(n[d]=0,n[d+1]=0,n[d+2]=0,n[d+3]=0):(n[d]=b,n[d+1]=_,n[d+2]=g,n[d+3]=v)}else if(3==f){v=t[l+3],b=t[l],_=t[l+1],g=t[l+2],y=n[d+3],w=n[d],m=n[d+1],x=n[d+2];if(v==y&&b==w&&_==m&&g==x)continue;if(v<220&&y>20)return!1}return!0},a.encode=function(t,e,r,n,i,o,s){null==n&&(n=0),null==s&&(s=!1);var f=a.encode.compress(t,e,r,n,[!1,!1,!1,0,s]);return a.encode.compressPNG(f,-1),a.encode._main(f,e,r,i,o)},a.encodeLL=function(t,e,r,n,i,o,s,f){for(var u={ctype:0+(1==n?0:2)+(0==i?0:4),depth:o,frames:[]},c=(Date.now(),(n+i)*o),l=c*e,d=0;d<t.length;d++)u.frames.push({rect:{x:0,y:0,width:e,height:r},img:new Uint8Array(t[d]),blend:0,dispose:1,bpp:Math.ceil(c/8),bpl:Math.ceil(l/8)});a.encode.compressPNG(u,0,!0);var h=a.encode._main(u,e,r,s,f);return h},a.encode._main=function(t,e,r,n,i){null==i&&(i={});var o=a.crc.crc,s=a._bin.writeUint,f=a._bin.writeUshort,u=a._bin.writeASCII,c=8,l=t.frames.length>1,d=!1,h=33+(l?20:0);if(null!=i["sRGB"]&&(h+=13),null!=i["pHYs"]&&(h+=21),3==t.ctype){for(var p=t.plte.length,v=0;v<p;v++)t.plte[v]>>>24!=255&&(d=!0);h+=8+3*p+4+(d?8+1*p+4:0)}for(var b=0;b<t.frames.length;b++){var _=t.frames[b];l&&(h+=38),h+=_.cimg.length+12,0!=b&&(h+=4)}h+=12;var g=new Uint8Array(h),y=[137,80,78,71,13,10,26,10];for(v=0;v<8;v++)g[v]=y[v];if(s(g,c,13),c+=4,u(g,c,"IHDR"),c+=4,s(g,c,e),c+=4,s(g,c,r),c+=4,g[c]=t.depth,c++,g[c]=t.ctype,c++,g[c]=0,c++,g[c]=0,c++,g[c]=0,c++,s(g,c,o(g,c-17,17)),c+=4,null!=i["sRGB"]&&(s(g,c,1),c+=4,u(g,c,"sRGB"),c+=4,g[c]=i["sRGB"],c++,s(g,c,o(g,c-5,5)),c+=4),null!=i["pHYs"]&&(s(g,c,9),c+=4,u(g,c,"pHYs"),c+=4,s(g,c,i["pHYs"][0]),c+=4,s(g,c,i["pHYs"][1]),c+=4,g[c]=i["pHYs"][2],c++,s(g,c,o(g,c-13,13)),c+=4),l&&(s(g,c,8),c+=4,u(g,c,"acTL"),c+=4,s(g,c,t.frames.length),c+=4,s(g,c,null!=i["loop"]?i["loop"]:0),c+=4,s(g,c,o(g,c-12,12)),c+=4),3==t.ctype){p=t.plte.length;s(g,c,3*p),c+=4,u(g,c,"PLTE"),c+=4;for(v=0;v<p;v++){var w=3*v,m=t.plte[v],x=255&m,k=m>>>8&255,A=m>>>16&255;g[c+w+0]=x,g[c+w+1]=k,g[c+w+2]=A}if(c+=3*p,s(g,c,o(g,c-3*p-4,3*p+4)),c+=4,d){s(g,c,p),c+=4,u(g,c,"tRNS"),c+=4;for(v=0;v<p;v++)g[c+v]=t.plte[v]>>>24&255;c+=p,s(g,c,o(g,c-p-4,p+4)),c+=4}}var T=0;for(b=0;b<t.frames.length;b++){_=t.frames[b];l&&(s(g,c,26),c+=4,u(g,c,"fcTL"),c+=4,s(g,c,T++),c+=4,s(g,c,_.rect.width),c+=4,s(g,c,_.rect.height),c+=4,s(g,c,_.rect.x),c+=4,s(g,c,_.rect.y),c+=4,f(g,c,n[b]),c+=2,f(g,c,1e3),c+=2,g[c]=_.dispose,c++,g[c]=_.blend,c++,s(g,c,o(g,c-30,30)),c+=4);var S=_.cimg;p=S.length;s(g,c,p+(0==b?0:4)),c+=4;var z=c;u(g,c,0==b?"IDAT":"fdAT"),c+=4,0!=b&&(s(g,c,T++),c+=4),g.set(S,c),c+=p,s(g,c,o(g,z,c-z)),c+=4}return s(g,c,0),c+=4,u(g,c,"IEND"),c+=4,s(g,c,o(g,c-4,4)),c+=4,g.buffer},a.encode.compressPNG=function(t,e,r){for(var n=0;n<t.frames.length;n++){var i=t.frames[n],o=(i.rect.width,i.rect.height),s=new Uint8Array(o*i.bpl+o);i.cimg=a.encode._filterZero(i.img,o,i.bpp,i.bpl,s,e,r)}},a.encode.compress=function(t,e,r,n,i,o){var s=i[0],f=i[1],u=i[2],c=i[3],l=i[4],d=6,h=8,p=255;if(!o)for(var v=0;v<t.length;v++)for(var b=new Uint8Array(t[v]),_=b.length,g=0;g<_;g+=4)p&=b[g+3];var y=255!=p,w=a.encode.framize(t,e,r,s,f,u),m={},x=[],k=[];if(0!=n){var A=[];for(g=0;g<w.length;g++)A.push(w[g].img.buffer);var T=a.encode.concatRGBA(A),S=a.quantize(T,n),z=0,E=new Uint8Array(S.abuf);for(g=0;g<w.length;g++){var I=w[g].img,O=I.length;k.push(new Uint8Array(S.inds.buffer,z>>2,O>>2));for(v=0;v<O;v+=4)I[v]=E[z+v],I[v+1]=E[z+v+1],I[v+2]=E[z+v+2],I[v+3]=E[z+v+3];z+=O}for(g=0;g<S.plte.length;g++)x.push(S.plte[g].est.rgba)}else for(v=0;v<w.length;v++){var U=w[v],R=new Uint32Array(U.img.buffer),B=U.rect.width,M=(_=R.length,new Uint8Array(_));k.push(M);for(g=0;g<_;g++){var C=R[g];if(0!=g&&C==R[g-1])M[g]=M[g-1];else if(g>B&&C==R[g-B])M[g]=M[g-B];else{var j=m[C];if(null==j&&(m[C]=j=x.length,x.push(C),x.length>=300))break;M[g]=j}}}var P=x.length;P<=256&&0==l&&(h=P<=2?1:P<=4?2:P<=16?4:8,h=Math.max(h,c));for(v=0;v<w.length;v++){U=w[v],U.rect.x,U.rect.y,B=U.rect.width;var L=U.rect.height,N=U.img,D=(new Uint32Array(N.buffer),4*B),F=4;if(P<=256&&0==l){D=Math.ceil(h*B/8);for(var Z=new Uint8Array(D*L),H=k[v],G=0;G<L;G++){g=G*D;var q=G*B;if(8==h)for(var Y=0;Y<B;Y++)Z[g+Y]=H[q+Y];else if(4==h)for(Y=0;Y<B;Y++)Z[g+(Y>>1)]|=H[q+Y]<<4-4*(1&Y);else if(2==h)for(Y=0;Y<B;Y++)Z[g+(Y>>2)]|=H[q+Y]<<6-2*(3&Y);else if(1==h)for(Y=0;Y<B;Y++)Z[g+(Y>>3)]|=H[q+Y]<<7-1*(7&Y)}N=Z,d=3,F=1}else if(0==y&&1==w.length){Z=new Uint8Array(B*L*3);var W=B*L;for(g=0;g<W;g++){I=3*g;var V=4*g;Z[I]=N[V],Z[I+1]=N[V+1],Z[I+2]=N[V+2]}N=Z,d=2,F=3,D=3*B}U.img=N,U.bpl=D,U.bpp=F}return{ctype:d,depth:h,plte:x,frames:w}},a.encode.framize=function(t,e,r,n,i,o){for(var s=[],f=0;f<t.length;f++){var u,c=new Uint8Array(t[f]),l=new Uint32Array(c.buffer),d=0,h=0,p=e,v=r,b=n?1:0;if(0!=f){for(var _=o||n||1==f||0!=s[f-2].dispose?1:2,g=0,y=1e9,w=0;w<_;w++){for(var m=new Uint8Array(t[f-1-w]),x=new Uint32Array(t[f-1-w]),k=e,A=r,T=-1,S=-1,z=0;z<r;z++)for(var E=0;E<e;E++){var I=z*e+E;l[I]!=x[I]&&(E<k&&(k=E),E>T&&(T=E),z<A&&(A=z),z>S&&(S=z))}-1==T&&(k=A=T=S=0),i&&(1==(1&k)&&k--,1==(1&A)&&A--);var O=(T-k+1)*(S-A+1);O<y&&(y=O,g=w,d=k,h=A,p=T-k+1,v=S-A+1)}m=new Uint8Array(t[f-1-g]);1==g&&(s[f-1].dispose=2),u=new Uint8Array(p*v*4),a._copyTile(m,e,r,u,p,v,-d,-h,0),b=a._copyTile(c,e,r,u,p,v,-d,-h,3)?1:0,1==b?a.encode._prepareDiff(c,e,r,u,{x:d,y:h,width:p,height:v}):a._copyTile(c,e,r,u,p,v,-d,-h,0)}else u=c.slice(0);s.push({rect:{x:d,y:h,width:p,height:v},img:u,blend:b,dispose:0})}if(n)for(f=0;f<s.length;f++){var U=s[f];if(1!=U.blend){var R=U.rect,B=s[f-1].rect,M=Math.min(R.x,B.x),C=Math.min(R.y,B.y),j=Math.max(R.x+R.width,B.x+B.width),P=Math.max(R.y+R.height,B.y+B.height),L={x:M,y:C,width:j-M,height:P-C};s[f-1].dispose=1,f-1!=0&&a.encode._updateFrame(t,e,r,s,f-1,L,i),a.encode._updateFrame(t,e,r,s,f,L,i)}}if(1!=t.length)for(I=0;I<s.length;I++){U=s[I];U.rect.width*U.rect.height}return s},a.encode._updateFrame=function(t,e,r,n,i,o,s){for(var f=Uint8Array,u=Uint32Array,c=new f(t[i-1]),l=new u(t[i-1]),d=i+1<t.length?new f(t[i+1]):null,h=new f(t[i]),p=new u(h.buffer),v=e,b=r,_=-1,g=-1,y=0;y<o.height;y++)for(var w=0;w<o.width;w++){var m=o.x+w,x=o.y+y,k=x*e+m,A=p[k];0==A||0==n[i-1].dispose&&l[k]==A&&(null==d||0!=d[4*k+3])||(m<v&&(v=m),m>_&&(_=m),x<b&&(b=x),x>g&&(g=x))}-1==_&&(v=b=_=g=0),s&&(1==(1&v)&&v--,1==(1&b)&&b--),o={x:v,y:b,width:_-v+1,height:g-b+1};var T=n[i];T.rect=o,T.blend=1,T.img=new Uint8Array(o.width*o.height*4),0==n[i-1].dispose?(a._copyTile(c,e,r,T.img,o.width,o.height,-o.x,-o.y,0),a.encode._prepareDiff(h,e,r,T.img,o)):a._copyTile(h,e,r,T.img,o.width,o.height,-o.x,-o.y,0)},a.encode._prepareDiff=function(t,e,r,n,i){a._copyTile(t,e,r,n,i.width,i.height,-i.x,-i.y,2)},a.encode._filterZero=function(t,e,r,n,o,s,f){var u,c=[],l=[0,1,2,3,4];-1!=s?l=[s]:(e*n>5e5||1==r)&&(l=[0]),f&&(u={level:0});for(var d,h=o.length>1e7&&null!=UZIP?UZIP:i.a,p=(Date.now(),0);p<l.length;p++){for(var v=0;v<e;v++)a.encode._filterLine(o,t,v,n,r,l[p]);c.push(h["deflate"](o,u))}var b=1e9;for(p=0;p<c.length;p++)c[p].length<b&&(d=p,b=c[p].length);return c[d]},a.encode._filterLine=function(t,e,r,n,i,o){var s=r*n,f=s+r,u=a.decode._paeth;if(t[f]=o,f++,0==o)if(n<500)for(var c=0;c<n;c++)t[f+c]=e[s+c];else t.set(new Uint8Array(e.buffer,s,n),f);else if(1==o){for(c=0;c<i;c++)t[f+c]=e[s+c];for(c=i;c<n;c++)t[f+c]=e[s+c]-e[s+c-i]+256&255}else if(0==r){for(c=0;c<i;c++)t[f+c]=e[s+c];if(2==o)for(c=i;c<n;c++)t[f+c]=e[s+c];if(3==o)for(c=i;c<n;c++)t[f+c]=e[s+c]-(e[s+c-i]>>1)+256&255;if(4==o)for(c=i;c<n;c++)t[f+c]=e[s+c]-u(e[s+c-i],0,0)+256&255}else{if(2==o)for(c=0;c<n;c++)t[f+c]=e[s+c]+256-e[s+c-n]&255;if(3==o){for(c=0;c<i;c++)t[f+c]=e[s+c]+256-(e[s+c-n]>>1)&255;for(c=i;c<n;c++)t[f+c]=e[s+c]+256-(e[s+c-n]+e[s+c-i]>>1)&255}if(4==o){for(c=0;c<i;c++)t[f+c]=e[s+c]+256-u(0,e[s+c-n],0)&255;for(c=i;c<n;c++)t[f+c]=e[s+c]+256-u(e[s+c-i],e[s+c-n],e[s+c-i-n])&255}}},a.crc={table:function(){for(var t=new Uint32Array(256),e=0;e<256;e++){for(var r=e,n=0;n<8;n++)1&r?r=3988292384^r>>>1:r>>>=1;t[e]=r}return t}(),update:function(t,e,r,n){for(var i=0;i<n;i++)t=a.crc.table[255&(t^e[r+i])]^t>>>8;return t},crc:function(t,e,r){return 4294967295^a.crc.update(4294967295,t,e,r)}},a.quantize=function(t,e){var r,n=new Uint8Array(t),i=n.slice(0),o=new Uint32Array(i.buffer),s=a.quantize.getKDtree(i,e),f=s[0],u=s[1],c=a.quantize.planeDst,l=n,d=o,h=l.length,p=new Uint8Array(n.length>>2);if(n.length<2e7)for(var v=0;v<h;v+=4){var b=l[v]*(1/255),_=l[v+1]*(1/255),g=l[v+2]*(1/255),y=l[v+3]*(1/255);r=a.quantize.getNearest(f,b,_,g,y),p[v>>2]=r.ind,d[v>>2]=r.est.rgba}else for(v=0;v<h;v+=4){b=l[v]*(1/255),_=l[v+1]*(1/255),g=l[v+2]*(1/255),y=l[v+3]*(1/255);r=f;while(r.left)r=c(r.est,b,_,g,y)<=0?r.left:r.right;p[v>>2]=r.ind,d[v>>2]=r.est.rgba}return{abuf:i.buffer,inds:p,plte:u}},a.quantize.getKDtree=function(t,e,r){null==r&&(r=1e-4);var n=new Uint32Array(t.buffer),i={i0:0,i1:t.length,bst:null,est:null,tdst:0,left:null,right:null};i.bst=a.quantize.stats(t,i.i0,i.i1),i.est=a.quantize.estats(i.bst);var o=[i];while(o.length<e){for(var s=0,f=0,u=0;u<o.length;u++)o[u].est.L>s&&(s=o[u].est.L,f=u);if(s<r)break;var c=o[f],l=a.quantize.splitPixels(t,n,c.i0,c.i1,c.est.e,c.est.eMq255),d=c.i0>=l||c.i1<=l;if(d)c.est.L=0;else{var h={i0:c.i0,i1:l,bst:null,est:null,tdst:0,left:null,right:null};h.bst=a.quantize.stats(t,h.i0,h.i1),h.est=a.quantize.estats(h.bst);var p={i0:l,i1:c.i1,bst:null,est:null,tdst:0,left:null,right:null};p.bst={R:[],m:[],N:c.bst.N-h.bst.N};for(u=0;u<16;u++)p.bst.R[u]=c.bst.R[u]-h.bst.R[u];for(u=0;u<4;u++)p.bst.m[u]=c.bst.m[u]-h.bst.m[u];p.est=a.quantize.estats(p.bst),c.left=h,c.right=p,o[f]=h,o.push(p)}}o.sort((function(t,e){return e.bst.N-t.bst.N}));for(u=0;u<o.length;u++)o[u].ind=u;return[i,o]},a.quantize.getNearest=function(t,e,r,n,i){if(null==t.left)return t.tdst=a.quantize.dist(t.est.q,e,r,n,i),t;var o=a.quantize.planeDst(t.est,e,r,n,i),s=t.left,f=t.right;o>0&&(s=t.right,f=t.left);var u=a.quantize.getNearest(s,e,r,n,i);if(u.tdst<=o*o)return u;var c=a.quantize.getNearest(f,e,r,n,i);return c.tdst<u.tdst?c:u},a.quantize.planeDst=function(t,e,r,n,i){var a=t.e;return a[0]*e+a[1]*r+a[2]*n+a[3]*i-t.eMq},a.quantize.dist=function(t,e,r,n,i){var a=e-t[0],o=r-t[1],s=n-t[2],f=i-t[3];return a*a+o*o+s*s+f*f},a.quantize.splitPixels=function(t,e,r,n,i,o){var s=a.quantize.vecDot;n-=4;while(r<n){while(s(t,r,i)<=o)r+=4;while(s(t,n,i)>o)n-=4;if(r>=n)break;var f=e[r>>2];e[r>>2]=e[n>>2],e[n>>2]=f,r+=4,n-=4}while(s(t,r,i)>o)r-=4;return r+4},a.quantize.vecDot=function(t,e,r){return t[e]*r[0]+t[e+1]*r[1]+t[e+2]*r[2]+t[e+3]*r[3]},a.quantize.stats=function(t,e,r){for(var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[0,0,0,0],a=r-e>>2,o=e;o<r;o+=4){var s=t[o]*(1/255),f=t[o+1]*(1/255),u=t[o+2]*(1/255),c=t[o+3]*(1/255);i[0]+=s,i[1]+=f,i[2]+=u,i[3]+=c,n[0]+=s*s,n[1]+=s*f,n[2]+=s*u,n[3]+=s*c,n[5]+=f*f,n[6]+=f*u,n[7]+=f*c,n[10]+=u*u,n[11]+=u*c,n[15]+=c*c}return n[4]=n[1],n[8]=n[2],n[9]=n[6],n[12]=n[3],n[13]=n[7],n[14]=n[11],{R:n,m:i,N:a}},a.quantize.estats=function(t){var e=t.R,r=t.m,n=t.N,i=r[0],o=r[1],s=r[2],f=r[3],u=0==n?0:1/n,c=[e[0]-i*i*u,e[1]-i*o*u,e[2]-i*s*u,e[3]-i*f*u,e[4]-o*i*u,e[5]-o*o*u,e[6]-o*s*u,e[7]-o*f*u,e[8]-s*i*u,e[9]-s*o*u,e[10]-s*s*u,e[11]-s*f*u,e[12]-f*i*u,e[13]-f*o*u,e[14]-f*s*u,e[15]-f*f*u],l=c,d=a.M4,h=[Math.random(),Math.random(),Math.random(),Math.random()],p=0,v=0;if(0!=n)for(var b=0;b<16;b++){if(h=d.multVec(l,h),v=Math.sqrt(d.dot(h,h)),h=d.sml(1/v,h),0!=b&&Math.abs(v-p)<1e-9)break;p=v}var _=[i*u,o*u,s*u,f*u],g=d.dot(d.sml(255,_),h);return{Cov:c,q:_,e:h,L:p,eMq255:g,eMq:d.dot(h,_),rgba:(Math.round(255*_[3])<<24|Math.round(255*_[2])<<16|Math.round(255*_[1])<<8|Math.round(255*_[0])<<0)>>>0}},a.M4={multVec:function(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3],t[4]*e[0]+t[5]*e[1]+t[6]*e[2]+t[7]*e[3],t[8]*e[0]+t[9]*e[1]+t[10]*e[2]+t[11]*e[3],t[12]*e[0]+t[13]*e[1]+t[14]*e[2]+t[15]*e[3]]},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},sml:function(t,e){return[t*e[0],t*e[1],t*e[2],t*e[3]]}},a.encode.concatRGBA=function(t){for(var e=0,r=0;r<t.length;r++)e+=t[r].byteLength;var n=new Uint8Array(e),i=0;for(r=0;r<t.length;r++){for(var a=new Uint8Array(t[r]),o=a.length,s=0;s<o;s+=4){var f=a[s],u=a[s+1],c=a[s+2],l=a[s+3];0==l&&(f=u=c=0),n[i+s]=f,n[i+s+1]=u,n[i+s+2]=c,n[i+s+3]=l}i+=o}return n.buffer};var o=a,s=(r("cb29"),function(){var t,e,r=function(){var t,e,r,n,i=0,a=0,o=0,s=0,f=function(){var r=t>>>3,n=e[r+2]<<16|e[r+1]<<8|e[r],i=n>>>(7&t)&(1<<a)-1;return t+=a,i},u=new Uint32Array(16384),c=0,l=function(t){if(t!=c){c=t,o=1<<t,s=o+1;for(var e=0;e<s+1;e++)u[4*e]=u[4*e+3]=e,u[4*e+1]=65535,u[4*e+2]=1}},d=function(t){a=t+1,i=s+1},h=function(t){var e=t<<2,i=u[e+2],a=n+i-1;while(65535!=e)r[a--]=u[e],e=u[e+1];n+=i},p=function(t,e){var r=i<<2,n=t<<2;u[r]=u[3+(e<<2)],u[r+1]=n,u[r+2]=u[n+2]+1,u[r+3]=u[n+3],i++,i==1<<a&&12!=a&&a++},v=function(a,u,c,v,b,_){t=u<<3,e=a,r=v,n=b;var g=u+c<<3,y=0,w=0;l(_),d(_);while(t<g&&(y=f())!=s){if(y==o){if(d(_),y=f(),y==s)break;h(y)}else y<i?(h(y),p(w,y)):(p(w,w),h(i-1));w=y}return n};return v}(),n=new Uint8Array(128),i=function(){return t[e++]},a=function(){var r=t[e+1]<<8|t[e];return e+=2,r},o=function(){while(0!=t[e])e+=1+t[e];e++},s=function(s){t=new Uint8Array(s),e=6;var f,u=a(),c=a(),l=i(),d=(i(),i(),l>>>7),h=l>>>0&7,p=e,v=0,b=0,_=0,g=0,y=260;1==d&&(e+=3*(1<<h+1));var w=[];while(e<t.length){var m=i();if(33==m){var x=i();if(249==x){i(),l=i();b=l>>>2&7,_=a(),y=i(),0==(1&l)&&(y=260),i()}else if(254==x)o();else{if(255!=x)throw x;o()}}else if(44==m){var k=a(),A=a(),T=a(),S=a(),z=i(),E=z>>>7;if(g=z>>>6&1,1==E){h=z>>>0&7;v=e,e+=3*(1<<h+1)}f={x:k,y:A,a:T,O:S,f:b,delay:_,B:y,A:0==v?p:v,U:g},w.push(f),v=0}else{if(!(m<=8)){if(59==m)break;throw m}T=f.a,S=f.O;var I=T*S,O=0;n.length<1.2*I&&(n=new Uint8Array(~~(1.3*I)));while(e<t.length&&0!=t[e]){for(var U=i(),R=0;R<U;R++)n[O+R]=t[e+R];O+=U,e+=U}if(e>=t.length){alert("Some frames are damaged."),w.pop();break}i(),f.d=new Uint8Array(I);r(n,0,O,f.d,0,m)}}return{width:u,height:c,data:t,frames:w}};function f(t,e,r,n,i,a,o,s){for(var f=0;f<o;f++){var u=i[a+f];if(u!=s){var c=e+f<<2,l=n+3*u;t[c]=r[l],t[c+1]=r[l+1],t[c+2]=r[l+2],t[c+3]=255}}}var u=function(t){for(var e,r=t.frames,n=t.width,i=t.height,a=new Uint8Array(n*i*4),o=[],s=t.data,u=0;u<r.length;u++){var c=r[u],l=c.x,d=c.y,h=c.a,p=c.O,v=c.f;3==v&&(null==e?e=a.slice(0):e.set(a));var b=[];if(1==c.U){for(var _=0;_<p;_+=8)b.push(_);for(_=4;_<p;_+=8)b.push(_);for(_=2;_<p;_+=4)b.push(_);for(_=1;_<p;_+=2)b.push(_)}var g=c.d,y=c.A,w=c.B,m=c.U;for(_=0;_<p;_++){var x=0==m?_:b[_];f(a,(x+d)*n+l,s,y,g,_*h,h,w)}if(o.push(a.slice(0).buffer),v<2);else if(2==v)for(_=0;_<p;_++){var k=4*((d+_)*n+l);a.fill(0,k,k+4*h)}else 3==v&&a.set(e)}return o};return{decode:s,toRGBA8:u}}()),f=s;const u=self;u.onmessage=function(t){const{asyncId:e,type:r,data:n}=t.data;if(e){if("decodeGifOrApng"===r){const{buffer:t,type:r,needBuffer:i}=n,a="gif"===r,s=a?f:o,c=s.decode(t);if(i){const t=s.toRGBA8(c);c.frames.forEach((e,r)=>{delete e.d,e.index=r,e.buffer=t[r]})}delete c.data,c.frames.forEach(t=>{delete t.d});const l=c.frames.length;i&&(c.width>1500||c.height>1500||l>100)?c.frames.forEach((t,r)=>{u.postMessage({payload:{...c,index:r,frames:[t],framesLength:l},asyncId:e})}):u.postMessage({payload:c,asyncId:e})}if("compressGif"===r){const{params:t}=n,r=o.encode.compress(...t);r.frames.forEach(t=>{t.img=t.img.buffer}),u.postMessage({payload:r,asyncId:e})}}}},5926:function(t,e,r){var n=r("b42e");t.exports=function(t){var e=+t;return e!==e||0===e?0:n(e)}},"59ed":function(t,e,r){var n=r("1626"),i=r("0d51"),a=TypeError;t.exports=function(t){if(n(t))return t;throw a(i(t)+" is not a function")}},"5c6c":function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"5cc6":function(t,e,r){var n=r("74e8");n("Uint8",(function(t){return function(e,r,n){return t(this,e,r,n)}}))},"5e77":function(t,e,r){var n=r("83ab"),i=r("1a2d"),a=Function.prototype,o=n&&Object.getOwnPropertyDescriptor,s=i(a,"name"),f=s&&"something"===function(){}.name,u=s&&(!n||n&&o(a,"name").configurable);t.exports={EXISTS:s,PROPER:f,CONFIGURABLE:u}},"5f96":function(t,e,r){"use strict";var n=r("ebb5"),i=r("e330"),a=n.aTypedArray,o=n.exportTypedArrayMethod,s=i([].join);o("join",(function(t){return s(a(this),t)}))},"60bd":function(t,e,r){"use strict";var n=r("da84"),i=r("d039"),a=r("e330"),o=r("ebb5"),s=r("e260"),f=r("b622"),u=f("iterator"),c=n.Uint8Array,l=a(s.values),d=a(s.keys),h=a(s.entries),p=o.aTypedArray,v=o.exportTypedArrayMethod,b=c&&c.prototype,_=!i((function(){b[u].call([1])})),g=!!b&&b.values&&b[u]===b.values&&"values"===b.values.name,y=function(){return l(p(this))};v("entries",(function(){return h(p(this))}),_),v("keys",(function(){return d(p(this))}),_),v("values",y,_||!g,{name:"values"}),v(u,y,_||!g,{name:"values"})},"621a":function(t,e,r){"use strict";var n=r("da84"),i=r("e330"),a=r("83ab"),o=r("a981"),s=r("5e77"),f=r("9112"),u=r("6964"),c=r("d039"),l=r("19aa"),d=r("5926"),h=r("50c4"),p=r("0b25"),v=r("77a7"),b=r("e163"),_=r("d2bb"),g=r("241c").f,y=r("9bf2").f,w=r("81d5"),m=r("4dae"),x=r("d44e"),k=r("69f3"),A=s.PROPER,T=s.CONFIGURABLE,S=k.get,z=k.set,E="ArrayBuffer",I="DataView",O="prototype",U="Wrong length",R="Wrong index",B=n[E],M=B,C=M&&M[O],j=n[I],P=j&&j[O],L=Object.prototype,N=n.Array,D=n.RangeError,F=i(w),Z=i([].reverse),H=v.pack,G=v.unpack,q=function(t){return[255&t]},Y=function(t){return[255&t,t>>8&255]},W=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},V=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},K=function(t){return H(t,23,4)},X=function(t){return H(t,52,8)},Q=function(t,e){y(t[O],e,{get:function(){return S(this)[e]}})},$=function(t,e,r,n){var i=p(r),a=S(t);if(i+e>a.byteLength)throw D(R);var o=S(a.buffer).bytes,s=i+a.byteOffset,f=m(o,s,s+e);return n?f:Z(f)},J=function(t,e,r,n,i,a){var o=p(r),s=S(t);if(o+e>s.byteLength)throw D(R);for(var f=S(s.buffer).bytes,u=o+s.byteOffset,c=n(+i),l=0;l<e;l++)f[u+l]=c[a?l:e-l-1]};if(o){var tt=A&&B.name!==E;if(c((function(){B(1)}))&&c((function(){new B(-1)}))&&!c((function(){return new B,new B(1.5),new B(NaN),tt&&!T})))tt&&T&&f(B,"name",E);else{M=function(t){return l(this,C),new B(p(t))},M[O]=C;for(var et,rt=g(B),nt=0;rt.length>nt;)(et=rt[nt++])in M||f(M,et,B[et]);C.constructor=M}_&&b(P)!==L&&_(P,L);var it=new j(new M(2)),at=i(P.setInt8);it.setInt8(0,2147483648),it.setInt8(1,2147483649),!it.getInt8(0)&&it.getInt8(1)||u(P,{setInt8:function(t,e){at(this,t,e<<24>>24)},setUint8:function(t,e){at(this,t,e<<24>>24)}},{unsafe:!0})}else M=function(t){l(this,C);var e=p(t);z(this,{bytes:F(N(e),0),byteLength:e}),a||(this.byteLength=e)},C=M[O],j=function(t,e,r){l(this,P),l(t,C);var n=S(t).byteLength,i=d(e);if(i<0||i>n)throw D("Wrong offset");if(r=void 0===r?n-i:h(r),i+r>n)throw D(U);z(this,{buffer:t,byteLength:r,byteOffset:i}),a||(this.buffer=t,this.byteLength=r,this.byteOffset=i)},P=j[O],a&&(Q(M,"byteLength"),Q(j,"buffer"),Q(j,"byteLength"),Q(j,"byteOffset")),u(P,{getInt8:function(t){return $(this,1,t)[0]<<24>>24},getUint8:function(t){return $(this,1,t)[0]},getInt16:function(t){var e=$(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=$(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return V($(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return V($(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return G($(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return G($(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){J(this,1,t,q,e)},setUint8:function(t,e){J(this,1,t,q,e)},setInt16:function(t,e){J(this,2,t,Y,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){J(this,2,t,Y,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){J(this,4,t,W,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){J(this,4,t,W,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){J(this,4,t,K,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){J(this,8,t,X,e,arguments.length>2?arguments[2]:void 0)}});x(M,E),x(j,I),t.exports={ArrayBuffer:M,DataView:j}},6374:function(t,e,r){var n=r("da84"),i=Object.defineProperty;t.exports=function(t,e){try{i(n,t,{value:e,configurable:!0,writable:!0})}catch(r){n[t]=e}return e}},"649e":function(t,e,r){"use strict";var n=r("ebb5"),i=r("b727").some,a=n.aTypedArray,o=n.exportTypedArrayMethod;o("some",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0)}))},"65f0":function(t,e,r){var n=r("0b42");t.exports=function(t,e){return new(n(t))(0===e?0:e)}},6853:function(t,e,r){"use strict";var n=r("be7f"),i=15,a=852,o=592,s=0,f=1,u=2,c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,r,p,v,b,_,g){var y,w,m,x,k,A,T,S,z,E=g.bits,I=0,O=0,U=0,R=0,B=0,M=0,C=0,j=0,P=0,L=0,N=null,D=0,F=new n.Buf16(i+1),Z=new n.Buf16(i+1),H=null,G=0;for(I=0;I<=i;I++)F[I]=0;for(O=0;O<p;O++)F[e[r+O]]++;for(B=E,R=i;R>=1;R--)if(0!==F[R])break;if(B>R&&(B=R),0===R)return v[b++]=20971520,v[b++]=20971520,g.bits=1,0;for(U=1;U<R;U++)if(0!==F[U])break;for(B<U&&(B=U),j=1,I=1;I<=i;I++)if(j<<=1,j-=F[I],j<0)return-1;if(j>0&&(t===s||1!==R))return-1;for(Z[1]=0,I=1;I<i;I++)Z[I+1]=Z[I]+F[I];for(O=0;O<p;O++)0!==e[r+O]&&(_[Z[e[r+O]]++]=O);if(t===s?(N=H=_,A=19):t===f?(N=c,D-=257,H=l,G-=257,A=256):(N=d,H=h,A=-1),L=0,O=0,I=U,k=b,M=B,C=0,m=-1,P=1<<B,x=P-1,t===f&&P>a||t===u&&P>o)return 1;for(;;){T=I-C,_[O]<A?(S=0,z=_[O]):_[O]>A?(S=H[G+_[O]],z=N[D+_[O]]):(S=96,z=0),y=1<<I-C,w=1<<M,U=w;do{w-=y,v[k+(L>>C)+w]=T<<24|S<<16|z|0}while(0!==w);y=1<<I-1;while(L&y)y>>=1;if(0!==y?(L&=y-1,L+=y):L=0,O++,0===--F[I]){if(I===R)break;I=e[r+_[O]]}if(I>B&&(L&x)!==m){0===C&&(C=B),k+=U,M=I-C,j=1<<M;while(M+C<R){if(j-=F[M+C],j<=0)break;M++,j<<=1}if(P+=1<<M,t===f&&P>a||t===u&&P>o)return 1;m=L&x,v[m]=B<<24|M<<16|k-b|0}}return 0!==L&&(v[k+L]=I-C<<24|64<<16|0),g.bits=B,0}},"68ee":function(t,e,r){var n=r("e330"),i=r("d039"),a=r("1626"),o=r("f5df"),s=r("d066"),f=r("8925"),u=function(){},c=[],l=s("Reflect","construct"),d=/^\\s*(?:class|function)\\b/,h=n(d.exec),p=!d.exec(u),v=function(t){if(!a(t))return!1;try{return l(u,c,t),!0}catch(e){return!1}},b=function(t){if(!a(t))return!1;switch(o(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!h(d,f(t))}catch(e){return!0}};b.sham=!0,t.exports=!l||i((function(){var t;return v(v.call)||!v(Object)||!v((function(){t=!0}))||t}))?b:v},6964:function(t,e,r){var n=r("cb2d");t.exports=function(t,e,r){for(var i in e)n(t,i,e[i],r);return t}},"69f3":function(t,e,r){var n,i,a,o=r("7f9a"),s=r("da84"),f=r("e330"),u=r("861d"),c=r("9112"),l=r("1a2d"),d=r("c6cd"),h=r("f772"),p=r("d012"),v="Object already initialized",b=s.TypeError,_=s.WeakMap,g=function(t){return a(t)?i(t):n(t,{})},y=function(t){return function(e){var r;if(!u(e)||(r=i(e)).type!==t)throw b("Incompatible receiver, "+t+" required");return r}};if(o||d.state){var w=d.state||(d.state=new _),m=f(w.get),x=f(w.has),k=f(w.set);n=function(t,e){if(x(w,t))throw new b(v);return e.facade=t,k(w,t,e),e},i=function(t){return m(w,t)||{}},a=function(t){return x(w,t)}}else{var A=h("state");p[A]=!0,n=function(t,e){if(l(t,A))throw new b(v);return e.facade=t,c(t,A,e),e},i=function(t){return l(t,A)?t[A]:{}},a=function(t){return l(t,A)}}t.exports={set:n,get:i,has:a,enforce:g,getterFor:y}},7156:function(t,e,r){var n=r("1626"),i=r("861d"),a=r("d2bb");t.exports=function(t,e,r){var o,s;return a&&n(o=e.constructor)&&o!==r&&i(s=o.prototype)&&s!==r.prototype&&a(t,s),t}},"717e":function(t,e,r){"use strict";var n=r("9e6e"),i=r("be7f"),a=r("7b27"),o=r("2ceb"),s=r("4dc6"),f=r("8936"),u=r("8013"),c=Object.prototype.toString;function l(t){if(!(this instanceof l))return new l(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0===(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,e.windowBits);if(r!==o.Z_OK)throw new Error(s[r]);if(this.header=new u,n.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"===typeof e.dictionary?e.dictionary=a.string2buf(e.dictionary):"[object ArrayBuffer]"===c.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=n.inflateSetDictionary(this.strm,e.dictionary),r!==o.Z_OK)))throw new Error(s[r])}function d(t,e){var r=new l(e);if(r.push(t,!0),r.err)throw r.msg||s[r.err];return r.result}function h(t,e){return e=e||{},e.raw=!0,d(t,e)}l.prototype.push=function(t,e){var r,s,f,u,l,d=this.strm,h=this.options.chunkSize,p=this.options.dictionary,v=!1;if(this.ended)return!1;s=e===~~e?e:!0===e?o.Z_FINISH:o.Z_NO_FLUSH,"string"===typeof t?d.input=a.binstring2buf(t):"[object ArrayBuffer]"===c.call(t)?d.input=new Uint8Array(t):d.input=t,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new i.Buf8(h),d.next_out=0,d.avail_out=h),r=n.inflate(d,o.Z_NO_FLUSH),r===o.Z_NEED_DICT&&p&&(r=n.inflateSetDictionary(this.strm,p)),r===o.Z_BUF_ERROR&&!0===v&&(r=o.Z_OK,v=!1),r!==o.Z_STREAM_END&&r!==o.Z_OK)return this.onEnd(r),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&r!==o.Z_STREAM_END&&(0!==d.avail_in||s!==o.Z_FINISH&&s!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(f=a.utf8border(d.output,d.next_out),u=d.next_out-f,l=a.buf2string(d.output,f),d.next_out=u,d.avail_out=h-u,u&&i.arraySet(d.output,d.output,f,u,0),this.onData(l)):this.onData(i.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(v=!0)}while((d.avail_in>0||0===d.avail_out)&&r!==o.Z_STREAM_END);return r===o.Z_STREAM_END&&(s=o.Z_FINISH),s===o.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===o.Z_OK):s!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),d.avail_out=0,!0)},l.prototype.onData=function(t){this.chunks.push(t)},l.prototype.onEnd=function(t){t===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=l,e.inflate=d,e.inflateRaw=h,e.ungzip=d},"72f7":function(t,e,r){"use strict";var n=r("ebb5").exportTypedArrayMethod,i=r("d039"),a=r("da84"),o=r("e330"),s=a.Uint8Array,f=s&&s.prototype||{},u=[].toString,c=o([].join);i((function(){u.call({})}))&&(u=function(){return c(this)});var l=f.toString!=u;n("toString",u,l)},"735e":function(t,e,r){"use strict";var n=r("ebb5"),i=r("81d5"),a=r("f495"),o=r("f5df"),s=r("c65b"),f=r("e330"),u=r("d039"),c=n.aTypedArray,l=n.exportTypedArrayMethod,d=f("".slice),h=u((function(){var t=0;return new Int8Array(2).fill({valueOf:function(){return t++}}),1!==t}));l("fill",(function(t){var e=arguments.length;c(this);var r="Big"===d(o(this),0,3)?a(t):+t;return s(i,this,r,e>1?arguments[1]:void 0,e>2?arguments[2]:void 0)}),h)},7418:function(t,e){e.f=Object.getOwnPropertySymbols},"74e8":function(t,e,r){"use strict";var n=r("23e7"),i=r("da84"),a=r("c65b"),o=r("83ab"),s=r("8aa7"),f=r("ebb5"),u=r("621a"),c=r("19aa"),l=r("5c6c"),d=r("9112"),h=r("eac5"),p=r("50c4"),v=r("0b25"),b=r("182d"),_=r("a04b"),g=r("1a2d"),y=r("f5df"),w=r("861d"),m=r("d9b5"),x=r("7c73"),k=r("3a9b"),A=r("d2bb"),T=r("241c").f,S=r("a078"),z=r("b727").forEach,E=r("2626"),I=r("9bf2"),O=r("06cf"),U=r("69f3"),R=r("7156"),B=U.get,M=U.set,C=U.enforce,j=I.f,P=O.f,L=Math.round,N=i.RangeError,D=u.ArrayBuffer,F=D.prototype,Z=u.DataView,H=f.NATIVE_ARRAY_BUFFER_VIEWS,G=f.TYPED_ARRAY_TAG,q=f.TypedArray,Y=f.TypedArrayPrototype,W=f.aTypedArrayConstructor,V=f.isTypedArray,K="BYTES_PER_ELEMENT",X="Wrong length",Q=function(t,e){W(t);var r=0,n=e.length,i=new t(n);while(n>r)i[r]=e[r++];return i},$=function(t,e){j(t,e,{get:function(){return B(this)[e]}})},J=function(t){var e;return k(F,t)||"ArrayBuffer"==(e=y(t))||"SharedArrayBuffer"==e},tt=function(t,e){return V(t)&&!m(e)&&e in t&&h(+e)&&e>=0},et=function(t,e){return e=_(e),tt(t,e)?l(2,t[e]):P(t,e)},rt=function(t,e,r){return e=_(e),!(tt(t,e)&&w(r)&&g(r,"value"))||g(r,"get")||g(r,"set")||r.configurable||g(r,"writable")&&!r.writable||g(r,"enumerable")&&!r.enumerable?j(t,e,r):(t[e]=r.value,t)};o?(H||(O.f=et,I.f=rt,$(Y,"buffer"),$(Y,"byteOffset"),$(Y,"byteLength"),$(Y,"length")),n({target:"Object",stat:!0,forced:!H},{getOwnPropertyDescriptor:et,defineProperty:rt}),t.exports=function(t,e,r){var o=t.match(/\\d+$/)[0]/8,f=t+(r?"Clamped":"")+"Array",u="get"+t,l="set"+t,h=i[f],_=h,g=_&&_.prototype,y={},m=function(t,e){var r=B(t);return r.view[u](e*o+r.byteOffset,!0)},k=function(t,e,n){var i=B(t);r&&(n=(n=L(n))<0?0:n>255?255:255&n),i.view[l](e*o+i.byteOffset,n,!0)},I=function(t,e){j(t,e,{get:function(){return m(this,e)},set:function(t){return k(this,e,t)},enumerable:!0})};H?s&&(_=e((function(t,e,r,n){return c(t,g),R(function(){return w(e)?J(e)?void 0!==n?new h(e,b(r,o),n):void 0!==r?new h(e,b(r,o)):new h(e):V(e)?Q(_,e):a(S,_,e):new h(v(e))}(),t,_)})),A&&A(_,q),z(T(h),(function(t){t in _||d(_,t,h[t])})),_.prototype=g):(_=e((function(t,e,r,n){c(t,g);var i,s,f,u=0,l=0;if(w(e)){if(!J(e))return V(e)?Q(_,e):a(S,_,e);i=e,l=b(r,o);var d=e.byteLength;if(void 0===n){if(d%o)throw N(X);if(s=d-l,s<0)throw N(X)}else if(s=p(n)*o,s+l>d)throw N(X);f=s/o}else f=v(e),s=f*o,i=new D(s);M(t,{buffer:i,byteOffset:l,byteLength:s,length:f,view:new Z(i)});while(u<f)I(t,u++)})),A&&A(_,q),g=_.prototype=x(Y)),g.constructor!==_&&d(g,"constructor",_),C(g).TypedArrayConstructor=_,G&&d(g,G,f);var O=_!=h;y[f]=_,n({global:!0,constructor:!0,forced:O,sham:!H},y),K in _||d(_,K,o),K in g||d(g,K,o),E(f)}):t.exports=function(){}},"77a7":function(t,e){var r=Array,n=Math.abs,i=Math.pow,a=Math.floor,o=Math.log,s=Math.LN2,f=function(t,e,f){var u,c,l,d=r(f),h=8*f-e-1,p=(1<<h)-1,v=p>>1,b=23===e?i(2,-24)-i(2,-77):0,_=t<0||0===t&&1/t<0?1:0,g=0;t=n(t),t!=t||t===1/0?(c=t!=t?1:0,u=p):(u=a(o(t)/s),l=i(2,-u),t*l<1&&(u--,l*=2),t+=u+v>=1?b/l:b*i(2,1-v),t*l>=2&&(u++,l/=2),u+v>=p?(c=0,u=p):u+v>=1?(c=(t*l-1)*i(2,e),u+=v):(c=t*i(2,v-1)*i(2,e),u=0));while(e>=8)d[g++]=255&c,c/=256,e-=8;u=u<<e|c,h+=e;while(h>0)d[g++]=255&u,u/=256,h-=8;return d[--g]|=128*_,d},u=function(t,e){var r,n=t.length,a=8*n-e-1,o=(1<<a)-1,s=o>>1,f=a-7,u=n-1,c=t[u--],l=127&c;c>>=7;while(f>0)l=256*l+t[u--],f-=8;r=l&(1<<-f)-1,l>>=-f,f+=e;while(f>0)r=256*r+t[u--],f-=8;if(0===l)l=1-s;else{if(l===o)return r?NaN:c?-1/0:1/0;r+=i(2,e),l-=s}return(c?-1:1)*r*i(2,l-e)};t.exports={pack:f,unpack:u}},"77d9":function(t,e,r){r("1d02")},7839:function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(t,e,r){var n=r("1d80"),i=Object;t.exports=function(t){return i(n(t))}},"7b27":function(t,e,r){"use strict";var n=r("be7f"),i=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(u){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(u){a=!1}for(var o=new n.Buf8(256),s=0;s<256;s++)o[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function f(t,e){if(e<65534&&(t.subarray&&a||!t.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var r="",o=0;o<e;o++)r+=String.fromCharCode(t[o]);return r}o[254]=o[254]=1,e.string2buf=function(t){var e,r,i,a,o,s=t.length,f=0;for(a=0;a<s;a++)r=t.charCodeAt(a),55296===(64512&r)&&a+1<s&&(i=t.charCodeAt(a+1),56320===(64512&i)&&(r=65536+(r-55296<<10)+(i-56320),a++)),f+=r<128?1:r<2048?2:r<65536?3:4;for(e=new n.Buf8(f),o=0,a=0;o<f;a++)r=t.charCodeAt(a),55296===(64512&r)&&a+1<s&&(i=t.charCodeAt(a+1),56320===(64512&i)&&(r=65536+(r-55296<<10)+(i-56320),a++)),r<128?e[o++]=r:r<2048?(e[o++]=192|r>>>6,e[o++]=128|63&r):r<65536?(e[o++]=224|r>>>12,e[o++]=128|r>>>6&63,e[o++]=128|63&r):(e[o++]=240|r>>>18,e[o++]=128|r>>>12&63,e[o++]=128|r>>>6&63,e[o++]=128|63&r);return e},e.buf2binstring=function(t){return f(t,t.length)},e.binstring2buf=function(t){for(var e=new n.Buf8(t.length),r=0,i=e.length;r<i;r++)e[r]=t.charCodeAt(r);return e},e.buf2string=function(t,e){var r,n,i,a,s=e||t.length,u=new Array(2*s);for(n=0,r=0;r<s;)if(i=t[r++],i<128)u[n++]=i;else if(a=o[i],a>4)u[n++]=65533,r+=a-1;else{i&=2===a?31:3===a?15:7;while(a>1&&r<s)i=i<<6|63&t[r++],a--;a>1?u[n++]=65533:i<65536?u[n++]=i:(i-=65536,u[n++]=55296|i>>10&1023,u[n++]=56320|1023&i)}return f(u,n)},e.utf8border=function(t,e){var r;e=e||t.length,e>t.length&&(e=t.length),r=e-1;while(r>=0&&128===(192&t[r]))r--;return r<0||0===r?e:r+o[t[r]]>e?r:e}},"7c73":function(t,e,r){var n,i=r("825a"),a=r("37e8"),o=r("7839"),s=r("d012"),f=r("1be4"),u=r("cc12"),c=r("f772"),l=">",d="<",h="prototype",p="script",v=c("IE_PROTO"),b=function(){},_=function(t){return d+p+l+t+d+"/"+p+l},g=function(t){t.write(_("")),t.close();var e=t.parentWindow.Object;return t=null,e},y=function(){var t,e=u("iframe"),r="java"+p+":";return e.style.display="none",f.appendChild(e),e.src=String(r),t=e.contentWindow.document,t.open(),t.write(_("document.F=Object")),t.close(),t.F},w=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}w="undefined"!=typeof document?document.domain&&n?g(n):y():g(n);var t=o.length;while(t--)delete w[h][o[t]];return w()};s[v]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(b[h]=i(t),r=new b,b[h]=null,r[v]=t):r=w(),void 0===e?r:a.f(r,e)}},"7dd0":function(t,e,r){"use strict";var n=r("23e7"),i=r("c65b"),a=r("c430"),o=r("5e77"),s=r("1626"),f=r("9ed3"),u=r("e163"),c=r("d2bb"),l=r("d44e"),d=r("9112"),h=r("cb2d"),p=r("b622"),v=r("3f8c"),b=r("ae93"),_=o.PROPER,g=o.CONFIGURABLE,y=b.IteratorPrototype,w=b.BUGGY_SAFARI_ITERATORS,m=p("iterator"),x="keys",k="values",A="entries",T=function(){return this};t.exports=function(t,e,r,o,p,b,S){f(r,e,o);var z,E,I,O=function(t){if(t===p&&C)return C;if(!w&&t in B)return B[t];switch(t){case x:return function(){return new r(this,t)};case k:return function(){return new r(this,t)};case A:return function(){return new r(this,t)}}return function(){return new r(this)}},U=e+" Iterator",R=!1,B=t.prototype,M=B[m]||B["@@iterator"]||p&&B[p],C=!w&&M||O(p),j="Array"==e&&B.entries||M;if(j&&(z=u(j.call(new t)),z!==Object.prototype&&z.next&&(a||u(z)===y||(c?c(z,y):s(z[m])||h(z,m,T)),l(z,U,!0,!0),a&&(v[U]=T))),_&&p==k&&M&&M.name!==k&&(!a&&g?d(B,"name",k):(R=!0,C=function(){return i(M,this)})),p)if(E={values:O(k),keys:b?C:O(x),entries:O(A)},S)for(I in E)(w||R||!(I in B))&&h(B,I,E[I]);else n({target:e,proto:!0,forced:w||R},E);return a&&!S||B[m]===C||h(B,m,C,{name:p}),v[e]=C,E}},"7eb1":function(t,e,r){"use strict";var n=30,i=12;t.exports=function(t,e){var r,a,o,s,f,u,c,l,d,h,p,v,b,_,g,y,w,m,x,k,A,T,S,z,E;r=t.state,a=t.next_in,z=t.input,o=a+(t.avail_in-5),s=t.next_out,E=t.output,f=s-(e-t.avail_out),u=s+(t.avail_out-257),c=r.dmax,l=r.wsize,d=r.whave,h=r.wnext,p=r.window,v=r.hold,b=r.bits,_=r.lencode,g=r.distcode,y=(1<<r.lenbits)-1,w=(1<<r.distbits)-1;t:do{b<15&&(v+=z[a++]<<b,b+=8,v+=z[a++]<<b,b+=8),m=_[v&y];e:for(;;){if(x=m>>>24,v>>>=x,b-=x,x=m>>>16&255,0===x)E[s++]=65535&m;else{if(!(16&x)){if(0===(64&x)){m=_[(65535&m)+(v&(1<<x)-1)];continue e}if(32&x){r.mode=i;break t}t.msg="invalid literal/length code",r.mode=n;break t}k=65535&m,x&=15,x&&(b<x&&(v+=z[a++]<<b,b+=8),k+=v&(1<<x)-1,v>>>=x,b-=x),b<15&&(v+=z[a++]<<b,b+=8,v+=z[a++]<<b,b+=8),m=g[v&w];r:for(;;){if(x=m>>>24,v>>>=x,b-=x,x=m>>>16&255,!(16&x)){if(0===(64&x)){m=g[(65535&m)+(v&(1<<x)-1)];continue r}t.msg="invalid distance code",r.mode=n;break t}if(A=65535&m,x&=15,b<x&&(v+=z[a++]<<b,b+=8,b<x&&(v+=z[a++]<<b,b+=8)),A+=v&(1<<x)-1,A>c){t.msg="invalid distance too far back",r.mode=n;break t}if(v>>>=x,b-=x,x=s-f,A>x){if(x=A-x,x>d&&r.sane){t.msg="invalid distance too far back",r.mode=n;break t}if(T=0,S=p,0===h){if(T+=l-x,x<k){k-=x;do{E[s++]=p[T++]}while(--x);T=s-A,S=E}}else if(h<x){if(T+=l+h-x,x-=h,x<k){k-=x;do{E[s++]=p[T++]}while(--x);if(T=0,h<k){x=h,k-=x;do{E[s++]=p[T++]}while(--x);T=s-A,S=E}}}else if(T+=h-x,x<k){k-=x;do{E[s++]=p[T++]}while(--x);T=s-A,S=E}while(k>2)E[s++]=S[T++],E[s++]=S[T++],E[s++]=S[T++],k-=3;k&&(E[s++]=S[T++],k>1&&(E[s++]=S[T++]))}else{T=s-A;do{E[s++]=E[T++],E[s++]=E[T++],E[s++]=E[T++],k-=3}while(k>2);k&&(E[s++]=E[T++],k>1&&(E[s++]=E[T++]))}break}}break}}while(a<o&&s<u);k=b>>3,a-=k,b-=k<<3,v&=(1<<b)-1,t.next_in=a,t.next_out=s,t.avail_in=a<o?o-a+5:5-(a-o),t.avail_out=s<u?u-s+257:257-(s-u),r.hold=v,r.bits=b}},"7f9a":function(t,e,r){var n=r("da84"),i=r("1626"),a=r("8925"),o=n.WeakMap;t.exports=i(o)&&/native code/.test(a(o))},8013:function(t,e,r){"use strict";function n(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=n},"81d5":function(t,e,r){"use strict";var n=r("7b0b"),i=r("23cb"),a=r("07fa");t.exports=function(t){var e=n(this),r=a(e),o=arguments.length,s=i(o>1?arguments[1]:void 0,r),f=o>2?arguments[2]:void 0,u=void 0===f?r:i(f,r);while(u>s)e[s++]=t;return e}},"825a":function(t,e,r){var n=r("861d"),i=String,a=TypeError;t.exports=function(t){if(n(t))return t;throw a(i(t)+" is not an object")}},"82f8":function(t,e,r){"use strict";var n=r("ebb5"),i=r("4d64").includes,a=n.aTypedArray,o=n.exportTypedArrayMethod;o("includes",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0)}))},"83ab":function(t,e,r){var n=r("d039");t.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8418:function(t,e,r){"use strict";var n=r("a04b"),i=r("9bf2"),a=r("5c6c");t.exports=function(t,e,r){var o=n(e);o in t?i.f(t,o,a(0,r)):t[o]=r}},"84c3":function(t,e,r){var n=r("74e8");n("Uint16",(function(t){return function(e,r,n){return t(this,e,r,n)}}))},"861d":function(t,e,r){var n=r("1626");t.exports=function(t){return"object"==typeof t?null!==t:n(t)}},8925:function(t,e,r){var n=r("e330"),i=r("1626"),a=r("c6cd"),o=n(Function.toString);i(a.inspectSource)||(a.inspectSource=function(t){return o(t)}),t.exports=a.inspectSource},8936:function(t,e,r){"use strict";function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=n},"8aa7":function(t,e,r){var n=r("da84"),i=r("d039"),a=r("1c7e"),o=r("ebb5").NATIVE_ARRAY_BUFFER_VIEWS,s=n.ArrayBuffer,f=n.Int8Array;t.exports=!o||!i((function(){f(1)}))||!i((function(){new f(-1)}))||!a((function(t){new f,new f(null),new f(1.5),new f(t)}),!0)||i((function(){return 1!==new f(new s(2),1,void 0).length}))},"907a":function(t,e,r){"use strict";var n=r("ebb5"),i=r("07fa"),a=r("5926"),o=n.aTypedArray,s=n.exportTypedArrayMethod;s("at",(function(t){var e=o(this),r=i(e),n=a(t),s=n>=0?n:r+n;return s<0||s>=r?void 0:e[s]}))},"90d8":function(t,e,r){var n=r("c65b"),i=r("1a2d"),a=r("3a9b"),o=r("ad6d"),s=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in s||i(t,"flags")||!a(s,t)?e:n(o,t)}},"90e3":function(t,e,r){var n=r("e330"),i=0,a=Math.random(),o=n(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+o(++i+a,36)}},9112:function(t,e,r){var n=r("83ab"),i=r("9bf2"),a=r("5c6c");t.exports=n?function(t,e,r){return i.f(t,e,a(1,r))}:function(t,e,r){return t[e]=r,t}},"94ca":function(t,e,r){var n=r("d039"),i=r("1626"),a=/#|\\.prototype\\./,o=function(t,e){var r=f[s(t)];return r==c||r!=u&&(i(e)?n(e):!!e)},s=o.normalize=function(t){return String(t).replace(a,".").toLowerCase()},f=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},"986a":function(t,e,r){"use strict";var n=r("ebb5"),i=r("a258").findLast,a=n.aTypedArray,o=n.exportTypedArrayMethod;o("findLast",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0)}))},"9a1f":function(t,e,r){var n=r("c65b"),i=r("59ed"),a=r("825a"),o=r("0d51"),s=r("35a1"),f=TypeError;t.exports=function(t,e){var r=arguments.length<2?s(t):e;if(i(r))return a(n(r,t));throw f(o(t)+" is not iterable")}},"9a8c":function(t,e,r){"use strict";var n=r("e330"),i=r("ebb5"),a=r("145e"),o=n(a),s=i.aTypedArray,f=i.exportTypedArrayMethod;f("copyWithin",(function(t,e){return o(s(this),t,e,arguments.length>2?arguments[2]:void 0)}))},"9bf2":function(t,e,r){var n=r("83ab"),i=r("0cfb"),a=r("aed9"),o=r("825a"),s=r("a04b"),f=TypeError,u=Object.defineProperty,c=Object.getOwnPropertyDescriptor,l="enumerable",d="configurable",h="writable";e.f=n?a?function(t,e,r){if(o(t),e=s(e),o(r),"function"===typeof t&&"prototype"===e&&"value"in r&&h in r&&!r[h]){var n=c(t,e);n&&n[h]&&(t[e]=r.value,r={configurable:d in r?r[d]:n[d],enumerable:l in r?r[l]:n[l],writable:!1})}return u(t,e,r)}:u:function(t,e,r){if(o(t),e=s(e),o(r),i)try{return u(t,e,r)}catch(n){}if("get"in r||"set"in r)throw f("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},"9e6e":function(t,e,r){"use strict";var n=r("be7f"),i=r("c834"),a=r("eeda"),o=r("7eb1"),s=r("6853"),f=0,u=1,c=2,l=4,d=5,h=6,p=0,v=1,b=2,_=-2,g=-3,y=-4,w=-5,m=8,x=1,k=2,A=3,T=4,S=5,z=6,E=7,I=8,O=9,U=10,R=11,B=12,M=13,C=14,j=15,P=16,L=17,N=18,D=19,F=20,Z=21,H=22,G=23,q=24,Y=25,W=26,V=27,K=28,X=29,Q=30,$=31,J=32,tt=852,et=592,rt=15,nt=rt;function it(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function at(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ot(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=x,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(tt),e.distcode=e.distdyn=new n.Buf32(et),e.sane=1,e.back=-1,p):_}function st(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,ot(t)):_}function ft(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?_:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,st(t))):_}function ut(t,e){var r,n;return t?(n=new at,t.state=n,n.window=null,r=ft(t,e),r!==p&&(t.state=null),r):_}function ct(t){return ut(t,nt)}var lt,dt,ht=!0;function pt(t){if(ht){var e;lt=new n.Buf32(512),dt=new n.Buf32(32),e=0;while(e<144)t.lens[e++]=8;while(e<256)t.lens[e++]=9;while(e<280)t.lens[e++]=7;while(e<288)t.lens[e++]=8;s(u,t.lens,0,288,lt,0,t.work,{bits:9}),e=0;while(e<32)t.lens[e++]=5;s(c,t.lens,0,32,dt,0,t.work,{bits:5}),ht=!1}t.lencode=lt,t.lenbits=9,t.distcode=dt,t.distbits=5}function vt(t,e,r,i){var a,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new n.Buf8(o.wsize)),i>=o.wsize?(n.arraySet(o.window,e,r-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(a=o.wsize-o.wnext,a>i&&(a=i),n.arraySet(o.window,e,r-i,a,o.wnext),i-=a,i?(n.arraySet(o.window,e,r-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0}function bt(t,e){var r,tt,et,rt,nt,at,ot,st,ft,ut,ct,lt,dt,ht,bt,_t,gt,yt,wt,mt,xt,kt,At,Tt,St=0,zt=new n.Buf8(4),Et=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return _;r=t.state,r.mode===B&&(r.mode=M),nt=t.next_out,et=t.output,ot=t.avail_out,rt=t.next_in,tt=t.input,at=t.avail_in,st=r.hold,ft=r.bits,ut=at,ct=ot,kt=p;t:for(;;)switch(r.mode){case x:if(0===r.wrap){r.mode=M;break}while(ft<16){if(0===at)break t;at--,st+=tt[rt++]<<ft,ft+=8}if(2&r.wrap&&35615===st){r.check=0,zt[0]=255&st,zt[1]=st>>>8&255,r.check=a(r.check,zt,2,0),st=0,ft=0,r.mode=k;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&st)<<8)+(st>>8))%31){t.msg="incorrect header check",r.mode=Q;break}if((15&st)!==m){t.msg="unknown compression method",r.mode=Q;break}if(st>>>=4,ft-=4,xt=8+(15&st),0===r.wbits)r.wbits=xt;else if(xt>r.wbits){t.msg="invalid window size",r.mode=Q;break}r.dmax=1<<xt,t.adler=r.check=1,r.mode=512&st?U:B,st=0,ft=0;break;case k:while(ft<16){if(0===at)break t;at--,st+=tt[rt++]<<ft,ft+=8}if(r.flags=st,(255&r.flags)!==m){t.msg="unknown compression method",r.mode=Q;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=Q;break}r.head&&(r.head.text=st>>8&1),512&r.flags&&(zt[0]=255&st,zt[1]=st>>>8&255,r.check=a(r.check,zt,2,0)),st=0,ft=0,r.mode=A;case A:while(ft<32){if(0===at)break t;at--,st+=tt[rt++]<<ft,ft+=8}r.head&&(r.head.time=st),512&r.flags&&(zt[0]=255&st,zt[1]=st>>>8&255,zt[2]=st>>>16&255,zt[3]=st>>>24&255,r.check=a(r.check,zt,4,0)),st=0,ft=0,r.mode=T;case T:while(ft<16){if(0===at)break t;at--,st+=tt[rt++]<<ft,ft+=8}r.head&&(r.head.xflags=255&st,r.head.os=st>>8),512&r.flags&&(zt[0]=255&st,zt[1]=st>>>8&255,r.check=a(r.check,zt,2,0)),st=0,ft=0,r.mode=S;case S:if(1024&r.flags){while(ft<16){if(0===at)break t;at--,st+=tt[rt++]<<ft,ft+=8}r.length=st,r.head&&(r.head.extra_len=st),512&r.flags&&(zt[0]=255&st,zt[1]=st>>>8&255,r.check=a(r.check,zt,2,0)),st=0,ft=0}else r.head&&(r.head.extra=null);r.mode=z;case z:if(1024&r.flags&&(lt=r.length,lt>at&&(lt=at),lt&&(r.head&&(xt=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,tt,rt,lt,xt)),512&r.flags&&(r.check=a(r.check,tt,lt,rt)),at-=lt,rt+=lt,r.length-=lt),r.length))break t;r.length=0,r.mode=E;case E:if(2048&r.flags){if(0===at)break t;lt=0;do{xt=tt[rt+lt++],r.head&&xt&&r.length<65536&&(r.head.name+=String.fromCharCode(xt))}while(xt&&lt<at);if(512&r.flags&&(r.check=a(r.check,tt,lt,rt)),at-=lt,rt+=lt,xt)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=I;case I:if(4096&r.flags){if(0===at)break t;lt=0;do{xt=tt[rt+lt++],r.head&&xt&&r.length<65536&&(r.head.comment+=String.fromCharCode(xt))}while(xt&&lt<at);if(512&r.flags&&(r.check=a(r.check,tt,lt,rt)),at-=lt,rt+=lt,xt)break t}else r.head&&(r.head.comment=null);r.mode=O;case O:if(512&r.flags){while(ft<16){if(0===at)break t;at--,st+=tt[rt++]<<ft,ft+=8}if(st!==(65535&r.check)){t.msg="header crc mismatch",r.mode=Q;break}st=0,ft=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=B;break;case U:while(ft<32){if(0===at)break t;at--,st+=tt[rt++]<<ft,ft+=8}t.adler=r.check=it(st),st=0,ft=0,r.mode=R;case R:if(0===r.havedict)return t.next_out=nt,t.avail_out=ot,t.next_in=rt,t.avail_in=at,r.hold=st,r.bits=ft,b;t.adler=r.check=1,r.mode=B;case B:if(e===d||e===h)break t;case M:if(r.last){st>>>=7&ft,ft-=7&ft,r.mode=V;break}while(ft<3){if(0===at)break t;at--,st+=tt[rt++]<<ft,ft+=8}switch(r.last=1&st,st>>>=1,ft-=1,3&st){case 0:r.mode=C;break;case 1:if(pt(r),r.mode=F,e===h){st>>>=2,ft-=2;break t}break;case 2:r.mode=L;break;case 3:t.msg="invalid block type",r.mode=Q}st>>>=2,ft-=2;break;case C:st>>>=7&ft,ft-=7&ft;while(ft<32){if(0===at)break t;at--,st+=tt[rt++]<<ft,ft+=8}if((65535&st)!==(st>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Q;break}if(r.length=65535&st,st=0,ft=0,r.mode=j,e===h)break t;case j:r.mode=P;case P:if(lt=r.length,lt){if(lt>at&&(lt=at),lt>ot&&(lt=ot),0===lt)break t;n.arraySet(et,tt,rt,lt,nt),at-=lt,rt+=lt,ot-=lt,nt+=lt,r.length-=lt;break}r.mode=B;break;case L:while(ft<14){if(0===at)break t;at--,st+=tt[rt++]<<ft,ft+=8}if(r.nlen=257+(31&st),st>>>=5,ft-=5,r.ndist=1+(31&st),st>>>=5,ft-=5,r.ncode=4+(15&st),st>>>=4,ft-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Q;break}r.have=0,r.mode=N;case N:while(r.have<r.ncode){while(ft<3){if(0===at)break t;at--,st+=tt[rt++]<<ft,ft+=8}r.lens[Et[r.have++]]=7&st,st>>>=3,ft-=3}while(r.have<19)r.lens[Et[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,At={bits:r.lenbits},kt=s(f,r.lens,0,19,r.lencode,0,r.work,At),r.lenbits=At.bits,kt){t.msg="invalid code lengths set",r.mode=Q;break}r.have=0,r.mode=D;case D:while(r.have<r.nlen+r.ndist){for(;;){if(St=r.lencode[st&(1<<r.lenbits)-1],bt=St>>>24,_t=St>>>16&255,gt=65535&St,bt<=ft)break;if(0===at)break t;at--,st+=tt[rt++]<<ft,ft+=8}if(gt<16)st>>>=bt,ft-=bt,r.lens[r.have++]=gt;else{if(16===gt){Tt=bt+2;while(ft<Tt){if(0===at)break t;at--,st+=tt[rt++]<<ft,ft+=8}if(st>>>=bt,ft-=bt,0===r.have){t.msg="invalid bit length repeat",r.mode=Q;break}xt=r.lens[r.have-1],lt=3+(3&st),st>>>=2,ft-=2}else if(17===gt){Tt=bt+3;while(ft<Tt){if(0===at)break t;at--,st+=tt[rt++]<<ft,ft+=8}st>>>=bt,ft-=bt,xt=0,lt=3+(7&st),st>>>=3,ft-=3}else{Tt=bt+7;while(ft<Tt){if(0===at)break t;at--,st+=tt[rt++]<<ft,ft+=8}st>>>=bt,ft-=bt,xt=0,lt=11+(127&st),st>>>=7,ft-=7}if(r.have+lt>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Q;break}while(lt--)r.lens[r.have++]=xt}}if(r.mode===Q)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=Q;break}if(r.lenbits=9,At={bits:r.lenbits},kt=s(u,r.lens,0,r.nlen,r.lencode,0,r.work,At),r.lenbits=At.bits,kt){t.msg="invalid literal/lengths set",r.mode=Q;break}if(r.distbits=6,r.distcode=r.distdyn,At={bits:r.distbits},kt=s(c,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,At),r.distbits=At.bits,kt){t.msg="invalid distances set",r.mode=Q;break}if(r.mode=F,e===h)break t;case F:r.mode=Z;case Z:if(at>=6&&ot>=258){t.next_out=nt,t.avail_out=ot,t.next_in=rt,t.avail_in=at,r.hold=st,r.bits=ft,o(t,ct),nt=t.next_out,et=t.output,ot=t.avail_out,rt=t.next_in,tt=t.input,at=t.avail_in,st=r.hold,ft=r.bits,r.mode===B&&(r.back=-1);break}for(r.back=0;;){if(St=r.lencode[st&(1<<r.lenbits)-1],bt=St>>>24,_t=St>>>16&255,gt=65535&St,bt<=ft)break;if(0===at)break t;at--,st+=tt[rt++]<<ft,ft+=8}if(_t&&0===(240&_t)){for(yt=bt,wt=_t,mt=gt;;){if(St=r.lencode[mt+((st&(1<<yt+wt)-1)>>yt)],bt=St>>>24,_t=St>>>16&255,gt=65535&St,yt+bt<=ft)break;if(0===at)break t;at--,st+=tt[rt++]<<ft,ft+=8}st>>>=yt,ft-=yt,r.back+=yt}if(st>>>=bt,ft-=bt,r.back+=bt,r.length=gt,0===_t){r.mode=W;break}if(32&_t){r.back=-1,r.mode=B;break}if(64&_t){t.msg="invalid literal/length code",r.mode=Q;break}r.extra=15&_t,r.mode=H;case H:if(r.extra){Tt=r.extra;while(ft<Tt){if(0===at)break t;at--,st+=tt[rt++]<<ft,ft+=8}r.length+=st&(1<<r.extra)-1,st>>>=r.extra,ft-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=G;case G:for(;;){if(St=r.distcode[st&(1<<r.distbits)-1],bt=St>>>24,_t=St>>>16&255,gt=65535&St,bt<=ft)break;if(0===at)break t;at--,st+=tt[rt++]<<ft,ft+=8}if(0===(240&_t)){for(yt=bt,wt=_t,mt=gt;;){if(St=r.distcode[mt+((st&(1<<yt+wt)-1)>>yt)],bt=St>>>24,_t=St>>>16&255,gt=65535&St,yt+bt<=ft)break;if(0===at)break t;at--,st+=tt[rt++]<<ft,ft+=8}st>>>=yt,ft-=yt,r.back+=yt}if(st>>>=bt,ft-=bt,r.back+=bt,64&_t){t.msg="invalid distance code",r.mode=Q;break}r.offset=gt,r.extra=15&_t,r.mode=q;case q:if(r.extra){Tt=r.extra;while(ft<Tt){if(0===at)break t;at--,st+=tt[rt++]<<ft,ft+=8}r.offset+=st&(1<<r.extra)-1,st>>>=r.extra,ft-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Q;break}r.mode=Y;case Y:if(0===ot)break t;if(lt=ct-ot,r.offset>lt){if(lt=r.offset-lt,lt>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Q;break}lt>r.wnext?(lt-=r.wnext,dt=r.wsize-lt):dt=r.wnext-lt,lt>r.length&&(lt=r.length),ht=r.window}else ht=et,dt=nt-r.offset,lt=r.length;lt>ot&&(lt=ot),ot-=lt,r.length-=lt;do{et[nt++]=ht[dt++]}while(--lt);0===r.length&&(r.mode=Z);break;case W:if(0===ot)break t;et[nt++]=r.length,ot--,r.mode=Z;break;case V:if(r.wrap){while(ft<32){if(0===at)break t;at--,st|=tt[rt++]<<ft,ft+=8}if(ct-=ot,t.total_out+=ct,r.total+=ct,ct&&(t.adler=r.check=r.flags?a(r.check,et,ct,nt-ct):i(r.check,et,ct,nt-ct)),ct=ot,(r.flags?st:it(st))!==r.check){t.msg="incorrect data check",r.mode=Q;break}st=0,ft=0}r.mode=K;case K:if(r.wrap&&r.flags){while(ft<32){if(0===at)break t;at--,st+=tt[rt++]<<ft,ft+=8}if(st!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=Q;break}st=0,ft=0}r.mode=X;case X:kt=v;break t;case Q:kt=g;break t;case $:return y;case J:default:return _}return t.next_out=nt,t.avail_out=ot,t.next_in=rt,t.avail_in=at,r.hold=st,r.bits=ft,(r.wsize||ct!==t.avail_out&&r.mode<Q&&(r.mode<V||e!==l))&&vt(t,t.output,t.next_out,ct-t.avail_out)?(r.mode=$,y):(ut-=t.avail_in,ct-=t.avail_out,t.total_in+=ut,t.total_out+=ct,r.total+=ct,r.wrap&&ct&&(t.adler=r.check=r.flags?a(r.check,et,ct,t.next_out-ct):i(r.check,et,ct,t.next_out-ct)),t.data_type=r.bits+(r.last?64:0)+(r.mode===B?128:0)+(r.mode===F||r.mode===j?256:0),(0===ut&&0===ct||e===l)&&kt===p&&(kt=w),kt)}function _t(t){if(!t||!t.state)return _;var e=t.state;return e.window&&(e.window=null),t.state=null,p}function gt(t,e){var r;return t&&t.state?(r=t.state,0===(2&r.wrap)?_:(r.head=e,e.done=!1,p)):_}function yt(t,e){var r,n,a,o=e.length;return t&&t.state?(r=t.state,0!==r.wrap&&r.mode!==R?_:r.mode===R&&(n=1,n=i(n,e,o,0),n!==r.check)?g:(a=vt(t,e,o,o),a?(r.mode=$,y):(r.havedict=1,p))):_}e.inflateReset=st,e.inflateReset2=ft,e.inflateResetKeep=ot,e.inflateInit=ct,e.inflateInit2=ut,e.inflate=bt,e.inflateEnd=_t,e.inflateGetHeader=gt,e.inflateSetDictionary=yt,e.inflateInfo="pako inflate (from Nodeca project)"},"9ed3":function(t,e,r){"use strict";var n=r("ae93").IteratorPrototype,i=r("7c73"),a=r("5c6c"),o=r("d44e"),s=r("3f8c"),f=function(){return this};t.exports=function(t,e,r,u){var c=e+" Iterator";return t.prototype=i(n,{next:a(+!u,r)}),o(t,c,!1,!0),s[c]=f,t}},a04b:function(t,e,r){var n=r("c04e"),i=r("d9b5");t.exports=function(t){var e=n(t,"string");return i(e)?e:e+""}},a078:function(t,e,r){var n=r("0366"),i=r("c65b"),a=r("5087"),o=r("7b0b"),s=r("07fa"),f=r("9a1f"),u=r("35a1"),c=r("e95a"),l=r("ebb5").aTypedArrayConstructor;t.exports=function(t){var e,r,d,h,p,v,b=a(this),_=o(t),g=arguments.length,y=g>1?arguments[1]:void 0,w=void 0!==y,m=u(_);if(m&&!c(m)){p=f(_,m),v=p.next,_=[];while(!(h=i(v,p)).done)_.push(h.value)}for(w&&g>2&&(y=n(y,arguments[2])),r=s(_),d=new(l(b))(r),e=0;r>e;e++)d[e]=w?y(_[e],e):_[e];return d}},a177:function(t,e,r){"use strict";var n,i=r("be7f"),a=r("07f4"),o=r("c834"),s=r("eeda"),f=r("4dc6"),u=0,c=1,l=3,d=4,h=5,p=0,v=1,b=-2,_=-3,g=-5,y=-1,w=1,m=2,x=3,k=4,A=0,T=2,S=8,z=9,E=15,I=8,O=29,U=256,R=U+1+O,B=30,M=19,C=2*R+1,j=15,P=3,L=258,N=L+P+1,D=32,F=42,Z=69,H=73,G=91,q=103,Y=113,W=666,V=1,K=2,X=3,Q=4,$=3;function J(t,e){return t.msg=f[e],e}function tt(t){return(t<<1)-(t>4?9:0)}function et(t){var e=t.length;while(--e>=0)t[e]=0}function rt(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(i.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function nt(t,e){a._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,rt(t.strm)}function it(t,e){t.pending_buf[t.pending++]=e}function at(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function ot(t,e,r,n){var a=t.avail_in;return a>n&&(a=n),0===a?0:(t.avail_in-=a,i.arraySet(e,t.input,t.next_in,a,r),1===t.state.wrap?t.adler=o(t.adler,e,a,r):2===t.state.wrap&&(t.adler=s(t.adler,e,a,r)),t.next_in+=a,t.total_in+=a,a)}function st(t,e){var r,n,i=t.max_chain_length,a=t.strstart,o=t.prev_length,s=t.nice_match,f=t.strstart>t.w_size-N?t.strstart-(t.w_size-N):0,u=t.window,c=t.w_mask,l=t.prev,d=t.strstart+L,h=u[a+o-1],p=u[a+o];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(r=e,u[r+o]===p&&u[r+o-1]===h&&u[r]===u[a]&&u[++r]===u[a+1]){a+=2,r++;do{}while(u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&a<d);if(n=L-(d-a),a=d-L,n>o){if(t.match_start=e,o=n,n>=s)break;h=u[a+o-1],p=u[a+o]}}}while((e=l[e&c])>f&&0!==--i);return o<=t.lookahead?o:t.lookahead}function ft(t){var e,r,n,a,o,s=t.w_size;do{if(a=t.window_size-t.lookahead-t.strstart,t.strstart>=s+(s-N)){i.arraySet(t.window,t.window,s,s,0),t.match_start-=s,t.strstart-=s,t.block_start-=s,r=t.hash_size,e=r;do{n=t.head[--e],t.head[e]=n>=s?n-s:0}while(--r);r=s,e=r;do{n=t.prev[--e],t.prev[e]=n>=s?n-s:0}while(--r);a+=s}if(0===t.strm.avail_in)break;if(r=ot(t.strm,t.window,t.strstart+t.lookahead,a),t.lookahead+=r,t.lookahead+t.insert>=P){o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;while(t.insert)if(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+P-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,t.lookahead+t.insert<P)break}}while(t.lookahead<N&&0!==t.strm.avail_in)}function ut(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(ft(t),0===t.lookahead&&e===u)return V;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,nt(t,!1),0===t.strm.avail_out))return V;if(t.strstart-t.block_start>=t.w_size-N&&(nt(t,!1),0===t.strm.avail_out))return V}return t.insert=0,e===d?(nt(t,!0),0===t.strm.avail_out?X:Q):(t.strstart>t.block_start&&(nt(t,!1),t.strm.avail_out),V)}function ct(t,e){for(var r,n;;){if(t.lookahead<N){if(ft(t),t.lookahead<N&&e===u)return V;if(0===t.lookahead)break}if(r=0,t.lookahead>=P&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+P-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-N&&(t.match_length=st(t,r)),t.match_length>=P)if(n=a._tr_tally(t,t.strstart-t.match_start,t.match_length-P),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=P){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+P-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(nt(t,!1),0===t.strm.avail_out))return V}return t.insert=t.strstart<P-1?t.strstart:P-1,e===d?(nt(t,!0),0===t.strm.avail_out?X:Q):t.last_lit&&(nt(t,!1),0===t.strm.avail_out)?V:K}function lt(t,e){for(var r,n,i;;){if(t.lookahead<N){if(ft(t),t.lookahead<N&&e===u)return V;if(0===t.lookahead)break}if(r=0,t.lookahead>=P&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+P-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=P-1,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-N&&(t.match_length=st(t,r),t.match_length<=5&&(t.strategy===w||t.match_length===P&&t.strstart-t.match_start>4096)&&(t.match_length=P-1)),t.prev_length>=P&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-P,n=a._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-P),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+P-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!==--t.prev_length);if(t.match_available=0,t.match_length=P-1,t.strstart++,n&&(nt(t,!1),0===t.strm.avail_out))return V}else if(t.match_available){if(n=a._tr_tally(t,0,t.window[t.strstart-1]),n&&nt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return V}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=a._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<P-1?t.strstart:P-1,e===d?(nt(t,!0),0===t.strm.avail_out?X:Q):t.last_lit&&(nt(t,!1),0===t.strm.avail_out)?V:K}function dt(t,e){for(var r,n,i,o,s=t.window;;){if(t.lookahead<=L){if(ft(t),t.lookahead<=L&&e===u)return V;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=P&&t.strstart>0&&(i=t.strstart-1,n=s[i],n===s[++i]&&n===s[++i]&&n===s[++i])){o=t.strstart+L;do{}while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<o);t.match_length=L-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=P?(r=a._tr_tally(t,1,t.match_length-P),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(nt(t,!1),0===t.strm.avail_out))return V}return t.insert=0,e===d?(nt(t,!0),0===t.strm.avail_out?X:Q):t.last_lit&&(nt(t,!1),0===t.strm.avail_out)?V:K}function ht(t,e){for(var r;;){if(0===t.lookahead&&(ft(t),0===t.lookahead)){if(e===u)return V;break}if(t.match_length=0,r=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(nt(t,!1),0===t.strm.avail_out))return V}return t.insert=0,e===d?(nt(t,!0),0===t.strm.avail_out?X:Q):t.last_lit&&(nt(t,!1),0===t.strm.avail_out)?V:K}function pt(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}function vt(t){t.window_size=2*t.w_size,et(t.head),t.max_lazy_match=n[t.level].max_lazy,t.good_match=n[t.level].good_length,t.nice_match=n[t.level].nice_length,t.max_chain_length=n[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=P-1,t.match_available=0,t.ins_h=0}function bt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*C),this.dyn_dtree=new i.Buf16(2*(2*B+1)),this.bl_tree=new i.Buf16(2*(2*M+1)),et(this.dyn_ltree),et(this.dyn_dtree),et(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(j+1),this.heap=new i.Buf16(2*R+1),et(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*R+1),et(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function _t(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=T,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?F:Y,t.adler=2===e.wrap?0:1,e.last_flush=u,a._tr_init(e),p):J(t,b)}function gt(t){var e=_t(t);return e===p&&vt(t.state),e}function yt(t,e){return t&&t.state?2!==t.state.wrap?b:(t.state.gzhead=e,p):b}function wt(t,e,r,n,a,o){if(!t)return b;var s=1;if(e===y&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),a<1||a>z||r!==S||n<8||n>15||e<0||e>9||o<0||o>k)return J(t,b);8===n&&(n=9);var f=new bt;return t.state=f,f.strm=t,f.wrap=s,f.gzhead=null,f.w_bits=n,f.w_size=1<<f.w_bits,f.w_mask=f.w_size-1,f.hash_bits=a+7,f.hash_size=1<<f.hash_bits,f.hash_mask=f.hash_size-1,f.hash_shift=~~((f.hash_bits+P-1)/P),f.window=new i.Buf8(2*f.w_size),f.head=new i.Buf16(f.hash_size),f.prev=new i.Buf16(f.w_size),f.lit_bufsize=1<<a+6,f.pending_buf_size=4*f.lit_bufsize,f.pending_buf=new i.Buf8(f.pending_buf_size),f.d_buf=1*f.lit_bufsize,f.l_buf=3*f.lit_bufsize,f.level=e,f.strategy=o,f.method=r,gt(t)}function mt(t,e){return wt(t,e,S,E,I,A)}function xt(t,e){var r,i,o,f;if(!t||!t.state||e>h||e<0)return t?J(t,b):b;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||i.status===W&&e!==d)return J(t,0===t.avail_out?g:b);if(i.strm=t,r=i.last_flush,i.last_flush=e,i.status===F)if(2===i.wrap)t.adler=0,it(i,31),it(i,139),it(i,8),i.gzhead?(it(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),it(i,255&i.gzhead.time),it(i,i.gzhead.time>>8&255),it(i,i.gzhead.time>>16&255),it(i,i.gzhead.time>>24&255),it(i,9===i.level?2:i.strategy>=m||i.level<2?4:0),it(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(it(i,255&i.gzhead.extra.length),it(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=s(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=Z):(it(i,0),it(i,0),it(i,0),it(i,0),it(i,0),it(i,9===i.level?2:i.strategy>=m||i.level<2?4:0),it(i,$),i.status=Y);else{var _=S+(i.w_bits-8<<4)<<8,y=-1;y=i.strategy>=m||i.level<2?0:i.level<6?1:6===i.level?2:3,_|=y<<6,0!==i.strstart&&(_|=D),_+=31-_%31,i.status=Y,at(i,_),0!==i.strstart&&(at(i,t.adler>>>16),at(i,65535&t.adler)),t.adler=1}if(i.status===Z)if(i.gzhead.extra){o=i.pending;while(i.gzindex<(65535&i.gzhead.extra.length)){if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),rt(t),o=i.pending,i.pending===i.pending_buf_size))break;it(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++}i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=H)}else i.status=H;if(i.status===H)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),rt(t),o=i.pending,i.pending===i.pending_buf_size)){f=1;break}f=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,it(i,f)}while(0!==f);i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),0===f&&(i.gzindex=0,i.status=G)}else i.status=G;if(i.status===G)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),rt(t),o=i.pending,i.pending===i.pending_buf_size)){f=1;break}f=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,it(i,f)}while(0!==f);i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),0===f&&(i.status=q)}else i.status=q;if(i.status===q&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&rt(t),i.pending+2<=i.pending_buf_size&&(it(i,255&t.adler),it(i,t.adler>>8&255),t.adler=0,i.status=Y)):i.status=Y),0!==i.pending){if(rt(t),0===t.avail_out)return i.last_flush=-1,p}else if(0===t.avail_in&&tt(e)<=tt(r)&&e!==d)return J(t,g);if(i.status===W&&0!==t.avail_in)return J(t,g);if(0!==t.avail_in||0!==i.lookahead||e!==u&&i.status!==W){var w=i.strategy===m?ht(i,e):i.strategy===x?dt(i,e):n[i.level].func(i,e);if(w!==X&&w!==Q||(i.status=W),w===V||w===X)return 0===t.avail_out&&(i.last_flush=-1),p;if(w===K&&(e===c?a._tr_align(i):e!==h&&(a._tr_stored_block(i,0,0,!1),e===l&&(et(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),rt(t),0===t.avail_out))return i.last_flush=-1,p}return e!==d?p:i.wrap<=0?v:(2===i.wrap?(it(i,255&t.adler),it(i,t.adler>>8&255),it(i,t.adler>>16&255),it(i,t.adler>>24&255),it(i,255&t.total_in),it(i,t.total_in>>8&255),it(i,t.total_in>>16&255),it(i,t.total_in>>24&255)):(at(i,t.adler>>>16),at(i,65535&t.adler)),rt(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?p:v)}function kt(t){var e;return t&&t.state?(e=t.state.status,e!==F&&e!==Z&&e!==H&&e!==G&&e!==q&&e!==Y&&e!==W?J(t,b):(t.state=null,e===Y?J(t,_):p)):b}function At(t,e){var r,n,a,s,f,u,c,l,d=e.length;if(!t||!t.state)return b;if(r=t.state,s=r.wrap,2===s||1===s&&r.status!==F||r.lookahead)return b;1===s&&(t.adler=o(t.adler,e,d,0)),r.wrap=0,d>=r.w_size&&(0===s&&(et(r.head),r.strstart=0,r.block_start=0,r.insert=0),l=new i.Buf8(r.w_size),i.arraySet(l,e,d-r.w_size,r.w_size,0),e=l,d=r.w_size),f=t.avail_in,u=t.next_in,c=t.input,t.avail_in=d,t.next_in=0,t.input=e,ft(r);while(r.lookahead>=P){n=r.strstart,a=r.lookahead-(P-1);do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+P-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--a);r.strstart=n,r.lookahead=P-1,ft(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=P-1,r.match_available=0,t.next_in=u,t.input=c,t.avail_in=f,r.wrap=s,p}n=[new pt(0,0,0,0,ut),new pt(4,4,8,4,ct),new pt(4,5,16,8,ct),new pt(4,6,32,32,ct),new pt(4,4,16,16,lt),new pt(8,16,32,32,lt),new pt(8,16,128,128,lt),new pt(8,32,128,256,lt),new pt(32,128,258,1024,lt),new pt(32,258,258,4096,lt)],e.deflateInit=mt,e.deflateInit2=wt,e.deflateReset=gt,e.deflateResetKeep=_t,e.deflateSetHeader=yt,e.deflate=xt,e.deflateEnd=kt,e.deflateSetDictionary=At,e.deflateInfo="pako deflate (from Nodeca project)"},a258:function(t,e,r){var n=r("0366"),i=r("44ad"),a=r("7b0b"),o=r("07fa"),s=function(t){var e=1==t;return function(r,s,f){var u,c,l=a(r),d=i(l),h=n(s,f),p=o(d);while(p-- >0)if(u=d[p],c=h(u,p,l),c)switch(t){case 0:return u;case 1:return p}return e?-1:void 0}};t.exports={findLast:s(0),findLastIndex:s(1)}},a640:function(t,e,r){"use strict";var n=r("d039");t.exports=function(t,e){var r=[][t];return!!r&&n((function(){r.call(null,e||function(){return 1},1)}))}},a975:function(t,e,r){"use strict";var n=r("ebb5"),i=r("b727").every,a=n.aTypedArray,o=n.exportTypedArrayMethod;o("every",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0)}))},a981:function(t,e){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},ace4:function(t,e,r){"use strict";var n=r("23e7"),i=r("e330"),a=r("d039"),o=r("621a"),s=r("825a"),f=r("23cb"),u=r("50c4"),c=r("4840"),l=o.ArrayBuffer,d=o.DataView,h=d.prototype,p=i(l.prototype.slice),v=i(h.getUint8),b=i(h.setUint8),_=a((function(){return!new l(2).slice(1,void 0).byteLength}));n({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:_},{slice:function(t,e){if(p&&void 0===e)return p(s(this),t);var r=s(this).byteLength,n=f(t,r),i=f(void 0===e?r:e,r),a=new(c(this,l))(u(i-n)),o=new d(this),h=new d(a),_=0;while(n<i)b(h,_++,v(o,n++));return a}})},ad6d:function(t,e,r){"use strict";var n=r("825a");t.exports=function(){var t=n(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},addb:function(t,e,r){var n=r("4dae"),i=Math.floor,a=function(t,e){var r=t.length,f=i(r/2);return r<8?o(t,e):s(t,a(n(t,0,f),e),a(n(t,f),e),e)},o=function(t,e){var r,n,i=t.length,a=1;while(a<i){n=a,r=t[a];while(n&&e(t[n-1],r)>0)t[n]=t[--n];n!==a++&&(t[n]=r)}return t},s=function(t,e,r,n){var i=e.length,a=r.length,o=0,s=0;while(o<i||s<a)t[o+s]=o<i&&s<a?n(e[o],r[s])<=0?e[o++]:r[s++]:o<i?e[o++]:r[s++];return t};t.exports=a},ae93:function(t,e,r){"use strict";var n,i,a,o=r("d039"),s=r("1626"),f=r("7c73"),u=r("e163"),c=r("cb2d"),l=r("b622"),d=r("c430"),h=l("iterator"),p=!1;[].keys&&(a=[].keys(),"next"in a?(i=u(u(a)),i!==Object.prototype&&(n=i)):p=!0);var v=void 0==n||o((function(){var t={};return n[h].call(t)!==t}));v?n={}:d&&(n=f(n)),s(n[h])||c(n,h,(function(){return this})),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:p}},aed9:function(t,e,r){var n=r("83ab"),i=r("d039");t.exports=n&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},b041:function(t,e,r){"use strict";var n=r("00ee"),i=r("f5df");t.exports=n?{}.toString:function(){return"[object "+i(this)+"]"}},b39a:function(t,e,r){"use strict";var n=r("da84"),i=r("2ba4"),a=r("ebb5"),o=r("d039"),s=r("f36a"),f=n.Int8Array,u=a.aTypedArray,c=a.exportTypedArrayMethod,l=[].toLocaleString,d=!!f&&o((function(){l.call(new f(1))})),h=o((function(){return[1,2].toLocaleString()!=new f([1,2]).toLocaleString()}))||!o((function(){f.prototype.toLocaleString.call([1,2])}));c("toLocaleString",(function(){return i(l,d?s(u(this)):u(this),s(arguments))}),h)},b42e:function(t,e){var r=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var e=+t;return(e>0?n:r)(e)}},b622:function(t,e,r){var n=r("da84"),i=r("5692"),a=r("1a2d"),o=r("90e3"),s=r("4930"),f=r("fdbf"),u=i("wks"),c=n.Symbol,l=c&&c["for"],d=f?c:c&&c.withoutSetter||o;t.exports=function(t){if(!a(u,t)||!s&&"string"!=typeof u[t]){var e="Symbol."+t;s&&a(c,t)?u[t]=c[t]:u[t]=f&&l?l(e):d(e)}return u[t]}},b6b7:function(t,e,r){var n=r("ebb5"),i=r("4840"),a=n.aTypedArrayConstructor,o=n.getTypedArrayConstructor;t.exports=function(t){return a(i(t,o(t)))}},b727:function(t,e,r){var n=r("0366"),i=r("e330"),a=r("44ad"),o=r("7b0b"),s=r("07fa"),f=r("65f0"),u=i([].push),c=function(t){var e=1==t,r=2==t,i=3==t,c=4==t,l=6==t,d=7==t,h=5==t||l;return function(p,v,b,_){for(var g,y,w=o(p),m=a(w),x=n(v,b),k=s(m),A=0,T=_||f,S=e?T(p,k):r||d?T(p,0):void 0;k>A;A++)if((h||A in m)&&(g=m[A],y=x(g,A,w),t))if(e)S[A]=y;else if(y)switch(t){case 3:return!0;case 5:return g;case 6:return A;case 2:u(S,g)}else switch(t){case 4:return!1;case 7:u(S,g)}return l?-1:i||c?c:S}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterReject:c(7)}},be7f:function(t,e,r){"use strict";var n="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){var e=Array.prototype.slice.call(arguments,1);while(e.length){var r=e.shift();if(r){if("object"!==typeof r)throw new TypeError(r+"must be non-object");for(var n in r)i(r,n)&&(t[n]=r[n])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var a={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+n),i);else for(var a=0;a<n;a++)t[i+a]=e[r+a]},flattenChunks:function(t){var e,r,n,i,a,o;for(n=0,e=0,r=t.length;e<r;e++)n+=t[e].length;for(o=new Uint8Array(n),i=0,e=0,r=t.length;e<r;e++)a=t[e],o.set(a,i),i+=a.length;return o}},o={arraySet:function(t,e,r,n,i){for(var a=0;a<n;a++)t[i+a]=e[r+a]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,a)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,o))},e.setTyped(n)},c04e:function(t,e,r){var n=r("c65b"),i=r("861d"),a=r("d9b5"),o=r("dc4a"),s=r("485a"),f=r("b622"),u=TypeError,c=f("toPrimitive");t.exports=function(t,e){if(!i(t)||a(t))return t;var r,f=o(t,c);if(f){if(void 0===e&&(e="default"),r=n(f,t,e),!i(r)||a(r))return r;throw u("Can\'t convert object to primitive value")}return void 0===e&&(e="number"),s(t,e)}},c1ac:function(t,e,r){"use strict";var n=r("ebb5"),i=r("b727").filter,a=r("1448"),o=n.aTypedArray,s=n.exportTypedArrayMethod;s("filter",(function(t){var e=i(o(this),t,arguments.length>1?arguments[1]:void 0);return a(this,e)}))},c430:function(t,e){t.exports=!1},c65b:function(t,e,r){var n=r("40d5"),i=Function.prototype.call;t.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},c6b6:function(t,e,r){var n=r("e330"),i=n({}.toString),a=n("".slice);t.exports=function(t){return a(i(t),8,-1)}},c6cd:function(t,e,r){var n=r("da84"),i=r("6374"),a="__core-js_shared__",o=n[a]||i(a,{});t.exports=o},c834:function(t,e,r){"use strict";function n(t,e,r,n){var i=65535&t|0,a=t>>>16&65535|0,o=0;while(0!==r){o=r>2e3?2e3:r,r-=o;do{i=i+e[n++]|0,a=a+i|0}while(--o);i%=65521,a%=65521}return i|a<<16|0}t.exports=n},c8ba:function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(n){"object"===typeof window&&(r=window)}t.exports=r},ca84:function(t,e,r){var n=r("e330"),i=r("1a2d"),a=r("fc6a"),o=r("4d64").indexOf,s=r("d012"),f=n([].push);t.exports=function(t,e){var r,n=a(t),u=0,c=[];for(r in n)!i(s,r)&&i(n,r)&&f(c,r);while(e.length>u)i(n,r=e[u++])&&(~o(c,r)||f(c,r));return c}},ca91:function(t,e,r){"use strict";var n=r("ebb5"),i=r("d58f").left,a=n.aTypedArray,o=n.exportTypedArrayMethod;o("reduce",(function(t){var e=arguments.length;return i(a(this),t,e,e>1?arguments[1]:void 0)}))},cb29:function(t,e,r){var n=r("23e7"),i=r("81d5"),a=r("44d2");n({target:"Array",proto:!0},{fill:i}),a("fill")},cb2d:function(t,e,r){var n=r("1626"),i=r("9bf2"),a=r("13d2"),o=r("6374");t.exports=function(t,e,r,s){s||(s={});var f=s.enumerable,u=void 0!==s.name?s.name:e;if(n(r)&&a(r,u,s),s.global)f?t[e]=r:o(e,r);else{try{s.unsafe?t[e]&&(f=!0):delete t[e]}catch(c){}f?t[e]=r:i.f(t,e,{value:r,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return t}},cc12:function(t,e,r){var n=r("da84"),i=r("861d"),a=n.document,o=i(a)&&i(a.createElement);t.exports=function(t){return o?a.createElement(t):{}}},cd26:function(t,e,r){"use strict";var n=r("ebb5"),i=n.aTypedArray,a=n.exportTypedArrayMethod,o=Math.floor;a("reverse",(function(){var t,e=this,r=i(e).length,n=o(r/2),a=0;while(a<n)t=e[a],e[a++]=e[--r],e[r]=t;return e}))},d012:function(t,e){t.exports={}},d039:function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},d066:function(t,e,r){var n=r("da84"),i=r("1626"),a=function(t){return i(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?a(n[t]):n[t]&&n[t][e]}},d139:function(t,e,r){"use strict";var n=r("ebb5"),i=r("b727").find,a=n.aTypedArray,o=n.exportTypedArrayMethod;o("find",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0)}))},d1e7:function(t,e,r){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,a=i&&!n.call({1:2},1);e.f=a?function(t){var e=i(this,t);return!!e&&e.enumerable}:n},d2bb:function(t,e,r){var n=r("e330"),i=r("825a"),a=r("3bbe");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{t=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),t(r,[]),e=r instanceof Array}catch(o){}return function(r,n){return i(r),a(n),e?t(r,n):r.__proto__=n,r}}():void 0)},d3b7:function(t,e,r){var n=r("00ee"),i=r("cb2d"),a=r("b041");n||i(Object.prototype,"toString",a,{unsafe:!0})},d44e:function(t,e,r){var n=r("9bf2").f,i=r("1a2d"),a=r("b622"),o=a("toStringTag");t.exports=function(t,e,r){t&&!r&&(t=t.prototype),t&&!i(t,o)&&n(t,o,{configurable:!0,value:e})}},d58f:function(t,e,r){var n=r("59ed"),i=r("7b0b"),a=r("44ad"),o=r("07fa"),s=TypeError,f=function(t){return function(e,r,f,u){n(r);var c=i(e),l=a(c),d=o(c),h=t?d-1:0,p=t?-1:1;if(f<2)while(1){if(h in l){u=l[h],h+=p;break}if(h+=p,t?h<0:d<=h)throw s("Reduce of empty array with no initial value")}for(;t?h>=0:d>h;h+=p)h in l&&(u=r(u,l[h],h,c));return u}};t.exports={left:f(!1),right:f(!0)}},d5d6:function(t,e,r){"use strict";var n=r("ebb5"),i=r("b727").forEach,a=n.aTypedArray,o=n.exportTypedArrayMethod;o("forEach",(function(t){i(a(this),t,arguments.length>1?arguments[1]:void 0)}))},d7ac:function(t,e,r){"use strict";var n=r("be7f").assign,i=r("4126"),a=r("717e"),o=r("2ceb"),s={};n(s,i,a,o),t.exports=s},d998:function(t,e,r){var n=r("342f");t.exports=/MSIE|Trident/.test(n)},d9b5:function(t,e,r){var n=r("d066"),i=r("1626"),a=r("3a9b"),o=r("fdbf"),s=Object;t.exports=o?function(t){return"symbol"==typeof t}:function(t){var e=n("Symbol");return i(e)&&a(e.prototype,s(t))}},da84:function(t,e,r){(function(e){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,r("c8ba"))},dc4a:function(t,e,r){var n=r("59ed");t.exports=function(t,e){var r=t[e];return null==r?void 0:n(r)}},df75:function(t,e,r){var n=r("ca84"),i=r("7839");t.exports=Object.keys||function(t){return n(t,i)}},dfb9:function(t,e,r){var n=r("07fa");t.exports=function(t,e){var r=0,i=n(e),a=new t(i);while(i>r)a[r]=e[r++];return a}},e163:function(t,e,r){var n=r("1a2d"),i=r("1626"),a=r("7b0b"),o=r("f772"),s=r("e177"),f=o("IE_PROTO"),u=Object,c=u.prototype;t.exports=s?u.getPrototypeOf:function(t){var e=a(t);if(n(e,f))return e[f];var r=e.constructor;return i(r)&&e instanceof r?r.prototype:e instanceof u?c:null}},e177:function(t,e,r){var n=r("d039");t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},e260:function(t,e,r){"use strict";var n=r("fc6a"),i=r("44d2"),a=r("3f8c"),o=r("69f3"),s=r("9bf2").f,f=r("7dd0"),u=r("c430"),c=r("83ab"),l="Array Iterator",d=o.set,h=o.getterFor(l);t.exports=f(Array,"Array",(function(t,e){d(this,{type:l,target:n(t),index:0,kind:e})}),(function(){var t=h(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values");var p=a.Arguments=a.Array;if(i("keys"),i("values"),i("entries"),!u&&c&&"values"!==p.name)try{s(p,"name",{value:"values"})}catch(v){}},e330:function(t,e,r){var n=r("40d5"),i=Function.prototype,a=i.bind,o=i.call,s=n&&a.bind(o,o);t.exports=n?function(t){return t&&s(t)}:function(t){return t&&function(){return o.apply(t,arguments)}}},e58c:function(t,e,r){"use strict";var n=r("2ba4"),i=r("fc6a"),a=r("5926"),o=r("07fa"),s=r("a640"),f=Math.min,u=[].lastIndexOf,c=!!u&&1/[1].lastIndexOf(1,-0)<0,l=s("lastIndexOf"),d=c||!l;t.exports=d?function(t){if(c)return n(u,this,arguments)||0;var e=i(this),r=o(e),s=r-1;for(arguments.length>1&&(s=f(s,a(arguments[1]))),s<0&&(s=r+s);s>=0;s--)if(s in e&&e[s]===t)return s||0;return-1}:u},e893:function(t,e,r){var n=r("1a2d"),i=r("56ef"),a=r("06cf"),o=r("9bf2");t.exports=function(t,e,r){for(var s=i(e),f=o.f,u=a.f,c=0;c<s.length;c++){var l=s[c];n(t,l)||r&&n(r,l)||f(t,l,u(e,l))}}},e8b5:function(t,e,r){var n=r("c6b6");t.exports=Array.isArray||function(t){return"Array"==n(t)}},e91f:function(t,e,r){"use strict";var n=r("ebb5"),i=r("4d64").indexOf,a=n.aTypedArray,o=n.exportTypedArrayMethod;o("indexOf",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0)}))},e95a:function(t,e,r){var n=r("b622"),i=r("3f8c"),a=n("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[a]===t)}},eac5:function(t,e,r){var n=r("861d"),i=Math.floor;t.exports=Number.isInteger||function(t){return!n(t)&&isFinite(t)&&i(t)===t}},ebb5:function(t,e,r){"use strict";var n,i,a,o=r("a981"),s=r("83ab"),f=r("da84"),u=r("1626"),c=r("861d"),l=r("1a2d"),d=r("f5df"),h=r("0d51"),p=r("9112"),v=r("cb2d"),b=r("9bf2").f,_=r("3a9b"),g=r("e163"),y=r("d2bb"),w=r("b622"),m=r("90e3"),x=r("69f3"),k=x.enforce,A=x.get,T=f.Int8Array,S=T&&T.prototype,z=f.Uint8ClampedArray,E=z&&z.prototype,I=T&&g(T),O=S&&g(S),U=Object.prototype,R=f.TypeError,B=w("toStringTag"),M=m("TYPED_ARRAY_TAG"),C="TypedArrayConstructor",j=o&&!!y&&"Opera"!==d(f.opera),P=!1,L={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},N={BigInt64Array:8,BigUint64Array:8},D=function(t){if(!c(t))return!1;var e=d(t);return"DataView"===e||l(L,e)||l(N,e)},F=function(t){var e=g(t);if(c(e)){var r=A(e);return r&&l(r,C)?r[C]:F(e)}},Z=function(t){if(!c(t))return!1;var e=d(t);return l(L,e)||l(N,e)},H=function(t){if(Z(t))return t;throw R("Target is not a typed array")},G=function(t){if(u(t)&&(!y||_(I,t)))return t;throw R(h(t)+" is not a typed array constructor")},q=function(t,e,r,n){if(s){if(r)for(var i in L){var a=f[i];if(a&&l(a.prototype,t))try{delete a.prototype[t]}catch(o){try{a.prototype[t]=e}catch(u){}}}O[t]&&!r||v(O,t,r?e:j&&S[t]||e,n)}},Y=function(t,e,r){var n,i;if(s){if(y){if(r)for(n in L)if(i=f[n],i&&l(i,t))try{delete i[t]}catch(a){}if(I[t]&&!r)return;try{return v(I,t,r?e:j&&I[t]||e)}catch(a){}}for(n in L)i=f[n],!i||i[t]&&!r||v(i,t,e)}};for(n in L)i=f[n],a=i&&i.prototype,a?k(a)[C]=i:j=!1;for(n in N)i=f[n],a=i&&i.prototype,a&&(k(a)[C]=i);if((!j||!u(I)||I===Function.prototype)&&(I=function(){throw R("Incorrect invocation")},j))for(n in L)f[n]&&y(f[n],I);if((!j||!O||O===U)&&(O=I.prototype,j))for(n in L)f[n]&&y(f[n].prototype,O);if(j&&g(E)!==O&&y(E,O),s&&!l(O,B))for(n in P=!0,b(O,B,{get:function(){return c(this)?this[M]:void 0}}),L)f[n]&&p(f[n],M,n);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:j,TYPED_ARRAY_TAG:P&&M,aTypedArray:H,aTypedArrayConstructor:G,exportTypedArrayMethod:q,exportTypedArrayStaticMethod:Y,getTypedArrayConstructor:F,isView:D,isTypedArray:Z,TypedArray:I,TypedArrayPrototype:O}},eeda:function(t,e,r){"use strict";function n(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}var i=n();function a(t,e,r,n){var a=i,o=n+r;t^=-1;for(var s=n;s<o;s++)t=t>>>8^a[255&(t^e[s])];return-1^t}t.exports=a},f36a:function(t,e,r){var n=r("e330");t.exports=n([].slice)},f495:function(t,e,r){var n=r("c04e"),i=TypeError;t.exports=function(t){var e=n(t,"number");if("number"==typeof e)throw i("Can\'t convert number to bigint");return BigInt(e)}},f5df:function(t,e,r){var n=r("00ee"),i=r("1626"),a=r("c6b6"),o=r("b622"),s=o("toStringTag"),f=Object,u="Arguments"==a(function(){return arguments}()),c=function(t,e){try{return t[e]}catch(r){}};t.exports=n?a:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=c(e=f(t),s))?r:u?a(e):"Object"==(n=a(e))&&i(e.callee)?"Arguments":n}},f772:function(t,e,r){var n=r("5692"),i=r("90e3"),a=n("keys");t.exports=function(t){return a[t]||(a[t]=i(t))}},f8cd:function(t,e,r){var n=r("5926"),i=RangeError;t.exports=function(t){var e=n(t);if(e<0)throw i("The argument can\'t be less than 0");return e}},fa9e:function(t,e,r){r("986a")},fb2c:function(t,e,r){var n=r("74e8");n("Uint32",(function(t){return function(e,r,n){return t(this,e,r,n)}}))},fb6a:function(t,e,r){"use strict";var n=r("23e7"),i=r("e8b5"),a=r("68ee"),o=r("861d"),s=r("23cb"),f=r("07fa"),u=r("fc6a"),c=r("8418"),l=r("b622"),d=r("1dde"),h=r("f36a"),p=d("slice"),v=l("species"),b=Array,_=Math.max;n({target:"Array",proto:!0,forced:!p},{slice:function(t,e){var r,n,l,d=u(this),p=f(d),g=s(t,p),y=s(void 0===e?p:e,p);if(i(d)&&(r=d.constructor,a(r)&&(r===b||i(r.prototype))?r=void 0:o(r)&&(r=r[v],null===r&&(r=void 0)),r===b||void 0===r))return h(d,g,y);for(n=new(void 0===r?b:r)(_(y-g,0)),l=0;g<y;g++,l++)g in d&&c(n,l,d[g]);return n.length=l,n}})},fc6a:function(t,e,r){var n=r("44ad"),i=r("1d80");t.exports=function(t){return n(i(t))}},fdbf:function(t,e,r){var n=r("4930");t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator}});',"Worker",void 0,n.p+"js/gif-apng.worker.e62ae2a1.worker.js")}var v=n("49bc"),b=n("f49e"),y=Object(d["f"])(),w=function(t,e){return t>1600||e>1600?y?15:30:t>1e3||e>1e3?y?20:40:t>700||e>700?y?40:70:y?40:100};function _(t,e){var n=[];return t.forEach((function(t){var i;Array.isArray(t)?(t.some((function(t){var n=t.startTime;return n>e||n<=e&&(i=t,!1)})),n.push(Object(o["a"])({},i))):n.push(t)})),n}function x(t,e){return k.apply(this,arguments)}function k(){return k=Object(a["a"])(Object(i["a"])().mark((function t(e,n){var r,a,o,s,c,d,h,f;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.width,a=e.height,o=e.imageTransform,s=e.naturalWidth,c=e.naturalHeight,d=e.$imageWidth,h=e.$imageHeight,e.width!==d||e.height!==h||!Object(l["isEqual"])(e.imageTransform.toJSON(),v["a"].element.transform)){t.next=3;break}return t.abrupt("return",n);case 3:if(!e.mask){t.next=9;break}return t.next=6,b["a"].loadImage(e.mask);case 6:t.t0=t.sent,t.next=10;break;case 9:t.t0=null;case 10:return f=t.t0,t.abrupt("return",Object(u["f"])({canvas:Object(u["b"])(r,a),image:n,mask:f,width:r,height:a,naturalWidth:s,naturalHeight:c,imageTransformArray:o.toArray(),blendMode:f?"source-in":"source-over",imageSmoothingEnabled:!1}));case 12:case"end":return t.stop()}}),t)}))),k.apply(this,arguments)}function E(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.canvasWidth,i=e.canvasHeight,a=t.filter(Array.isArray);if(!a.length)return t;var s=a.map((function(t){var e=0,n=t.reduce((function(t,n){return n.i=e,e++,t+n.delay}),0);return n})),c=Math.max.apply(Math,Object(r["a"])(s));s.forEach((function(t,e){for(var n=a[e].slice(),i=Math.ceil(c/t),s=1;s<i;s++){var l,u=n.map((function(t){return Object(o["a"])({},t)}));(l=a[e]).push.apply(l,Object(r["a"])(u))}}));var u=[];a.forEach((function(t){t.reduce((function(t,e){return e.startTime=t,t>=c||u.push(t),t+e.delay}),0)})),u=Object(l["uniq"])(u).sort((function(t,e){return t-e}));var d=[];u.forEach((function(e,n){var i=void 0===u[n+1]?c:u[n+1],r=_(t,e),a=Math.max(30,i-e);r.forEach((function(t){void 0!==t.delay&&(t.delay=a)})),d.push(r)}));var h=w(n,i);return h-d.length<0?C(d,h-d.length):d}function O(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.decode,r=e.canvasWidth,o=e.canvasHeight,s=e.lazy,l=void 0!==s&&s;if("video"===t.type)return j(t,{canvasWidth:r,canvasHeight:o});var d=w(r,o);return c.a.try((function(){return n?n(t):P(t,{needBuffer:!0})})).then(function(){var e=Object(a["a"])(Object(i["a"])().mark((function e(n){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return d-n.frames.length<0&&(n.frames=C(n.frames,d-n.frames.length)),e.abrupt("return",c.a.map(n.frames,function(){var e=Object(a["a"])(Object(i["a"])().mark((function e(r,o){var s;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=function(){var e=Object(a["a"])(Object(i["a"])().mark((function e(){var a,s,c,l,d,h,f;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Object(u["b"])(n.width,n.height),s=a.getContext("2d"),c=s.createImageData(n.width,n.height),r.buffer?(l=new Uint8Array(r.buffer),c.data.set(l),s.putImageData(c,0,0),0!==o&&0===r.delay&&(r.delay=10)):r.image&&s.drawImage(r.image,0,0),e.next=6,x(t,a);case 6:if(d=e.sent,d!==a&&Object(u["a"])(a),d.width!==Math.round(t.width)||d.height!==Math.round(t.height)){e.next=10;break}return e.abrupt("return",d);case 10:return h=Object(u["b"])(t.width,t.height),f=h.getContext("2d"),f.drawImage(d,0,0,t.width,t.height),Object(u["a"])(d),e.abrupt("return",h);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.t0=t.isGif?10*r.delay:r.delay,!l){e.next=6;break}e.t1=function(){return s()},e.next=9;break;case 6:return e.next=8,s();case 8:e.t1=e.sent;case 9:return e.t2=e.t1,e.abrupt("return",{delay:e.t0,canvas:e.t2});case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function S(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.time,n=t.video,i=t.width,r=t.height;return n.currentTime=e,new c.a((function(t){n.ontimeupdate=t})).then((function(){i=i||n.videoWidth,r=r||n.videoHeight;var t=Object(u["b"])(i,r),e=t.getContext("2d");return e.drawImage(n,0,0,i,r),t}))}function j(t){return I.apply(this,arguments)}function I(){return I=Object(a["a"])(Object(i["a"])().mark((function t(e){var n,r,a,o,s,l,u,d,h,f,m,g,p=arguments;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(n=p.length>1&&void 0!==p[1]?p[1]:{},r=n.canvasWidth,a=n.canvasHeight,o=w(r,a),s=e.naturalDuration,l=e.url,u=100,d=[],h=0,f=0;f<s/u;f++)d.push({delay:(f+1)*u>s?s%100:u,currentTime:h}),h+=u;return o-d.length<0&&(d=C(d,o-d.length)),t.next=10,b["a"]._loadVideo(l);case 10:return m=t.sent,g=m.videoWidth*m.videoHeight<e.$imageWidth*e.$imageHeight,t.next=14,c.a.mapSeries(d,(function(t){return S({time:t.currentTime/1e3,video:m,width:g?m.videoWidth:e.$imageWidth,height:g?m.videoHeight:e.$imageHeight}).then((function(t){return x(e,t)})).then((function(e){return t.canvas=e,t}))}));case 14:return d=t.sent,t.abrupt("return",d);case 16:case"end":return t.stop()}}),t)}))),I.apply(this,arguments)}function A(t){return T.apply(this,arguments)}function T(){return T=Object(a["a"])(Object(i["a"])().mark((function t(e){var n,r;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return n=t.sent,t.next=5,n.arrayBuffer();case 5:return r=t.sent,t.abrupt("return",new Uint8Array(r));case 7:case"end":return t.stop()}}),t)}))),T.apply(this,arguments)}function C(t,e){t=t.slice();for(var n=t.length-2,i=Math.abs(e),r=[],a=0;a<i;a++){var o=Math.round((a+1)*n/i);r.push(o)}if(e<0){var s=0;r.reverse().forEach((function(e){var n=t[e];s+=void 0!==n.delay?n.delay:t[e][0].delay,t.splice(e,1)}));var c=Math.round(s/t.length);t.forEach((function(t){Array.isArray(t)||void 0===t.delay?Array.isArray(t)&&t.forEach((function(t){void 0!==t.delay&&(t.delay+=c)})):t.delay+=c}))}else e>0&&r.reverse().forEach((function(e){t.splice(e,0,t[e])}));return t}function P(t){return $.apply(this,arguments)}function $(){return $=Object(a["a"])(Object(i["a"])().mark((function t(e){var n,r,a,o,s,c,l,u,d=arguments;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:{},r=n.needBuffer,t.next=3,A(e.url);case 3:return a=t.sent,o={},s=new p,c={type:e.isGif?"gif":"apng",buffer:a,needBuffer:r},t.prev=7,t.next=10,f("decodeGifOrApng",c,s);case 10:o=t.sent,t.next=18;break;case 13:return t.prev=13,t.t0=t["catch"](7),t.next=17,b["a"].loadImage(e.url).then((function(t){o.width=t.width,o.height=t.height,o.frames=[{image:t}]}));case 17:console.error(t.t0);case 18:return s.terminate(),l=0,u=e.isApng?100:10,o.frames.forEach((function(t){t.delay=t.delay||u,l+=t.delay})),o.duration=e.isGif?10*l:l,t.abrupt("return",o);case 24:case"end":return t.stop()}}),t,null,[[7,13]])}))),$.apply(this,arguments)}},ac5f:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s}));var i=n("f49e"),r=n("e156");function a(t,e){return t<=300&&Math.abs(1-t/e)<.2}function o(t,e,n){var i=a(t,e),r=n.watermarkImages[i?"layoutNoRepeat":"layoutRepeat"];return r}function s(t,e,n){var s=t.width,c=t.height,l=a(s,c),u=o(s,c,n);return i["a"].loadImage(u).then((function(t){if(l){var n=Math.max(s/t.width,c/t.height),i=t.width*n,a=t.height*n;e.drawImage(t,(s-i)/2,(c-a)/2,i,a)}else{var o=Object(r["d"])(t,{width:s,height:c,ratio:1});e.drawImage(o,0,0)}}))}},ac98:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return o}));var i=n("d4ec"),r=n("bee2"),a=(n("d3b7"),n("d9e2"),function(){function t(){var e=this;Object(i["a"])(this,t),this.isOpened=!1,this.promise=new Promise((function(t){e.completePromise=t}))}return Object(r["a"])(t,[{key:"isOpen",value:function(){return this.isOpened}},{key:"open",value:function(){this.isOpened=!0,this.completePromise(!0)}},{key:"wait",value:function(){return this.promise}}]),t}());function o(t,e){return new Promise((function(n,i){setTimeout((function(){i(new Error(e))}),t)}))}},aef4:function(t,e,n){"use strict";n("d3b7"),n("25f0");var i=n("c9b4"),r=n("5eea"),a=n("a615"),o=n.n(a);e["a"]=Object(i["a"])(r["a"],{name:"background-mosaic-path-element",template:o.a,data:function(){return{}},computed:{cssStyle:function(){var t=this.rect,e=this.transform.toString();return{height:t.height+"px",width:t.width+"px",transform:e,left:t.left+"px",top:t.top+"px",opacity:this.opacity}}}})},af9f:function(t,e,n){"use strict";n.d(e,"c",(function(){return m["b"]})),n.d(e,"b",(function(){return E["a"]}));var i=n("2ef0"),r=n("2032"),a=n("31c5"),o=n("f49e"),s=n("7aca"),c=n("cd8b"),l=n("c7eb"),u=n("1da1"),d=(n("ac1f"),n("466d"),n("d9e2"),n("fb6a"),n("81b2"),n("0eb6"),n("b7ef"),n("8bd4"),n("c19f"),n("ace4"),n("d3b7"),n("5cc6"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("fa9e"),n("77d9"),/^data:((.*?)(;charset=.*?)?)(;base64)?,/),h=/^blob:/,f={dataurlToBlob:function(t){var e=t.match(d);if(!e)throw new Error("invalid data URI");for(var n=e[2]?e[1]:"text/plain"+(e[3]||";charset=US-ASCII"),i=!!e[4],r=t.slice(e[0].length),a=i?atob(r):decodeURIComponent(r),o=a.length,s=new ArrayBuffer(o),c=new Uint8Array(s),l=0;l<o;l+=1)c[l]=a.charCodeAt(l);return new Blob([c],{type:n})},bloburlToBlob:function(t){return Object(u["a"])(Object(l["a"])().mark((function e(){var n,i;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.match(h),n){e.next=3;break}throw new Error("invalid blob URI");case 3:return e.next=5,fetch(t);case 5:return i=e.sent,e.abrupt("return",i.blob());case 7:case"end":return e.stop()}}),e)})))()}},m=n("38ac"),g=n("925e"),p=(n("00b4"),n("f4d5")),v={contains:function(t,e){return!(!t||!e)&&(t instanceof p["a"]&&(t=t[0]),e instanceof p["a"]&&(e=e[0]),!(t!==e&&!p["a"].contains(t,e)))},isContentEditable:function(t){var e=t;while(e){var n=e.contentEditable+"";if("true"===n)return!0;e=e.parentNode}return!1},isEditable:function(t){var e=t.nodeName,n=/(?:input|textarea)/i;return!(!this.isContentEditable(t)&&!n.test(e))}},b=(n("a434"),Object(p["a"])(document)),y=[],w={queue:y,add:function(t){if(t=Object(i["assign"])({callback:i["noop"],delay:!0,element:null},t),!t.element)throw new Error("No options.element");var e=!1;return t.delay?setTimeout((function(){e||y.push(t)}),+t.delay||16):y.push(t),w.initEvent(),function(){w.remove(t),e=!0}},remove:function(t){var e=y.lastIndexOf(t);e>-1&&y.splice(e,1),y.length||w.resetEvent()},checkTask:function(t,e){var n=t.element;v.contains(n,e.target)||t.callback(e)},check:function(t){Object(i["forEachRight"])(y,(function(e){w.checkTask(e,t)}))},initEvent:function(){w.bound||(w.bound=!0,b.on("click.editor-out-click",w.check))},resetEvent:function(){w.bound&&(b.off("click.editor-out-click"),w.bound=!1)}},_={outClick:w,addOutClick:function(t){return w.add(t)}},x=(n("159b"),n("4e82"),n("4de4"),n("13d5"),n("d81d"),{alignmentTop:function(t,e){t.forEach((function(t){t.element.top+=e.top-t.rect.top}))},alignmentMiddle:function(t,e){t.forEach((function(t){t.element.top+=e.middle-t.rect.middle}))},alignmentBottom:function(t,e){t.forEach((function(t){t.element.top+=e.bottom-t.rect.bottom}))},alignmentLeft:function(t,e){t.forEach((function(t){t.element.left+=e.left-t.rect.left}))},alignmentCenter:function(t,e){t.forEach((function(t){t.element.left+=e.center-t.rect.center}))},alignmentRight:function(t,e){t.forEach((function(t){t.element.left+=e.right-t.rect.right}))},distributionTop:function(t,e){t.sort((function(t,e){return t.rect.top-e.rect.top}));var n=t.length-1,i=(t[n].rect.top-t[0].rect.top)/n;t.forEach((function(t,n){t.element.top+=e.top+n*i-t.rect.top}))},distributionMiddle:function(t){var e=t.length;if(!(e<3)){var n,i,r=1/0,a=-1/0;t.forEach((function(t){t.rect.top<r&&(r=t.rect.top,n=t),t.rect.bottom>a&&(a=t.rect.bottom,i=t)})),t=t.filter((function(t){return t!==n&&t!==i})).sort((function(t,e){return t.rect.top+t.rect.height/2-(e.rect.top+e.rect.height/2)}));var o=n.rect.bottom,s=i.rect.top,c=n===i,l=c?Math.abs(s-o):s-o,u=t.reduce((function(t,e){return t+e.rect.height}),0),d=c&&l-u<0,h=(l-u)/(t.length+1);t.reduce((function(t,e){return e.element.top+=t-e.rect.top,t+e.rect.height+h}),d?n.rect.top:c?n.rect.top+h:n.rect.top+n.rect.height+h)}},distributionBottom:function(t){t.sort((function(t,e){return t.rect.bottom-e.rect.bottom}));var e=t.length-1,n=(t[e].rect.bottom-t[0].rect.bottom)/e;t.forEach((function(e,i){e.element.top+=t[0].rect.bottom+i*n-e.rect.bottom}))},distributionLeft:function(t,e){t.sort((function(t,e){return t.rect.left-e.rect.left}));var n=t.length-1,i=(t[n].rect.left-t[0].rect.left)/n;t.forEach((function(t,n){t.element.left+=e.left+n*i-t.rect.left}))},distributionCenter:function(t){var e=t.length;if(!(e<3)){var n,i,r=1/0,a=-1/0;t.forEach((function(t){t.rect.left<r&&(r=t.rect.left,n=t),t.rect.right>a&&(a=t.rect.right,i=t)})),t=t.filter((function(t){return t!==n&&t!==i})).sort((function(t,e){return t.rect.left+t.rect.width/2-(e.rect.left+e.rect.width/2)}));var o=n.rect.right,s=i.rect.left,c=n===i,l=c?Math.abs(s-o):s-o,u=t.reduce((function(t,e){return t+e.rect.width}),0),d=c&&l-u<0,h=(l-u)/(t.length+(d?-1:1));t.reduce((function(t,e){return e.element.left+=t-e.rect.left,t+e.rect.width+h}),d?n.rect.left:c?n.rect.left+h:n.rect.left+n.rect.width+h)}},distributionRight:function(t){t.sort((function(t,e){return t.rect.right-e.rect.right}));var e=t.length-1,n=(t[e].rect.right-t[0].rect.right)/e;t.forEach((function(e,i){e.element.left+=t[0].rect.right+i*n-e.rect.right}))}}),k={alignment:function(t,e){var n=this,i=e.map((function(t){return{element:t,rect:n.getBBoxByElement(t)}})),r=i.reduce((function(t,e){var n=e.rect;n.right=n.left+n.width,n.bottom=n.top+n.height,n.center=n.left+n.width/2,n.middle=n.top+n.height/2;var i=Math.min(t.top,n.top),r=Math.min(t.left,n.left),a=Math.max(t.left+t.width,n.right),o=Math.max(t.top+t.height,n.bottom);return{top:i,left:r,right:a,bottom:o,width:a-r,height:o-i,center:(r+a)/2,middle:(i+o)/2}}),i[0].rect),a=x[t];a&&a(i,r)}},E=n("eb3b"),O={mergeTransform:function(t,e){var n={left:e.left,top:e.top,transform:e.transform},i={x:e.left+e.width/2,y:e.top+e.height/2},a=t.transform,o=s["a"].getPointPosition(i,{x:t.width/2,y:t.height/2},r["a"].radToDeg(a.rotation)),c=o.x-i.x,l=o.y-i.y;n.left=e.left+t.left+c,n.top=e.top+t.top+l;var u=e.parseTransform(e.transform);return u.rotation+=t.transform.rotation,n.transform=u,n}},S=Object(i["assign"])({},r["a"],_,a["a"],o["a"],s["a"],v,k,c["a"],f,g["a"],O);e["a"]=S},b11d:function(t,e,n){"use strict";n("3d6e")},b156:function(t,e,n){"use strict";n.r(e),n.d(e,"ENV",(function(){return k})),n.d(e,"GAODING_OAUTH2_ENV",(function(){return E})),n.d(e,"ENVIRONMENT",(function(){return O})),n.d(e,"IS_SHARE_PAGE",(function(){return S})),n.d(e,"IS_PREVIEW_PAGE",(function(){return j})),n.d(e,"IS_PUBLISH_PAGE",(function(){return I})),n.d(e,"IS_MIRROR_PAGE",(function(){return A})),n.d(e,"PUBLISH_ORIGIN",(function(){return T})),n.d(e,"GAODING_ORIGIN",(function(){return C})),n.d(e,"UXMS_ORIGIN",(function(){return P})),n.d(e,"UMS_ORIGIN",(function(){return $})),n.d(e,"ODYSSEY_ORIGIN",(function(){return M})),n.d(e,"HLGDATA2_ORIGIN",(function(){return R})),n.d(e,"ANALYTICS_ORGIN",(function(){return L})),n.d(e,"ODYSSEY_DATA_TRACKER",(function(){return U})),n.d(e,"CMS_ORGIN",(function(){return z})),n.d(e,"URL_PROXY_ORIGIN",(function(){return D})),n.d(e,"LEADERBOARD_ORGIN",(function(){return B})),n.d(e,"LEADERBOARD_INSTANCE_URL",(function(){return N})),n.d(e,"MIN_LAYOUT_HEIGHT",(function(){return F})),n.d(e,"MAX_LAYOUT_HEIGHT",(function(){return H})),n.d(e,"IS_MAC",(function(){return V})),n.d(e,"MAX_UPLOAD_SIZE",(function(){return G})),n.d(e,"ALLOW_IMAGE_TYPES",(function(){return W})),n.d(e,"OSS_DOMAIN",(function(){return Y})),n.d(e,"OSS_ORIGIN_HOST",(function(){return q})),n.d(e,"OSS_CDN_HOST",(function(){return X})),n.d(e,"ICON_FONT_URL",(function(){return Z})),n.d(e,"ODYSSEY_PLATFORM_VALUES",(function(){return K})),n.d(e,"SHOT_DELAY",(function(){return J})),n.d(e,"CMC_CD_ORG_ID",(function(){return Q})),n.d(e,"CMC_CD_ORG_CODE",(function(){return tt})),n.d(e,"QINGZHAN_ORIGIN",(function(){return et})),n.d(e,"QINGZHAN_DESIGN",(function(){return nt})),n.d(e,"QINGZHAN_PERSONAL",(function(){return it})),n.d(e,"CNAME",(function(){return rt})),n.d(e,"QINGZHAN_HOST",(function(){return at})),n.d(e,"IS_KA_PROJECT",(function(){return ot}));n("caad"),n("2532"),n("d3b7"),n("3ca3"),n("ddb0"),n("9861"),n("ac1f"),n("841c"),n("1276"),n("00b4");var i,r=window.location,a=r.origin,o=r.hostname,s=r.pathname,c=(r.search,null===(i="g.h5gdsvip.com|g.gd-share.cn|g.h5gd.com|g.h5gdvip.com|g1.h5gdvip.com")||void 0===i?void 0:i.split("|")),l=/^g(\d|-\w+)?\.gd-share\.cn$/.test(o),u=/^p(-\w+)?\.gd-share\.cn$/.test(o),d=/^\w+\.my(-\w+)?\.qingzhan\.com$/.test(o),h=/^\w+\.preview(-\w+)?\.qingzhan\.com$/.test(o),f=/odyssey\/p\/\w+$/.test(s),m=/mirror$/.test(s),g=null===c||void 0===c?void 0:c.includes(o),p=l||f||d||g,v=u||h||g,b=p||v||g,y=function(){return f?"".concat(a,"/odyssey"):a}(),w={IS_MIRROR_PAGE:m,IS_SHARE_PAGE:p,IS_PREVIEW_PAGE:v,IS_PUBLISH_PAGE:b,PUBLISH_ORIGIN:y},_={dev:"cname.my-dev.qingzhan.com",stage:"cname.my-stage.qingzhan.com",fat:"cname.my-fat.qingzhan.com",prod:"cname.my.qingzhan.com"},x={dev:".my-dev.qingzhan.com",stage:".my-stage.qingzhan.com",fat:".my-fat.qingzhan.com",prod:".my.qingzhan.com"},k="prod",E=k,O=k,S=w.IS_SHARE_PAGE,j=w.IS_PREVIEW_PAGE,I=w.IS_PUBLISH_PAGE,A=w.IS_MIRROR_PAGE,T=w.PUBLISH_ORIGIN,C="https://www.gaoding.com",P="https://uxms.gaoding.com",$="https://ums.gaoding.com",M="".concat("https://www.gaoding.com","/odyssey"),R="https://search-v2.hlgdata.com",L="https://odyssey-analytics.gaoding.com/",U="https://data-think-tank.gaoding.com",z="https://odyssey-cms.gaoding.com",D="".concat(z,"/redirect"),B="https://odyssey-game.gaoding.com/",N="https://leaderboard-code.my.gd-share.cn/",F=16,H=12e3,V=navigator.platform.includes("Mac"),G=12582912,W=["jpeg","png","gif"],Y="https://st-gdx.dancf.com/",q="https://dancf-st-gdx.oss-cn-hangzhou.aliyuncs.com",X="st-gdx.dancf.com",Z={design:"//at.alicdn.com/t/font_1157467_67vnqryqvjn.js",mirror:"//at.alicdn.com/t/font_1231213_jilyox6udeg.js",publish:"//at.alicdn.com/t/font_1231213_gbhmhi9jtn.js"},K={user:1,uxms:2,gaodingx:3,company:4},J=6e4,Q="8012556623856798766",tt="mcm79j",et="https://www.qingzhan.com",nt="".concat(et,"/design"),it="".concat(et,"/workbench"),rt=_[k],at=x[k],ot="ka"===new URLSearchParams(window.location.search).get("from")},b354:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n("d4ec"),r=n("bee2"),a=n("262e"),o=n("2caf"),s=(n("d3b7"),n("3ca3"),n("ddb0"),n("8541")),c=n("af9f"),l=function(t){Object(a["a"])(n,t);var e=Object(o["a"])(n);function n(t){var r=t.model,a=t.editor,o=t.canvas,s=t.hooks;return Object(i["a"])(this,n),e.call(this,{model:r,editor:a,canvas:o,hooks:s})}return Object(r["a"])(n,[{key:"load",value:function(){var t=this.model,e=this.options,n=t.invertPlay?t.naturalDuration-t.endTime:t.startTime;return Promise.all([t.url?c["a"].loadVideo(t.url,(n||0)/1e3,e.fitCrossOrigin):null,t.mask?c["a"].loadImage(t.mask,e.fitCrossOrigin):null])}}]),n}(s["a"])},b494:function(t,e,n){"use strict";n.d(e,"b",(function(){return u}));n("bf19"),n("d3b7"),n("25f0"),n("d81d"),n("b680"),n("ac1f"),n("5319"),n("a15b");var i=n("2ef0"),r=n("e86a"),a=n("89eb");function o(t,e,n){this._x=e||0,this._y=n||0,this.cb=t}Object.defineProperties(o.prototype,{x:{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb())}},y:{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb())}}}),o.prototype.set=function(t,e){var n=t||0,i=e||(0!==e?n:0);this._x===n&&this._y===i||(this._x=n,this._y=i,this.cb())},o.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb())};var s=o,c=(n("7aca"),n("2032"));function l(){this._worldID=0,this.localTransform=new r["a"],this.position=new a["a"](0),this.scale=new a["a"](1,1),this.skew=new s(this.updateSkew.bind(this),0,0),this.pivot=new a["a"](0),this._rotation=0,this._sr=Math.sin(0),this._cr=Math.cos(0),this._cy=Math.cos(0),this._sy=Math.sin(0),this._nsx=Math.sin(0),this._cx=Math.cos(0)}function u(t){var e=new l;if(t=t||{a:1,b:0,c:0,d:1,tx:0,ty:0},t.localTransform)e=Object(i["cloneDeep"])(t);else{var n=new r["a"];n.copy.call(t,n),n.decompose(e)}return e}l.prototype.updateSkew=function(){this._nsx=Math.tan(this.skew.x),this._sy=Math.tan(this.skew.y)},l.prototype.updateLocalTransform=function(){var t=this.localTransform,e=this._cr*this.scale.x,n=this._sr*this.scale.x,i=-this._sr*this.scale.y,r=this._cr*this.scale.y;t.a=this._cy*e+this._sy*i,t.b=this._cy*n+this._sy*r,t.c=this._nsx*e+this._cx*i,t.d=this._nsx*n+this._cx*r,t.tx=this.position.x,t.ty=this.position.y},l.prototype.updateTransform=function(){},l.prototype.setFromMatrix=function(t){t.decompose(this)},Object.defineProperties(l.prototype,{rotation:{get:function(){return this._rotation},set:function(t){this._rotation=t,this._sr=Math.sin(t),this._cr=Math.cos(t)}},rotate:{get:function(){return c["a"].radToDeg(this.rotation)},set:function(t){this.rotation=c["a"].degToRad(t)}}}),l.prototype.toJSON=function(){return this.updateLocalTransform(),Object(i["pick"])(this.localTransform,["a","b","c","d","tx","ty"])},l.prototype.toArray=function(){this.updateLocalTransform();var t=this.localTransform;return[t.a,t.b,t.c,t.d,t.tx,t.ty]},l.prototype.toString=function(){var t=/\.?0+$/,e=this.toArray();return e=e.map((function(e){return e=e.toFixed(20),e.replace(t,"")})),"matrix("+e.join(", ")+")"};e["a"]=l},b4b5:function(t,e,n){},b6aa:function(t,e,n){"use strict";n("d3b7"),n("159b"),n("25f0"),n("99af");var i=n("66cb"),r=n.n(i),a=n("af9f"),o=n("5f2b"),s=n.n(o);e["a"]={name:"global-background",template:s.a,props:["layout","globalLayout","global","options","selected","mode","editor"],computed:{layoutSize:function(){var t=this.mode,e=this.editor,n=this.global,i=this.layout;if(!e)return{width:0,height:0};var r=n.mode||t;if("design"===r)return{width:i.width,height:i.height};var a=0,o=0,s=0;return e.layouts.forEach((function(t){a+=t.height,t.height>o&&(o=t.height),t.width>s&&(s=t.width)})),{height:a,width:s}},isRepeat:function(){var t;return(null===(t=this.globalLayout)||void 0===t?void 0:t.backgroundRepeat)&&"no-repeat"!==this.globalLayout.backgroundRepeat},imageUrl:function(){var t;return null!==(t=this.globalLayout)&&void 0!==t&&t.backgroundImage?a["a"].getComputedUrl(this.globalLayout.backgroundImage,this.options.fitCrossOrigin):""},backgroundImageInfo:function(){var t;return(null===(t=this.globalLayout)||void 0===t?void 0:t.backgroundImageInfo)||{transform:{a:1,b:0,c:0,d:1,tx:0,ty:0},opacity:1}},backgroundSize:function(){var t;return(null===(t=this.globalLayout)||void 0===t?void 0:t.backgroundSize)||[0,0]},layoutBackgroundColor:function(){var t,e=null===(t=this.globalLayout)||void 0===t?void 0:t.backgroundColor;return e?r()(e).toString("rgb"):"transparent"},transform:function(){var t=this.backgroundImageInfo.transform,e=t.a,n=t.b,i=t.c,r=t.d;return"matrix(".concat(e,",").concat(n,",").concat(i,",").concat(r,",",0,",",0,")")},cssStyle:function(){var t=this.mode,e=this.editor,n=this.layout,i=this.layoutSize,r=this.layoutBackgroundColor,a=this.options.hiddenGlobalBackground,o=void 0!==a&&a,s=this.global,c=s.mode||t,l=0;"flow"===c&&e.layouts.some((function(t){return t===n||(l+=t.height,!1)}));var u={position:"relative",top:"".concat(-l*s.zoom,"px"),width:"".concat(i.width*s.zoom,"px"),height:"".concat(i.height*s.zoom,"px"),backgroundColor:r,display:o?"none":"block"};return u},mainStyle:function(){var t=this.backgroundImageInfo,e=this.backgroundSize,n=this.globalLayout,i=this.global.zoom,r=void 0===i?1:i;return this.isRepeat?{backgroundRepeat:null===n||void 0===n?void 0:n.backgroundRepeat,backgroundSize:"".concat(e[0]*r,"px ").concat(e[1]*r,"px"),backgroundPosition:"".concat(t.transform.tx*r,"px ").concat(t.transform.ty*r,"px"),backgroundImage:null!==n&&void 0!==n&&n.backgroundImage?"url(".concat(n.backgroundImage,")"):null,opacity:t.opacity,transform:this.transform}:{transform:this.transform}},imageStyle:function(){var t=this.backgroundImageInfo,e=this.backgroundSize,n=this.global.zoom,i=void 0===n?1:n;return{width:"".concat(e[0]*i,"px"),height:"".concat(e[1]*i,"px"),left:"".concat(t.transform.tx*i,"px"),top:"".concat(t.transform.ty*i,"px"),opacity:1}}},watch:{imageUrl:function(){this.checkLoad()},layoutSize:function(){this.globalLayout&&this.syncHeight()}},events:{"base.click":function(t){this.onClick(t)}},created:function(){this.checkLoad(),this.forceUpdateLoad()},methods:{forceUpdateLoad:function(){var t=this,e=this.editor;setTimeout((function(){e.global.$backgroundLoaded&&e.global.$loaded||(t.$set(e.global,"$loaded",!0),t.$set(e.global,"$backgroundLoaded",!0))}),1e4)},checkLoad:function(){var t=this.options,e=this.mode,n=this.editor,i=t.fitCrossOrigin,r=t.hiddenGlobalBackground,o=void 0!==r&&r,s=a["a"].loadImage,c=!o&&this.imageUrl?s(this.imageUrl,i):Promise.resolve();return this.$set(n.global,"$backgroundLoaded",!1),c=c.then((function(){var t="mirror"===e?120:0;setTimeout((function(){n.checkTempletLoaded(),n.global.$backgroundLoaded=!0}),t)})),c},syncHeight:function(){var t=this.mode,e=this.layoutSize,n=this.globalLayout;if(Math.abs(e.width-n.width)>2||Math.abs(e.height-n.height)>2){var i=n.backgroundSize;if(i&&i[0]){var r=Math.max(e.width/i[0],e.height/i[1]),a=[i[0]*r,i[1]*r],o=[-(a[0]-e.width)/2,-(a[1]-e.height)/2];this.globalLayout.backgroundSize=a,this.globalLayout.backgroundImageInfo.transform.tx=o[0],this.globalLayout.backgroundImageInfo.transform.ty=o[1]}this.globalLayout.height=e.height,this.globalLayout.width=e.width,"mirror"!==t&&this.editor.$emit("editor.background.update")}},onClick:function(t){var e=this.globalLayout,n=this.editor;if(e&&n&&n.global.layout){var i=n.pointFromEvent(t);this.$nextTick((function(){var t=i.x<0||i.y<0||i.x>e.width||i.y>e.height;n.global.layout.$backgroundSelected=t}))}}}}},b7da:function(t,e,n){"use strict";n.r(e),n.d(e,"isMobile",(function(){return r})),n.d(e,"isIOS",(function(){return a})),n.d(e,"isSafari",(function(){return o})),n.d(e,"isAndroid",(function(){return s})),n.d(e,"isWeiXin",(function(){return c})),n.d(e,"isWXMP",(function(){return l})),n.d(e,"isApp",(function(){return u}));n("ac1f"),n("00b4"),n("466d");var i=window.navigator.userAgent;function r(){return/Android|iPhone|webOS|BlackBerry|SymbianOS|Windows Phone|iPad|iPod/i.test(i)}function a(){return!!i.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)}function o(){return/^((?!chrome|android).)*safari/i.test(i)}function s(){return i.indexOf("Android")>-1||i.indexOf("Adr")>-1}function c(){return/MicroMessenger/i.test(i)}function l(){return"miniprogram"===window.__wxjs_environment||/miniProgram/i.test(i)}function u(){return/ttxs|focodesign|focovideo/i.test(i)}},b87d:function(t,e){t.exports='<section\n    ref="container"\n    class="editor-container editor-container-webpage"\n    :class="[\n        global && global.$loaded ? \'editor-loaded\' : null,\n        global && global.$rendered ? \'editor-rendered\' : null,\n        global && global.layout ? \'editor-global-layout\' : null\n    ]"\n>\n    \x3c!-- 长页面模式 --\x3e\n    <div\n        v-if="global.mode === \'flow\'"\n        class="editor-webpage-flow"\n    >\n        <editor-layout\n            v-for="layout in editor.layouts"\n            :key="layout.$id"\n            :editor="editor"\n            :global="global"\n            :options="options"\n            :layout="layout"\n        />\n        <slot name="editor-report"></slot>\n    </div>\n\n    \x3c!-- 单页面切换 --\x3e\n    <transition-group\n        v-else\n        :name="transition"\n        tag="div"\n        class="editor-webpage-single"\n        @after-enter="el => editor.$emit(\'afterLayoutEnter\', el)"\n    >\n        \x3c!-- 包裹层本身正在进行翻页动画时，对内部元素3d动画的修复会失效，所以这里必须多包裹一层翻页动画层 --\x3e\n        \x3c!-- 带temporal标记的layout是临时用来出图的，样式上会将它移除视口 --\x3e\n        <div\n            v-for="layout in editor.layouts"\n            v-show="layout === currentLayout || layout.temporal"\n            :key="layout.$id"\n            :data-layout-id="layout.$id"\n            class="editor-webpage-layout"\n            :class="{\'editor-webpage-layout--temporal\': layout.temporal}"\n        >\n            <div class="editor-webpage-content">\n                <editor-layout\n                    :editor="editor"\n                    :global="global"\n                    :options="options"\n                    :layout="layout"\n                />\n            </div>\n        </div>\n    </transition-group>\n\n    <slot></slot>\n</section>\n'},b95f:function(t,e){t.exports="<div\n    class=\"editor-element\"\n    :class=\"[\n        'editor-element-' + model.type,\n        model.lock ? 'editor-element-lock' : '',\n        model.hidden ? 'editor-element-hidden' : '',\n        model.frozen ? 'editor-element-frozen' : '',\n        model.$loaded ? '' : 'editor-element-loading',\n        model.$selected ? 'editor-element-selected' : '',\n        model.$editing ? 'editor-element-editing' : '',\n        errorMessage ? 'editor-element-error' : '',\n    ]\"\n    :style=\"boxStyle\"\n>\n    <div\n        class=\"element-inner\"\n        ref=\"container\"\n        :style=\"{\n            position: 'absolute',\n            transformOrigin: '0 0',\n            width: model.width + 'px',\n            height: model.height + 'px',\n            transform: 'scale(' + global.zoom + ')',\n        }\"\n    />\n</div>\n"},b9fd:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("d4ec"),r=n("bee2"),a=function(){function t(){Object(i["a"])(this,t),this.count=0}return Object(r["a"])(t,[{key:"get",value:function(){var t=this.count;return this.count+=1,t}}]),t}(),o=new a},bcf9:function(t,e){t.exports='<div class="editor-mask-wrap">\n    \x3c!-- mask-image --\x3e\n    <div class="editor-mask" :style="maskStyle">\n        \x3c!-- maskInfoElement 矩阵反转--\x3e\n        <div :style="reversedMaskInfoElementMatrix">\n            \x3c!-- maskInfoElement 用来同步位移属性--\x3e\n            <div :style="reversedMaskInfoElementOffset" class="editor-mask-info-element-move">\n                <template v-for="element in elements">\n                    <component\n                        :key="element.$id"\n                        :is="element.type + \'-element\'"\n                        :data-id="element.$id"\n                        v-if="editor.supportTypesMap[element.type]"\n                        :options="options"\n                        :global="global"\n                        :model="element"\n                        :editor="editor"\n                        :class="[{\n                            \'editor-element-current\': editor.currentElement === element,\n                            \'editor-element-disabled\': options.operateMode === \'mosaic\'\n                        }, element.$className]"\n                    >\n                    </component>\n                </template>\n            </div>\n        </div>\n    </div>\n</div>\n'},bdce:function(t,e,n){"use strict";n("c9a7")},bf7d:function(t,e,n){"use strict";var i=n("5530"),r=(n("d3b7"),n("159b"),n("b64b"),n("99af"),n("6158")),a=n.n(r),o=n("2ef0"),s=n("ac5f"),c=n("af9f");e["a"]={props:["layout","model","global","options"],name:"watermark",template:a.a,data:function(){return{loaded:!1,naturalWidth:10,naturalHeight:10}},computed:{isDesignMode:function(){return"design"===this.options.mode||"flow"===this.options.mode},cssStyle:function(){if(!this.loaded)return{};var t=this.model||this.layout,e=t.width,n=t.height,r={"background-image":"url("+this.imageUrl+")","background-size":e/n>1?"auto 100%":"100% auto"},a=!this.model&&Object(s["a"])(e,n);if(this.model&&(r["background-size"]=e/n>1?"auto 200%":"200% auto"),a&&(r=Object(i["a"])(Object(i["a"])({},r),{},{"background-size":"cover","background-position":"center","background-repeat":"no-repeat"})),this.options.watermarkSafeEnable&&this.layout)for(var o in r=Object(i["a"])(Object(i["a"])({},r),{},{position:"absolute",left:"0",top:"0",width:"100%",height:"100%",opacity:1,visibility:"visible",display:"flex",transform:"none",zIndex:"5"}),r)r[o]+=" !important";return r},cssStyleStr:function(){var t=this,e="";return Object.keys(this.cssStyle).forEach((function(n){e+="".concat(n,": ").concat(t.cssStyle[n],";")})),e},imageUrl:function(){return this.model?this.options.watermarkImages.element:Object(s["b"])(this.layout.width,this.layout.height,this.options)}},events:{},methods:{observerCallback:Object(o["throttle"])((function(t){if(!this.global.$draging){var e,n;if(this.model)e=this.model.watermarkEnable;else e=this.layout.watermarkEnable||(null===(n=this.layout.background)||void 0===n?void 0:n.watermarkEnable)||this.global.showWatermark||!!Object(o["get"])(this.global,"layout.watermarkEnable");if(e){if(t)return this.$el.style.cssText=this.cssStyleStr,void(this.$el.className="editor-watermark");var i=this._parentNode.querySelector(".editor-watermark");i&&i.parentNode===this._parentNode||this._parentNode.appendChild(this.$el)}}}),50,{trailing:!1}),createObserver:function(){var t=this;this._parentNode||(this._parentNode=this.$el.parentNode);var e=new MutationObserver((function(){t.observerCallback()}));this._observerA=e,e.observe(this._parentNode,{childList:!0}),e=new MutationObserver((function(){t.observerCallback(!0)})),this._observerB=e,e.observe(this.$el,{attributes:!0})}},created:function(){var t=this;c["a"].loadImage(this.imageUrl).finally((function(){t.loaded=!0}))},mounted:function(){this.isDesignMode&&window.MutationObserver&&this.options.watermarkSafeEnable&&this.createObserver()},beforeDestroy:function(){this._observerA&&this._observerA.disconnect(),this._observerB&&this._observerB.disconnect()}}},bfd9:function(t,e,n){"use strict";(function(t){var i=n("53ca"),r=n("b85c"),a=n("5530"),o=n("c7eb"),s=n("1da1"),c=n("d4ec"),l=n("bee2"),u=n("ade3"),d=(n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("4de4"),n("ac1f"),n("1276"),n("159b"),n("99af"),n("b0c0"),n("d81d"),n("b64b"),n("caad"),n("2532"),n("07ac"),n("5319"),n("6062"),n("a026")),h=n("3ff1"),f=n.n(h),m=n("991b"),g=n.n(m),p=n("9520"),v=n.n(p),b=n("741d"),y=n("c9b4"),w=n("5eea"),_=n("61d3"),x=n("bc3a"),k=n.n(x),E=n("25a2"),O=n("ce27"),S=n("7713"),j=n("787a"),I=n("ac98"),A=n("3a93"),T=n("11b5"),C=n("b156"),P=n("edf5"),$=n("e932"),M=n("640a"),R=n("44d1"),L=n("f8f4"),U=n("62d3"),z=n("fe7f"),D=n("04a9");t.__DEV__=!1,t.__POWERED_BY_QIANKUN__=!0;var B={asideTemplate:!0,autoSave:!0},N=/^(@\w+\/|slot:)/,F=function(){function t(){Object(c["a"])(this,t),Object(u["a"])(this,"_phase",P["a"].Starting),Object(u["a"])(this,"phaseWhen",new Map),this.headerbarItems={},this.panels={},this.componentItems={},this.thumbnails={},this.renderStrategy={},this.interactiveEvents={},this.contextmenuItems={},this.endpointActions={},this.features=B,this.editorContext=new O["a"](this),this.events=Object(A["b"])(this),this.initBarrier=new I["a"],this.editorInited=new I["a"],this.events.onEditorCreated.connect(this.handlerEditorCreated,this),this.http={},this.apis={},this.design={},this.consts=C,this.phase=P["a"].Starting,this.LifecyclePhase=P["a"],this.loader=new j["a"](this),this.pluginToWait={},this.spa=E,this.i18n=new z["a"](D["a"])}return Object(l["a"])(t,[{key:"store",get:function(){return this.innerStore},set:function(t){t.registerModule("od",{namespaced:!0,state:{features:this.features}}),this.innerFeatures=null,this.innerStore=t}},{key:"features",get:function(){return this.innerFeatures||this.innerStore.state.od.features},set:function(t){this.innerStore?this.innerStore.state.od.features=t:this.innerFeatures=t}},{key:"phase",get:function(){return this._phase},set:function(t){if(t<this.phase)console.warn("Lifecycle cannot go backwards");else if(this._phase!==t){this._phase=t;var e=this.phaseWhen.get(this._phase);e&&(e.open(),this.phaseWhen.delete(this._phase))}}},{key:"when",value:function(){var t=Object(s["a"])(Object(o["a"])().mark((function t(e){var n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e<=this._phase)){t.next=2;break}return t.abrupt("return");case 2:return n=this.phaseWhen.get(e),n||(n=new I["a"],this.phaseWhen.set(e,n)),t.next=6,n.wait();case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"handlerEditorCreated",value:function(t,e){var n=this;if(!this.editor){this.editor=e,this.phase=P["a"].Ready;var i,r=function(t,e){var i=n.editor.layouts.indexOf(t),r=n.editor.layouts.indexOf(e);i!==r&&E["triggerAppChange"]()};"preview"===this.editor.mode&&(i=this.editor.$watch("currentLayout",r)),this.editor.$once("templetLoaded",(function(){n.phase=P["a"].Restored,setTimeout((function(){n.phase=P["a"].Eventually}),1e3),"preview"===n.editor.mode?E["triggerAppChange"]():i&&i()})),this.editorInited.isOpen()||this.editorInited.open()}}},{key:"ready",value:function(){return this.initBarrier.wait()}},{key:"init",value:function(){var t=Object(s["a"])(Object(o["a"])().mark((function t(){var e,n,i,r,s=arguments;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:{},E["start"](),this.environment=e.environment||"local",this.enableTelemetry=e.enableTelemetry||"false",this.attachAnimation=e.attachAnimation,this.features=Object(a["a"])(Object(a["a"])({},B),e.features),n=e.plugins||[],i=n.filter((function(t){return!t.when})),r=n.filter((function(t){return!!t.when})),this.loader.lazyLoad(r),t.next=12,this.loader.load(i);case 12:if(!this.attachAnimation){t.next=15;break}return t.next=15,this.initEditorAnimation();case 15:this.initBarrier.open();case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"initABTest",value:function(){var t=Object(s["a"])(Object(o["a"])().mark((function t(){var e,n,i,r,s,c,l,u,h,f,m,g,p,v;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=Object({NODE_ENV:"production",VUE_APP_ENV:"prod",VUE_APP_GAODINGX_URL:"https://www.gaoding.com",VUE_APP_OSS_HOST:"st-gdx.dancf.com",VUE_APP_UMS_URL:"https://ums.gaoding.com",VUE_APP_GAODINGX_WAP_URL:"https://m.gaoding.com",VUE_APP_SEARCH_API_URL:"https://search.hlgdata.com",VUE_APP_SEARCH_V2_API_URL:"https://search-v2.hlgdata.com",VUE_APP_SEARCH_INNER_API_URL:"http://search.inner.hlgdata.com",VUE_APP_DIANSHANG_URL:"https://dianshang.gaoding.com",VUE_APP_SEARHC_PIC_URL:"https://ai-temp-retrieval.dancf.com",VUE_APP_TEAM_API:"https://www.gaoding.com/api/team-service",VUE_APP_RAM_API:"https://www.gaoding.com/api/team-ram",VUE_APP_LOGROCKET_ENV:"master",VUE_APP_TRACKER_ENV:"prod",VUE_APP_SENTRY_ENV:"production",VUE_APP_DESIGN_CATEGORY_ENV:"prod",VUE_APP_PAY_ENV:"production",VUE_APP_FONTER_API:"https://fonter.dancf.com",VUE_APP_OAUTH2_ENV:"prod",VUE_APP_DESIGN_AB_TEST_APP_NAME:"gd_web",VUE_APP_DESIGN_AB_TEST_APP_KEY:"ABTEST_f6519045-8bfd-4f0d-b690-8ab5b019bf8c",VUE_APP_PAY_QRCODE_URL:"https://m.gaoding.com",VUE_APP_PAY_QRCODE_V2_URL:"https://m.gaoding.com/me/pay",VUE_APP_UXMS_ORIGIN:"https://uxms.gaoding.com",VUE_APP_INPAINT_URL:"http://172.16.2.30/inpaint/v10",VUE_APP_SAAS_BASE_URL:"https://api.my.gaoding.com",VUE_APP_SAAS_SSO_URL:"https://sso.my.gaoding.com",VUE_APP_SAAS_EXTRANET_URL:"https://qiye.gaoding.com",VUE_APP_DOMAIN_URL:"qiye.gaoding.com",VUE_APP_SAAS_OAUTH2_CLIENT_ID:"saas",VUE_APP_QIYE_OAUTH2_CLIENT_ID:"qiye",VUE_APP_GAODING_CHANNEL_ID:"8",VUE_APP_CMS_ORGIN:"https://odyssey-cms.gaoding.com",VUE_APP_TEMPLATE_FILTER_ID:"4812582",VUE_APP_CHANNEL_CATEGORY_ID:"513",VUE_APP_UXMS_USER_ID:"353976720",VUE_APP_ODYSSEY_ABTEST_ACTIVITIES:"odyssey_private_config",VUE_APP_ODYSSEY_ABTEST_NAME:"gd_web",VUE_APP_ODYSSEY_ABTEST_KEY:"ABTEST_f6519045-8bfd-4f0d-b690-8ab5b019bf8c",VUE_APP_CMC_CD_ORG_ID:"8012556623856798766",VUE_APP_CMC_CD_ORG_CODE:"mcm79j",VUE_APP_ANALYTICS_ORGIN:"https://odyssey-analytics.gaoding.com/",VUE_APP_LEADERBOARD_ORGIN:"https://odyssey-game.gaoding.com/",VUE_APP_LEADERBOARD_INSTANCE_URL:"https://leaderboard-code.my.gd-share.cn/",VUE_APP_GD_ADVERT_ORIGIN:"https://www.gaoding.com",VUE_APP_QINGZHAN_ORGIN:"https://www.qingzhan.com",VUE_APP_PROJECT_NAME:"design",VUE_APP_FETCH_CHANNEL_ID:"8",VUE_APP_CHANNEL_ID:"8",VUE_APP_GD_DOMAIN_PUBLISH_URLS:"g.h5gdsvip.com|g.gd-share.cn|g.h5gd.com|g.h5gdvip.com|g1.h5gdvip.com",VUE_APP_MEDIA_SVIP_ID:"125",VUE_APP_OSS_ORGIN:"https://dancf-st-gdx.oss-cn-hangzhou.aliyuncs.com",VUE_APP_GAODING_ADVERT:"GAODING-ADVERT",VUE_APP_DATA_TRACKER:"https://data-think-tank.gaoding.com",VUE_APP_GDEESIGN_DAM_URL:"http://gdesign-dam-gateway.api.prod",BASE_URL:"//cdn.dancf.com/odyssey-editor/"}),n=e.VUE_APP_ODYSSEY_ABTEST_ACTIVITIES,i=void 0===n?"":n,r=e.VUE_APP_ODYSSEY_ABTEST_NAME,s=void 0===r?"":r,c=e.VUE_APP_ODYSSEY_ABTEST_KEY,l=void 0===c?"":c,!this.isDevMode&&i){t.next=3;break}return t.abrupt("return");case 3:return u=i.split(","),h=[],f=[],m=b["a"].option,b["a"].init({app_key:l,app_name:s,user_id:this.store.state.user.user.id,device_id:m&&m.device_id||"n/a",is_login:this.store.state.user.user.id?1:0}),u.forEach((function(t){var e=b["a"].getValue(t,"{}").then((function(t){try{var e=JSON.parse(t);h.push(e)}catch(n){}})).catch((function(e){var n="[odyssey-runtime] Failed to load config for ".concat(t,": ").concat(e);d["default"].prototype.$toast&&d["default"].prototype.$toast(n,5e3,{type:"error"})}));f.push(e)})),t.next=11,Promise.all(f);case 11:g={},p={},h.forEach((function(t){var e=t.plugins,n=void 0===e?[]:e,i=t.features,r=void 0===i?{}:i;n.forEach((function(t){var e=t.name;g[e]="latest"})),p=Object(a["a"])(Object(a["a"])({},p),r)})),this.features=Object(a["a"])(Object(a["a"])({},this.features),p),v=Object.keys(g).map((function(t){return{name:t,version:"latest"}})),this.loader.load(v);case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"pluginToAdd",set:function(t){var e=t.meta||{},n=e.extensionDependencies,i=void 0===n?{}:n,r=e.name;this.loader.store(t,r);var a=Object.keys(i).map((function(t){return{name:t,version:"latest"}}));Promise.all([this.registerPlugin(t,r),this.loader.load(a)])}},{key:"registerParcel",value:function(){var t=Object(s["a"])(Object(o["a"])().mark((function t(e,n){var i,a,s,c,l,u,d,h,f=this;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loader.store(n,e),a=e.split("/"),s=a[a.length-1],this.editor&&null!==(i=this.editor.supportTypes)&&void 0!==i&&i.includes(s)||(c="slot:".concat(e),this.registerPlugin({elements:[{type:s,component:function(){return Promise.resolve({default:U["a"]})}}]},c)),v()(n.activate)&&n.activate(),t.next=7,this.editorInited.wait();case 7:if(l=this.pluginToWait[e],l){t.next=10;break}return t.abrupt("return");case 10:u=Object(r["a"])(l.values());try{for(h=function(){var t=d.value,i=t.layoutIndex,r=t.$$ref,a=t.component;if(a)Object(R["b"])({name:Object(R["a"])(e,{$$ref:r},a),module:n,layoutIndex:i,component:a,editor:f.editor});else{var o=function a(o){o.model.$$ref===r&&(f.editor.$off("slot.mounted",a),Object(R["b"])({name:Object(R["a"])(e,{$$ref:r},o),module:n,layoutIndex:i,component:o,editor:f.editor}),l.delete(t))};f.editor.$on("slot.mounted",o)}},u.s();!(d=u.n()).done;)h()}catch(o){u.e(o)}finally{u.f()}case 12:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"initEditorAnimation",value:function(){var t=S["a"].asyncElementsMap,e=Object.values(t).map((function(t){return t.then((function(t){return Object(T["a"])(t.default)}))}));return Promise.all(e)}},{key:"pauseBackgroundAudio",value:function(){this.events.onPauseBackgroundAudio.emit()}},{key:"getPanels",value:function(){return g()(f()(this.panels)||[])}},{key:"getContextmenuItems",value:function(){return g()(f()(this.contextmenuItems)||[])}},{key:"getThumbnails",value:function(){return g()(f()(this.thumbnails)||[])}},{key:"registerPanel",value:function(t,e){this.panels[e]||(this.panels[e]=[]);var n=this.panels[e].indexOf(t);n>-1?this.panels[e][n]=t:this.panels[e].push(t)}},{key:"registerContextmenuItem",value:function(t,e){this.contextmenuItems[e]||(this.contextmenuItems[e]=[]);var n=this.contextmenuItems[e].indexOf(t);n>-1?this.contextmenuItems[e][n]=t:this.contextmenuItems[e].push(t)}},{key:"registerThumbnail",value:function(t,e){this.thumbnails[e]||(this.thumbnails[e]=[]);var n=this.thumbnails[e].indexOf(t);n>-1?this.thumbnails[e][n]=t:this.thumbnails[e].push(t)}},{key:"registerRenderStrategy",value:function(t,e){t=t.replace(N,""),this.renderStrategy[t]=e}},{key:"registerInteractiveEvents",value:function(t,e){t=t.replace(N,""),this.interactiveEvents[t]=e}},{key:"registerEndpointAction",value:function(t,e){this.endpointActions[e]||(this.endpointActions[e]=[]);var n=this.endpointActions[e].indexOf(t);n>-1?this.endpointActions[e][n]=t:this.endpointActions[e].push(t)}},{key:"getEndpointAction",value:function(){return g()(f()(this.endpointActions)||[])}},{key:"registerItem",value:function(t,e,n){this[e][n]||(this[e][n]=[]);var i=this[e][n].indexOf(t);i>-1?this[e][n][i]=t:this[e][n].push(t)}},{key:"getItems",value:function(t){return g()(f()(this[t])||[])}},{key:"getComponents",value:function(){return this.getItems("componentItems")}},{key:"getElementName",value:function(t){for(var e=Object.keys(S["a"].models),n=0,i=e;n<i.length;n++){var r=i[n],a=S["a"].models[r];if(t instanceof a)return a.displayName}return null}},{key:"unloadPlugin",value:function(t){this.headerbarItems[t]=[],this.panels[t]=[],this.contextmenuItems[t]=[],this.thumbnails[t]=[]}},{key:"registerPlugin",value:function(){var t=Object(s["a"])(Object(o["a"])().mark((function t(e,n){var i,s,c,l,u,d,h,f,m,g,p,b,y,w,_,x,k,E,O,j,I=this;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.bootstrap,s=e.mount,!v()(i)&&!v()(s)){t.next=3;break}return t.abrupt("return",this.registerParcel(n,e));case 3:this.unloadPlugin(n),c=e.panels,l=void 0===c?[]:c,u=e.thumbnails,d=void 0===u?[]:u,h=e.contextmenuItems,f=void 0===h?[]:h,m=e.elements,g=void 0===m?[]:m,p=e.components,b=void 0===p?[]:p,y=e.activate,w=e.renderStrategy,_=e.interactiveEvent,l.forEach((function(t){I.registerPanel(Object(a["a"])({weight:1e3},t),n)})),f.forEach((function(t){I.registerContextmenuItem(t,n)})),d.forEach((function(t){I.registerThumbnail(t,n)})),b.forEach((function(t){I.registerItem(t,"componentItems",n)})),x=Object(r["a"])(g);try{for(x.s();!(k=x.n()).done;)E=k.value,O=E.type,j=E.component,S["a"].addAsyncDefinition(O,j()),this.editorInited.isOpen()&&this.editor.createAsyncComponent({type:O})}catch(o){x.e(o)}finally{x.f()}if(!this.attachAnimation){t.next=14;break}return t.next=14,this.initEditorAnimation();case 14:return v()(y)&&y(),v()(w)&&this.registerRenderStrategy(n,w),_&&this.registerInteractiveEvents(n,_),this.events.onPluginLoaded.emit(null),t.abrupt("return",null);case 19:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"showComponentInPortal",value:function(t){this.events.onComponentShowInPortalRequested.emit(t)}},{key:"hydrateTemplateData",value:function(){var t=Object(s["a"])(Object(o["a"])().mark((function t(e){var n,i,r=this;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",null);case 2:if(n={},Object($["a"])(e,(function(t,e,i,r){var a=Object(M["a"])(t);if(t.$$ref=Object(L["a"])(),a){var o=a.name,s=a.version;n[o]||(n[o]={}),n[o][s]||(n[o][s]=new Set),n[o][s].add({name:o,version:s,layoutIndex:r,$$ref:t.$$ref,component:null})}})),i=[],this.pluginToWait={},Object.keys(n).forEach((function(t){Object.keys(n[t]).forEach((function(e){i.push({name:t,version:e}),r.pluginToWait[t]=n[t][e]}))})),!i.length){t.next=10;break}return t.next=10,this.loader.load(i);case 10:return t.abrupt("return",null);case 11:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"loadSinglePlugin",value:function(){var t=Object(s["a"])(Object(o["a"])().mark((function t(e,n){var r,a,s,c,l,u,d,h,f;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=Object(M["a"])(e),a=r.name,s=r.version,Object($["a"])(this.editor,(function(t,n,i,r){t===e&&(c=r)})),l=e.$$ref,l||(l=Object(L["a"])(),e.$$ref=l),u=Object(R["a"])(a,e,n),d=this.loader.loaded[a],"object"===Object(i["a"])(d)){t.next=14;break}return this.pluginToWait[a]||(this.pluginToWait[a]=new Set),this.pluginToWait[a].add({name:a,version:s,layoutIndex:c,$$ref:l,component:n}),h=[{name:a,version:s}],t.next=12,this.loader.load(h);case 12:t.next=16;break;case 14:f=E["getAppNames"](),f.includes(u)||(Object(R["b"])({name:u,module:this.loader.loaded[a],layoutIndex:c,$$ref:l,component:n,editor:this.editor}),E["triggerAppChange"]());case 16:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"unloadSinglePlugin",value:function(t,e){var n=Object(M["a"])(t),i=n.name,r=Object(R["a"])(i,t,e),a=E["getAppNames"]();return a.includes(r)?E["unregisterApplication"](r):Promise.resolve()}},{key:"_beforeSave",value:function(){}}]),t}(),H=new F;window.od&&window.od.isDevMode&&(H.isDevMode=!0),window.od=H,window.od.Vue=d["default"],window.od.gdEditorFrameworkInherit=y["a"],window.od.gdEditorFrameworkBaseElement=w["a"],window.od.gdEditorFrameworkElementBaseModel=_["a"],window.od.axios=k.a,window.Vue=d["default"],window.gdEditorFrameworkInherit=y["a"],window.gdEditorFrameworkBaseElement=w["a"],window.gdEditorFrameworkElementBaseModel=_["a"],window.axios=k.a,e["a"]=H}).call(this,n("c8ba"))},c352:function(t,e){t.exports='<div\n    class="editor-background"\n    :class="{\n        \'editor-background--hasimage\': !!effectImage,\n        \'editor-background--selected\': selected,\n        \'editor-background--loaded\': layout.$backgroundLoaded\n    }"\n    :style="{\n        width: model.width * global.zoom + \'px\',\n        height: model.height * global.zoom + \'px\',\n        backgroundColor\n    }"\n>\n    <div v-if="effectGradient" class="editor-background__main" :style="backgroundGradientStyle" />\n\n    <div class="editor-background__main" v-if="effectImage">\n        <BackgroundImage\n            @loaded="onLoadedChange"\n            :element="element"\n            :layout="layout"\n            :editor="editor"\n            :options="options"\n            :global="global" />\n    </div>\n\n    <template v-if="options.mode !== \'preview\'">\n        <i class="editor-background__border"></i>\n    </template>\n\n    <slot></slot>\n    <slot name="watermark"></slot>\n</div>\n'},c384:function(t,e,n){},c7cc:function(t,e,n){"use strict";n.d(e,"c",(function(){return f})),n.d(e,"b",(function(){return m})),n.d(e,"a",(function(){return w})),n.d(e,"d",(function(){return _}));var i=n("c7eb"),r=n("1da1"),a=n("5530"),o=(n("d3b7"),n("159b"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("b047")),s=n.n(o),c=n("af9f"),l=n("a026"),u=n("47d6"),d=n("0644"),h=n.n(d);function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],i=n;return t.forEach((function(t,r){t.maskInfo&&t.maskInfo.enable?(i=[],n.push(t,Object(a["a"])({$id:"mask-".concat(t.id),elements:i,$maskElement:t,$maskElementIndex:r,$exportType:"maskInfoGroup"},e))):i.push(t)})),n.length?n:t}function m(t,e){return g.apply(this,arguments)}function g(){return g=Object(r["a"])(Object(i["a"])().mark((function t(e,n){var r,o,s,l;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null===e||void 0===e||null===(r=e.maskInfo)||void 0===r||!r.imageUrl){t.next=7;break}if(!e.maskInfo.effectedResult||null!==(o=e.maskInfo.effectedResult)&&void 0!==o&&o.width||null!==(s=e.maskInfo.effectedResult)&&void 0!==s&&s.height){t.next=6;break}return t.next=4,c["a"].loadImage(e.maskInfo.imageUrl);case 4:l=t.sent,e.maskInfo.effectedResult=Object(a["a"])(Object(a["a"])({},e.maskInfo.effectedResult),{},{width:l.width,height:l.height});case 6:return t.abrupt("return");case 7:return t.next=9,b(e,n);case 9:case"end":return t.stop()}}),t)}))),g.apply(this,arguments)}function p(t,e){return v.apply(this,arguments)}function v(){return v=Object(r["a"])(Object(i["a"])().mark((function t(e,n){var r;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("dataUrl"!==n){t.next=2;break}return t.abrupt("return",e.toDataURL());case 2:return t.next=4,new Promise((function(t){e.toBlob((function(e){return t(URL.createObjectURL(e))}))}));case 4:return r=t.sent,t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)}))),v.apply(this,arguments)}function b(t,e){return y.apply(this,arguments)}function y(){return y=Object(r["a"])(Object(i["a"])().mark((function t(e,n){var r,a,o,s;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!==(r=e.maskInfo)&&void 0!==r&&r.enable){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,l["default"].nextTick();case 4:return t.next=6,n.elementFullStatusToCanvas(e);case 6:return a=t.sent,o=a.canvas,s=a.effectedResult,t.next=11,l["default"].nextTick();case 11:return t.next=13,p(o,n.options.resource.localType);case 13:e.maskInfo.imageUrl=t.sent,e.maskInfo.effectedResult.width=s.width,e.maskInfo.effectedResult.height=s.height,e.maskInfo.effectedResult.left=s.left,e.maskInfo.effectedResult.top=s.top;case 18:case"end":return t.stop()}}),t)}))),y.apply(this,arguments)}var w=s()(b,300);function _(t){Array.isArray(t)||(t=[t]),t.forEach((function(t){t.maskInfo=h()(u["a"].maskInfo)}))}},c909:function(t,e,n){"use strict";n("c384")},c9a7:function(t,e,n){},c9b4:function(t,e,n){"use strict";n("99af");var i=n("2ef0"),r=function(t,e){var n=[];return Array.isArray(t)?n=n.concat(Object(i["cloneDeep"])(t)):n.push(t),n.push(e),n};e["a"]=r},c9d0:function(t,e,n){"use strict";n("3e63")},cb22:function(t,e){t.exports='<div\n    class="editor-element"\n    :class="[\n        \'editor-element-\' + model.type,\n        model.lock ? \'editor-element-lock\' : \'\',\n        model.hidden ? \'editor-element-hidden\' : \'\',\n        model.frozen ? \'editor-element-frozen\' : \'\',\n        model.$loaded ? \'\' : \'editor-element-loading\',\n        model.$selected ? \'editor-element-selected\' : \'\',\n        model.$editing ? \'editor-element-editing\' : \'\',\n        linkSelected ? \'editor-element-link-selected\' : \'\'\n    ]"\n    :style="[baseStyle, cssStyle]"\n>\n    <div draggable="false" class="element-main" :style="[mainStyle, maskStyle]">\n        <div class="element-main-inner" v-if="isGif && !canvasRendered" :style="imageWrapStyle">\n            <img ref="img" crossorigin :src="model.url" :style="imageStyle" />\n        </div>\n\n        <img\n            v-else-if="(!canvasRendered && imageUrl) || imageUrlCache"\n            crossorigin\n            ref="img"\n            class="element-mocker"\n            :src="imageUrl || imageUrlCache"\n            :style="effectedImageStyle"\n        />\n\n        <canvas\n            ref="canvas"\n            v-else-if="canvasRendered"\n            class="element-mocker"\n            :style="effectedImageStyle"\n        />\n    </div>\n\n    <div\n        class="mask-drop-area"\n        :class="{\n             \'mask-drop-area--active\': insideDropArea,\n             \'mask-drop-area--small\': maskDropAreaDimension.size === \'small\'\n         }"\n        :style="maskDropAreaStyle"\n        v-if="isDesignMode && readyForDrop"\n    >\n        <svg version="1.1" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n            <path\n                d="M17 15v4H1V2h12v1H2v15h14v-3h1zM7.547 9.547C9.7 5.849 13.517 4 19 4c-3.757 1.257-6.62 4.06-8.59 8.41L13 15H5V7l2.547 2.547z"\n            />\n        </svg>\n        {{ dropAreaText }}\n    </div>\n\n    <div class="element-tips-loading" v-if="lazyRendering">\n        <i class="fa fa-spin fa-spinner"></i>\n    </div>\n\n    <ElementCommon\n        :element="model"\n        :options="options"\n        :global="global"\n        :editor="editor"\n        :layout="editor.currentLayout"\n        :hideBlink="hideBlink"\n        :isShowBlink="isShowBlink"\n        :bgNinePatch="bgNinePatch"\n    />\n</div>\n'},cc0e:function(t,e,n){},cd8b:function(t,e,n){"use strict";n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return c})),n.d(e,"e",(function(){return l})),n.d(e,"f",(function(){return d})),n.d(e,"b",(function(){return h}));n("ac1f"),n("00b4");var i=navigator.userAgent,r=/\(i[^;]+;( U;)? CPU.+Mac OS X/i,a=function(){return r.test(navigator.userAgent)},o=function(){var t=/webkit/i;return t.test(i)},s=function(){var t=/Firefox/i;return t.test(i)},c=s,l=function(){return"ActiveXObject"in window},u=function(){return i.indexOf("Android")>-1||i.indexOf("Linux")>-1},d=function(){return Object.prototype.hasOwnProperty.call(window,"ontouchstart")||u()||a()},h=function(){var t=0;return void 0!==window.outerWidth&&void 0!==window.innerWidth&&(t=Math.round(window.outerWidth/window.innerWidth*100)),100!==t&&t>=95&&t<=105&&(t=100),t};e["a"]={isMobile:d,isWebkit:o,isFireFox:c,isFox:s,isIE:l,isAndorid:u,getBrowserZoom:h}},cdbf:function(t,e){t.exports='<div :style="cssStyle" class="editor-background-mosaic">\n    <img v-if="imageUrl" draggable="false" crossorigin="anonymous" ref="image" :src="imageUrl" />\n\n    <canvas v-show="!imageUrl" ref="canvas"></canvas>\n    <slot></slot>\n</div>\n'},ce27:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("b85c"),r=n("d4ec"),a=n("bee2"),o=(n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),n("d81d"),n("b0c0"),n("640a")),s=function(){function t(e){Object(r["a"])(this,t),this.od=e}return Object(a["a"])(t,[{key:"hasTypeofElementFocused",value:function(t){var e=this.od.editor,n=e.currentElement,i=e.currentSubElement;return!(!n||n.type!==t)||!(!i||i.type!==t)}},{key:"onlyTypeofElementSelected",value:function(t){var e=this.od.editor.currentElement;if(!e)return!1;if("$selector"!==e.type)return!1;var n=new Set(e.elements.map((function(t){var e=t.type;return e})));return 1===n.keys.length&&n.has(t)}},{key:"hasTypeofElementSelected",value:function(t){var e=this.od.editor.currentElement;if(!e)return!1;if("$selector"!==e.type)return!1;var n=new Set(e.elements.map((function(t){var e=t.type;return e})));return n.has(t)}},{key:"hasPluginFocused",value:function(t){var e=this.od.editor,n=e.currentElement,i=e.currentSubElement;if(n){var r=Object(o["a"])(n);if(r)return r.name===t}if(i){var a=Object(o["a"])(i);if(a)return a.name===t}return!1}},{key:"onlyPluginSelected",value:function(t){var e=this.od.editor.currentElement;if(!e)return!1;if("$selector"!==e.type)return!1;if(1!==e.length)return!1;var n=Object(o["a"])(e.elements);return!!n&&n.name===t}},{key:"hasPluginSelected",value:function(t){var e=this.od.editor.currentElement;if(!e)return!1;if("$selector"!==e.type)return!1;var n,r=Object(i["a"])(e.elements);try{for(r.s();!(n=r.n()).done;){var a=n.value,s=Object(o["a"])(a);if(s&&s.name===t)return!0}}catch(c){r.e(c)}finally{r.f()}return!1}}]),t}()},d10d:function(t,e,n){"use strict";n.d(e,"a",(function(){return j}));var i=n("3835"),r=n("5530"),a=n("c7eb"),o=n("1da1"),s=n("d4ec"),c=n("bee2"),l=n("262e"),u=n("2caf"),d=(n("d3b7"),n("3ca3"),n("ddb0"),n("07ac"),n("159b"),n("f684")),h=n.n(d),f=n("0485"),m=n("e156"),g=n("01b8"),p=n("f49e"),v=n("66cb"),b=n.n(v),y=n("2ef0"),w=n("f7f8"),_=n("8541"),x=Math.abs,k=Math.PI,E=Math.sin,O=Math.cos;function S(t,e,n){var i=k/180*(90-t),r=x(e*E(i))+x(n*O(i)),a={x:e/2,y:n/2},o=E(i-k/2)*r/2,s=O(i-k/2)*r/2;return[a.x-s,a.y-o,a.x+s,a.y+o]}var j=function(t){Object(l["a"])(n,t);var e=Object(u["a"])(n);function n(t){var i,r=t.editor,a=t.layout,o=t.element,c=t.canvas;return Object(s["a"])(this,n),i=e.call(this,{canvas:c}),i.editor=r,i.layout=a&&a.backgroundSize?new w["b"](Object(y["cloneDeep"])(a),r):a,i.element=o,i.options=r.options,i.canvas=c||Object(m["b"])(Math.round(i.model.width),Math.round(i.model.height)),i}return Object(c["a"])(n,[{key:"model",get:function(){return this.element||this.layout}},{key:"background",get:function(){return this.model.background}},{key:"opacity",get:function(){var t=Object(y["get"])(this,"element.backgroundEffect.opacity")||this.backgroundImageInfo.opacity;return void 0===t?1:t}},{key:"effectImage",get:function(){var t;if(this.element)return"image"===Object(y["get"])(this,"element.backgroundEffect.type")&&Object(y["get"])(this,"element.backgroundEffect.image");var e=Object.assign({},null===(t=this.background)||void 0===t?void 0:t.image);return e.url=this.layout.backgroundEffectImage||e.url,e}},{key:"effectGradient",get:function(){var t;return this.element?"gradient"===Object(y["get"])(this,"element.backgroundEffect.type")&&Object(y["get"])(this,"element.backgroundEffect.gradient"):null===(t=this.background)||void 0===t?void 0:t.gradient}},{key:"effectNinePatch",get:function(){if(this.element)return"ninePatch"===Object(y["get"])(this,"element.backgroundEffect.type")&&Object(y["get"])(this,"element.backgroundEffect.ninePatch")}},{key:"backgroundImage",get:function(){return this.effectImage.url}},{key:"backgroundImageInfo",get:function(){return Object(y["get"])(this.background,"image",this.model.backgroundImageInfo)||{}}},{key:"backgroundColor",get:function(){var t=Object(y["get"])(this.background,"color",this.model.backgroundColor);return t?b()(t):null}},{key:"load",value:function(){return p["a"].loadImage(this.backgroundImage)}},{key:"export",value:function(){var t=Object(o["a"])(Object(a["a"])().mark((function t(){var e,n,i,r;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.editor,n=this.model,!e.getComponentById(n.$id)){t.next=12;break}if(i=this.editor.getComponentById(n.$id),r=i.$refs.background&&i.$refs.background.$refs.canvas,!r||"none"===window.getComputedStyle(r).display){t.next=12;break}return t.next=7,h.a.delay(10);case 7:if(t.t0=this._promise,!t.t0){t.next=11;break}return t.next=11,this._promise;case 11:return t.abrupt("return",r);case 12:return t.next=14,this.render();case 14:return t.abrupt("return",this.canvas);case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"render",value:function(){var t=this;return this._promise=h.a.try(Object(o["a"])(Object(a["a"])().mark((function e(){var n,i,r,o,s,c;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isNeedRender()){e.next=2;break}return e.abrupt("return",t.canvas);case 2:if(t.setPreData(),n=t.canvas.getContext("2d"),i=t.backgroundColor,r=t.effectImage,o=t.effectGradient,s=t.effectNinePatch,c=t.backgroundImage,n.save(),i&&t.renderColor(n),o&&t.renderGradient(n),!c||!r){e.next=11;break}return e.next=11,t.renderImage(n);case 11:if(!s){e.next=14;break}return e.next=14,t.renderNinePatch(n);case 14:return n.restore(),e.abrupt("return",n.canvas);case 16:case"end":return e.stop()}}),e)})))),this._promise}},{key:"renderImage",value:function(){var t=Object(o["a"])(Object(a["a"])().mark((function t(e){var n,i,o,s,c;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.element){t.next=2;break}return t.abrupt("return",this.renderElementImage(e));case 2:if(n=this.effectImage,i=this.editor.createElement(Object(r["a"])(Object(r["a"])({},n),{},{type:"image"})),o=this.layout.hasFilters&&this.editor.$renderers.get(this.layout.$id),!this.layout.hasFilters||this.layout.backgroundEffectImage||o&&o.promise||(o=new _["a"]({model:i,byNaturalSize:!0,emitEventEnable:!1,editor:this.editor})),!o){t.next=12;break}return t.next=9,o.export();case 9:t.t0=t.sent,t.next=15;break;case 12:return t.next=14,this.load();case 14:t.t0=t.sent;case 15:return s=t.t0,c=Object(m["b"])(i.width,i.height),e.save(),e.globalAlpha=n.opacity,Object(m["f"])({canvas:c,width:i.width,height:i.height,naturalWidth:i.naturalWidth,naturalHeight:i.naturalHeight,imageTransformArray:i.imageTransform.toArray(),blendMode:"source-over",image:s}),this.editor.applyElementPropsToCanvas(i,c,e.canvas),c.width=0,c.height=0,e.restore(),t.abrupt("return",e.canvas);case 25:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"renderElementImage",value:function(){var t=Object(o["a"])(Object(a["a"])().mark((function t(e){var n,i,r,o,s;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=this.model,i=this.effectImage,r=this.opacity,o=i.imageTransform||i.transform,t.next=4,this.load();case 4:return s=t.sent,e.save(),e.globalAlpha=r,Object(m["f"])({canvas:e.canvas,image:s,width:n.width,height:n.height,naturalWidth:i.naturalWidth,naturalHeight:i.naturalHeight,imageTransformArray:o.toArray?o.toArray():Object.values(o),blendMode:"source-over"}),e.restore(),t.abrupt("return",e.canvas);case 10:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"renderColor",value:function(t){var e=this.model,n=this.backgroundColor;t.save(),t.globalAlpha=n.getAlpha(),t.fillStyle=n.toHexString(),t.fillRect(0,0,e.width,e.height),t.restore()}},{key:"renderGradient",value:function(t){var e=this.model,n=this.effectGradient;t.save(),t.globalAlpha=this.opacity;var r=n.angle,a=n.stops,o=S(r,e.width,e.height),s=Object(i["a"])(o,4),c=s[0],l=s[1],u=s[2],d=s[3],h=t.createLinearGradient(c,l,u,d);a.forEach((function(t){h.addColorStop(t.offset,b()(t.color).toRgbString())})),t.fillStyle=h,t.fillRect(0,0,t.canvas.width,t.canvas.height),t.restore()}},{key:"renderNinePatch",value:function(){var t=Object(o["a"])(Object(a["a"])().mark((function t(e){var n,i,r,o,s,c,l,u;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=this.model,i=n.width,r=n.height,o=this.effectNinePatch,s=o.url,c=o.imageSlice,l=o.effectScale,e.save(),e.globalAlpha=this.opacity,t.next=6,Object(g["a"])(s,{targetWidth:Math.round(i),targetHeight:Math.round(r),imageSlice:c,targetImageSlice:{left:c.left*l,top:c.top*l,right:c.right*l,bottom:c.bottom*l}});case 6:u=t.sent,e.drawImage(u,0,0,i,r),e.restore();case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),n}(f["a"])},d2ab:function(t,e,n){"use strict";n.d(e,"b",(function(){return y}));n("4de4"),n("d3b7"),n("a15b"),n("d81d"),n("b0c0"),n("99af"),n("25f0"),n("caad"),n("2532"),n("3ca3"),n("ddb0"),n("7db0"),n("13d5"),n("498a");var i=n("ded9"),r=n.n(i),a=n("2ef0"),o=n("66cb"),s=n.n(o),c=n("f49e"),l=n("c9b4"),u=n("af9f"),d=n("5eea"),h=n("e8f4"),f=n.n(h),m=n("1c39"),g=n("e59c"),p=n("c7cc"),v=u["a"].isFox(),b=v||window.safari,y={template:f.a,data:function(){return{fallbackFonts:"Arial,SimSun,Sans-Serif",minFontSize:b?1:this.model.$miniFontSize,lastFont:null}},computed:{listClass:function(){var t=this.model.listStyle,e=this.model.contents.filter((function(t){return"li"===t.beginParentTag})),n={decimal:10,"upper-alpha":27,"lower-alpha":27,"cjk-ideographic":11},i=n[t]?1+Math.min(1,Math.floor(e.length/n[t])):1,r=[];return t&&"none"!==t&&r.push("is-list is-list--"+t),v&&r.push("is-fox"),i&&r.push("is-list--digit-"+i),r.join(" ")},textPadding:function(){var t=this.model;return this.isText?t.padding.join("px ")+"px":this.padding},hasEffects:function(){return this.model.textEffects&&this.effectedTextEffects.length},resize:function(){return this.model.resize},isVertical:function(){var t=this.model.writingMode;return t&&t.indexOf("vertical")>-1},contentsHTML:function(){var t=this,e=this.model,n=this.options,i=Object(a["pick"])(e,["fontStyle","fontWeight","textDecoration"]),r=n.fontSubset.getUrl,o=n.subsetSuffix,s=e.contents.map((function(e){var s={};if(e.fontSize&&"mirror"===t.options.mode&&!b&&(s.fontSize=Math.max(e.fontSize,12)),e&&e.fontFamily){var c;c=e.fontFamily===t.model.fontFamily&&t.lastFont?t.lastFont:t.getCloseFont(e.fontFamily);var l=n.fontSubsetsMap[c.name],u=r&&l?['"'.concat(c.name+o,'"'),'"'.concat(c.family+o,'"')]:[],d=Object(a["uniq"])(u.concat(['"'.concat(c.name,'"'),'"'.concat(c.family,'"'),t.fallbackFonts]));return c&&(s.fontFamily=d.join(",")),Object.assign({},i,e,s)}return Object.assign({},i,e,s)})),c=u["b"].fromHTML(s,{listStyle:this.model.listStyle});return c},fontFamily:function(){var t=this.fallbackFonts,e=this.lastFont;if(e&&!this.model.$loaded||(e=this.getCloseFont()),!e)return t;var n=this.options.fontSubset.getUrl,i=this.options.subsetSuffix,r=this.options.fontSubsetsMap[e.name],o=n&&r?['"'.concat(e.name+i,'"'),'"'.concat(e.family+i,'"')]:[],s=Object(a["uniq"])(o.concat(['"'.concat(e.name,'"'),'"'.concat(e.family,'"'),t]));return s.join(",")},color:function(){return this.model.color&&s()(this.model.color).toString("rgb")},fontSize:function(){return this.model.fontSize},fontSizeScale:function(){return Math.min(1,this.fontSize/this.minFontSize)},letterSpacingScale:function(){return this.fontSizeScale<1?this.minFontSize/this.model.fontSize:this.global.zoom},transformOrigin:function(){var t=[0,0],e=this.model.verticalAlign;return this.isVertical?(t[0]={top:"100%",middle:"50%",bottom:0}[e],t[1]=0):(t[0]=0,t[1]={top:0,middle:"50%",bottom:"100%"}[e]),t.join(" ")},mainTransform:function(){var t=this.fontSizeScale;return t<1?"scale("+t+")":null},mainMinHeight:function(){if(this.isVertical)return"initial";var t=this.model;return this.fontSize*t.lineHeight*this.fontSizeScale+"px"},mainMinWidth:function(){if(this.isVertical){var t=this.model;return this.fontSize*t.lineHeight*this.fontSizeScale+"px"}return"initial"},widthAutoScale:function(){var t=this.model;return[this.isVertical?1:2,3].includes(t.autoAdaptive)},mainWidth:function(){var t=this.fontSizeScale,e=100/t;return this.isVertical||this.widthAutoScale?"auto":"calc(".concat(e,"% + ").concat(this.model.letterSpacing,"px)")},mainHeight:function(){var t=this.fontSizeScale,e=100/t;return this.isVertical?this.widthAutoScale?"auto":"calc(".concat(e,"% + ").concat(this.model.letterSpacing,"px)"):"auto"},textShadow:function(){var t=this.model.textShadow;return t?[t.offsetX+"px",t.offsetY+"px",t.blurRadius+"px",t.color].join(" "):""},textStyle:function(){var t={fontFamily:this.fontFamily,fontSize:Math.max(this.minFontSize,this.fontSize)+"px",letterSpacing:this.model.letterSpacing+"px",verticalAlign:this.model.verticalAlign,color:this.color,transform:this.mainTransform,transformOrigin:this.transformOrigin,minWidth:this.mainMinWdith,minHeight:this.mainMinHeight,width:this.mainWidth,height:this.mainHeight};return"threeText"===this.model.type&&Object.assign(t,{whiteSpace:"nowrap",top:this.model.height/2+"px",transform:"translate(0,-50%)"}),this.widthAutoScale&&(t.whiteSpace="nowrap"),t},linkSelected:function(){var t=this.editor.currentSubElement||this.editor.currentElement||{};return this.isLinkWith(t)}},methods:{fitFontSize:function(t,e){var n=Math.max(t*e,.01);return n%1!==0?Math.floor(10*n)/10:n},load:function(t){var e=this,n=this.options,i=this.model,o=i.contents,s=i.fontFamily,l=null;t?l=[t]:(l=o.filter((function(t){return t&&t.fontFamily})).map((function(t){return t.fontFamily})),l.push(s),l=Object(a["uniq"])(l));var u=l.map((function(t){var i=e.getCloseFont(t),a=e.options.fontSubsetsMap[i.name];return i?c["a"].loadFont(Object.assign({},i,{display:"swap"},a&&"subset"===a.loadType?{subset:{suffix:n.subsetSuffix,promise:a.subsetPromise,content:a.subsetContent}}:null),n.fontLoadTimeout):r.a.resolve()}));return r.a.all(u).then((function(){return Object(p["b"])(e.model,e.editor),l})).finally((function(){e.lastFont=e.getCloseFont(e.model.fontFamily)}))},getCloseFont:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.options,n=e.fontsMap,i=e.defaultFont,r=e.fontList;return t||(t=this.model.fontFamily),n[t]||n[i]||r[0]},updateRect:function(){var t=this.model,e=this.global.zoom,n=this.getRect(),i=n.height/e,r=n.width/e,a=!1,o={width:0,height:0};r!==t.width&&0!==n.originWidth&&[2,3].includes(t.autoAdaptive)&&(o.width=r-t.width,t.width=r,a=!0),i!==t.height&&0!==n.originHeight&&[1,3].includes(t.autoAdaptive)&&(o.height=i-t.height,t.height=i,a=!0);var s={center:function(t){return t/2},right:function(t){return t}},c="vertical-rl"===t.writingMode;a&&!this.model.$parentId&&[c?1:2,3].includes(t.autoAdaptive)&&s[t.textAlign]&&("vertical-rl"!==t.writingMode?t.left-=s[t.textAlign](o.width):t.top-=s[t.textAlign](o.height)),a&&this.isDesignMode&&this.$events.$emit("element.rectUpdate",t,o)},getRect:function(){var t=d["a"].find((function(t){return"base-element"===t.name})).methods,e=t.getRect.call(this),n=e.width,i=e.height,r=this.global.zoom,a=this.fontSizeScale;e.originWidth=e.width,e.originHeight=e.height,e.height=i*a+(this.model.padding[0]+this.model.padding[2])*r,e.width=n*a+(this.model.padding[1]+this.model.padding[3])*r;var o="vertical-rl"===this.model.writingMode;return o?e.height-=Math.max(0,this.model.letterSpacing*r):e.width-=Math.max(0,this.model.letterSpacing*r),e},syncRect:function(){"preview"!==this.options.mode&&this.model.autoAdaptive&&!this.model.$resizeApi&&this.$nextTick(this.updateRect)}},watch:{"model.fontFamily":function(){this.checkLoad()},"model.listStyle":function(){this.syncRect()},"model.autoAdaptive":function(){this.syncRect()}},events:{"element.loaded":function(t){t===this.model&&this.syncRect()},"element.transformStart":function(t,e){var n=e.action,i=e.dir;if("resize"===n&&this.isDesignMode){var r=this.model.autoAdaptive;if(1===i.length&&r){var o=!1;if(Object(m["d"])(t)){var s=this.editor.getParentGroups(this.model);o="flex"!==t.type&&s.map((function(t){return t.$id})).concat(this.model.$id).includes(this.model.$id)}else o=t===this.model;var c={s1:0,n1:0,w2:0,e2:0,s3:2,n3:2,w3:1,e3:1};o&&void 0!==c[i+r]&&(this.model.autoAdaptive=c[i+r])}var l=this.rect,u=l.width,d=l.height;this.$textResizeMeta={width:u,height:d,letterSpacing:this.model.letterSpacing,fontSize:this.model.fontSize,contents:Object(a["cloneDeep"])(this.model.contents),padding:Object(a["cloneDeep"])(this.model.padding)}}},"element.transformEnd":function(t,e,n){var i=n.action;if("resize"===i&&this.isDesignMode&&(delete this.$textResizeMeta,-1!==["w","e","n","s"].indexOf(e.dir)&&t===this.$parent.model&&t.autoGrow)){var r=this.global.zoom,a=this.getRect(),o=a.height/r-this.model.height,s=a.width/r-this.model.width;(Math.abs(o)>.5||Math.abs(s)>.5)&&(this.model.height=a.height/r,this.model.width=a.width/r,this.$events.$emit("element.rectUpdate",this.model,{height:o,width:s},!0))}},"element.transformResize":function(t,e){if(e===this.model&&this.isDesignMode&&e.autoScale){var n="horizontal-tb"===this.model.writingMode,i=t.dir;if(!e.autoAdaptive||(!n||"n"!==i&&"s"!==i)&&(n||"w"!==i&&"e"!==i))if(i.length>1){var r=this.rect,a=this.$textResizeMeta,o=n?r.width/(a.width||1):r.height/(a.height||1);Object(g["e"])(e,a,o)}else this.syncRect()}},"element.change":function(t,e){if("contents"===e&&this.isLinkWith(t)){var n=Object(a["cloneDeep"])(this.model.contents),i=t.contents.reduce((function(t,e){return t.push(e.content),t}),[]).join("");n&&0!==n.length?n.reduce((function(t,e,r){if(t<i.length){var a=e.content.length,o="";o=t+a>i.length||r===n.length-1?i.substring(t):i.substring(t,t+a),e.content=o,t+=o.length}else e.content="";return t}),0):this.model.contents=[{content:i}],this.editor.changeElement({content:i,contents:n},this.model,!1),this.syncRect()}}},mounted:function(){var t=this;this.syncRect(),this.$watch((function(){return t.model.$renderProps}),(function(){return Object(p["a"])(t.model,t.editor)}),{deep:!0})},beforeDestroy:function(){var t=this.editElement,e=t&&!t.content.trim();e&&this.editor.removeElement(t,this.editor.currentLayout,!0)}};e["a"]=Object(l["a"])(d["a"],y)},d309:function(t,e,n){"use strict";n("78d9")},d6d7:function(t,e){t.exports='\x3c!-- 隐藏用opacity，不要用hidden, 否则富文本编辑将无法生成选区 --\x3e\n<div\n    class="editor-element editor-text-editor"\n    :class="[\n        \'editor-element-\' + model.type,\n        model.type === \'threeText\' ? \'editor-element-text\' : \'\',\n        model.$loaded ? \'\' : \'editor-element-loading\',\n        model.$selected ? \'editor-element-selected\' : \'\',\n        model.$editing ? \'editor-element-editing\' : \'\'\n    ]"\n    :style="{\n        opacity: model.$editing ? model.opacity : 0,\n        width: model.width + \'px\',\n        height: model.height + \'px\',\n        transform: \'scale(\' + global.zoom + \')\'\n    }"\n    @mousedown="onMousedown"\n>\n    <label\n        class="element-inner"\n        :style="{\n            writingMode: model.writingMode,\n            textAlign: model.textAlign,\n            lineHeight: model.lineHeight,\n            textShadow: textShadow\n        }"\n        :for="\'vue_poster_editor_text_editor_\'+model.$id"\n    >\n        <div\n            class="elment-inner-content"\n            :class="[isVertical ? \'middle-v\' : \'middle-h\', listClass]"\n            :style="{\n                padding: textPadding\n            }"\n        >\n            <div\n                :id="\'vue_poster_editor_text_editor_\'+model.$id"\n                class="element-main"\n                :style="textStyle"\n                ref="edit"\n                v-html="html"\n                :contenteditable="model.$editing"\n            />\n        </div>\n    </label>\n\n    <ElementCommon\n        :element="model"\n        :options="options"\n        :global="newGlobal"\n        :editor="editor"\n        :layout="editor.currentLayout"\n        :bgNinePatch="bgNinePatch"\n    />\n</div>\n'},da42:function(t){t.exports=JSON.parse('{"name":"@gaoding/editor-elements","version":"0.2.92","description":"","main":"dist/editor-elements.common.js","module":"index.js","scripts":{"build":"npx vue-cli-service build --target lib --name editor-elements --dest lib ./index.js","publish-hlg":"npm publish --registry https://npm.huanleguang.com","publish-gd":"npm publish --registry https://registry-npm.gaoding.com"},"author":"","license":"ISC","maintainers":[{"name":"liulangren","email":"liulangren@gaoding.com"},{"name":"juanbai","email":"juanbai@gaoding.com"},{"name":"kuake","email":"kuake@gaoding.com"},{"name":"facai","email":"facai@gaoding.com"},{"name":"qiancong","email":"qiancong@gaoding.com"}],"dependencies":{"@gaoding/three-font-parser":"0.4.2","@gaoding/chart-render":"^0.0.18","@gaoding/editor-framework":"7.2.1","@gaoding/editor-utils":"1.1.37","@handsontable/vue":"4.1.1","bluebird":"3.5.5","canvas-filters":"1.0.1","lodash":"^4.17.15","opentype.js":"1.1.0","tinycolor2":"^1.4.1"}}')},da4f:function(t,e){t.exports='<div\n    class="editor-border"\n    :class="{\n        \'editor-border--loaded\': border.type !== \'image\' || border.$loaded,\n        \'is-element\': !!element\n    }"\n    :style="cssStyle"\n>\n    <div class="editor-border__main" :style="borderStyle" />\n</div>\n'},dc40:function(t,e,n){"use strict";n("3999")},e002:function(t,e,n){"use strict";n.d(e,"e",(function(){return l})),n.d(e,"d",(function(){return u})),n.d(e,"f",(function(){return d})),n.d(e,"c",(function(){return h})),n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return m}));n("d3b7"),n("25f0"),n("159b"),n("caad"),n("4de4"),n("99af"),n("b64b"),n("7db0"),n("d81d"),n("13d5");var i=n("2ef0"),r=n("66cb"),a=n.n(r),o=n("e86a"),s=n("b494"),c=n("49bc");function l(t){var e=new s["a"];if(t)if(t.localTransform)e=Object(i["cloneDeep"])(t);else{var n=new o["a"];n.copy.call(t,n),n.decompose(e)}return e}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return e;var n=a()(t).toString("rgb");return n}function d(t,e,n){delete e.$linkIndex,e.imageEffects&&e.imageEffects.forEach((function(t){if(t.enable){var e=t.offset,n=t.stroke,r=t.shadow,a=t.expand,o=t.filling,s=t.mask;0===Object(i["get"])(e,"x",0)&&0===Object(i["get"])(e,"y",0)&&!1===Object(i["get"])(n,"enable")&&!1===Object(i["get"])(r,"enable")&&!1===Object(i["get"])(a,"enable")&&!1===Object(i["get"])(o,"enable")&&!1===Object(i["get"])(s,"enable")&&(t.filling.type="base",t.filling.enable=!0)}}));var r=["text","effectText"].includes(t),o=r?e.textEffects:e.imageEffects,s=o.filter((function(t){return!1!==t.enable}));if(n&&o.forEach((function(t){var e=["enable","excludeScale"].concat(Object.keys(t)),n=Object(i["cloneDeep"])(Object(i["pick"])(r?c["a"].textEffect:c["a"].imageEffect,e));return Object(i["defaultsDeep"])(t,n)})),!e.aggregatedColors||!e.aggregatedColors.length){var l=[],u=!s.length;s.forEach((function(t,e){if(!t.filling||!t.filling.enable){var n=!!r&&o.some((function(n,r){if(e<=r||!n.filling||!n.filling.enable)return!1;var a=t.offset||{x:0,y:0},o=n.offset||{x:0,y:0};return a.x===o.x&&a.y===o.y&&!Object(i["get"])(t,"skew.enable")&&!Object(i["get"])(n,"skew.enable")}));0!==e&&n||(u=!0)}})),s.forEach((function(t){["stroke","filling","shadow"].forEach((function(e){if(t[e]){var n="filling"===e&&0!==t[e].type&&"color"!==t[e].type;if(t[e].color&&t[e].enable&&!n){var i=l.find((function(n){return a.a.equals(t[e].color,n)}));i||l.push(t[e].color)}}}))})),!e.color||r&&!u||l.some((function(t){return a.a.equals(t,e.color)}))||l.push(e.color),e.aggregatedColors=l}if(o.forEach((function(t){["stroke","filling","shadow"].forEach((function(n){if(t[n]){var r="filling"===n&&0!==t[n].type&&"color"!==t[n].type;if(t[n].color&&t[n].enable&&!r){var o=Object(i["findIndex"])(e.aggregatedColors,(function(e){return a.a.equals(t[n].color,e)}));o>-1&&(t[n].$linkIndex=o)}}}))})),"text"===t||"effectText"===t){var d=Object(i["findIndex"])(e.aggregatedColors,(function(t){return a.a.equals(e.color,t)}));d>-1&&(e.$linkIndex=d)}if(e.backgroundColor&&0!==a()(e.backgroundColor).getAlpha()){var h=Object(i["findIndex"])(e.aggregatedColors,(function(t){return a.a.equals(e.backgroundColor,t)}));h>-1?e.$backgroundColorLinkIndex=h:(e.$backgroundColorLinkIndex=e.aggregatedColors.length,e.aggregatedColors.push(e.backgroundColor))}else delete e.$backgroundColorLinkIndex;e.aggregatedColors=e.aggregatedColors.map((function(t){return a()(t).toString("rgb")}))}function h(t){var e=t.textEffects.filter((function(t){return!1!==t.enable}));return e=e.reduce((function(t,e){var n=!1!==e.enable&&e.stroke&&!1!==e.stroke.enable&&"outer"===e.stroke.type;if(e=Object(i["cloneDeep"])(e),n){var r=Object(i["merge"])({},e,{stroke:{enable:!0,type:"center",color:e.stroke.color,width:2*e.stroke.width}});e.stroke&&(e.stroke.enable=!1),e.shadow&&(e.shadow.enable=!1),t.push(e),t.push(r)}else t.push(e);return t}),[]),e.reverse(),e}function f(t){var e=t.naturalWidth,n=t.naturalHeight,i=t.$imageWidth,r=t.$imageHeight,a=t.$imageLeft,o=t.$imageTop,s=t.imageTransform,c=t.width,l=t.height,u=t.parseTransform(s),d=u.position,h=u.scale;return h.x=i/e,h.y=r/n,d.x=a+i/2-c/2,d.y=o+r/2-l/2,u}function m(t,e){var n,i=t.$imageWidth,r=t.$imageHeight,a=t.$imageLeft,o=t.$imageTop,s=t.background,c=t.imageTransform,l=t.width,u=t.height,d=c.scale.x<0?-1:1,h=c.scale.y<0?-1:1;c=c||(null===s||void 0===s||null===(n=s.image)||void 0===n?void 0:n.imageTransform),c.scale.x=i/e.naturalWidth*d,c.scale.y=r/e.naturalHeight*h,c.position.x=a+i/2-l/2,c.position.y=o+r/2-u/2,c.updateLocalTransform()}},e0b4:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("313d"),n("0eb6"),n("b7ef"),n("8bd4");var i=n("f49e");function r(t){var e=(new XMLSerializer).serializeToString(t),n=window.btoa(unescape(encodeURIComponent(e))),r="data:image/svg+xml;base64,".concat(n);return i["a"].loadImage(r)}},e156:function(t,e,n){"use strict";n.d(e,"b",(function(){return g})),n.d(e,"a",(function(){return p})),n.d(e,"g",(function(){return v})),n.d(e,"c",(function(){return b})),n.d(e,"d",(function(){return y})),n.d(e,"e",(function(){return _})),n.d(e,"f",(function(){return x}));var i=n("2909"),r=(n("d3b7"),n("d81d"),n("3ca3"),n("ddb0"),n("f684")),a=n.n(r),o=n("4b2d"),s=n.n(o),c=function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=!!i.throwError,o=+i.timeout||5e3;return a.a.try((function(){return t.resizer||(t.resizer=new s.a({features:["js","ww","cib"]})),t.resizer})).then((function(t){return t.resize(e,n,i)})).timeout(o,"Image resize timeout by pica").catch((function(t){if(r)throw t;return e}))},l=c,u=Math.sin,d=Math.cos,h=Math.atan,f=Math.sqrt,m=Math.round,g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=!!window.chrome&&(!!window.chrome.webstore||!!window.chrome.runtime);if(n&&i&&window.OffscreenCanvas)return new OffscreenCanvas(m(t),m(e));var r=document.createElement("canvas");return r.height=m(e),r.width=m(t),r},p=function(t){t.getContext&&(t.width=0,t.height=0)},v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=g(e,n);if(!r){var o=a.getContext("2d");return o.drawImage(t,0,0,e,n),Promise.resolve(a)}return l(t,a,i)},b=function(t,e,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"source-in",o=t.getContext("2d");o.globalCompositeOperation=a;var s=f(i.width*i.width+i.height*i.height)/2,c=h(i.height/i.width),l=m(n.x-d(r+c)*s),g=m(n.y-u(r+c)*s);return o.translate(l,g),o.rotate(r),o.drawImage(e,0,0,i.width,i.height),o.setTransform(1,0,0,1,0,0),t},y=function(t,e){var n=e.width,i=e.height,r=e.ratio,a=void 0===r?1:r,o=t.naturalWidth||t.width,s=t.naturalHeight||t.height,c=n/i>1?[o*i/s,i]:[n,s*n/o],l=g(c[0]*a,c[1]*a),u=l.getContext("2d");u.drawImage(t,0,0,c[0]*a,c[1]*a);var d=g(n,i),h=d.getContext("2d"),f=h.createPattern(l,"repeat");return h.fillStyle=f,h.fillRect(0,0,n,i),d},w=function(t,e){var n=!1,i=null;i=e.getImageData(0,0,t.width,t.height),i=i.data;var r=i.length-1;while(r>0){if(255!==i[r]){n=!0;break}r-=4}return n},_=function(t){var e=1e3,n=Math.min(1,Math.min(e/t.width,e/t.height)),i=g(t.width*n,t.height*n),r=i.getContext("2d");return w(i,r)},x=function(t){var e=t.canvas,n=t.image,r=t.width,a=t.height,o=t.naturalWidth,s=t.naturalHeight,c=t.imageTransformArray,l=t.blendMode,u=void 0===l?"source-out":l,d=t.mask,h={x:(o-r)/2,y:(s-a)/2},f={width:o,height:s,cx:o/2,cy:s/2},m=e.getContext("2d");return m.imageSmoothingEnabled=!0,d&&m.drawImage(d,0,0,r,a),m.globalCompositeOperation=u,m.translate(-h.x+f.cx,-h.y+f.cy),m.transform.apply(m,Object(i["a"])(c.map((function(t,e){return t})))),m.translate(-f.cx,-f.cy),m.drawImage(n,0,0,f.width,f.height),m.setTransform(1,0,0,1,0,0),e}},e222:function(t,e,n){"use strict";n.d(e,"b",(function(){return i}));n("e9c4");e["a"]={get:function(t){var e=localStorage.getItem(t);if(!e)return null;try{e=JSON.parse(e)}catch(n){}return e},set:function(t,e){localStorage.setItem(t,JSON.stringify(e))}};var i={get:function(t){var e=sessionStorage.getItem(t);if(!e)return null;try{e=JSON.parse(e)}catch(n){}return e},set:function(t,e){sessionStorage.setItem(t,JSON.stringify(e))}}},e36a:function(t,e,n){"use strict";n("5916")},e4b7:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return u}));var i=n("5530"),r=(n("ac1f"),n("466d"),n("4d63"),n("c607"),n("2c3e"),n("25f0"),n("caad"),n("2532"),n("d81d"),n("d3b7"),n("13d5"),n("159b"),n("99af"),n("1276"),n("5319"),n("4de4"),n("2ef0")),a=/(\r?\n|\r)/gm,o=4e3;function s(t,e){var n=t.match(new RegExp("".concat(e,":([^;]+)")));return n?n[1]:""}function c(t,e){var n=[],i=t,r=function(){var t=i.getAttribute("style")||"";i.style.transform="matrix(1, 0, 0, 1, 0, 0)",e===i&&(i.style.left=0,i.style.top=0);var r=i;i=i.parentNode,n.push((function(){r.style.transform=s(t,"transform"),e===r&&(r.style.left=s(t,"left"),r.style.top=s(t,"top"))}))};while(i&&!i.classList.contains("editor-layout"))r();return n}function l(t,e){if(!t)return[];var n=t.getAttribute("style")||"",i=window.getComputedStyle(t),a=c(t,t),l=e.getBoundingClientRect(),u=i.writingMode.includes("vertical"),d=[[]],h=d[0],f=[];t.style.lineHeight=o+"px";var m=function t(e){return Object(r["toArray"])(e).map((function(e){if(e.childNodes.length>1)return t(e.childNodes);var n=e instanceof Text?e:e.firstChild;if(!n)return"";var i=n.data&&n.data.length||0,r=document.createRange(),a=0;r.selectNodeContents(n);while(a<=i){r.setStart(n,Math.max(a-1,0)),r.setEnd(n,a);var o=r.getClientRects?r.getClientRects():[r.getBoundingClientRect()],s=o[o.length-1];o.length>1&&s.width<2&&(s=o[o.length-2]);var c=r.toString();if(""!==c&&s&&s.width+s.height!==0){var l={content:c,width:s.width,top:s.top,left:s.left,height:s.height};f.push(l)}a++}}))};return m(t.childNodes),f.length&&(h.push(f[0]),f.reduce((function(t,e){var n=u?"left":"top";return Math.abs(e[n]-t[n])>o/2&&(h=[],d.push(h)),h.push(e),e}))),f=[],t.style.lineHeight=s(n,"line-height"),m(t.childNodes),d.reduce((function(t,e){return t.concat(e)}),[]).forEach((function(t,e){t.textWidth=t.width,t.textHeight=t.height,Object.assign(t,f[e]),t.left=t.left-l.left,t.top=t.top-l.top})),a.forEach((function(t){return t()})),d}function u(t,e){var n=e.fontFamily,r=e.fontSize,o=e.textDecoration,s=e.color,c=e.contents,l={fontFamily:n,fontSize:r,textDecoration:o,color:s},u=[];return t.forEach((function(t,e){t.forEach((function(t,n){t.lineIndex=e,t.wordIndex=n,u.push(t)}))})),c=c.reduce((function(t,e){return t.concat(e.content.replace(a,"").split("").map((function(t){var n=Object(i["a"])(Object(i["a"])(Object(i["a"])({},l),e),{},{content2:t});return delete n.content,n})))}),[]),c=c.filter((function(t){return"\n"!==t.content2})),u.forEach((function(t,e){Object.assign(t,c[e])})),u}},e59c:function(t,e,n){"use strict";n.d(e,"d",(function(){return l})),n.d(e,"e",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return c}));var i=n("5530"),r=(n("d81d"),n("acd8"),n("b680"),n("ac1f"),n("00b4"),n("d3b7"),n("159b"),function(t,e){return t*=e,t%1!==0&&(t=Math.floor(10*t)/10),t}),a=function(t,e,n){t.letterSpacing=e.letterSpacing*n,t.fontSize=r(e.fontSize,n),t.contents&&(t.contents=t.contents.map((function(t,a){return Object(i["a"])(Object(i["a"])({},t),{},{fontSize:r(e.contents[a].fontSize||e.fontSize,n)})})))},o=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t.strokeWidth||0,o=1!==n?a/2:0,s=1!==i?a/2:0;r&&(o=0,s=0),n&&i&&(t.$paths=e.$paths.map((function(t){var e=[t[0]];return void 0!==t[1]&&(e[1]=o+(t[1]-o)*n),void 0!==t[2]&&(e[2]=s+(t[2]-s)*i),void 0!==t[3]&&(e[3]=o+(t[3]-o)*n),void 0!==t[4]&&(e[4]=s+(t[4]-s)*i),void 0!==t[5]&&(e[5]=o+(t[5]-o)*n),void 0!==t[6]&&(e[6]=s+(t[6]-s)*i),e})))},s=function(t,e,n){t.$originalScale=parseFloat((e.$originalScale*n).toFixed(2)),c(t)},c=function(t){var e=t.$originalScale||1,n=t.minWidth,i=t.width/e;t.$minScale=Math.min(1,i/n);var r=Math.max(t.head.height+t.head.top,t.tail.height+t.tail.top,t.trunk.height+t.trunk.top);t.height=r*t.$minScale*e},l=function(t,e,n){var i=(/text/i.test(t.type)?t.textEffects:t.imageEffects)||[],r=e.textEffects||e.imageEffects||[];i.forEach((function(t,e){var i=t.offset,a=t.stroke,o=t.shadow,s=t.filling,c=t.expand,l=r[e];if(l&&(i&&(i.x=l.offset.x*n,i.y=l.offset.y*n),a&&(a.width=l.stroke.width*n),o&&(o.offsetX=l.shadow.offsetX*n,o.offsetY=l.shadow.offsetY*n,o.blur=l.shadow.blur*n),c&&(c.offset.left=l.expand.offset.left*n,c.offset.right=l.expand.offset.right*n,c.offset.top=l.expand.offset.top*n,c.offset.bottom=l.expand.offset.bottom*n),s&&(1===s.type||"image"===s.type))){var u=l.filling.imageContent,d=u.scaleX,h=u.scaleY;s.imageContent.scaleX=Math.max(.01,d*n)||1,s.imageContent.scaleY=Math.max(.01,h*n)||1}}))}},e724:function(t,e,n){},e86a:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("d4ec"),r=n("bee2"),a=(n("ace4"),n("d3b7"),n("cfc3"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("fa9e"),n("77d9"),n("99af"),n("89eb")),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;Object(i["a"])(this,t),this.a=e,this.b=n,this.c=r,this.d=a,this.tx=o,this.ty=s,this.array=null}return Object(r["a"])(t,[{key:"fromArray",value:function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}},{key:"set",value:function(t,e,n,i,r,a){return this.a=t,this.b=e,this.c=n,this.d=i,this.tx=r,this.ty=a,this}},{key:"toArray",value:function(t,e){this.array||(this.array=new Float32Array(9));var n=e||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}},{key:"toString",value:function(){return"matrix(".concat(this.a,",").concat(this.b,",").concat(this.c,",").concat(this.d,",").concat(this.tx,",").concat(this.ty,")")}},{key:"apply",value:function(t,e){e=e||new a["a"];var n=t.x,i=t.y;return e.x=this.a*n+this.c*i+this.tx,e.y=this.b*n+this.d*i+this.ty,e}},{key:"applyInverse",value:function(t,e){e=e||new a["a"];var n=1/(this.a*this.d+this.c*-this.b),i=t.x,r=t.y;return e.x=this.d*n*i+-this.c*n*r+(this.ty*this.c-this.tx*this.d)*n,e.y=this.a*n*r+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,e}},{key:"translate",value:function(t,e){return this.tx+=t,this.ty+=e,this}},{key:"scale",value:function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}},{key:"rotate",value:function(t){var e=Math.cos(t),n=Math.sin(t),i=this.a,r=this.c,a=this.tx;return this.a=i*e-this.b*n,this.b=i*n+this.b*e,this.c=r*e-this.d*n,this.d=r*n+this.d*e,this.tx=a*e-this.ty*n,this.ty=a*n+this.ty*e,this}},{key:"append",value:function(t){var e=this.a,n=this.b,i=this.c,r=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*n+t.b*r,this.c=t.c*e+t.d*i,this.d=t.c*n+t.d*r,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*n+t.ty*r+this.ty,this}},{key:"setTransform",value:function(t,e,n,i,r,a,o,s,c){var l=Math.sin(o),u=Math.cos(o),d=Math.cos(c),h=Math.sin(c),f=-Math.sin(s),m=Math.cos(s),g=u*r,p=l*r,v=-l*a,b=u*a;return this.a=d*g+h*v,this.b=d*p+h*b,this.c=f*g+m*v,this.d=f*p+m*b,this.tx=t+(n*g+i*v),this.ty=e+(n*p+i*b),this}},{key:"prepend",value:function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var n=this.a,i=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}},{key:"decompose",value:function(t){var e=Math.PI,n=Math.acos,i=Math.atan,r=Math.sqrt,a=this.a,o=this.b,s=this.c,c=this.d,l=0,u={x:0,y:0},d={x:1,y:1},h=a*c-o*s;if(a||o){var f=r(a*a+o*o);l=o>0?n(a/f):-n(a/f),u.x=i((a*s+o*c)/(f*f)),d={x:f,y:h/f}}else if(s||c){var m=r(s*s+c*c);l=.5*e-(c>0?n(-s/m):-n(s/m)),d={x:h/m,y:m},u.y=i((a*s+o*c)/(m*m))}else d={x:0,y:0};t.rotation=l||0,t.scale.x=d.x,t.scale.y=d.y,t.skew.x=u.x,t.skew.y=u.y,t.position.x=this.tx,t.position.y=this.ty}},{key:"invert",value:function(){var t=this.a,e=this.b,n=this.c,i=this.d,r=this.tx,a=t*i-e*n;return this.a=i/a,this.b=-e/a,this.c=-n/a,this.d=t/a,this.tx=(n*this.ty-i*r)/a,this.ty=-(t*this.ty-e*r)/a,this}},{key:"identity",value:function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}},{key:"clone",value:function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}},{key:"copy",value:function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}}],[{key:"IDENTITY",get:function(){return new t}},{key:"TEMP_MATRIX",get:function(){return new t}}]),t}()},e8f4:function(t,e){t.exports='<div\n    class="editor-element"\n    :class="[\n        \'editor-element-\' + model.type,\n        model.resize === 0b111 ? \'editor-element-overflow-hidden\' : \'\',\n        model.lock ? \'editor-element-lock\' : \'\',\n        model.hidden ? \'editor-element-hidden\' : \'\',\n        model.frozen ? \'editor-element-frozen\' : \'\',\n        model.$loaded ? \'\' : \'editor-element-loading\',\n        model.$selected ? \'editor-element-selected\' : \'\',\n        model.$editing ? \'editor-element-editing\' : \'\',\n        linkSelected ? \'editor-element-link-selected\' : \'\'\n    ]"\n    :style="[baseStyle]"\n>\n    <div\n        class="element-inner"\n        :style="{\n            textAlign: model.textAlign,\n            lineHeight: model.lineHeight,\n            textShadow: textShadow,\n            width: model.width + \'px\',\n            height: model.height + \'px\',\n            transform: \'scale(\' + global.zoom + \')\',\n            overflow: !model.autoAdaptive ? \'hidden\' : \'visible\'\n        }"\n    >\n        <template v-if="hasEffects">\n            <div class="elment-inner-position" v-for="(effect, i) in effectedTextEffects" :key="i">\n                <div\n                    :class="[isVertical ? \'middle-v\' : \'middle-h\', listClass]"\n                    :style="{\n                        width: model.width + \'px\',\n                        height: model.height + \'px\',\n                        padding: textPadding\n                    }"\n                    class="elment-inner-content"\n                >\n                    <div\n                        class="element-main"\n                        :style="effectStyles[i]"\n                        ref="textNode"\n                        v-html="contentsHTML"\n                    ></div>\n                </div>\n            </div>\n        </template>\n        <div v-else class="elment-inner-position">\n            \x3c!--\n                多套一层解决 chrome 70以下、safari浏览器，兼容问题\n                同时存在竖排、padding、绝对定位, 导致的左侧莫名增加 paddingLeft + paddingRight px\n            --\x3e\n            <div\n                :class="[isVertical ? \'middle-v\' : \'middle-h\', listClass]"\n                :style="{\n                    padding: textPadding,\n                    width: model.width + \'px\',\n                    height: model.height + \'px\',\n                }"\n                class="elment-inner-content"\n            >\n                <div\n                    class="element-main"\n                    :style="textStyle"\n                    ref="textNode"\n                    v-html="contentsHTML"\n                ></div>\n            </div>\n        </div>\n    </div>\n\n    <ElementCommon\n        :element="model"\n        :options="options"\n        :global="global"\n        :editor="editor"\n        :layout="editor.currentLayout"\n        :hideBlink="hideBlink"\n        :isShowBlink="isShowBlink"\n        :bgNinePatch="bgNinePatch"\n    />\n</div>\n'},e932:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("d3b7"),n("159b");function i(t,e){var n=t.layouts;if(n){var i=[];n.forEach((function(t,e){var n=t.elements,r=n.length;if(n||r)for(var a=0;a<r;a++)i[i.length]={element:t.elements[a],parent:t,layout:t,layoutIndex:e}}));while(i.length){var r=i[0],a=r.element,o=r.parent,s=r.layout,c=r.layoutIndex;if(i.shift(),e(a,o,s,c),Array.isArray(a.elements))for(var l=a.elements.length,u=0;u<l;u++)i[i.length]={element:a.elements[u],parent:a,layout:s,layoutIndex:c}}}}},e9fa:function(t,e,n){"use strict";var i=n("d4ec"),r=n("bee2"),a=n("257e"),o=n("262e"),s=n("2caf"),c=(n("2ca0"),n("d9e2"),n("4de4"),n("d3b7"),n("b64b"),n("7db0"),n("61d3")),l=n("e002"),u=n("49bc"),d=n("4281"),h=function(t){Object(o["a"])(n,t);var e=Object(s["a"])(n);function n(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(i["a"])(this,n),r=e.call(this,t),r.imageTransform=r.parseTransform(r.imageTransform),r.imageEffects&&Object(l["f"])("image",Object(a["a"])(r),!0);var s=r.hasEffects,c=r.hasFilters;return!t.effectedResult&&s&&(r.imageUrl=""),t.isGif&&(r.resourceType="gif"),"boolean"===typeof t.loop&&(r.loop=t.loop?0:1),r.filterInfo=t.filterInfo||{id:-1,url:"",strong:.8,intensity:.8},!s&&r.effectedResult&&(r.effectedResult.width=0,r.effectedResult.height=0,r.effectedResult.left=0,r.effectedResult.top=0),s||c?r.effectedImage&&(r.imageUrl=r.effectedImage):r.effectedImage="",t.naturalWidth?(r.naturalWidth=t.naturalWidth,r.naturalHeight=t.naturalHeight):(r.naturalWidth=t.imageWidth||t.width,r.naturalHeight=t.imageHeight||t.height,r.$imageLeft=r.imageTransform.position.x,r.$imageTop=r.imageTransform.position.y),r.imageUrl&&!r.$renderId&&(r.$renderId=r.$id),r.imageUrl&&r.imageUrl.startsWith("data:image")&&(r.imageUrl=""),d["c"].get(r.$renderId)?r.imageUrl=d["c"].get(r.$renderId):r.imageUrl&&d["c"].set(r.$renderId,r.imageUrl),r.url=d["c"].get(r.url)||r.url,r.setSizeBeforeEffectRendered(o),r.$clipCache||r.setClipCache(),delete r.effectedImage,delete r.effectedImageWidth,delete r.effectedImageHeight,delete r.effectedImageOffsetLeft,delete r.effectedImageOffsetTop,delete r.imageWidth,delete r.imageHeight,delete r.originWidth,delete r.originHeight,delete r.clip,r}return Object(r["a"])(n,[{key:"setSizeBeforeEffectRendered",value:function(){this.$beforeEffectRenderedWidth=this.width,this.$beforeEffectRenderedHeight=this.height}},{key:"setClipCache",value:function(){this.$clipCache={offsetX:this.imageTransform.position.x,offsetY:this.imageTransform.position.y,scaleX:this.imageTransform.scale.x,scaleY:this.imageTransform.scale.y,width:this.width,height:this.height}}},{key:"imageWidth",set:function(t){this.$id&&(this.$imageWidth=t,console.error(new Error("imageWidth 字段已废弃, 需用 imageTransform.scaleX * naturalWidth 实现")))}},{key:"imageHeight",set:function(t){this.$id&&(this.$imageHeight=t,console.error(new Error("imageHeight 字段已废弃, 需用 imageTransform.scaleY * naturalHeight 实现")))}},{key:"$imageWidth",get:function(){return Math.abs(this.naturalWidth*this.imageTransform.scale.x)},set:function(t){if(this.$id&&this.imageTransform.scale){var e=this.imageTransform.scale.x<0?-1:1;this.imageTransform.scale.x=t/this.naturalWidth*e}}},{key:"$imageHeight",get:function(){return Math.abs(this.naturalHeight*this.imageTransform.scale.y)},set:function(t){if(this.$id&&this.imageTransform.scale){var e=this.imageTransform.scale.y<0?-1:1;this.imageTransform.scale.y=t/this.naturalHeight*e}}},{key:"$imageLeft",get:function(){var t=this.imageTransform.position,e=this.$imageWidth,n=this.width;return n/2-e/2+t.x},set:function(t){this.$id&&this.imageTransform.scale&&(this.imageTransform.position.x=t+this.$imageWidth/2-this.width/2)}},{key:"$imageTop",get:function(){var t=this.imageTransform.position,e=this.$imageHeight,n=this.height;return n/2-e/2+t.y},set:function(t){this.$id&&this.imageTransform.scale&&(this.imageTransform.position.y=t+this.$imageHeight/2-this.height/2)}},{key:"hasComplexFilters",get:function(){var t=this.filterInfo;return t&&(t.url||t.prunedZipUrl)}},{key:"hasBaseFilters",get:function(){var t=this.filter,e=u["a"].element.filter;return!!t&&Object.keys(t).some((function(n){return t[n]!==e[n]}))}},{key:"hasFilters",get:function(){return this.hasBaseFilters||this.hasComplexFilters}},{key:"hasEffects",get:function(){return!!(this.imageEffects||[]).find((function(t){return t.enable}))}},{key:"isGif",get:function(){return"gif"===this.resourceType}},{key:"isApng",get:function(){return"apng"===this.resourceType}},{key:"isVideo",get:function(){return"video"===this.resourceType||"mp4"===this.resourceType}},{key:"$renderProps",get:function(){return[this.width,this.height,this.opacity,this.maskInfo.enable,this.imageTransform,this.imageEffects]}}]),n}(c["a"]);e["a"]=h},eb3b:function(t,e,n){"use strict";var i=n("3835"),r=n("5530"),a=(n("ac1f"),n("5319"),n("caad"),n("2532"),n("99af"),n("d9e2"),n("d3b7"),n("159b"),n("a15b"),n("4de4"),n("13d5"),n("7db0"),n("498a"),n("b64b"),n("fb6a"),n("a630"),n("3ca3"),n("1276"),n("4e82"),n("2ef0")),o=n("5b44"),s=n("f4d5"),c=/[\u0020\u00A0]{2}/g,l=/<br\s*\/?>/gi,u=/<bbr\s*\/?>/gi,d=/(\r?\n|\r)/gm,h=/[\u200B-\u200D\uFEFF]/gm,f=/[\u0000\u0001\u0002\u0003\u0004\u0005\u0006\u0007\u0008\u0009\u000b\u000c\u000e\u000f\u0010\u0011\u0012\u0013\u0014\u0015\u0016\u0017\u0018\u0019\u001a\u001b\u001c\u001d\u001e\u001f\u007F]/gm,m=function(t){t.innerHTML=t.innerHTML.replace(d,"<br>");var e=t.lastChild,n=["P","DIV"],i=t.nextSibling;if(n.includes(t.nodeName)||i&&["BBR"].concat(n).includes(i.nodeName)){while(e){if("BR"===e.nodeName){e.parentNode.removeChild(e);break}e=e.lastChild}return t.innerHTML=t.innerHTML.replace(l,"\n"),null}};e["a"]={fromHTML:function(t,e){var n=this;if(!Object(a["isArray"])(t))throw new TypeError("contentModel must be a array");var i="";if(e=Object.assign({zoom:1,listStyle:""},e),e.listStyle){var r=[];t.forEach((function(i,a){var o=t[a+1],s=t[a-1];s&&s.closeParentTag||!i.beginParentTag||r.push("<ul>");var c=window.safari?"span":"div";i.beginParentTag&&r.push("<li><".concat(c,">")),r.push(n._fromHTML([i],e)),i.closeParentTag&&r.push("</".concat(c,"></li>")),o&&o.beginParentTag||!i.closeParentTag||r.push("</ul>")})),i=r.join("")}else i=this._fromHTML(t,e);return i},fromJSON:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;if(i=Object.assign({zoom:1,listStyle:""},i),!t)return[];var r=Object(s["a"])("<span></span>").append(t),a=[];if(i.listStyle){r.children("span").each((function(t,e){Object(s["a"])(e).replaceWith(Object(s["a"])("<div></div>").append(Object(s["a"])(e).clone(!0)))}));var o=Object(s["a"])(r.children("div, p, span").concat(r.children("ul, ol").children("li")));o.each((function(t,r){var o=e._fromJSON(Object(s["a"])(r),n,i.zoom);o.length&&(a=a.concat(o),o[0].beginParentTag="li",o[o.length-1].closeParentTag="li")}))}else a=this._fromJSON(r,n,i.zoom);return a},injectStyleProps:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Object(a["isArray"])(t))throw new TypeError("contentModel must be a array");if(!Object(a["isObject"])(e))throw new TypeError("injectStyle must be a object");var n=Object(a["cloneDeep"])(t);return n.forEach((function(t){for(var n in e)Object.prototype.hasOwnProperty.call(o["d"],n)&&(t[n]=e[n])})),n},removeStyleProps:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Object(a["isArray"])(t))throw new TypeError("contentModel must be a array");if(!Object(a["isObject"])(e))throw new TypeError("removeStyle must be a object");var n=Object(a["cloneDeep"])(t);return n.forEach((function(t){for(var n in e)Object.prototype.hasOwnProperty.call(o["d"],n)&&delete t[n]})),this.mergeChild(n)},getAllEqualStyleProps:function(t){if(!Object(a["isArray"])(t))throw new TypeError("contentModel must be a array");t=t.filter((function(t){return t.content&&!!t.content.replace(d,"")}));var e={},n={textDecoration:"none",fontStyle:"normal",fontWeight:400};for(var i in o["d"])-1===i.indexOf("-")&&(e[i]=null);var r=function(i){t.forEach((function(t){var r=t[i]||n[i];null===e[i]?e[i]=r:e[i]!==r&&delete e[i]}))};for(var s in e)r(s);for(var c in e)null!==e[c]&&void 0!==e[c]||delete e[c];return e},mergeChild:function(t,e){var n=this;if(!Object(a["isArray"])(t))throw new TypeError("contentModel must be a array");var i=e?t:Object(a["cloneDeep"])(t),r=i.reduce((function(t,e){var i=t.length-1,r=t[i];if(!r)return t.push(e),t;var a=n._getStyleString(r)===n._getStyleString(e);return!a||r.beginParentTag||r.closeParentTag||e.beginParentTag||e.closeParentTag?t.push(e):r.content+=e.content,t}),[]);return r},_fromJSON:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i={},r=t[0],a=["P","DIV","LI"];for(var c in s["a"].each(t.find("*").not("br").get().reverse(),(function(t,e){var n=Object(s["a"])(e),i=n.html().trim();""!==i||a.includes(e.nodeName)?"<br>"===i?n.replaceWith("<br>"):"<br><br>"===i&&n.replaceWith("<br><br>"):n.remove()})),t.find("p,div,li").each((function(t,e){var n=e.nextSibling,i=e.previousSibling;if(i&&"BR"!==i.nodeName){var r=Object(s["a"])("<bbr>");Object(s["a"])(e).before(r)}n&&!a.includes(n.nodeName)&&Object(s["a"])(e).after("<br>")})),e)Object.prototype.hasOwnProperty.call(o["d"],c)&&(i[c]=e[c]);var l=this._getChildJSON(r,i);return l.forEach((function(t){t.fontSize&&(t.fontSize=t.fontSize/n)})),l=this.mergeChild(l,!0),l.forEach((function(t){t.content&&(t.content=t.content.replace(f,""))})),l.filter((function(t){return!!t.content}))},_fromHTML:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Object(a["isArray"])(t))throw new TypeError("contentModel must be a array");var i="";return t.forEach((function(t){if(t&&t.content){var r={};Object.keys(t).forEach((function(e){Object.prototype.hasOwnProperty.call(o["d"],e)&&(r[e]="fontSize"===e?t[e]*(n.zoom||1):t[e])})),r=e._getStyleString(r);var s=t.content.replace(l,"\n");s=Object(a["escape"])(Object(a["unescape"])(s)).replace(d,"<br>").replace(c,"&nbsp; ").replace(c," &nbsp;").replace(/[\u0020\u00A0](<br>|$)/g,"&nbsp;$1").replace(f,"");var u=s.slice(-4);"<br>"!==u||n.listStyle?i+=r?"<span ".concat(o["a"],'="1" style=\'').concat(r,"'>").concat(s,"</span>"):s:(s=s.slice(0,-4),i+=r?"<span ".concat(o["a"],'="1" style=\'').concat(r,"'>").concat(s,"</span>"):s,i+=u)}})),i},_getChildJSON:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;if(!t.innerHTML)return[];var o,s,c=[],d=function(t){var i=t.getAttribute("style")||"",a=i?e._getStyleJSON(i,n.fontWeight):{};m(t),c=c.concat(e._getChildJSON(t,Object(r["a"])(Object(r["a"])({},n),a)))},f=function(t){t.textContent&&(s=Object(r["a"])(Object(r["a"])({},n),{},{content:Object(a["unescape"])(Object(a["escape"])(t.textContent).replace(h,""))}))},g=function(t){o=t.nodeType,s=null,1===o?d(t):3===o&&f(t),s&&c.push(s)};if(i)g(t);else{t=t.cloneNode(!0),t.innerHTML=t.innerHTML.replace(l,"\n").replace(u,"\n");var p=Array.from(t.childNodes);p.forEach(g)}return c},_getStyleJSON:function(t,e){var n={fontWeight:e||400};return t.split(";").forEach((function(t){var e=t.split(":"),r=Object(i["a"])(e,2),s=r[0],c=r[1];s=o["d"][Object(a["trim"])(s)],c=Object(a["trim"])(c),s&&(n[s]=o["e"][s]?o["e"][s](c):c)})),n},_getStyleString:function(t){var e="";return Object.keys(t).sort().forEach((function(n){var i=t[n];n=o["d"][n],n&&(e+="".concat(n,": ").concat(o["e"][n]?o["e"][n](i):i,";"))})),e}}},edf5:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i={Starting:1,Ready:2,Restored:3,Eventually:4}},f0ab:function(t,e,n){t.exports=n.p+"img/mask-background.a5253453.svg"},f49e:function(t,e,n){"use strict";n("d9e2"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("b0c0"),n("a15b"),n("99af");var i=n("f684"),r=n.n(i),a=(n("d81d"),n("2ef0")),o=n("0342"),s=n.n(o),c=window.FontFace;if(!document.fonts||!document.fonts.load){c=window.FontFace=function(t,e,n){this.name=t,this.url=e,Object(a["assign"])(this,{style:"normal",weight:"normal"},n);var i=this._dfd={};i.promise=new r.a((function(t,e){i.resolve=t,i.reject=e}))},Object(a["assign"])(c.prototype,{toCSS:function(){var t="@font-face {\n";return t+="font-family: "+this.name+";\n",t+="src: "+this.url+";",t+="font-weight: "+this.weight+";",t+="font-style: "+this.style+";",t+="}",t},load:function(){return this._dfd.promise}});var l=document.fonts={ready:r.a.resolve(),check:a["noop"],_fonts:[],size:0,loadTimeout:1e3,add:function(t){var e=l.style;if(e||(e=l.style=document.createElement("style"),document.head.appendChild(e)),!(t instanceof c))throw new TypeError("Only support FontFace");l._fonts.push(t),l.size=l._fonts.length;var n=t._dfd;new s.a(t.name).load("BESbswy",l.loadTimeout).then(n.resolve,(function(t){n.resolve(t)}));var i=e.innerHTML;return i+="\n",i+=t.toCSS(),e.innerHTML=i,l},load:function(){var t=l._fonts.map((function(t){return t.load()}));return r.a.all(t)}}}var u=c,d=(n("caad"),n("2532"),n("cd8b")),h=function(t){var e=document.createElement("div");e.style.cssText="max-width: 500px; position: absolute; top: -10000px; left: -100000px",e.innerHTML=t,document.body.appendChild(e);var n=e.querySelector("svg"),i=n.getBBox(),r=i.width,a=i.height;return!n.getAttribute("width")&&r&&a&&(n.setAttribute("width",Math.round(r)+"px"),n.setAttribute("height",Math.round(a)+"px")),t=e.innerHTML,document.body.removeChild(e),t},f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DataURL";return new r.a((function(n,i){var r=new FileReader,a="readAs".concat(e);if(!r[a])throw new Error("File read error, dataType not support");r.onerror=function(){i(new Error("File read error"))},r.onload=function(){try{if(Object(d["c"])()&&t.type.includes("svg")&&"Text"===e)return void n(h(r.result))}catch(i){}n(r.result)},r[a](t)}))},m=f,g=n("c521"),p={},v={image:new g["LRUMap"](30),audio:new g["LRUMap"](20),video:new g["LRUMap"](20),font:new g["LRUMap"](20),fontSubset:new g["LRUMap"](20),xml:new g["LRUMap"](20),xmlStr:new g["LRUMap"](20)},b="cross_origin=1",y=function(t){var e=location.host;return 0!==t.indexOf("data:")&&t.indexOf(e)<0},w=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&e?(y(t)&&t.indexOf(b)<0&&(t+=t.indexOf("?")<0?"?":"&",t+=b),t):t},_=function(t){return new r.a((function(e,n){var i=new Image;y(t)&&(i.crossOrigin="Anonymous"),i.onload=function(){e(i)},i.onerror=function(){var e="Image load error: "+t;n(new Error(e))},i.src=t}))},x=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"video";return new r.a((function(i,r){var a=document.createElement(n);y(t)&&(a.crossOrigin="Anonymous"),a.onloadeddata=function(){a.currentTime=e},a.ontimeupdate=function(){i(a)},a.onerror=function(){var e="Video load error: "+t;r(new Error(e))},a.currentTime=0===e?.001:0,a.src=t}))},k=function(t){return new r.a((function(e,n){var i=new XMLHttpRequest;i.open("GET",t,!0),i.overrideMimeType("application/xml"),i.onreadystatechange=function(){4===i.readyState&&(i.status>=200&&i.status<300||304===i.status?e(i.responseXML,i):n(new Error(i.responseText)))},i.send(null)}))},E=function(t){return r.a.try((function(){if(DOMParser&&DOMParser.prototype.parseFromString){var e=new DOMParser;return e.parseFromString(t,"application/xml")}var n=new Blob([t],{type:"xml/svg"}),i=URL.createObjectURL(n);return k(i).then((function(t){return URL.revokeObjectURL(i),t}))}))};e["a"]={isCrossOriginUrl:y,getComputedUrl:w,parseXML:E,_documentFonts:p,_loadImage:_,_loadVideo:x,_loadXML:k,loadImage:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=v.image;return t=w(t,e),i.get(t)||(n?i.set(t,_(t).catch((function(e){return x(t,0).then((function(t){return t.naturalWidth=t.width=t.videoWidth,t.naturalHeight=t.height=t.videoHeight,t})).catch((function(){throw e}))}))):i.set(t,_(t))),i.get(t)},loadVideo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=v.video;t=w(t,n);var r=t+e;return i.get(r)||i.set(r,x(t,e,"video").then((function(t){return t.naturalWidth=t.width=t.videoWidth,t.naturalHeight=t.height=t.videoHeight,t}))),i.get(r)},loadAudio:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=v.audio;return t=w(t,n),i.get(t)||i.set(t,x(t,e,"audio")),i.get(t)},loadXML:function(t){var e=v.xml;return e.get(t)||e.set(t,k(t).catch((function(t){throw t.message="Svg load error: "+t.message,t}))),e.get(t)},loadXMLStr:function(t){var e=v.xmlStr;return e.get(t)||e.set(t,r.a.try((function(){return fetch(t).then((function(t){return t.text()}))})).catch((function(t){throw t.message="Svg str load error: "+t.message,t}))),e.get(t)},loadFont:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4,n=v.font,i=v.fontSubset,a=t.name,o=t.family;if(!n.get(a)){var s=['local("'.concat(a,'")')];o&&o!==a&&s.push('local("'.concat(o,'")')),t.woff||t.url?s.push('url("'.concat(t.woff||t.url,'")')):t.ttf&&s.push('url("'.concat(t.ttf,'")'));var c={weight:t.weight||"normal",style:t.style||"normal",display:t.display||"auto"},l=function(i,s){return r.a.try((function(){var e,n,r;s&&(n=a+t.subset.suffix,r=o+t.subset.suffix);try{e=new u(n||a,i.join(","),c)}catch(l){e=new u(r||o,i.join(","),c)}return document.fonts.add(e),p[n]=e,e.load()})).timeout(e,"Font [".concat(o,"] load timeout(").concat(e,"ms)")).catch((function(t){throw delete n[a],t}))};if(t.subset&&t.subset.promise){var d=function(){return t.subset.promise.then((function(t){return l(['local("'.concat(a,'")'),'url("'+t+'")'],!0)})).catch((function(){return n.set(a,l(s)),n.get(a)}))};if(!t.subset.content)return d();var h=t.subset.content+"-"+a+"-"+t.subset.suffix;return i.get(h)||i.set(h,d()),i.get(h)}n.set(a,l(s))}return n.get(a)},readFile:m}},f4d5:function(t,e,n){"use strict";var i,r=n("53ca");n("99af"),n("4de4"),n("d3b7"),n("fb6a"),n("3410"),n("ac1f"),n("5319"),n("4d63"),n("c607"),n("2c3e"),n("25f0"),n("d81d"),n("00b4"),n("498a"),n("7db0"),n("159b"),n("a9e3"),n("1276"),n("13d5"),n("4e82"),n("a434"),n("a15b"),n("acd8"),n("d9e2");(function(t,e){"function"===typeof define&&n("3c35")?define((function(){return e(t)})):e(t)})(window,(function(t){return i=function(){var e,n,i,a,o,s,c=[],l=c.concat,u=c.filter,d=c.slice,h=t.document,f={},m={},g={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},p=/^\s*<(\w+|!)[^>]*>/,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,b=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,y=/^(?:body|html)$/i,w=/([A-Z])/g,_=["val","css","html","text","data","width","height","offset"],x=["after","prepend","before","append"],k=h.createElement("table"),E=h.createElement("tr"),O={tr:h.createElement("tbody"),tbody:k,thead:k,tfoot:k,td:E,th:E,"*":h.createElement("div")},S=/complete|loaded|interactive/,j=/^[\w-]*$/,I={},A=I.toString,T={},C=h.createElement("div"),P={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},$=Array.isArray||function(t){return t instanceof Array};function M(t){return null==t?String(t):I[A.call(t)]||"object"}function R(t){return"function"==M(t)}function L(t){return null!=t&&t==t.window}function U(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function z(t){return"object"==M(t)}function D(t){return z(t)&&!L(t)&&Object.getPrototypeOf(t)==Object.prototype}function B(t){var e=!!t&&"length"in t&&t.length,n=i.type(t);return"function"!=n&&!L(t)&&("array"==n||0===e||"number"===typeof e&&e>0&&e-1 in t)}function N(t){return u.call(t,(function(t){return null!=t}))}function F(t){return t.length>0?i.fn.concat.apply([],t):t}function H(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function V(t){return t in m?m[t]:m[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function G(t,e){return"number"!==typeof e||g[H(t)]?e:e+"px"}function W(t){var e,n;return f[t]||(e=h.createElement(t),h.body.appendChild(e),n=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),f[t]=n),f[t]}function Y(t){return"children"in t?d.call(t.children):i.map(t.childNodes,(function(t){if(1==t.nodeType)return t}))}function q(t,e){var n,i=t?t.length:0;for(n=0;n<i;n++)this[n]=t[n];this.length=i,this.selector=e||""}function X(t,i,r){for(n in i)r&&(D(i[n])||$(i[n]))?(D(i[n])&&!D(t[n])&&(t[n]={}),$(i[n])&&!$(t[n])&&(t[n]=[]),X(t[n],i[n],r)):i[n]!==e&&(t[n]=i[n])}function Z(t,e){return null==e?i(t):i(t).filter(e)}function K(t,e,n,i){return R(e)?e.call(t,n,i):e}function J(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function Q(t,n){var i=t.className||"",r=i&&i.baseVal!==e;if(n===e)return r?i.baseVal:i;r?i.baseVal=n:t.className=n}function tt(t){try{return t?"true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?i.parseJSON(t):t):t}catch(e){return t}}function et(t,e){e(t);for(var n=0,i=t.childNodes.length;n<i;n++)et(t.childNodes[n],e)}return T.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n,i=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(i)return i.call(t,e);var r=t.parentNode,a=!r;return a&&(r=C).appendChild(t),n=~T.qsa(r,e).indexOf(t),a&&C.removeChild(t),n},o=function(t){return t.replace(/-+(.)?/g,(function(t,e){return e?e.toUpperCase():""}))},s=function(t){return u.call(t,(function(e,n){return t.indexOf(e)==n}))},T.fragment=function(t,n,r){var a,o,s;return v.test(t)&&(a=i(h.createElement(RegExp.$1))),a||(t.replace&&(t=t.replace(b,"<$1></$2>")),n===e&&(n=p.test(t)&&RegExp.$1),n in O||(n="*"),s=O[n],s.innerHTML=""+t,a=i.each(d.call(s.childNodes),(function(){s.removeChild(this)}))),D(r)&&(o=i(a),i.each(r,(function(t,e){_.indexOf(t)>-1?o[t](e):o.attr(t,e)}))),a},T.Z=function(t,e){return new q(t,e)},T.isZ=function(t){return t instanceof T.Z},T.init=function(t,n){var r;if(!t)return T.Z();if("string"===typeof t)if(t=t.trim(),"<"==t[0]&&p.test(t))r=T.fragment(t,RegExp.$1,n),t=null;else{if(n!==e)return i(n).find(t);r=T.qsa(h,t)}else{if(R(t))return i(h).ready(t);if(T.isZ(t))return t;if($(t))r=N(t);else if(z(t))r=[t],t=null;else if(p.test(t))r=T.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==e)return i(n).find(t);r=T.qsa(h,t)}}return T.Z(r,t)},i=function(t,e){return T.init(t,e)},i.extend=function(t){var e,n=d.call(arguments,1);return"boolean"===typeof t&&(e=t,t=n.shift()),n.forEach((function(n){X(t,n,e)})),t},T.qsa=function(t,e){var n,i="#"==e[0],r=!i&&"."==e[0],a=i||r?e.slice(1):e,o=j.test(a);return t.getElementById&&o&&i?(n=t.getElementById(a))?[n]:[]:1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType?[]:d.call(o&&!i&&t.getElementsByClassName?r?t.getElementsByClassName(a):t.getElementsByTagName(e):t.querySelectorAll(e))},i.contains=h.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){while(e&&(e=e.parentNode))if(e===t)return!0;return!1},i.type=M,i.isFunction=R,i.isWindow=L,i.isArray=$,i.isPlainObject=D,i.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},i.isNumeric=function(t){var e=Number(t),n=Object(r["a"])(t);return null!=t&&"boolean"!=n&&("string"!=n||t.length)&&!isNaN(e)&&isFinite(e)||!1},i.inArray=function(t,e,n){return c.indexOf.call(e,t,n)},i.camelCase=o,i.trim=function(t){return null==t?"":String.prototype.trim.call(t)},i.uuid=0,i.support={},i.expr={},i.noop=function(){},i.map=function(t,e){var n,i,r,a=[];if(B(t))for(i=0;i<t.length;i++)n=e(t[i],i),null!=n&&a.push(n);else for(r in t)n=e(t[r],r),null!=n&&a.push(n);return F(a)},i.each=function(t,e){var n,i;if(B(t)){for(n=0;n<t.length;n++)if(!1===e.call(t[n],n,t[n]))return t}else for(i in t)if(!1===e.call(t[i],i,t[i]))return t;return t},i.grep=function(t,e){return u.call(t,e)},t.JSON&&(i.parseJSON=JSON.parse),i.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(t,e){I["[object "+e+"]"]=e.toLowerCase()})),i.fn={constructor:T.Z,length:0,forEach:c.forEach,reduce:c.reduce,push:c.push,sort:c.sort,splice:c.splice,indexOf:c.indexOf,concat:function(){var t,e,n=[];for(t=0;t<arguments.length;t++)e=arguments[t],n[t]=T.isZ(e)?e.toArray():e;return l.apply(T.isZ(this)?this.toArray():this,n)},map:function(t){return i(i.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return i(d.apply(this,arguments))},ready:function(t){return S.test(h.readyState)&&h.body?t(i):h.addEventListener("DOMContentLoaded",(function(){t(i)}),!1),this},get:function(t){return t===e?d.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each((function(){null!=this.parentNode&&this.parentNode.removeChild(this)}))},each:function(t){return c.every.call(this,(function(e,n){return!1!==t.call(e,n,e)})),this},filter:function(t){return R(t)?this.not(this.not(t)):i(u.call(this,(function(e){return T.matches(e,t)})))},add:function(t,e){return i(s(this.concat(i(t,e))))},is:function(t){return this.length>0&&T.matches(this[0],t)},not:function(t){var n=[];if(R(t)&&t.call!==e)this.each((function(e){t.call(this,e)||n.push(this)}));else{var r="string"===typeof t?this.filter(t):B(t)&&R(t.item)?d.call(t):i(t);this.forEach((function(t){r.indexOf(t)<0&&n.push(t)}))}return i(n)},has:function(t){return this.filter((function(){return z(t)?i.contains(this,t):i(this).find(t).size()}))},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!z(t)?t:i(t)},last:function(){var t=this[this.length-1];return t&&!z(t)?t:i(t)},find:function(t){var e,n=this;return e=t?"object"===Object(r["a"])(t)?i(t).filter((function(){var t=this;return c.some.call(n,(function(e){return i.contains(e,t)}))})):1==this.length?i(T.qsa(this[0],t)):this.map((function(){return T.qsa(this,t)})):i(),e},closest:function(t,e){var n=[],a="object"===Object(r["a"])(t)&&i(t);return this.each((function(i,r){while(r&&!(a?a.indexOf(r)>=0:T.matches(r,t)))r=r!==e&&!U(r)&&r.parentNode;r&&n.indexOf(r)<0&&n.push(r)})),i(n)},parents:function(t){var e=[],n=this;while(n.length>0)n=i.map(n,(function(t){if((t=t.parentNode)&&!U(t)&&e.indexOf(t)<0)return e.push(t),t}));return Z(e,t)},parent:function(t){return Z(s(this.pluck("parentNode")),t)},children:function(t){return Z(this.map((function(){return Y(this)})),t)},contents:function(){return this.map((function(){return this.contentDocument||d.call(this.childNodes)}))},siblings:function(t){return Z(this.map((function(t,e){return u.call(Y(e.parentNode),(function(t){return t!==e}))})),t)},empty:function(){return this.each((function(){this.innerHTML=""}))},pluck:function(t){return i.map(this,(function(e){return e[t]}))},show:function(){return this.each((function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=W(this.nodeName))}))},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var e=R(t);if(this[0]&&!e)var n=i(t).get(0);var r=n.parentNode||this.length>1;return this.each((function(a){i(this).wrapAll(e?t.call(this,a):r?n.cloneNode(!0):n)}))},wrapAll:function(t){if(this[0]){var e;i(this[0]).before(t=i(t));while((e=t.children()).length)t=e.first();i(t).append(this)}return this},wrapInner:function(t){var e=R(t);return this.each((function(n){var r=i(this),a=r.contents(),o=e?t.call(this,n):t;a.length?a.wrapAll(o):r.append(o)}))},unwrap:function(){return this.parent().each((function(){i(this).replaceWith(i(this).children())})),this},clone:function(){return this.map((function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(t){return this.each((function(){var n=i(this);(t===e?"none"==n.css("display"):t)?n.show():n.hide()}))},prev:function(t){return i(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return i(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each((function(e){var n=this.innerHTML;i(this).empty().append(K(this,t,e,n))})):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each((function(e){var n=K(this,t,e,this.textContent);this.textContent=null==n?"":""+n})):0 in this?this.pluck("textContent").join(""):null},attr:function(t,i){var r;return"string"!==typeof t||1 in arguments?this.each((function(e){if(1===this.nodeType)if(z(t))for(n in t)J(this,n,t[n]);else J(this,t,K(this,i,e,this.getAttribute(t)))})):0 in this&&1==this[0].nodeType&&null!=(r=this[0].getAttribute(t))?r:e},removeAttr:function(t){return this.each((function(){1===this.nodeType&&t.split(" ").forEach((function(t){J(this,t)}),this)}))},prop:function(t,e){return t=P[t]||t,1 in arguments?this.each((function(n){this[t]=K(this,e,n,this[t])})):this[0]&&this[0][t]},removeProp:function(t){return t=P[t]||t,this.each((function(){delete this[t]}))},data:function(t,n){var i="data-"+t.replace(w,"-$1").toLowerCase(),r=1 in arguments?this.attr(i,n):this.attr(i);return null!==r?tt(r):e},val:function(t){return 0 in arguments?(null==t&&(t=""),this.each((function(e){this.value=K(this,t,e,this.value)}))):this[0]&&(this[0].multiple?i(this[0]).find("option").filter((function(){return this.selected})).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each((function(t){var n=i(this),r=K(this,e,t,n.offset()),a=n.offsetParent().offset(),o={top:r.top-a.top,left:r.left-a.left};"static"==n.css("position")&&(o["position"]="relative"),n.css(o)}));if(!this.length)return null;if(h.documentElement!==this[0]&&!i.contains(h.documentElement,this[0]))return{top:0,left:0};var n=this[0].getBoundingClientRect();return{left:n.left+t.pageXOffset,top:n.top+t.pageYOffset,width:Math.round(n.width),height:Math.round(n.height)}},css:function(t,e){if(arguments.length<2){var r=this[0];if("string"===typeof t){if(!r)return;return r.style[o(t)]||getComputedStyle(r,"").getPropertyValue(t)}if($(t)){if(!r)return;var a={},s=getComputedStyle(r,"");return i.each(t,(function(t,e){a[e]=r.style[o(e)]||s.getPropertyValue(e)})),a}}var c="";if("string"==M(t))e||0===e?c=H(t)+":"+G(t,e):this.each((function(){this.style.removeProperty(H(t))}));else for(n in t)t[n]||0===t[n]?c+=H(n)+":"+G(n,t[n])+";":this.each((function(){this.style.removeProperty(H(n))}));return this.each((function(){this.style.cssText+=";"+c}))},index:function(t){return t?this.indexOf(i(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return!!t&&c.some.call(this,(function(t){return this.test(Q(t))}),V(t))},addClass:function(t){return t?this.each((function(e){if("className"in this){a=[];var n=Q(this),r=K(this,t,e,n);r.split(/\s+/g).forEach((function(t){i(this).hasClass(t)||a.push(t)}),this),a.length&&Q(this,n+(n?" ":"")+a.join(" "))}})):this},removeClass:function(t){return this.each((function(n){if("className"in this){if(t===e)return Q(this,"");a=Q(this),K(this,t,n,a).split(/\s+/g).forEach((function(t){a=a.replace(V(t)," ")})),Q(this,a.trim())}}))},toggleClass:function(t,n){return t?this.each((function(r){var a=i(this),o=K(this,t,r,Q(this));o.split(/\s+/g).forEach((function(t){(n===e?!a.hasClass(t):n)?a.addClass(t):a.removeClass(t)}))})):this},scrollTop:function(t){if(this.length){var n="scrollTop"in this[0];return t===e?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var n="scrollLeft"in this[0];return t===e?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),r=y.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(i(t).css("margin-top"))||0,n.left-=parseFloat(i(t).css("margin-left"))||0,r.top+=parseFloat(i(e[0]).css("border-top-width"))||0,r.left+=parseFloat(i(e[0]).css("border-left-width"))||0,{top:n.top-r.top,left:n.left-r.left}}},offsetParent:function(){return this.map((function(){var t=this.offsetParent||h.body;while(t&&!y.test(t.nodeName)&&"static"==i(t).css("position"))t=t.offsetParent;return t}))}},i.fn.detach=i.fn.remove,["width","height"].forEach((function(t){var n=t.replace(/./,(function(t){return t[0].toUpperCase()}));i.fn[t]=function(r){var a,o=this[0];return r===e?L(o)?o["inner"+n]:U(o)?o.documentElement["scroll"+n]:(a=this.offset())&&a[t]:this.each((function(e){o=i(this),o.css(t,K(this,r,e,o[t]()))}))}})),x.forEach((function(n,r){var a=r%2;i.fn[n]=function(){var n,o,s=i.map(arguments,(function(t){var r=[];return n=M(t),"array"==n?(t.forEach((function(t){return t.nodeType!==e?r.push(t):i.zepto.isZ(t)?r=r.concat(t.get()):void(r=r.concat(T.fragment(t)))})),r):"object"==n||null==t?t:T.fragment(t)})),c=this.length>1;return s.length<1?this:this.each((function(e,n){o=a?n:n.parentNode,n=0==r?n.nextSibling:1==r?n.firstChild:2==r?n:null;var l=i.contains(h.documentElement,o);s.forEach((function(e){if(c)e=e.cloneNode(!0);else if(!o)return i(e).remove();o.insertBefore(e,n),l&&et(e,(function(e){if(null!=e.nodeName&&"SCRIPT"===e.nodeName.toUpperCase()&&(!e.type||"text/javascript"===e.type)&&!e.src){var n=e.ownerDocument?e.ownerDocument.defaultView:t;n["eval"].call(n,e.innerHTML)}}))}))}))},i.fn[a?n+"To":"insert"+(r?"Before":"After")]=function(t){return i(t)[n](this),this}})),T.Z.prototype=q.prototype=i.fn,T.uniq=s,T.deserializeValue=tt,i.zepto=T,i}(),function(e){var n,i=1,r=Array.prototype.slice,a=e.isFunction,o=function(t){return"string"===typeof t},s={},c={},l="onfocusin"in t,u={focus:"focusin",blur:"focusout"},d={mouseenter:"mouseover",mouseleave:"mouseout"};function h(t){return t._zid||(t._zid=i++)}function f(t,e,n,i){if(e=m(e),e.ns)var r=g(e.ns);return(s[h(t)]||[]).filter((function(t){return t&&(!e.e||t.e==e.e)&&(!e.ns||r.test(t.ns))&&(!n||h(t.fn)===h(n))&&(!i||t.sel==i)}))}function m(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function g(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function p(t,e){return t.del&&!l&&t.e in u||!!e}function v(t){return d[t]||l&&u[t]||t}function b(t,i,r,a,o,c,l){var u=h(t),f=s[u]||(s[u]=[]);i.split(/\s/).forEach((function(i){if("ready"==i)return e(document).ready(r);var s=m(i);s.fn=r,s.sel=o,s.e in d&&(r=function(t){var n=t.relatedTarget;if(!n||n!==this&&!e.contains(this,n))return s.fn.apply(this,arguments)}),s.del=c;var u=c||r;s.proxy=function(e){if(e=E(e),!e.isImmediatePropagationStopped()){try{e.data=a}catch(e){}var i=u.apply(t,e._args==n?[e]:[e].concat(e._args));return!1===i&&(e.preventDefault(),e.stopPropagation()),i}},s.i=f.length,f.push(s),"addEventListener"in t&&t.addEventListener(v(s.e),s.proxy,p(s,l))}))}function y(t,e,n,i,r){var a=h(t);(e||"").split(/\s/).forEach((function(e){f(t,e,n,i).forEach((function(e){delete s[a][e.i],"removeEventListener"in t&&t.removeEventListener(v(e.e),e.proxy,p(e,r))}))}))}c.click=c.mousedown=c.mouseup=c.mousemove="MouseEvents",e.event={add:b,remove:y},e.proxy=function(t,n){var i=2 in arguments&&r.call(arguments,2);if(a(t)){var s=function(){return t.apply(n,i?i.concat(r.call(arguments)):arguments)};return s._zid=h(t),s}if(o(n))return i?(i.unshift(t[n],t),e.proxy.apply(null,i)):e.proxy(t[n],t);throw new TypeError("expected function")},e.fn.bind=function(t,e,n){return this.on(t,e,n)},e.fn.unbind=function(t,e){return this.off(t,e)},e.fn.one=function(t,e,n,i){return this.on(t,e,n,i,1)};var w=function(){return!0},_=function(){return!1},x=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,k={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function E(t,i){return!i&&t.isDefaultPrevented||(i||(i=t),e.each(k,(function(e,n){var r=i[e];t[e]=function(){return this[n]=w,r&&r.apply(i,arguments)},t[n]=_})),t.timeStamp||(t.timeStamp=Date.now()),(i.defaultPrevented!==n?i.defaultPrevented:"returnValue"in i?!1===i.returnValue:i.getPreventDefault&&i.getPreventDefault())&&(t.isDefaultPrevented=w)),t}function O(t){var e,i={originalEvent:t};for(e in t)x.test(e)||t[e]===n||(i[e]=t[e]);return E(i,t)}e.fn.delegate=function(t,e,n){return this.on(e,t,n)},e.fn.undelegate=function(t,e,n){return this.off(e,t,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,i,s,c,l){var u,d,h=this;return t&&!o(t)?(e.each(t,(function(t,e){h.on(t,i,s,e,l)})),h):(o(i)||a(c)||!1===c||(c=s,s=i,i=n),c!==n&&!1!==s||(c=s,s=n),!1===c&&(c=_),h.each((function(n,a){l&&(u=function(t){return y(a,t.type,c),c.apply(this,arguments)}),i&&(d=function(t){var n,o=e(t.target).closest(i,a).get(0);if(o&&o!==a)return n=e.extend(O(t),{currentTarget:o,liveFired:a}),(u||c).apply(o,[n].concat(r.call(arguments,1)))}),b(a,t,c,s,i,d||u)})))},e.fn.off=function(t,i,r){var s=this;return t&&!o(t)?(e.each(t,(function(t,e){s.off(t,i,e)})),s):(o(i)||a(r)||!1===r||(r=i,i=n),!1===r&&(r=_),s.each((function(){y(this,t,r,i)})))},e.fn.trigger=function(t,n){return t=o(t)||e.isPlainObject(t)?e.Event(t):E(t),t._args=n,this.each((function(){t.type in u&&"function"===typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)}))},e.fn.triggerHandler=function(t,n){var i,r;return this.each((function(a,s){i=O(o(t)?e.Event(t):t),i._args=n,i.target=s,e.each(f(s,t.type||t),(function(t,e){if(r=e.proxy(i),i.isImmediatePropagationStopped())return!1}))})),r},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach((function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}})),e.Event=function(t,e){o(t)||(e=t,t=e.type);var n=document.createEvent(c[t]||"Events"),i=!0;if(e)for(var r in e)"bubbles"==r?i=!!e[r]:n[r]=e[r];return n.initEvent(t,i,!0),E(n)}}(i),function(){try{getComputedStyle(void 0)}catch(n){var e=getComputedStyle;t.getComputedStyle=function(t,i){try{return e(t,i)}catch(n){return null}}}}(),i})),e["a"]=i},f57e:function(t,e){t.exports='<div class="editor-background-mask" :style="cssStyle">\n    <canvas ref="canvas"></canvas>\n</div>\n'},f5f2:function(t,e,n){"use strict";n("99af"),n("caad"),n("2532"),n("d3b7"),n("159b"),n("4ec9"),n("3ca3"),n("ddb0"),n("4de4"),n("d81d"),n("7db0");var i=n("2ef0"),r=n("ded9"),a=n.n(r),o=n("af9f"),s=n("c9b4"),c=n("5eea"),l=n("04e1"),u=n("7d76"),d=n.n(u),h=n("c7cc"),f=n("619d");e["a"]=Object(s["a"])(c["a"],{name:"group-element",template:d.a,components:{MaskWrap:f["a"]},props:["global","model","options","editor"],data:function(){return{resizing:!1,widthRatio:1,heightRatio:1,ninePatchChild:null}},computed:{scaleStyle:function(){var t=this.resizing,e=this.widthRatio,n=this.heightRatio;return t?{transform:"scale(".concat(e,", ").concat(n,")"),transformOrigin:"left top"}:{}},elements:function(){var t=this.model.elements;return Object(h["c"])(t)}},methods:{load:function(){var t=this.model;if(!this.loadDfd){var e=this.loadDfd={loadCount:0,check:function(n){t.elements.includes(n)&&(e.loadCount+=1),e.loadCount>=t.elements.length&&e.resolve()}};e.promise=new a.a((function(n,i){e.resolve=n,e.reject=i,t.elements.length||n()}))}return this.loadDfd.promise},resetBounding:function(){var t=this.model,e=this.isDesignMode,n=t.padding,i=t.$inWatermark,r=t.rotation,a=t.autoAdaptive;if(e&&!t.$resizeApi&&!i&&0!==a){var s=function(t,e,n){var i=t/2,r=e/2,a=Math.cos(n),o=Math.sin(n);return[i*a-r*o,i*o+r*a]},c=t.elements,l=o["a"].getBBoxByElements(c);l.width+=n[1]+n[3],l.height+=n[0]+n[2],l.left-=n[3],l.top-=n[0];var u=l.left,d=l.top;c.forEach((function(t){t.left-=u,t.top-=d}));var h=s(t.width,t.height,r),f=s(l.width,l.height,r),m=u*Math.cos(r)-d*Math.sin(r),g=u*Math.sin(r)+d*Math.cos(r),p=[m+f[0]-h[0],g+f[1]-h[1]];t.left+=p[0]+(t.width-l.width)/2,t.width=l.width,t.top+=p[1]+(t.height-l.height)/2,t.height=l.height}},resizeInit:function(t){var e=this.model,n=this.$cache,r=!e.$parentId;n.children=new Map,this.editor.walkTemplet((function(t){var e=Object(i["pick"])(t,["left","top","width","height","fontSize","contents","letterSpacing","strokeWidth","effectScale","radius","$originalScale"]);e.padding=Object(i["cloneDeep"])(t.padding),t.flex&&(e.flex=Object(i["cloneDeep"])(t.flex)),t.$paths&&(e.$paths=Object(i["cloneDeep"])(t.$paths)),t.contents&&(e.contents=Object(i["cloneDeep"])(t.contents)),t.imageTransform&&(e.imageTransform=Object(i["cloneDeep"])(t.imageTransform)),t.imageEffects&&(e.imageEffects=Object(i["cloneDeep"])(t.imageEffects),e.effectedResult=Object(i["cloneDeep"])(t.effectedResult)),t.backgroundEffect&&t.backgroundEffect.enable&&(e.backgroundEffect=Object(i["cloneDeep"])(t.backgroundEffect)),t.border&&t.border.enable&&(e.border=Object(i["cloneDeep"])(t.border)),n.children.set(t.$id,e)}),!0,[this.model]),n.element={dir:t,width:e.width,height:e.height,padding:{left:n.childrenRect.left,right:e.width-n.childrenRect.left-n.childrenRect.width,top:n.childrenRect.top,bottom:e.height-n.childrenRect.top-n.childrenRect.height}},this.widthRatio=1,this.heightRatio=1,t&&(this.resizing=t.length>1&&r)},resizeEnd:function(){delete this.$cache.children,delete this.$cache.element,this.resizing=!1},scaleGroup:function(t,e){this.resizeInit(),this.setSubElementsRatio(t,e),this.resetBounding(),this.resizeEnd()},setSubElementsRatio:function(t,e,n,i){var r=this.$cache,a=this.model,o=this.$cache.element,s=o.dir,c=void 0===s?"":s,u=o.padding;a.$resizeApi||this.editor.walkTemplet((function(e){var o=r.children.get(e.$id);if(1===c.length&&a.autoGrow)if("ninePatch"===e.type)e.width=o.width+n||0,e.height=o.height+i||0;else{var s=u.left+u.right,d=u.top+u.bottom,h=(a.width-s)/(r.element.width-s),f=(a.height-d)/(r.element.height-d);e.width=o.width*h,e.left=u.left+(o.left-u.left)*h,e.height=o.height*f,e.top=u.top+(o.top-u.top)*f}else 2===c.length&&Object(l["b"])(e,t,{cache:o,sync:!0,deep:!1})}),!0,[this.model])},updateSubElements:function(){if(this.isDesignMode){var t=this.model,e=this.$cache,n=e.children;if(n){var i=t.width/e.element.width,r=t.height/e.element.height;this.setSubElementsRatio(i,r,t.width-e.element.width,t.height-e.element.height)}}},scaleSubElements:function(){var t=this.model,e=this.resizing,n=this.$cache,i=n.children;if(i){if(!e)return this.updateSubElements();var r=t.width/n.element.width,a=t.height/n.element.height;this.widthRatio=r,this.heightRatio=a}},updateChildrenCache:function(){var t=this;this.$cache||(this.$cache={heights:{},widths:{}});var e=this.model.elements;this.$cache.childrenRect=o["a"].getBBoxByElements(e.filter((function(t){return"ninePatch"!==t.type}))),e.forEach((function(e){t.$cache.heights[e.$id]=o["a"].getBBoxByElement(e).height,t.$cache.widths[e.$id]=o["a"].getBBoxByElement(e).width}))},elementIsGroup:function(t){return this.editor.isGroup(t)}},events:{"element.loaded":function(t){this.loadDfd&&this.loadDfd.check(t)},"element.loadError":function(t,e){return this.loadDfd&&this.loadDfd.check(e),!0},"element.rectUpdate":function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{width:0,height:0},i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.isDesignMode&&!this.editor.global.$draging&&-1!==this.model.elements.indexOf(t)){var r=this.model,a=this.$cache,s=r.elements,c=r.autoGrow,l=s.map((function(t){return Object.assign({$id:t.$id,type:t.type},o["a"].getBBoxByElement(t))})),u=l.filter((function(t){return Math.abs(t.height-a.heights[t.$id])>.1||Math.abs(t.width-a.widths[t.$id])>.1}));if(1===u.length){var d=u[0],h=a.heights[d.$id],f=d.height-h,m=l.some((function(t){return t!==d&&"ninePatch"!==t.type&&d.top<t.top+t.height&&d.top+h>t.top}));(!m||!i)&&l.forEach((function(t,e){d.top<t.top&&(s[e].top+=f)}));var g=u[0],p=a.widths[g.$id],v=g.width-p;if(Math.abs(v)>.1){var b=t.textAlign,y=t.autoAdaptive;2&y&&("right"===b&&(t.left-=v),"center"===b&&(t.left-=v/2))}var w=l.some((function(t){return t!==g&&"ninePatch"!==t.type&&g.left<t.left+t.width&&g.left+p>t.left}));(!w||!i)&&l.forEach((function(t,e){g.left<t.left&&(s[e].left+=v)}))}var _=a.childrenRect;_&&(this.updateChildrenCache(),n.height=a.childrenRect.height-_.height,n.width=a.childrenRect.width-_.width),r.$parentId&&this.$nextTick((function(){return e.$events.$emit("element.rectUpdate",r,n)}));var x=this.ninePatchChild;c&&x?(x.width+=n.width,x.height+=n.height,this.resetBounding(),this.updateChildrenCache()):this.resetBounding()}},"group.boundingReset":function(t){t===this.model&&this.resetBounding()},"group.contentScale":function(t,e){t===this.model&&this.scaleGroup(e,e)},"element.transformStart":function(t,e){t===this.model&&this.resizeInit(e.dir)},"element.transformEnd":function(t){this.updateSubElements(),this.resizeEnd(),this.updateChildrenCache(),t===this.model&&this.resetBounding()}},watch:{"model.width":function(t,e){this.isDesignMode&&Math.abs(t-e)>.1&&(this.resizing?this.scaleSubElements():this._lazyScaleSubElements())},"model.height":function(t,e){this.isDesignMode&&Math.abs(t-e)>.1&&(this.resizing?this.scaleSubElements():this._lazyScaleSubElements())},"model.padding":{handler:function(){!this.editor.global.$draging&&this.isDesignMode&&this.resetBounding()},deep:!0}},created:function(){var t=this;this.updateChildrenCache(),this._lazyScaleSubElements=Object(i["throttle"])(this.scaleSubElements,1e3/60),this.model.$getResizeLimit=function(){return{maxWidth:1/0,minWidth:10,maxHeight:1/0,minHeight:10}},this.$watch((function(){if(!t.editor.global.$draging&&t.isDesignMode){var e,n,i=t.model.elements,r=i.find((function(e){return"ninePatch"===e.type&&e.width*e.height/(t.model.width*t.model.height)>.95}));return t.ninePatchChild=r,r&&i.forEach((function(t){"text"!==t.type||void 0!==t.writingMode&&"horizontal-tb"!==t.writingMode?"vertical-rl"===t.writingMode&&(n=!0):e=!0})),n&&e?7:n?3:e?5:void 0}}),(function(e){if(!t.editor.global.$draging&&t.isDesignMode){if(!e)return t.model.resize=1,void(t.model.autoGrow=!1);t.model.resize=e,t.model.autoGrow=!0}}),{immediate:!0})},mounted:function(){this.$nextTick(this.updateChildrenCache)}})},f7f8:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"c",(function(){return m}));var i=n("d4ec"),r=n("bee2"),a=n("5530"),o=(n("4de4"),n("d3b7"),n("159b"),n("b64b"),n("d81d"),n("ac1f"),n("00b4"),n("2ef0")),s=n("31c5"),c=n("e002"),l=n("49bc"),u=n("b494"),d=Object(o["omit"])(l["a"].layout,["backgroundColor","backgroundImage","backgroundImageInfo","backgroundGradient","backgroundWatermarkEnable"]);function h(t,e){return!(t.backgroundColor||t.backgroundImage||t.backgroundImageInfo||t.backgroundGradient||t.backgroundWatermarkEnable)||t.background||(t=Object(a["a"])({},t),void 0!==t.backgroundColor&&(Object(o["set"])(t,"background.color",t.backgroundColor),delete t.backgroundColor),void 0!==t.backgroundImage&&(Object(o["set"])(t,"background.image.url",t.backgroundImage),delete t.backgroundImage),void 0!==t.backgroundImageInfo&&(Object(o["set"])(t,"background.image.naturalWidth",t.backgroundImageInfo.width),Object(o["set"])(t,"background.image.naturalHeight",t.backgroundImageInfo.height),Object(o["set"])(t,"background.image.imageTransform",t.backgroundImageInfo.transform),Object(o["set"])(t,"background.image.opacity",t.backgroundImageInfo.opacity),delete t.backgroundImageInfo),void 0!==t.backgroundGradient&&(Object(o["set"])(t,"background.gradient",t.backgroundGradient),delete t.backgroundGradient),void 0!==t.backgroundWatermarkEnable&&(Object(o["set"])(t,"background.watermarkEnable",t.backgroundWatermarkEnable),delete t.backgroundWatermarkEnable),t.background&&(e=Object(o["merge"])({},e,t.background),t.background=e)),t}function f(t){var e,n,i;if(null!==(e=t.background)&&void 0!==e&&e.image||null!==(n=t.background)&&void 0!==n&&n.gradient)return t;var r=t.backgroundImageInfo&&Object(a["a"])(Object(a["a"])({},t.backgroundImageInfo),{},{url:t.backgroundImage,width:t.width,height:t.height,left:0,top:0,naturalWidth:t.backgroundImageInfo.width,naturalHeight:t.backgroundImageInfo.height,imageTransform:t.backgroundImageInfo.transform,transform:{a:1,b:0,c:0,d:1,tx:0,ty:0},repeat:t.backgroundRepeat,opacity:Object(o["get"])(t,"backgroundImageInfo.opacity",1),filterInfo:t.filterInfo||null,filter:t.filter||null}),s={color:(null===(i=t.background)||void 0===i?void 0:i.color)||t.backgroundColor};return t.backgroundGradient&&(s.gradient=t.backgroundGradient),r&&(s.image=r),s.watermarkEnable=!!t.backgroundWatermarkEnable,t.background=Object(o["cloneDeep"])(s),delete t.backgroundEffect,delete t.backgroundRepeat,delete t.backgroundImageInfo,delete t.filter,delete t.filterInfo,delete t.backgroundWatermarkEnable,delete t.backgroundImage,t}var m=function(t){var e,n;if(f(t),Object(o["get"])(t,"background.image")){var i,r,s=t.background.image;s.width||Object(o["set"])(s,"width",t.width),s.height||Object(o["set"])(s,"height",t.height),(null===(i=s.imageTransform)||void 0===i||!i.localTransform)&&Object(o["set"])(t,"background.image.imageTransform",Object(u["b"])(s.imageTransform)),(null===(r=s.transform)||void 0===r||!r.localTransform)&&Object(o["set"])(t,"background.image.transform",Object(u["b"])(s.transform))}else Object(o["set"])(t,"backgroundImageInfo.transform",Object(u["b"])(Object(o["get"])(t,"backgroundImageInfo.transform")));var h=Object.assign(Object(o["cloneDeep"])(d),{border:Object(a["a"])({},l["a"].border)});return Object.keys(h).forEach((function(e){var n=t[e];(Object(o["isUndefined"])(n)||Object(o["isNull"])(n))&&(t[e]=h[e])})),Object(o["set"])(t,"background.color",Object(c["d"])(Object(o["get"])(t,"background.color","rgba(0,0,0,0)"))),null===(e=t.background)||void 0===e||!e.image||t.background.image.url||null!==(n=t.background.image.elementRefIds)&&void 0!==n&&n.length||(t.background.image=null),t},g=function(){function t(e,n){var r=this;Object(i["a"])(this,t);var u=m(Object(a["a"])({},e));Object(o["merge"])(this,d,{border:Object(a["a"])({},l["a"].border)},u),this.top=0;var h=this.elements||this.elems||[];h&&h.length&&n?this.elements=h.map((function(t){return n.addElement(t,r,!1)})):this.elements=[],this.mosaic&&this.mosaic.paths&&n&&(this.mosaic.paths=this.mosaic.paths.map((function(t){return n.createElement(t)}))),this.borderType&&(this.border=Object.assign(this.border,{type:this.borderType,width:this.borderWidth,image:this.borderImage,imageSlice:this.borderImageSlice,opacity:this.borderOpacity,imageRepeat:this.borderImageRepeat})),Object(o["get"])(this,"background.gradient.stops",[]).forEach((function(t){t.color=Object(c["d"])(t.color)})),this.border&&(this.border.color=Object(c["d"])(this.border.color),this.border.gradient&&this.border.gradient.stops&&this.border.gradient.stops.forEach((function(t){t.color=Object(c["d"])(t.color)})),"image"!==this.border.type||this.border.image||(this.border.enable=!1)),this.backgroundMask&&(this.backgroundMask.color=Object(c["d"])(this.backgroundMask.color)),this.mosaic&&(this.mosaic.color=Object(c["d"])(this.mosaic.color)),this.$id||(this.$id=Object(s["c"])()),this.uuid||(this.uuid=Object(s["c"])()),e.backgroundSize&&this.$backgroundImageInfo&&(this.$imageWidth=e.backgroundSize[0],this.$imageHeight=e.backgroundSize[1],this.$imageLeft=this.$backgroundImageInfo.imageTransform.position.x,this.$imageTop=this.$backgroundImageInfo.imageTransform.position.y),this.background.image&&/data:image\/gif|\.gif/i.test(this.background.image.url)&&Object(o["set"])(this,"background.image.resourceType","gif"),delete this.backgroundSize,delete this.elems,delete this.backgroundPosition,delete this.borderType,delete this.borderWidth,delete this.borderImage,delete this.borderImageSlice,delete this.borderOpacity,delete this.borderColor,delete this.borderGradient,delete this.borderShadow}return Object(r["a"])(t,[{key:"exportData",value:function(){var t=this.mosaic,e=Object(a["a"])({},this);if(Object(o["isEqual"])(t,d.mosaic))e.mosaic=null;else{var n=t.paths.map((function(t){var e=t.parseTransform(t.transform);e.position.x=t.left,e.position.y=t.top;var n=Object(o["pick"])(t,["path","type"]);return n.transform=e,"mosaicBrush"===t.type&&(n.strokeWidth=t.strokeWidth),n}));e.mosaic=Object(a["a"])(Object(a["a"])({},t),{},{paths:n})}if(Object(o["isEqual"])(Object(o["omit"])(e.border,["$loaded"]),Object(o["omit"])(l["a"].border,["$loaded"]))&&(e.border=null),e.background){var i=e.background.image;e.backgroundColor=e.background.color,i&&(e.backgroundImage=i.url,e.backgroundImageInfo={transform:i.imageTransform,width:i.naturalWidth,height:i.naturalHeight,opacity:i.opacity}),e.backgroundGradient=e.background.gradient,e.backgroundWatermarkEnable=!!e.background.watermarkEnable}return e}},{key:"$backgroundImageInfo",get:function(){return Object(o["get"])(this.background,"image")}},{key:"$backgroundImage",get:function(){return Object(o["get"])(this.background,"image.url")}},{key:"$imageWidth",get:function(){return this.$backgroundImageInfo?Math.abs(this.$backgroundImageInfo.naturalWidth*this.$backgroundImageInfo.imageTransform.scale.x):0},set:function(t){var e=this.$backgroundImageInfo.imageTransform,n=e.scale.x<0?-1:1;e.scale.x=t/this.$backgroundImageInfo.naturalWidth*n}},{key:"$imageHeight",get:function(){return this.$backgroundImageInfo?Math.abs(this.$backgroundImageInfo.naturalHeight*this.$backgroundImageInfo.imageTransform.scale.y):0},set:function(t){if(this.$backgroundImageInfo){var e=this.$backgroundImageInfo.imageTransform,n=e.scale.y<0?-1:1;e.scale.y=t/this.$backgroundImageInfo.naturalHeight*n}}},{key:"$imageLeft",get:function(){if(!this.$backgroundImageInfo)return 0;var t=this.$backgroundImageInfo,e=t.width,n=t.imageTransform.position,i=this.$imageWidth;return e/2-i/2+n.x},set:function(t){this.$backgroundImageInfo&&(this.$backgroundImageInfo.imageTransform.position.x=t+this.$imageWidth/2-this.$backgroundImageInfo.width/2)}},{key:"$imageTop",get:function(){if(!this.$backgroundImageInfo)return 0;var t=this.$backgroundImageInfo,e=t.height,n=t.imageTransform.position,i=this.$imageHeight;return e/2-i/2+n.y},set:function(t){this.$backgroundImageInfo&&(this.$backgroundImageInfo.imageTransform.position.y=t+this.$imageHeight/2-this.$backgroundImageInfo.height/2)}},{key:"hasComplexFilters",get:function(){var t=this.$backgroundImageInfo||{},e=t.filterInfo;return e&&(e.url||e.prunedZipUrl)}},{key:"hasBaseFilters",get:function(){var t=this.$backgroundImageInfo||{},e=t.filter,n=l["a"].element.filter;return!!e&&Object.keys(e).some((function(t){return e[t]!==n[t]}))}},{key:"hasFilters",get:function(){return this.hasBaseFilters||this.hasComplexFilters}},{key:"isGif",get:function(){return"gif"===Object(o["get"])(this,"background.image.resourceType")}},{key:"isApng",get:function(){return"apng"===Object(o["get"])(this,"background.image.resourceType")}},{key:"filter",get:function(){var t,e;return!(null===(t=this.background)||void 0===t||null===(e=t.image)||void 0===e||!e.filter)}},{key:"filterInfo",get:function(){var t,e;return!(null===(t=this.background)||void 0===t||null===(e=t.image)||void 0===e||!e.filterInfo)}},{key:"backgroundWatermarkEnable",get:function(){var t;return!(null===(t=this.background)||void 0===t||!t.watermarkEnable)}},{key:"backgroundColor",get:function(){var t;return null===(t=this.background)||void 0===t?void 0:t.color}},{key:"backgroundGradient",get:function(){var t;return null===(t=this.background)||void 0===t?void 0:t.gradient}},{key:"backgroundImage",get:function(){return this.$backgroundImage}},{key:"backgroundImageInfo",get:function(){var t;if(null===(t=this.background)||void 0===t||!t.image)return null;var e=this.background.image;return{transform:e.imageTransform,width:e.naturalWidth,height:e.naturalHeight,opacity:e.opacity}}}]),t}();e["b"]=g},f8f4:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=0;function r(){return i+=1,i}},fbba:function(t,e,n){"use strict";n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return f}));var i=n("5530"),r=(n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("d9e2"),n("b0c0"),n("d81d"),n("f684")),a=n.n(r),o=n("f49e"),s=n("c521"),c=n("33ec"),l=new s["LRUMap"](10);function u(t){return new a.a((function(e,n){var i=new Image;i.onload=function(){URL.revokeObjectURL(t),e(i)},i.onerror=function(){n(new Error("svg 图片加载失败，存在非法字符"))},i.src=t}))}function d(t,e){return e=e||t.woff||t.ttf,e?fetch(e,{method:"get",responseType:"blob"}).then((function(t){return t.blob()})).then((function(t){if(window.safari&&t.size>=10485760)throw new Error("字体大于10M，safari无法走浏览器缓存");return new a.a((function(e){var n=new FileReader;n.onload=function(){e(n.result)},n.readAsDataURL(t)}))})).then((function(e){return Object(i["a"])(Object(i["a"])({},t),{},{dataURL:e})})):a.a.resolve(t)}function h(t){if(!l.get(t.name)){var e=o["a"].loadFont(t).then((function(){return d(t)})).catch((function(){return d(t)}));l.set(t.name,e)}return l.get(t.name)}function f(t,e){var n=e.options.fontSubset.exportEnableCallback,i=n&&n(e);i&&Object(c["b"])(e.layouts,e.options);var r=Object(c["a"])(e.layouts,e.options);return console.log("exportEnable:"+i),a.a.map(t,(function(t){var n=!r||!r[t.name]&&!r[t.family];if(n){var i=e.options.fontSubsetsMap[t.name];return i?i.subsetPromise.then((function(n){var i=t.name+e.options.subsetSuffix,r=o["a"]._documentFonts&&o["a"]._documentFonts[i];if(r&&"error"===r.status)throw new Error("font file parse error");return d(t,n)})).catch((function(e){return console.warn(e),h(t)})):h(t)}return h(t)}))}},fc5f:function(t,e,n){"use strict";var i=n("b85c"),r=n("c7eb"),a=n("3835"),o=n("1da1"),s=n("5530"),c=(n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("25f0"),n("bf19"),n("99af"),n("ace4"),n("8a59"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("fa9e"),n("77d9"),n("a15b"),n("caad"),n("2532"),n("ded9")),l=n.n(c),u=n("2ef0"),d=n("5eea"),h=n("0f57"),f=n("af9f"),m=n("c9b4"),g=n("e002"),p=n("31c5"),v=n("aaf7"),b=n("8541"),y=n("c7cc"),w=n("e156");n("7db0"),n("41fc"),new Map;function _(t,e,n,i){"boolean"===typeof i&&(i=i?0:1);var r,a=1!==i?e%n:e;return r=a>=n?t[t.length-1]:t.find((function(t){var e=t.delay,n=t.duration;return e<=a&&e+n>=a})),r||null}var x=function(t,e){return Object(u["get"])(t,"$id")===Object(u["get"])(e,"$id")},k=new Map;e["a"]=Object(m["a"])(d["a"],{props:["global","model","options","editor"],data:function(){return{canvasRendered:!1,lazyRendering:!1,isFirstRendered:!1,imageUrlCache:""}},computed:{zoom:function(){return this.global.zoom},isGif:function(){return this.model.url&&(this.model.isGif||this.model.isApng)},imageUrl:function(){var t=this.model,e=this.options;return f["a"].getComputedUrl(t.imageUrl,e.fitCrossOrigin)},mainStyle:function(){var t=this.padding,e=this.borderRadius,n=this.readyToDrop,i=this.visible,r=this.imageInsideDropArea;return{padding:t,borderRadius:e,overflow:i,opacity:n?r?0:.3:1}},maskStyle:function(){return this.isGif&&this.isMask||this.isVideo&&this.model.mask?{maskImage:"url(".concat(this.model.mask,")"),maskSize:"100% 100%"}:null},cssStyle:function(){var t=this.rect,e=t.padding,n={};return Object(s["a"])({height:t.height+e[0]+e[2]+"px",width:t.width+e[1]+e[3]+"px",transform:this.transform.toString(),left:t.left+"px",top:t.top+"px",opacity:this.opacity},n)},effectedImageRect:function(){var t=this.model,e=this.global;return this.hasEffects&&!this.isNeedRenderAnimatioFrame?{width:t.effectedResult.width*e.zoom,height:t.effectedResult.height*e.zoom,left:t.effectedResult.left*e.zoom,top:t.effectedResult.top*e.zoom}:{width:t.width*e.zoom,height:t.height*e.zoom,left:0,top:0}},effectedImageStyle:function(){var t=this.model,e=this.effectedImageRect,n=this.rect,i=e.top,r=e.left,a=e.width,o=e.height,s={position:"absolute",width:a+"px",height:o+"px",left:r+"px",top:i+"px"};return t.$imageDraging&&this.isMask&&Object.assign(s,{width:n.width+"px",height:n.height+"px",left:0,top:0}),s},hasEffects:function(){return this.model.hasEffects&&this.model.url},hasFilters:function(){return this.model.hasFilters},linkSelected:function(){var t=this.editor.currentSubElement||this.editor.currentElement||{};return this.isLinkWith(t)},enableImageRenderer:function(){return this.model.$enableImageRenderer},imageRenderer:function(){return this._imageRenderer||(this._imageRenderer=this.createRenderer()),this._imageRenderer},imageWrapStyle:function(){var t=this.model,e=t.naturalWidth,n=t.naturalHeight,i=t.width,r=t.height;return{position:"absolute",left:-(e-i)/2*this.zoom+"px",top:-(n-r)/2*this.zoom+"px"}},imageStyle:function(){var t=this.model,e=t.imageTransform,n=t.naturalWidth,i=t.naturalHeight,r=e.toJSON(),a=r.a,o=r.b,s=r.c,c=r.d,l=r.tx,u=r.ty;return{position:"absolute",width:Math.max(1,n*this.zoom)+"px",height:Math.max(1,i*this.zoom)+"px",transform:"matrix(".concat(a,",").concat(o,",").concat(s,",").concat(c,",").concat(l*this.zoom,",").concat(u*this.zoom,")")}},isNeedRenderAnimatioFrame:function(){return this.isGif&&this.model.$needRenderFrame}},watch:{model:function(){this.imageRenderer&&this.imageRenderer.updateModel(this.model)},"model.imageEffects":{deep:!0,handler:function(){this.editor.global.$draging||this.lazyRender()}},"model.filter":{deep:!0,handler:function(){this.editor.global.$draging||this.lazyRender()}},"model.filterInfo":{deep:!0,handler:function(){this.editor.global.$draging||this.lazyRender()}},"model.$currentTime":function(){this.canvasRendered&&this.isNeedRenderAnimatioFrame&&this.renderAnimationImage()}},methods:{loadGifOrApng:function(){var t=this,e=this.model;return this.isNeedRenderAnimatioFrame?(this.canvasRendered=!0,this.loadAnimationImgData(this.model.url).then((function(e){t.model.naturalDuration=e.duration,t.model.$frames=e.frames,"number"===typeof t.model.startTime&&"number"===typeof t.model.endTime||(t.model.startTime=0,t.model.endTime=e.duration),t.model.isGif&&(t.model.loop=1),t.renderAnimationImage()}))):l.a.try((function(){if(!t.isPreviewMode&&(e.isGif||e.isApng))return Object(v["c"])(t.model).then((function(e){t.model.naturalDuration=e.duration,e.duration||(t.model.resourceType="image")}))})).catch(console.warn)},baseLoad:function(){var t=this;return Object(o["a"])(Object(r["a"])().mark((function e(){var n,i,o,s;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.imageRenderer.load();case 2:return n=e.sent,i=Object(a["a"])(n,1),o=i[0],o&&t.initDataByImg(o),e.next=8,t.render({force:!0});case 8:return s=e.sent,e.next=11,Object(y["b"])(t.model,t.editor);case 11:return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))()},render:function(){var t;if(!this.isGif&&!this.isVideo)return(t=this.imageRenderer).render.apply(t,arguments)},lazyRender:function(){if(!this.isGif&&!this.isVideo){var t,e=this.hasEffects||this.hasFilters||this.canvasRendered;if(this.isDesignMode&&(!this.isImage||e)&&this.enableImageRenderer)return this.hasFilters||this.hasEffects?(t=this.imageRenderer).lazyRender.apply(t,arguments):this.render.apply(this,arguments)}},lazyRenderByCanvas:function(t,e,n){var i=this;this._lazyRenderByCanvas||(this._lazyRenderByCanvas=Object(u["throttle"])((function(){var t;(t=i.imageRenderer).renderByCanvas.apply(t,arguments)}),1e3,{trailing:!0})),this._lazyRenderByCanvas(t,e,n)},createRenderer:function(){var t=this.editor,e=t.$renderers.get(this.model.$id);return e&&this.isPreviewMode?(t.$renderers.count(this.model.$id),e):(e?(t.$renderers.count(this.model.$id),e.updateModel(this.model)):e=t.$renderers.create(this.model.$id,new b["a"]({model:this.model,byNaturalSize:!!this.isBackground,editor:t})),e)},initDataByImg:function(t){Object(g["a"])(this.model,t),this.model.naturalWidth=t.naturalWidth,this.model.naturalHeight=t.naturalHeight,this.model.setClipCache()},loadAnimationImgData:function(t){var e=this;if(k.has(t)){var n=k.get(t);return l.a.resolve(n)}return Object(v["c"])(this.model,{needBuffer:!0}).then((function(n){var r,a=n.width,o=n.height,s=n.duration,c=n.frames,l=[],u=0,d=Object(i["a"])(c);try{for(d.s();!(r=d.n()).done;){var h=r.value,f=e.model.isGif?10*h.delay:h.delay,m=new Uint8ClampedArray(h.buffer),g=new ImageData(m,a,o),p=Object(w["b"])(a,o),v=p.getContext("2d");v.putImageData(g,0,0);var b={canvas:p,duration:f,delay:u};l.push(b),u+=f}}catch(_){d.e(_)}finally{d.f()}var y={width:a,height:o,duration:s,frames:l};return k.set(t,y),y}))},renderAnimationImage:function(){var t=this.model,e=t.$frames,n=t.$currentTime,i=t.naturalDuration,r=t.loop,a=t.$imageTop,o=t.$imageLeft,s=t.width,c=t.height,l=t.imageTransform,u=_(e,n,i,r);if(u){var d=this.$refs.canvas;if(d){var h=Math.round(s),f=Math.round(c);d.width=h,d.height=f;var m=d.getContext("2d");m.clearRect(0,0,h,f);var g=l.scale,p=g.x,v=g.y,b=Math.abs(Math.round(o))/p,y=Math.abs(Math.round(a))/v,w=Math.round(h/p),x=Math.round(f/v);m.drawImage(u.canvas,b,y,w,x,0,0,h,f)}}}},mounted:function(){var t=this;this.model.$resizeLimit=!0,this.model.$getResizeLimit=function(){return{maxWidth:1/0,minWidth:10,maxHeight:1/0,minHeight:10}},this.$watch((function(){return t.model.url+t.model.mask}),(function(){t.isDesignMode&&t.$nextTick((function(){t.model.imageUrl="",t.model.effectedResult.width=0,t.model.effectedResult.height=0,t.imageRenderer.lazyRenderCancel(),t.checkLoad()}))})),this.$watch((function(){var e=t.model,n=e.width,i=e.height,r=e.imageTransform.scale;return[n,i,r.x,r.y].join(" ")}),(function(){t.isDesignMode&&!t.editor.global.$draging&&t.model.setClipCache()})),this.$watch((function(){return t.model.$renderProps}),(function(){if(!t.isGif&&!t.isVideo){var e=t.hasEffects||t.hasFilters||t.canvasRendered;t.isDesignMode&&(!t.isImage||e)&&t.enableImageRenderer&&Object(y["a"])(t.model,t.editor)}}),{deep:!0})},events:{"element.editApply":function(t){var e=this;t.$id!==this.model.$id||this.isMask&&"$masker"!==t.type||this.isImage&&"$croper"!==t.type||!this.hasEffects&&!this.hasFilters||this.$nextTick((function(){e.lazyRender()}))},"element.dragStart":function(t){t===this.model&&(this.lazyRendering=!1)},"element.transformStart":function(t){t===this.model&&(this.lazyRendering=!1)},"element.transformEnd":function(t,e,n){var i=n.action;t===this.model&&"resize"===i&&this.lazyRender({force:this.options.supportAdaptiveElements.includes(t.type)})},"element.imageTransformStart":function(t){t===this.model&&this.isDesignMode&&this.isMask&&(this.lazyRendering=!1,this.render({resizeByPica:!1,renderFilter:!1,renderEffect:!1}))},"element.imageTransformEnd":function(t){t===this.model&&this.lazyRender({force:!0})},"element.change":function(t,e){var n=this;if("url"===e&&this.isLinkWith(t)&&this.model.url!==t.url){var i=t.url;f["a"].loadImage(i,this.options.fitCrossOrigin,!0).then((function(e){var i=e.width,r=e.height,a=n.model,o=a.width,s=a.height,c=Math.max(o/i,s/r),l=[i*c,r*c],u={url:t.url,imageUrl:"",$imageWidth:l[0],$imageHeight:l[1],$imageLeft:(o-l[0])/2,$imageTop:(s-l[1])/2};n.editor.changeElement(u,n.model,!1),h["a"].replaceImageMaterialMeta(t,n.model)}))}},"imageRenderer.renderBefore":function(t){var e=this;this.isDesignMode&&x(t,this.model)&&!this.isVideo&&(this.imageUrlCache=this.canvasRendered?"":this.model.imageUrl,this.model.imageUrl="",!this.isFirstRendered&&this.$renderId||(this.model.$renderId=Object(p["c"])()),this.isFirstRendered=!0,clearTimeout(this._renderingTimer),this._renderingTimer=setTimeout((function(){e.lazyRendering=!0}),400))},"imageRenderer.renderEffectAfter":function(t,e){x(t,this.model)&&(Object.assign(this.model,e),this.model.setSizeBeforeEffectRendered(this.options))},"imageRenderer.renderAfter":function(t){var e=this;if(x(t,this.model)){this.canvasRendered=!0,this.lazyRendering=!1,this.imageUrlCache="",clearTimeout(this._renderingTimer);var n=1;if(this.isPreviewMode){var i=Math.min(1,t.naturalWidth/t.$imageWidth,t.naturalHeight/t.$imageHeight)/window.devicePixelRatio;n=Math.min(1,this.zoom/i)}this.$nextTick((function(){e.isPreviewMode?e.lazyRenderByCanvas(e.$refs.canvas,e.imageRenderer.canvas,n):e.imageRenderer.renderByCanvas(e.$refs.canvas,e.imageRenderer.canvas)}))}}},beforeDestroy:function(){this._lazyRenderByCanvas&&this._lazyRenderByCanvas.cancel(),this.editor.$renderers.destory(this.model.$id)}})},fe7f:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n("3835"),r=n("d4ec"),a=n("bee2"),o=(n("d3b7"),n("ac1f"),n("1276"),n("25f0"),n("13d5"),n("4fad"),n("5319"),n("9b02")),s=n.n(o),c=function(){function t(e){Object(r["a"])(this,t),this.locale="",this.messages=e,this.language={},this.init()}return Object(a["a"])(t,[{key:"init",value:function(){var t=this.messages,e="en",n=t[e];window.navigator.languages.some((function(i){var r=i.split("-")[0].toLowerCase(),a=t[i]||t[r];return a&&(e=i,n=a),!!a})),this.locale=e,this.language=n}},{key:"use",value:function(t,e){var n=s()(this.language,t,"").toString();return e?Object.entries(e).reduce((function(t,e){var n=Object(i["a"])(e,2),r=n[0],a=n[1];return t.replace("{".concat(r,"}"),a)}),n):n}}]),t}()}});